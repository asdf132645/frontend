(function(){var e={5358:function(e,t,a){var l={"./af":5177,"./af.js":5177,"./ar":1509,"./ar-dz":1488,"./ar-dz.js":1488,"./ar-kw":8676,"./ar-kw.js":8676,"./ar-ly":2353,"./ar-ly.js":2353,"./ar-ma":4496,"./ar-ma.js":4496,"./ar-ps":6947,"./ar-ps.js":6947,"./ar-sa":2682,"./ar-sa.js":2682,"./ar-tn":9756,"./ar-tn.js":9756,"./ar.js":1509,"./az":5533,"./az.js":5533,"./be":8959,"./be.js":8959,"./bg":7777,"./bg.js":7777,"./bm":4903,"./bm.js":4903,"./bn":1290,"./bn-bd":7357,"./bn-bd.js":7357,"./bn.js":1290,"./bo":1545,"./bo.js":1545,"./br":1470,"./br.js":1470,"./bs":4429,"./bs.js":4429,"./ca":7306,"./ca.js":7306,"./cs":6464,"./cs.js":6464,"./cv":3635,"./cv.js":3635,"./cy":4226,"./cy.js":4226,"./da":3601,"./da.js":3601,"./de":7853,"./de-at":6111,"./de-at.js":6111,"./de-ch":4697,"./de-ch.js":4697,"./de.js":7853,"./dv":708,"./dv.js":708,"./el":4691,"./el.js":4691,"./en-au":3872,"./en-au.js":3872,"./en-ca":8298,"./en-ca.js":8298,"./en-gb":6195,"./en-gb.js":6195,"./en-ie":6584,"./en-ie.js":6584,"./en-il":5543,"./en-il.js":5543,"./en-in":9033,"./en-in.js":9033,"./en-nz":9402,"./en-nz.js":9402,"./en-sg":3004,"./en-sg.js":3004,"./eo":2934,"./eo.js":2934,"./es":7650,"./es-do":838,"./es-do.js":838,"./es-mx":7730,"./es-mx.js":7730,"./es-us":6575,"./es-us.js":6575,"./es.js":7650,"./et":3035,"./et.js":3035,"./eu":3508,"./eu.js":3508,"./fa":119,"./fa.js":119,"./fi":527,"./fi.js":527,"./fil":5995,"./fil.js":5995,"./fo":2477,"./fo.js":2477,"./fr":5498,"./fr-ca":6435,"./fr-ca.js":6435,"./fr-ch":7892,"./fr-ch.js":7892,"./fr.js":5498,"./fy":7071,"./fy.js":7071,"./ga":1734,"./ga.js":1734,"./gd":217,"./gd.js":217,"./gl":7329,"./gl.js":7329,"./gom-deva":2124,"./gom-deva.js":2124,"./gom-latn":3383,"./gom-latn.js":3383,"./gu":5050,"./gu.js":5050,"./he":1713,"./he.js":1713,"./hi":3861,"./hi.js":3861,"./hr":6308,"./hr.js":6308,"./hu":609,"./hu.js":609,"./hy-am":7160,"./hy-am.js":7160,"./id":4063,"./id.js":4063,"./is":9374,"./is.js":9374,"./it":8383,"./it-ch":1827,"./it-ch.js":1827,"./it.js":8383,"./ja":3827,"./ja.js":3827,"./jv":9722,"./jv.js":9722,"./ka":1794,"./ka.js":1794,"./kk":7088,"./kk.js":7088,"./km":6870,"./km.js":6870,"./kn":4451,"./kn.js":4451,"./ko":3164,"./ko.js":3164,"./ku":8174,"./ku-kmr":6181,"./ku-kmr.js":6181,"./ku.js":8174,"./ky":8474,"./ky.js":8474,"./lb":9680,"./lb.js":9680,"./lo":5867,"./lo.js":5867,"./lt":5766,"./lt.js":5766,"./lv":9532,"./lv.js":9532,"./me":8076,"./me.js":8076,"./mi":1848,"./mi.js":1848,"./mk":306,"./mk.js":306,"./ml":3739,"./ml.js":3739,"./mn":9053,"./mn.js":9053,"./mr":6169,"./mr.js":6169,"./ms":3386,"./ms-my":2297,"./ms-my.js":2297,"./ms.js":3386,"./mt":7075,"./mt.js":7075,"./my":2264,"./my.js":2264,"./nb":2274,"./nb.js":2274,"./ne":8235,"./ne.js":8235,"./nl":2572,"./nl-be":3784,"./nl-be.js":3784,"./nl.js":2572,"./nn":4566,"./nn.js":4566,"./oc-lnc":9330,"./oc-lnc.js":9330,"./pa-in":9849,"./pa-in.js":9849,"./pl":4418,"./pl.js":4418,"./pt":9834,"./pt-br":8303,"./pt-br.js":8303,"./pt.js":9834,"./ro":4457,"./ro.js":4457,"./ru":2271,"./ru.js":2271,"./sd":1221,"./sd.js":1221,"./se":3478,"./se.js":3478,"./si":7538,"./si.js":7538,"./sk":5784,"./sk.js":5784,"./sl":6637,"./sl.js":6637,"./sq":6794,"./sq.js":6794,"./sr":5719,"./sr-cyrl":3322,"./sr-cyrl.js":3322,"./sr.js":5719,"./ss":6e3,"./ss.js":6e3,"./sv":1011,"./sv.js":1011,"./sw":748,"./sw.js":748,"./ta":1025,"./ta.js":1025,"./te":1885,"./te.js":1885,"./tet":8861,"./tet.js":8861,"./tg":6571,"./tg.js":6571,"./th":5802,"./th.js":5802,"./tk":9527,"./tk.js":9527,"./tl-ph":9231,"./tl-ph.js":9231,"./tlh":1052,"./tlh.js":1052,"./tr":5096,"./tr.js":5096,"./tzl":9846,"./tzl.js":9846,"./tzm":1765,"./tzm-latn":7711,"./tzm-latn.js":7711,"./tzm.js":1765,"./ug-cn":8414,"./ug-cn.js":8414,"./uk":6618,"./uk.js":6618,"./ur":158,"./ur.js":158,"./uz":7609,"./uz-latn":2475,"./uz-latn.js":2475,"./uz.js":7609,"./vi":1135,"./vi.js":1135,"./x-pseudo":4051,"./x-pseudo.js":4051,"./yo":2218,"./yo.js":2218,"./zh-cn":2648,"./zh-cn.js":2648,"./zh-hk":1632,"./zh-hk.js":1632,"./zh-mo":1541,"./zh-mo.js":1541,"./zh-tw":304,"./zh-tw.js":304};function s(e){var t=o(e);return a(t)}function o(e){if(!a.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}s.keys=function(){return Object.keys(l)},s.resolve=o,e.exports=s,s.id=5358},9595:function(e,t,a){"use strict";var l=a(3751),s=(a(4114),a(641)),o=a(953),n=a(33),i=a.p+"img/celli.2d8862ab.png",u=a(5220),r=a(6278);const c=[{grpCd:"00",grpNm:"User position",cd:"00",cdNm:"Position"},{grpCd:"00",grpNm:"User position",cd:"01",cdNm:"Executive advisor"},{grpCd:"00",grpNm:"User position",cd:"02",cdNm:"General manager"},{grpCd:"00",grpNm:"User position",cd:"03",cdNm:"Chief"},{grpCd:"00",grpNm:"User position",cd:"04",cdNm:"Assistant manager"},{grpCd:"00",grpNm:"User position",cd:"05",cdNm:"Staff"},{grpCd:"01",grpNm:"User authorization",cd:"01",cdNm:"Normal"},{grpCd:"01",grpNm:"User authorization",cd:"02",cdNm:"Admin"},{grpCd:"01",grpNm:"User authorization",cd:"03",cdNm:"Developer"},{grpCd:"02",grpNm:"Cassete state",cd:"0",cdNm:"Empty"},{grpCd:"02",grpNm:"Cassete state",cd:"1",cdNm:"Ready"},{grpCd:"02",grpNm:"Cassete state",cd:"2",cdNm:"Analyzing"},{grpCd:"02",grpNm:"Cassete state",cd:"3",cdNm:"Complete"},{grpCd:"02",grpNm:"Cassete state",cd:"4",cdNm:"Error"},{grpCd:"02",grpNm:"Cassete state",cd:"9",cdNm:"Scan"},{grpCd:"03",grpNm:"Processing code",cd:"01",cdNm:"Cassette Loaded."},{grpCd:"03",grpNm:"Processing code",cd:"02",cdNm:"PB/BM Sequence Start."},{grpCd:"03",grpNm:"Processing code",cd:"03",cdNm:"Cassette Scanning......"},{grpCd:"03",grpNm:"Processing code",cd:"04",cdNm:"Cassette Scanned."},{grpCd:"03",grpNm:"Processing code",cd:"05",cdNm:"Loading Slide #"},{grpCd:"03",grpNm:"Processing code",cd:"06",cdNm:"Barcode Scanned : "},{grpCd:"03",grpNm:"Processing code",cd:"07",cdNm:"Low Power Slide Scanning......"},{grpCd:"03",grpNm:"Processing code",cd:"08",cdNm:"Low Power Slide Scan Complete."},{grpCd:"03",grpNm:"Processing code",cd:"09",cdNm:"Dispensing Immersion Oil......"},{grpCd:"03",grpNm:"Processing code",cd:"10",cdNm:"High Power Slide Scanning......"},{grpCd:"03",grpNm:"Processing code",cd:"11",cdNm:"RBC Classification Processing......"},{grpCd:"03",grpNm:"Processing code",cd:"11",cdNm:"WBC Classification Processing......"},{grpCd:"03",grpNm:"Processing code",cd:"12",cdNm:"Unloading Slide #"},{grpCd:"03",grpNm:"Processing code",cd:"13",cdNm:"Cassette Complete"},{grpCd:"04",grpNm:"Analysis type",cd:"01",cdNm:"PB smear"},{grpCd:"04",grpNm:"Analysis type",cd:"02",cdNm:"BM smear"},{grpCd:"04",grpNm:"Analysis type",cd:"03",cdNm:"Touch print"},{grpCd:"04",grpNm:"Analysis type",cd:"04",cdNm:"BM biopsy"},{grpCd:"04",grpNm:"Analysis type",cd:"05",cdNm:"Clot section"},{grpCd:"05",grpNm:"Cell count",cd:"01",cdNm:"100 count"},{grpCd:"05",grpNm:"Cell count",cd:"02",cdNm:"200 count"},{grpCd:"05",grpNm:"Cell count",cd:"03",cdNm:"300 count"},{grpCd:"05",grpNm:"Cell count",cd:"04",cdNm:"400 count"},{grpCd:"05",grpNm:"Cell count",cd:"05",cdNm:"500 count"},{grpCd:"06",grpNm:"General stain",cd:"01",cdNm:"Wright stain"},{grpCd:"06",grpNm:"General stain",cd:"02",cdNm:"Giemsa stain"},{grpCd:"06",grpNm:"General stain",cd:"03",cdNm:"Wright & Giemsa stain"},{grpCd:"07",grpNm:"Special stain",cd:"04",cdNm:"Iron stain"},{grpCd:"07",grpNm:"Special stain",cd:"05",cdNm:"Trichrome stain"},{grpCd:"07",grpNm:"Special stain",cd:"06",cdNm:"Myeloperoxidase stain"},{grpCd:"07",grpNm:"Special stain",cd:"07",cdNm:"NSE stain"},{grpCd:"07",grpNm:"Special stain",cd:"08",cdNm:"NSE stain after NaFinhibition"},{grpCd:"07",grpNm:"Special stain",cd:"09",cdNm:"Reticulin stain"},{grpCd:"07",grpNm:"Special stain",cd:"10",cdNm:"PAS stain"},{grpCd:"08",grpNm:"Immuno stain",cd:"11",cdNm:"CD 3"},{grpCd:"08",grpNm:"Immuno stain",cd:"12",cdNm:"CD 5"},{grpCd:"08",grpNm:"Immuno stain",cd:"13",cdNm:"CD 20"},{grpCd:"08",grpNm:"Immuno stain",cd:"14",cdNm:"CD 79a"},{grpCd:"09",grpNm:"Sampling stain",cd:"01",cdNm:"Single"},{grpCd:"09",grpNm:"Sampling stain",cd:"02",cdNm:"Both"},{grpCd:"10",grpNm:"Gender",cd:"01",cdNm:"Male"},{grpCd:"10",grpNm:"Gender",cd:"02",cdNm:"Female"},{grpCd:"11",grpNm:"Test Type",cd:"01",cdNm:"PB"},{grpCd:"11",grpNm:"Test Type",cd:"02",cdNm:"BF(Default)"},{grpCd:"11",grpNm:"Test Type",cd:"03",cdNm:"BF(Select)"},{grpCd:"11",grpNm:"Test Type",cd:"04",cdNm:"Premium"},{grpCd:"12",grpNm:"Signed state",cd:"01",cdNm:"Signed"},{grpCd:"12",grpNm:"Signed state",cd:"02",cdNm:"Ready"},{grpCd:"13",grpNm:"Log type",cd:"00",cdNm:"User log"},{grpCd:"13",grpNm:"Log type",cd:"01",cdNm:"System log"},{grpCd:"14",grpNm:"Slot state",cd:"00",cdNm:"Empty"},{grpCd:"14",grpNm:"Slot state",cd:"01",cdNm:"Ready"},{grpCd:"14",grpNm:"Slot state",cd:"02",cdNm:"Scan"},{grpCd:"14",grpNm:"Slot state",cd:"03",cdNm:"Analyzing"},{grpCd:"14",grpNm:"Slot state",cd:"04",cdNm:"Complete"},{grpCd:"14",grpNm:"Slot state",cd:"05",cdNm:"Error"}],d=[{value:"01",text:"Diff"},{value:"04",text:"Premium"},{value:"02",text:"Body fluid default"},{value:"03",text:"Body fluid select"}],m=[{value:"02",text:"BM smear"},{value:"03",text:"Touch print"},{value:"04",text:"BM biopsy"},{value:"05",text:"Clot section"}],v=(e,t)=>{const a=c.find((a=>a.grpCd===e&&a.cd===t));return a?.cdNm};function p(e){if(!e)return"";const[t,a,l,s,o,n]=[e.substring(0,4),e.substring(4,6),e.substring(6,8),e.substring(8,10),e.substring(10,12),e.substring(12,14)];return`${t}-${a}-${l} ${s}:${o}:${n}`}const g=e=>{const t=d.find((t=>t.value===e));return t?t.text:""},I=e=>{const t=m.find((t=>t.value===e));return t?t.text:""},f=(e,t,a,l)=>{const s="viewer"===sessionStorage.getItem("viewerCheck")?window.MAIN_API_IP:window.APP_API_BASE_URL;return`${s}/images/getImageRealTime?folder=${t+"/"+a+"/"+l+"/"}&imageName=${e}`},b=(0,s.Lk)("h3",{class:"titleText"},[(0,s.Lk)("span",{class:"greenColor"},"P"),(0,s.eW)("rocessing "),(0,s.Lk)("span",{class:"greenColor"},"I"),(0,s.eW)("nformation ")],-1),y={class:"processInfoUl"},C=(0,s.Lk)("span",{class:"proSpan"},"Cassette No",-1),h={class:"proVal"},k=(0,s.Lk)("span",{class:"proSpan"},"Barcode ID",-1),S={class:"proVal"},N=(0,s.Lk)("span",{class:"proSpan"},"Patient ID",-1),_={class:"proVal"},E=(0,s.Lk)("span",{class:"proSpan"},"Patient Name",-1),L={class:"proVal"},R={class:"proSpan"},w={class:"proVal"},T={class:"proSpan"},P={class:"proVal"},A=(0,s.Lk)("span",{class:"proSpan"},"Oil Count",-1),D={class:"proVal"};var M=(0,s.pM)({__name:"processInfo",props:["parsedData"],setup(e){const t=e,a=(0,r.Pj)(),l=(0,s.EW)((()=>a.state.embeddedStatusModule)),i=(0,s.EW)((()=>a.state.commonModule.siteCd)),u=(0,o.KR)({}),c=(0,o.KR)(null),d=((0,s.nI)(),(0,o.KR)(!1));(0,s.wB)([l.value],(async e=>{if(e.length>0){const t=e[0].sysInfo;t.oilCount!==c.value&&(u.value.oilCount=t.oilCount,c.value=t.oilCount)}})),(0,s.sV)((()=>{c.value=l.value[0]?.sysInfo.oilCount,d.value="bm"===window.PROJECT_TYPE})),(0,s.wB)((()=>t.parsedData),((e,t)=>{m(e)}),{deep:!0});const m=async e=>{const t=e;if("RUNNING_INFO"===t.jobCmd){const e=t?.slotInfo;e&&(u.value={cassetteNo:"",barcodeId:e.barcodeNo,patientId:e.patientId,patientName:e.patientNm,orderDate:p(e.orderDttm),analyzedDttm:p(e.analyzedDttm)})}};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[b,(0,s.Lk)("ul",y,[(0,s.Lk)("li",null,[C,(0,s.eW)(),(0,s.Lk)("span",h,(0,n.v_)(u.value?.cassetteNo),1)]),(0,s.Lk)("li",null,[k,(0,s.eW)(),(0,s.Lk)("span",S,(0,n.v_)(u.value?.barcodeId),1)]),(0,s.Lk)("li",null,[N,(0,s.eW)(),(0,s.Lk)("span",_,(0,n.v_)(u.value?.patientId),1)]),(0,s.Lk)("li",null,[E,(0,s.eW)(),(0,s.Lk)("span",L,(0,n.v_)(u.value?.patientName),1)]),(0,s.Lk)("li",null,[(0,s.Lk)("span",R,(0,n.v_)(d.value?"BM CELL Count ":"WBC Count "),1),(0,s.Lk)("span",w,(0,n.v_)(u.value?.wbcCount),1)]),(0,s.Lk)("li",null,[(0,s.Lk)("span",T,(0,n.v_)("0019"===i.value?"Order Date":"Analyzed Date"),1),(0,s.Lk)("span",P,(0,n.v_)("0019"===i.value?u.value?.analyzedDttm:u.value?.orderDate),1)]),(0,s.Lk)("li",null,[A,(0,s.Lk)("span",D,(0,n.v_)(c.value),1)])])]))}});const x=M;var K=x;const O=[{value:"01",text:"WBC Diff (Standard)"},{value:"04",text:"PBS (Premium)"}],B=[{value:"100",text:"100 WBC"},{value:"150",text:"150 WBC"},{value:"200",text:"200 WBC"},{value:"250",text:"250 WBC"},{value:"300",text:"300 WBC"},{value:"350",text:"350 WBC"},{value:"400",text:"400 WBC"},{value:"450",text:"450 WBC"},{value:"500",text:"500 WBC"}],U=[{value:"100",text:"100"},{value:"200",text:"200"},{value:"300",text:"300"},{value:"400",text:"400"},{value:"500",text:"500"},{value:"600",text:"600"},{value:"700",text:"700"},{value:"800",text:"800"},{value:"900",text:"900"},{value:"1000",text:"1000"},{value:"1100",text:"1100"},{value:"1200",text:"1200"},{value:"1300",text:"1300"},{value:"1400",text:"1400"},{value:"1500",text:"1500"}],W=[{value:"1",text:"1 stitch"},{value:"2",text:"2 stitch"},{value:"3",text:"3 stitch"},{value:"4",text:"4 stitch"},{value:"5",text:"5 stitch"}],X={input:[{slotNo:1,slotState:"0"},{slotNo:2,slotState:"0"},{slotNo:3,slotState:"0"},{slotNo:4,slotState:"0"},{slotNo:5,slotState:"0"},{slotNo:6,slotState:"0"},{slotNo:7,slotState:"0"},{slotNo:8,slotState:"0"},{slotNo:9,slotState:"0"},{slotNo:10,slotState:"0"},{slotNo:11,slotState:"0"},{slotNo:12,slotState:"0"}],output:[{slotNo:1,slotState:"0"},{slotNo:2,slotState:"0"},{slotNo:3,slotState:"0"},{slotNo:4,slotState:"0"},{slotNo:5,slotState:"0"},{slotNo:6,slotState:"0"},{slotNo:7,slotState:"0"},{slotNo:8,slotState:"0"},{slotNo:9,slotState:"0"},{slotNo:10,slotState:"0"},{slotNo:11,slotState:"0"},{slotNo:12,slotState:"0"}]},F={input:[{slotNo:1,slotState:"0"},{slotNo:2,slotState:"0"},{slotNo:3,slotState:"0"},{slotNo:4,slotState:"0"},{slotNo:5,slotState:"0"},{slotNo:6,slotState:"0"},{slotNo:7,slotState:"0"},{slotNo:8,slotState:"0"},{slotNo:9,slotState:"0"},{slotNo:10,slotState:"0"}],output:[{slotNo:1,slotState:"0"},{slotNo:2,slotState:"0"},{slotNo:3,slotState:"0"},{slotNo:4,slotState:"0"},{slotNo:5,slotState:"0"},{slotNo:6,slotState:"0"},{slotNo:7,slotState:"0"},{slotNo:8,slotState:"0"},{slotNo:9,slotState:"0"},{slotNo:10,slotState:"0"}]},$={Logout:"Would you like to log out?",GET_POSITION_LIST:"getPositionList",GET_LOGIN_HISTORY:"getLoginHistory",SET_USER:"setUser",IS_REGIST_USER:"isRegistUser",UPDATE_LOGIN_DTTM:"updateLoginDttm",UPDATE_USER_AVAILABLE:"updateUserAvailable",GET_WBC_CLASS_LIST:"getWbcClassList",GET_WBC_CLASS_LIST_ALL:"getWbcClassListAll",GET_WBC_TOTAL_COUNT:"getWbcTotalCount",UPDATE_WBC_COUNT:"updateWbcCount",GET_WBC_COUNT:"getWbcCount",GET_TEST_TYPE:"getTestType",GET_MODIFIED_TEST_TYPE:"getModifiedTestType",GET_STITCH_COUNT:"getStitchCount",GET_RBC_COUNT:"getRbcCount",GET_RBC_COUNT_HIST:"getRbcCountHist",GET_RBC_COUNT_SKMC:"getRbcCountSkmc",UPDATE_DEGREE:"updateDegree",INIT_WBC_COUNT:"initWbcCount",INIT_RBC_DEGREE:"initRbcDegree",GET_WBC_INFO:"getWbcInfo",SET_WBC_IMAGE_HIST:"setWbcImageHist",GET_WBC_IMAGE_HIST:"getWbcImageHist",INIT_WBC_IMAGE_HIST:"initWbcImageHist",INSERT_WBC_CLASSIFICATION:"insertWbcClassification",SET_WBC_CUSTOM_LIST:"setWbcClassList",UPDATE_HOT_KEYS:"updateHotKeys",UPDATE_BF_HOT_KEYS:"updateBfHotKeys",UPDATE_ORDER:"updateOrder",UPDATE_ORDER_BF:"updateOrderBf",UPDATE_IMAGE_HIST:"updateImageHist",SET_CURRENT_WBC_RESULTS:"setCurrentWbcResults",GET_CURRENT_WBC_RESULTS:"getCurrentWbcResults",SET_BEFORE_WBC_RESULTS:"setBeforeWbcResults",GET_BEFORE_WBC_RESULTS:"getBeforeWbcResults",GET_WBC_MODIFY_LIST:"getWbcModifyList",GET_WBC_MODIFY_LIST_ALL:"getWbcModifyListAll",GET_BF_MODIFY_LIST:"getBfModifyList",GET_RBC_CLASS_LIST:"getRbcClassList",GET_MALARIA_COUNT:"getMalariaCount",UPDATE_MALARIA_COUNT:"updateMalariaCount",SET_CURRENT_RBC_RESULTS:"setCurrentRbcResults",GET_CURRENT_RBC_RESULTS:"getCurrentRbcResults",SET_CLASSIFICATION:"setClassification",GET_CLASSIFICATION_ITEM:"getClassificationItem",SET_CLASSIFICATION_ITEM:"setClassificationItem",UPDATE_RBC_CLASSIFICATION:"updateRbcClassificatin",UPDATE_RBC_CLASSIFICATION_SKMC:"updateRbcClassificatinSkmc",INSERT_WBC_SUCCESS:"insertWbcSuccess",SELECT_RBC_DEGREE:"selectRbcDegree",UPDATE_RBC_DEGREE:"updateRbcDegree",SET_TEST_LIST:"setTestList",GET_TEST_LIST:"getTestList",GET_TEST_RESULT:"getTestResult",GET_RBC_FIELDS:"getRbcFields",GET_WBC_FIELDS:"getWbcFields",GET_RBC_ITEMS:"getRbcItems",GET_WBC_ITEMS:"getWbcItems",INIT_OIL_COUNT:"initOilCount",UPDATE_RESULT:"updateResult",UPDATE_RUNNING_STATE:"updateRunningState",GET_ORDER_LIST:"getOrderList",SET_ORDER_LIST:"setOrderList",UPDATE_ORDER_LIST:"updateOrderList",INIT_ORDER_LIST:"initOrderList",GET_TEST_RESULT_ALL:"getTestResultAll",GET_SEARCH_OPTIONS:"getSearchOptions",UPDATE_SEARCH_OPTIONS:"updateSearchOption",SET_TEST_HISTORY:"setTestHistory",GET_TEST_HISTORY_LIST:"getTestHistoryList",ALL_TEST_HISTORY_LIST:"allTestHistoryList",SEARCH_TEST_HISTORY_LIST:"searchTestHistoryList",UPDATE_TEST_HISTORY:"updateTestHistory",GET_TEST_HISTORY:"getTestHistory",DELETE_TEST_HISTORY:"deleteTestHistory",UPDATE_SIGNED_STATE:"updatesubmitState",UPDATE_TEST_HISTORY_WBC_INFO:"updateTestHistoryWbcInfo",GET_RBC_COMMENT:"getRbcComment",GET_WBC_COMMENT:"getWbcComment",GET_RUNNING_INTERVAL_ID:"getRunningIntervalId",SET_RUNNING_INTERVAL_ID:"setRuningIntervalId",UPDATE_TIMER:"updateWorkingTimer",GET_TIMER:"getWorkingTimer",SET_TIMER:"setWorkingTimer",SET_WORKING_INTERVAL_ID:"setWorkingIntervalId",GET_WORKING_INTERVAL_ID:"getWorkingIntervalId",GET_RUNNING_STATE:"getRunningState",SET_SLIDE_TIMER:"setSlideTimer",UPDATE_SLIDE_TIMER:"updateSlideTimer",GET_SLIDE_TIME_COUNT:"getSlideTimeCount",SET_USER_STOP:"setUserStop",GET_USER_STOP:"getUserStop",SET_WBC_CELL_POSITION:"setWbcCellPosition",GET_WBC_CELL_POSITION:"getWbcCellPosition",GET_TEST_HISTORY_PREV:"getTestHistoryPrev",GET_TEST_HISTORY_NEXT:"getTestHistoryNext",SET_IS_RECOVERY_RUN:"setIsRecoveryRun",GET_IS_RECOVERY_RUN:"getIsRecoveryRun",SET_WORK_LIST:"setWorkList",GET_WORK_LIST:"getWorkList",INIT_WORK_LIST:"initWorkList",DELETE_WORK_LIST:"deleteWorkList",UPDATE_WORK_LIST:"updateWorkList",UPDATE_WORK_LIST_BM:"updateWorkListBm",UPDATE_SIGNED_WORK_LIST:"updateSignedWorkList",UPDATE_RBC_COMMENT:"updateRbcComment",UPDATE_WBC_COMMENT:"updateWbcComment",UPDATE_BM_COMMENT:"updateBmComment",UPDATE_SELECT_ORDER_ID:"updateSelectOrderId",GET_SELECT_ORDER_ID:"getSelectOrderId",ADD_WORK_LIST:"addWorkList",GET_TEST_BARCODES:"getTestBarcodes",ADD_DSP_LIST:"addDspList",GET_DSP_LIST:"getDspList",SET_LIS_HOT_KEY:"setLisHotKey",UPDATE_NEW_TEST_SET:"updateNewTestSet",UPDATE_EXEC_TEST_TYPE:"updateExecTestType",INITIALIZE_MOUNT_CNT:"initializeMountCnt",UPDATE_MOUNT_CNT:"updateMountCnt",GET_CURRENT_USER:"getCurrentUser",GET_SETTINGS:"getSettings",UPDATE_RUNNING_PATH:"updateRunningPath",UPDATE_RESULT_PATH_WBC:"updateResultPathWbc",UPDATE_RESULT_PATH_RBC:"updateResultPathRbc",UPDATE_BARCODE_PATH:"updateBarcodePath",GET_SYSTEM_TIME_ID:"getSystemTimeId",SET_SYSTEM_TIME_ID:"setSystemTimeId",GET_USER:"getUser",UPDATE_REMEMBER_STATE:"updateRememberState",SET_CURRENT_USER:"setCurrentUser",UPDATE_ROOT_PATH:"updateRootPath",GET_FILE_FILTER:"getFileFilter",GET_USER_LIST:"getUserList",UPDATE_ANALYSIS_TYPE:"updateAnalysisType",UPDATE_TEST_TYPE:"updateTestType",UPDATE_RUNNING_MODE:"updateRunningMode",UPDATE_USER:"updateUser",DELETE_USER:"deleteUser",UPDATE_MARKER_STATE:"updateMarkerState",GET_MARKER_STATE:"getMarkerState",SET_PAUSE_STATE:"setPauseState",GET_PAUSE_STATE:"getPauseState",GET_BF_WHOLE_SLIDE_PATH:"getBfWholeSlidePath",GET_BF_WBC_CLASS_LIST:"getBfWbcClassList",GET_SIZE_SLIDE_VALUE:"getSizeSlideValue",UPDATE_LIS_CODE:"updateLisCode",SELECT_LIS_CODE:"selectLisCode",SELECT_LIS_CODE_RBC:"selectLisCodeRbc",UPDATE_CBC_CODE:"updateCbcCode",SELECT_CBC_CODE:"selectCbcCode",UPDATE_LIS_CONN_PATH:"updateLisConnPath",SELECT_LIS_CONN_PATH:"selectLisConnPath",GET_BACKUP_LIST:"getBackupList",RESTORE_BACKUP_DATA:"restoreBackupData",DELETE_BACKUP_DATA:"deleteBackupData",RESET_RBC_DEGREE:"resetRbcDegree",GET_DEFAULT_RBC_DEGREE:"getDefaultRbcDegree",UPDATE_CHECKED_CELL:"updateCheckedCell",SET_LOCK_SLIDE:"setLockSlide",SET_HOST_IP:"setHostIp",GET_HOST_IP:"getHostIp",GET_NORMAL_RANGE:"getNormalRange",UPDATE_NORMAL_RANGE:"updateNormalRange",GET_LOCK_STATE:"getLockState",GET_KUMC_CBC_PATH:"getKumcCbcPath",SET_WBC_NORMAL_RANGE:"setWbcNormalRange",GET_WBC_NORMAL_RANGE:"getWbcNormalRange",GET_SKMC_RESULT_CD:"getSkmcResultCd",SET_SKMC_RESULT_CD:"setSkmcResultCd",REMOVE_SKMC_RESULT_CD:"removeSkmcResultCd",GET_SKMC_REMARK:"getSkmcRemark",SET_SKMC_REMARK:"setSkmcRemark",REMOVE_SKMC_REMARK:"removeSkmcRemark",SET_SKMC_FAVORITE:"setSkmcFavorite",GET_SKMC_FAVORITE:"getSkmcFavorite",GET_SKMC_LIS_RESULTS:"getSkmcLisResults",SET_SKMC_LIS_RESULTS:"setSkmcLisResults",SET_ALARM_COUNT:"setAlarmCount",SET_SORT_TYPE:"setSortType",GET_SORT_TYPE:"getSortType",SET_CUSTOM_CLASS:"setCustomClass",GET_CUSTOM_CLASS:"getCustomClass",SET_SYS_INFO:"setSysInfo",GET_SYS_INFO:"getSysInfo",SET_BACKEND_DATA:"setBackendData",GET_BACKEND_DATA:"getBackendData",SELECT_CBC_CODE_INHA:"selectCbcCodeInha",SELECT_LIS_CODE_INHA:"selectLisCodeInha",SELECT_LIS_CODE_RBC_INHA:"selectLisCodeRbcInha",SELECT_LIS_CONN_PATH_INHA:"selectLisConnPathInha",GET_RBC_COUNT_INHA:"getRbcCountInha",SELECT_WBC_RUNNING_COUNT:"selectWbcRunningCount",GET_BRIGHTNESS_SLIDE_VALUE:"getBrightnessSlideValue",GET_RED_VALUE:"getRedValue",GET_GREEN_VALUE:"getGreenValue",GET_BLUE_VALUE:"getBlueValue",GET_RGB_VALUE:"getRgbValue",SET_SIZE_SLIDE_VALUE:"setSizeSlideValue",SET_BRIGHTNESS_SLIDE_VALUE:"setBrightnessSlideValue",SET_RED_VALUE:"setRedValue",SET_GREEN_VALUE:"setGreenValue",SET_BLUE_VALUE:"setBlueValue",SET_RGB_VALUE:"setRgbValue",SET_ROLLBACK_LIST:"setRollbackList",GET_ROLLBACK_LIST:"getRollbackList",GET_IMAGE_ROLLBACK_LIST:"getImageRollbackList",SET_CLONED_WBC_INFO:"setClonedWbcInfo",GET_RBC_BRIGHTNESS_SLIDE_VALUE:"getRbcBrightnessSlideValue",GET_RBC_RED_VALUE:"getRbcRedValue",GET_RBC_GREEN_VALUE:"getRbcGreenValue",GET_RBC_BLUE_VALUE:"getRbcBlueValue",SET_RBC_BRIGHTNESS_SLIDE_VALUE:"setRbcBrightnessSlideValue",SET_RBC_RED_VALUE:"setRbcRedValue",SET_RBC_GREEN_VALUE:"setRbcGreenValue",SET_RBC_BLUE_VALUE:"setRbcBlueValue",SET_CLONED_RBC_INFO:"setClonedRbcInfo",UPDATE_OIL_COUNT:"updateOilCount",SET_RESULT_LIST:"setResultList",CLEAR_RESULT_LIST:"clearResultList",GET_RESULT_LIST:"getResultList",SET_WBC_REPORT_PRINT:"setWbcReportPrint",GET_WBC_REPORT_PRINT:"getWbcReportPrint",SET_RBC_REPORT_PRINT:"setRbcReportPrint",GET_RBC_REPORT_PRINT:"getRbcReportPrint",SET_RBC_SIZE:"setRbcSize",GET_RBC_SIZE:"getRbcSize",SET_RBC_CHROMIA:"setRbcChromia",GET_RBC_CHROMIA:"getRbcChromia",SET_RBC_SHAPE:"setRbcShape",GET_RBC_SHAPE:"getRbcShape",PUSH_RBC_SHAPE:"pushRbcShape",POP_RBC_SHAPE:"popRbcShape",SET_RBC_PLATELET:"setRbcPlatelet",GET_RBC_PLATELET:"getRbcPlatelet",PUSH_RBC_PLATELET:"pushRbcPlatelet",POP_RBC_PLATELET:"popRbcPlatelet",SET_RBC_INCLUSION:"setRbcInclusion",GET_RBC_INCLUSION:"getRbcInclusion",POP_RBC_INCLUSION:"popRbcInclusion",PUSH_RBC_INCLUSION:"pushRbcInclusion",SET_IS_SHOW_MODAL_BARCODE:"setIsShowModalBarcode",GET_IS_SHOW_MODAL_BARCODE:"getIsShowModalBarcode",SET_IS_NS_NB_INTEGRATION:"setIsNsNbIntegration",GET_IS_NS_NB_INTEGRATION:"getIsNsNbIntegration",SET_IS_ALARM:"setIsAlarm",GET_IS_ALARM:"getIsAlarm",SET_IS_CBC_SHOW:"setIsCbcShow",GET_IS_CBC_SHOW:"getIsCbcShow",SET_SITE_CD:"setSiteCd",GET_SITE_CD:"getSiteCd",SET_DEVICE_SERIALNUM:"setDeviceSerialNm",GET_DEVICE_SERIALNUM:"getDeviceSerialNm",SELECT_BF_HOT_KEY:"selectBfHotKey",SELECT_WBC_HOT_KEY:"selectWbcHotKey",SELECT_WBC_CUSTOM_CLASS:"selectWbcCustomClass",SELECT_EMP_NO:"selectEmpNo",INSERT_WBC_MODIFY_HIST:"insetWbcModifyHist",GET_WBC_MODIFY_HIST:"getWbcModifyHist",UPDATE_WBC_HIST_LIST:"updateWbcHistList",GET_WBC_HIST_LIST:"getWbcHistList",GET_COMMON_CODE_LIST:"getCommonCodeList",GET_COMMON_CODE:"getCommonCode",GET_CODE_LIST_USER_POSITION:"00",GET_CODE_LIST_USER_AUTHORIZATION:"01",GET_CODE_LIST_USER_CASSETE_STATE:"02",GET_CODE_LIST_PROCESSING_STATE:"03",GET_CODE_LIST_ANALYSIS_TYPE:"04",GET_CODE_LIST_CELL_COUNT:"05",GET_CODE_LIST_GENERAL_STAIN:"06",GET_CODE_LIST_SPECIAL_STAIN:"07",GET_CODE_LIST_IMMUNO_STAIN:"08",GET_CODE_LIST_SAMPLING_STAIN:"09",GET_CODE_LIST_GENDER:"10",GET_CODE_LIST_TEST_TYPE:"11",GET_CODE_SIGNED_STATE:"12",GET_CODE_LOG_TYPE:"13",GET_CODE_SLOT_STATE:"14",EVENT_TYPE_USER:"00",EVENT_TYPE_SYSTEM:"01",SET_EVENT_LOG:"setEventLog",GET_EVENT_LOG:"getEventLog",REMOVE_EVENT_LOG:"removeEventLog",REMEMBER_PWD_KEY:"uimdia190$^!00000000000000000000",REMEMBER_PWD_IV:"0000000000000000",RECEIVE_DATA_BROADCAST_CHAN:"RECEIVE_DATA_BROADCAST_CHAN",GET_PB_CLASSIFICATIONS:"getPbClassifications",GET_CLASSIFICATION_IMAGES:"getClassificationImages",GET_MARKER_POSITION:"getMarkerPosition",GET_PB_HOT_KEYS:"getPbHotKeys",UPDATE_CLASSIFICATION:"updateClassification",PB_IA_MOVE_IMAGE:"PbIaMoveImage",SET_WBC_IMAGE_LIST:"setWbcImageList",GET_PB_WBC_IMAGES:"getPbWbcImages",SET_SELECTED_ITEM:"setSelectedItem",GET_SELECTED_ITEM:"getSelectedItem",IA_SET_CUSTOM_CLASS:"iaSetCustomClass",IA_GET_CUSTOM_CLASS:"iaGetCustomClass",IDS_MSG_SUCCESS:"Success",IDS_MSG_FAILED:"Failed",IDS_MSG_OIL_REMAIN_COUNTER:"Reset Immersion oil counter after final test or changing the Oil",IDS_MSG_POWEROFF:"Shutdown the system.",IDS_MSG_INITALIZE:"Please execute after initialization.",IDS_MSG_SIGNING_COMPLETE:"Signing is complete.",IDS_MSG_DELETE_THE_SELECTED_ITEMS:"Delete the selected items?",IDS_MSG_ACCOUNT_CHANGED:"Account conversion is complete.",IDS_MSG_DELETE_ACCOUNT:"Are you sure you want to delete your account?",IDS_MSG_LOGOUT:"Are you sure you want to logout now?",IDS_MSG_DUPLICATE_KEY:"The %s key is a duplicate key.",IDS_MSG_HOTKEY_IN_ENGLISH:"Please recheck the key",IDS_ERROR_CHECK_ID:"The ID must be 5-20 letters or numbers starting with the alphabet.",IDS_ERROR_CHECK_PASSWORD:"The password is a combination of 6-30 digits in English, numbers.",IDS_ERROR_NOT_MATCHED_PASSWORD:"Passwords do not match.",IDS_ERROR_SIGINUP:"Please check the input field.",IDS_ERROR_SIGINUP_ALREADY_ID:"ID already registered.",IDS_ERROR_LOGIN_ERROR:"Please check your ID and password.",IDS_ERROR_LOGIN_ID:"Please check your Login ID.",IDS_ERROR_ALREADY_RUNNING:"Process is already running.",IDS_ERROR_STOP_PROCESS:"Process is terminating.",IDS_ERROR_INIT_ERROR:"Please initialize.",IDS_ERROR_CHECK_REQUIRED_FIELDS:"Please check required fields",IDS_ERROR_CHECK_SLOT_NO:"Please check the slot number.",IDS_ERROR_FAVORITE_MAX_REGIST:"Up to 5 favorites can be registered.",IDS_ERROR_FAVORITE_MAX_REGIST2:"Up to 12 favorites can be registered.",IDS_ERROR_ENTER_YOUR_ORDER_DETAILS:"Please enter your order details.",IDS_ERROR_SELECT_A_TARGET_ITEM:"Please select items",IDS_ERROR_PLEASE_SELECT_AN_IMAGE:"Please select an image.",IDS_ERROR_ALREADY_ADDED:"This item has already been added.",IDS_ERROR_ADD_A_WORKLIST:"Please add a worklist",IDS_ERROR_NO_TEST_RESULTS:"There are no test results.",IDS_ERROR_FILE_CLISSIFICATION:"File classification error",IDS_ERROR_ENTER_CLASS_INFO:"Please enter class information",IDS_ERROR_PLEASE_CONFIRM_YOUR_USER_ID:"Please confirm your user ID.",IDS_DOWNLOAD_COMPLETE:"Download Complete",IDS_SELECT_SLIDE:"Please select a slide.",IDS_SIGNED_ITEMS_CANNOT_BE_MODIFIED:"Signed items cannot be modified.",IDS_RECOVER_GRIPPER_CONDITION:"Would you like to recover the gripper condition?",IDS_PLEASE_ENTER_END_DATE:"Please enter the end date.",IDS_PLEASE_ENTER_START_DATE:"Please enter the start date.",IDS_THE_MAXIMUM_INQUIRY_DATE_IS_31_DAYS:"The maximum inquiry date is 31 days.",IDS_START_DATE_IS_NOT_GREATER_THEN_END_DATE:"Start date is not greater than end date.",IDS_RESTART_SYSTEM:"A new version has been downloaded. Please restart the application to apply the update.",IDS_PLEASE_ENTER_YOUR_BARCODE_NUMBER:"Please enter your barcode number",IDS_BARCODE_REGISTRATION_SUCCESSFUL:"Barcode registration successful",IDS_THIS_IS_A_DUPLICATION_ABBREVIATION:"This is a duplicate abbreviation.",IDS_THIS_CARD_HAS_ALREADY_BEEN_USED:"This card has already been used.",IDS_MSG_UPLOAD_LIS:"Upload current results to LIS",IDS_MSG_SUBMIT_SLIDE:"Submit slide",IDS_MSG_CONFIRM_SLIDE:"Confirm slide",IDS_PLEASE_SELECT_A_CLASS:"Please select a class",IDS_PLEASE_SELECT_A_BACKUP_DATE:"Please select a backup date.",IDS_PLEASE_SELECT_A_BACKUP_PATH:"Please select a backup path.",IDS_PLEASE_SELECT_A_BACKUP_FILE:"Please select a backup file.",IDS_NO_DATA_FOUND:"No data found.",IDS_MSG_DATA_BACKUP:"Data from that period will be deleted. Would you like to proceed?",IDS_MSG_DATA_RESTORE:"Do you want to recover your data?",IDS_MSG_SIZE_CHROMIA_LINKED_LIS:"Size and Chromia categories are linked with LIS data.",UPDATE_SUCCESSFULLY:"Update Successfully",TCP_DiSCONNECTED:"The TCP connection was disconnected.",alreadyInitialized:"It has already been initialized.",lockRow:"Deletion is not allowed when locked.",exit:"Are you sure you want to quit the program?"};var G=a(5093),H=a.n(G);a(4743);function j(){const e=H()(),t=e.format("YYYYMMDDHHmmssSSS");return t}const V=e=>{if(!e)return null;const t=H()(e,"YYYYMMDDHHmmssSSSSS");return t.format("YYYY-MM-DD HH:mm:ss")},Y=e=>{const t=Math.floor(e/3600),a=Math.floor(e%3600/60),l=Math.floor(e%3600%60);return`${q(t,2)}:${q(a,2)}:${q(l,2)}`},q=(e,t)=>String(e).padStart(t,"0"),J=e=>{const t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),l=e.getDate().toString().padStart(2,"0");return`${t}-${a}-${l}`},Q=()=>{const e=j();return{embedStatus:{start:{jobCmd:"START",reqUserId:"",testType:"",wbcCount:"",reqDttm:e},startAction:{jobCmd:"START",reqUserId:"",testType:"01",wbcCount:"",stitchCount:"",runningMode:"00",positionMargin:"0",wbcPositionMargin:"0",pltPositionMargin:"0",reqDttm:e},init:{jobCmd:"INIT",reqUserId:"",reqDttm:e},restart:{jobCmd:"RESTART",reqUserId:"",reqDttm:e,bfSelectFiles:[]},stop:{jobCmd:"STOP",reqUserId:"",reqDttm:e,isEmergency:"N",isUserStop:"Y"},end:{jobCmd:"END",reqUserId:"",testType:"",wbcCount:"",reqDttm:e},runningInfo:{jobCmd:"RUNNING_INFO",reqUserId:"",reqDttm:e},sysInfo:{jobCmd:"SYSINFO",reqUserId:"",reqDttm:e},pause:{jobCmd:"PAUSE",reqUserId:"",reqDttm:e},runIngComp:{jobCmd:"RUNNING_COMP",reqUserId:"",reqDttm:e},recovery:{jobCmd:"RECOVERY",reqUserId:"",reqDttm:e},settings:{jobCmd:"SETTINGS",reqUserId:"",reqDttm:e,pbiaRootDir:"D:/IA_Proc",oilCount:"",isOilReset:"",deviceType:"01",isNsNbIntegration:""},oilPrime:{jobCmd:"OIL_PRIME",reqUserId:"",reqDttm:e},gripperOpen:{jobCmd:"GRIPPER_OPEN",reqUserId:"",reqDttm:e},cameraReset:{jobCmd:"CAMERA_RESET",reqUserId:"",reqDttm:e},exit:{jobCmd:"clientExit",reqUserId:"",reqDttm:e}}}};var z=a(1250);function Z(){let e=window.APP_API_BASE_URL||"http://192.168.0.131:3002";const t=async(e,t,l,s)=>a(e.endpoint,t,l),a=async(t,a,l,s)=>{const o={headers:{"Content-Type":"application/json","Cache-Control":"public, max-age=3600"}};z.A.defaults.withCredentials=!0;const n=a?l?"?":"/":"";a=a||"","viewer"===s&&(e=window.MAIN_API_IP);try{const l=await z.A.get(`${e}/${t}${n}${a}`,o);return Promise.resolve(l.data||{code:500,data:void 0,success:!1})}catch(i){return Promise.reject(i)}},l=async(e,t,a,l=!1,o)=>s(e.endpoint,t,a,l,o),s=async(t,a,l,s=!1,o)=>{const n={headers:{"Content-Type":"application/json"}};"blob"===l&&(n.responseType="blob"),"text/plain"===l&&(n.headers={"Content-Type":"text/plain"}),s&&(n.headers={"Content-Type":"multipart/form-data"}),z.A.defaults.withCredentials=!0,"viewer"===o&&(e=window.MAIN_API_IP);try{const l=await z.A.post(`${e}/${t}`,a,n);return Promise.resolve(l.data||{code:500,data:void 0,success:!1})}catch(i){return Promise.reject(i)}},o=async(e,t,a,l)=>n(e.endpoint,t,a,l),n=async(t,a,l,s)=>{const o={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}};z.A.defaults.withCredentials=!0;const n=l?s?"?":"/":"";l=l||"";try{const s=await z.A.put(`${e}/${t}${n}${l}`,a,o);return Promise.resolve(s.data||{code:500,data:void 0,success:!1})}catch(i){return Promise.reject(i)}},i=async(e,t,a)=>u(e.endpoint,t,a),u=async(t,a,l)=>{const s={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}};z.A.defaults.withCredentials=!0;const o=l?"?":"/";try{const l=await z.A.delete(`${e}/${t}${o}`,{...s,data:a});return Promise.resolve(l.data||{code:500,data:void 0,success:!1})}catch(n){return Promise.reject(n)}};return{httpGet:t,httpGetAct:a,httpPost:l,httpPostAct:s,httpPut:o,httpPutAct:n,httpDelete:i,httpDeleteAct:u}}const ee={auth:{refresh:{endpoint:"/auth/refresh",requiresToken:!1}},processInfo:{list:{endpoint:"proinfo/getAllProcessInfo",requiresToken:!1}},rbcclassification:{list:{endpoint:"rbc/getAllRbc",requiresToken:!1}},wbcclassification:{list:{endpoint:"wbc/getAllWbc",requiresToken:!1}},user:{register:{endpoint:"user/register",requiresToken:!1},login:{endpoint:"user/login",requiresToken:!1},userCheck:{endpoint:"user",requiresToken:!1},getUsers:{endpoint:"user/getUsers",requiresToken:!1},userDataPut:{endpoint:"user/update",requiresToken:!1},deleteUser:{endpoint:"user/delete",requiresToken:!1}},settings:{cellImgAnalyzedPost:{cellImgAdd:{endpoint:"cellImgAnalyzed/cellImgAdd",requiresToken:!1},cellImgGet:{endpoint:"cellImgAnalyzed",requiresToken:!1},cellImgPut:{endpoint:"cellImgAnalyzed/update",requiresToken:!1}},rbcDegree:{rbcDegreeAdd:{endpoint:"rbcDegree/rbcDegreeAdd",requiresToken:!1},rbcDegree:{endpoint:"rbcDegree",requiresToken:!1}},wbcCustomClass:{create:{endpoint:"wbcCustomClass/create",requiresToken:!1},update:{endpoint:"wbcCustomClass/update",requiresToken:!1},get:{endpoint:"wbcCustomClass/get",requiresToken:!1}},wbcHotKeys:{create:{endpoint:"wbcHotKeys/create",requiresToken:!1},update:{endpoint:"wbcHotKeys/update",requiresToken:!1},get:{endpoint:"wbcHotKeys/get",requiresToken:!1}},bfHotKeys:{create:{endpoint:"bfHotKeys/create",requiresToken:!1},update:{endpoint:"bfHotKeys/update",requiresToken:!1},get:{endpoint:"bfHotKeys/get",requiresToken:!1}},normalRange:{create:{endpoint:"normalRange/create",requiresToken:!1},update:{endpoint:"normalRange/update",requiresToken:!1},get:{endpoint:"normalRange/get",requiresToken:!1}},imagePrint:{create:{endpoint:"imagePrint/create",requiresToken:!1},update:{endpoint:"imagePrint/update",requiresToken:!1},get:{endpoint:"imagePrint/get",requiresToken:!1}},lisCode:{create:{endpoint:"lisCode/create",requiresToken:!1},update:{endpoint:"lisCode/update",requiresToken:!1},get:{endpoint:"lisCode/get",requiresToken:!1}},lisCodeRbc:{create:{endpoint:"lisCodeRbc/create",requiresToken:!1},update:{endpoint:"lisCodeRbc/update",requiresToken:!1},get:{endpoint:"lisCodeRbc/get",requiresToken:!1}},cbcCode:{create:{endpoint:"cbcCode/create",requiresToken:!1},update:{endpoint:"cbcCode/update",requiresToken:!1},get:{endpoint:"cbcCode/get",requiresToken:!1}},filePathSet:{create:{endpoint:"filePathSet/create",requiresToken:!1},update:{endpoint:"filePathSet/update",requiresToken:!1},get:{endpoint:"filePathSet/get",requiresToken:!1}},runCount:{create:{endpoint:"runCount/create",requiresToken:!1},update:{endpoint:"runCount/update",requiresToken:!1},get:{endpoint:"runCount/get",requiresToken:!1}},minCount:{create:{endpoint:"minCount/create",requiresToken:!1},update:{endpoint:"minCount/update",requiresToken:!1},get:{endpoint:"minCount/get",requiresToken:!1}},runningInfo:{create:{endpoint:"runningInfo/create",requiresToken:!1},update:{endpoint:"runningInfo/update",requiresToken:!1},get:{endpoint:"runningInfo/getAll",requiresToken:!1},delete:{endpoint:"runningInfo/delete",requiresToken:!1},detail:{endpoint:"runningInfo/detail",requiresToken:!1},pageUpDown:{endpoint:"runningInfo/pageUpDown",requiresToken:!1},updatePcIpState:{endpoint:"runningInfo/updatePcIpState",requiresToken:!1},clearPcIpState:{endpoint:"runningInfo/clearPcIpState",requiresToken:!1}},folder:{get:{endpoint:"folder/drives",requiresToken:!1}},folders:{get:{endpoint:"folders",requiresToken:!1}},classOrder:{create:{endpoint:"classOrders/create",requiresToken:!1},update:{endpoint:"classOrders/update",requiresToken:!1},get:{endpoint:"classOrders/get",requiresToken:!1}},remainingCount:{get:{endpoint:"remaining-count/execute",requiresToken:!1}},qualityCheck:{get:{endpoint:"qualityCheck/execute",requiresToken:!1}}},images:{move:{endpoint:"images/move",requiresToken:!1},moveClassImage:{endpoint:"images/moveClassImage",requiresToken:!1}},jsonReader:{get:{endpoint:"jsonReader/send",requiresToken:!1},jsonCreate:{endpoint:"jsonReader/upload",requiresToken:!1}},dziReader:{get:{endpoint:"dzi/send",requiresToken:!1}},pdf:{post:{endpoint:"pdf/generate",requiresToken:!1}},filesystem:{post:{endpoint:"filesystem/create-folder",requiresToken:!1},delete:{endpoint:"filesystem/delete-folder",requiresToken:!1},readGet:{endpoint:"file/read",requiresToken:!1},createDirectory:{endpoint:"file/create-directory",requiresToken:!1},fileCreate:{endpoint:"file/createFile",requiresToken:!1}},fileTxtRead:{get:{endpoint:"file/read",requiresToken:!1}},H7Read:{post:{endpoint:"hl7/parse",requiresToken:!1}},H7Message:{post:{endpoint:"hl7/message",requiresToken:!1}},Hl7Create:{post:{endpoint:"hl7/hl7Create",requiresToken:!1}},device:{getDeviceInfo:{create:{endpoint:"device/create",requiresToken:!1},get:{endpoint:"device/get",requiresToken:!1},ip:{endpoint:"ip",requiresToken:!1}}},backUp:{backUpDate:{endpoint:"backup/post",requiresToken:!1}},excel:{execute:{endpoint:"excel/execute",requiresToken:!1}},browser:{exit:{endpoint:"browser/close-edge",requiresToken:!1}}},te=Z(),ae=async e=>te.httpPost(ee.settings.cellImgAnalyzedPost.cellImgAdd,e),le=async()=>te.httpGet(ee.settings.cellImgAnalyzedPost.cellImgGet),se=async(e,t)=>te.httpPut(ee.settings.cellImgAnalyzedPost.cellImgPut,e,t),oe=async e=>te.httpPost(ee.settings.rbcDegree.rbcDegreeAdd,e),ne=async e=>te.httpPut(ee.settings.rbcDegree.rbcDegree,e),ie=async()=>te.httpGet(ee.settings.rbcDegree.rbcDegree),ue=async e=>te.httpPost(ee.settings.wbcCustomClass.create,e),re=async e=>te.httpPut(ee.settings.wbcCustomClass.update,e),ce=async()=>te.httpGet(ee.settings.wbcCustomClass.get),de=async e=>te.httpPost(ee.settings.wbcHotKeys.create,e),me=async e=>te.httpPut(ee.settings.wbcHotKeys.update,e),ve=async()=>te.httpGet(ee.settings.wbcHotKeys.get),pe=async e=>te.httpPost(ee.settings.bfHotKeys.create,e),ge=async e=>te.httpPut(ee.settings.bfHotKeys.update,e),Ie=async()=>te.httpGet(ee.settings.bfHotKeys.get),fe=async e=>te.httpPost(ee.settings.normalRange.create,e),be=async e=>te.httpPut(ee.settings.normalRange.update,e),ye=async()=>te.httpGet(ee.settings.normalRange.get),Ce=async e=>te.httpPost(ee.settings.imagePrint.create,e),he=async e=>te.httpPut(ee.settings.imagePrint.update,e),ke=async()=>te.httpGet(ee.settings.imagePrint.get),Se=async e=>te.httpPost(ee.settings.lisCode.create,e),Ne=async e=>te.httpPut(ee.settings.lisCode.update,e),_e=async()=>te.httpGet(ee.settings.lisCode.get),Ee=async e=>te.httpPost(ee.settings.lisCodeRbc.create,e),Le=async e=>te.httpPut(ee.settings.lisCodeRbc.update,e),Re=async()=>te.httpGet(ee.settings.lisCodeRbc.get),we=async e=>te.httpPost(ee.settings.cbcCode.create,e),Te=async e=>te.httpPut(ee.settings.cbcCode.update,e),Pe=async()=>te.httpGet(ee.settings.cbcCode.get),Ae=async e=>te.httpPost(ee.settings.filePathSet.create,e),De=async e=>te.httpPut(ee.settings.filePathSet.update,e),Me=async()=>te.httpGet(ee.settings.filePathSet.get),xe=async e=>te.httpPost(ee.settings.runCount.create,e),Ke=async e=>te.httpPut(ee.settings.runCount.update,e),Oe=async()=>te.httpGet(ee.settings.runCount.get),Be=async e=>te.httpPost(ee.settings.minCount.create,e),Ue=async e=>te.httpPut(ee.settings.minCount.update,e),We=async()=>te.httpGet(ee.settings.minCount.get),Xe=async()=>te.httpGet(ee.settings.lisCode.get),Fe=async()=>te.httpGet(ee.settings.folder.get),$e=async e=>te.httpPost(ee.settings.classOrder.create,e),Ge=async()=>te.httpGet(ee.settings.classOrder.get),He=async e=>te.httpPut(ee.settings.classOrder.update,e),je=async()=>te.httpGet(ee.settings.remainingCount.get),Ve=async()=>te.httpGet(ee.settings.qualityCheck.get);var Ye=a(3772);class qe{constructor(){(0,Ye.A)(this,"events",{})}subscribe(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}publish(e,...t){const a=this.events[e];a&&a.forEach((e=>e(...t)))}unsubscribe(e,t){const a=this.events[e];a&&(this.events[e]=a.filter((e=>e!==t)))}}var Je=new qe;const Qe={class:"mb1 alertMessage"};var ze={__name:"Alert",props:["isVisible","type","message"],emits:["update:hideAlert"],setup(e,{emit:t}){const a=e,l=(0,s.EW)((()=>`alert-${a.type}`)),o=t,i=()=>{o("hide")};return(t,a)=>e.isVisible?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,n.C4)(["alert",l.value])},[(0,s.Lk)("p",Qe,(0,n.v_)(e.message),1),(0,s.Lk)("button",{class:"alertButton",onClick:i},"Close")],2)):(0,s.Q3)("",!0)}};const Ze=ze;var et=Ze;const tt=[{value:"01",text:"PB standard"},{value:"04",text:"PB premium"}],at=[{value:"02",text:"BM wedge"},{value:"03",text:"Touch print"},{value:"04",text:"BM biopsy"},{value:"05",text:"Clot section"},{value:"06",text:"BM squash"}],lt=[{value:"100",text:"100"},{value:"150",text:"150"},{value:"200",text:"200"},{value:"250",text:"250"},{value:"300",text:"300"},{value:"350",text:"350"},{value:"400",text:"400"},{value:"450",text:"450"},{value:"500",text:"500"}],st=[{value:"100",text:"100"},{value:"200",text:"200"},{value:"300",text:"300"},{value:"400",text:"400"},{value:"500",text:"500"},{value:"600",text:"600"},{value:"700",text:"700"},{value:"800",text:"800"},{value:"900",text:"900"},{value:"1000",text:"1000"},{value:"1100",text:"1100"},{value:"1200",text:"1200"},{value:"1300",text:"1300"},{value:"1400",text:"1400"},{value:"1500",text:"1500"}],ot=[{value:"50",text:"50"},{value:"100",text:"100"},{value:"150",text:"150"},{value:"200",text:"200"},{value:"250",text:"250"},{value:"300",text:"300"},{value:"350",text:"350"},{value:"400",text:"400"},{value:"450",text:"450"},{value:"500",text:"500"}],nt=[{value:"1",text:"1"},{value:"2",text:"2"},{value:"3",text:"3"},{value:"4",text:"4"},{value:"5",text:"5"}],it=[{value:"0",text:"0"},{value:"1",text:"1"},{value:"2",text:"2"},{value:"3",text:"3"},{value:"4",text:"4"},{value:"5",text:"5"}],ut=[{value:"0",text:"0"},{value:"1",text:"1"},{value:"2",text:"2"},{value:"3",text:"3"},{value:"4",text:"4"},{value:"5",text:"5"}],rt=[{cd:"01",classCd:"diff",fullNm:"WBC Diff. Count",isSelected:!0},{cd:"02",classCd:"seg",fullNm:"Seg.-neutrophils",isSelected:!0},{cd:"03",classCd:"band",fullNm:"Band-neutrophils",isSelected:!0},{cd:"04",classCd:"",fullNm:"Lymphocytes",isSelected:!0},{cd:"05",classCd:"",fullNm:"Monocytes",isSelected:!0},{cd:"06",classCd:"",fullNm:"Eosinophils",isSelected:!0},{cd:"07",classCd:"",fullNm:"Basophils",isSelected:!0},{cd:"08",classCd:"",fullNm:"Metamyelocytes",isSelected:!0},{cd:"09",classCd:"",fullNm:"Myelocytes",isSelected:!0},{cd:"10",classCd:"",fullNm:"Promyelocytes",isSelected:!0},{cd:"11",classCd:"",fullNm:"Blasts",isSelected:!0},{cd:"12",classCd:"",fullNm:"Immature cells",isSelected:!0},{cd:"13",classCd:"",fullNm:"Atypical cells",isSelected:!0},{cd:"14",classCd:"",fullNm:"Atypical lymphocyte",isSelected:!0},{cd:"15",classCd:"",fullNm:"Activated lymphocyte",isSelected:!0},{cd:"16",classCd:"",fullNm:"Prolymphocytes",isSelected:!0},{cd:"17",classCd:"",fullNm:"Promonocytes",isSelected:!0},{cd:"18",classCd:"",fullNm:"Plasma cells",isSelected:!0},{cd:"19",classCd:"",fullNm:"Nucleated RBC",isSelected:!0},{cd:"20",classCd:"",fullNm:"Others",isSelected:!0},{cd:"21",classCd:"",fullNm:"Atypical Lymphoid cells",isSelected:!0},{cd:"22",classCd:"",fullNm:"Leukemic cells",isSelected:!0},{cd:"23",classCd:"",fullNm:"Abnormal lymphocyte",isSelected:!0},{cd:"24",classCd:"",fullNm:"Reactive lymphocyte",isSelected:!0},{cd:"25",classCd:"",fullNm:"Plasmacytoid lymphocyte",isSelected:!0},{cd:"26",classCd:"",fullNm:"ANC calc",isSelected:!0},{cd:"27",classCd:"",fullNm:"WBC",isSelected:!0},{cd:"28",classCd:"",fullNm:"RBC",isSelected:!0},{cd:"29",classCd:"",fullNm:"HGB",isSelected:!0},{cd:"30",classCd:"",fullNm:"HCT",isSelected:!0},{cd:"31",classCd:"",fullNm:"MCV",isSelected:!0},{cd:"32",classCd:"",fullNm:"MCH",isSelected:!0},{cd:"33",classCd:"",fullNm:"MCHC",isSelected:!0},{cd:"34",classCd:"",fullNm:"RDW",isSelected:!0},{cd:"35",classCd:"",fullNm:"Platelet",isSelected:!0},{cd:"36",classCd:"",fullNm:"PCT",isSelected:!0},{cd:"37",classCd:"",fullNm:"MPV",isSelected:!0},{cd:"38",classCd:"",fullNm:"PDW",isSelected:!0},{cd:"39",classCd:"",fullNm:"ESR",isSelected:!0},{cd:"40",classCd:"",fullNm:"LUC",isSelected:!0}],ct=[{cd:"01",classCd:"diff",fullNm:"WBC Diff. Count",isSelected:!0},{cd:"02",classCd:"seg",fullNm:"Seg.-neutrophils",isSelected:!0},{cd:"03",classCd:"band",fullNm:"Band-neutrophils",isSelected:!0},{cd:"04",classCd:"",fullNm:"Lymphocytes",isSelected:!0},{cd:"05",classCd:"",fullNm:"Monocytes",isSelected:!0},{cd:"06",classCd:"",fullNm:"Eosinophils",isSelected:!0},{cd:"07",classCd:"",fullNm:"Basophils",isSelected:!0},{cd:"08",classCd:"",fullNm:"Metamyelocytes",isSelected:!0},{cd:"09",classCd:"",fullNm:"Myelocytes",isSelected:!0},{cd:"10",classCd:"",fullNm:"Promyelocytes",isSelected:!0},{cd:"11",classCd:"",fullNm:"Blasts",isSelected:!0},{cd:"12",classCd:"",fullNm:"Immature cells",isSelected:!0},{cd:"13",classCd:"",fullNm:"Atypical cells",isSelected:!0},{cd:"14",classCd:"",fullNm:"Atypical lymphocyte",isSelected:!0},{cd:"15",classCd:"",fullNm:"Activated lymphocyte",isSelected:!0},{cd:"16",classCd:"",fullNm:"Prolymphocytes",isSelected:!0},{cd:"17",classCd:"",fullNm:"Promonocytes",isSelected:!0},{cd:"18",classCd:"",fullNm:"Plasma cells",isSelected:!0},{cd:"19",classCd:"",fullNm:"Nucleated RBC",isSelected:!0},{cd:"20",classCd:"",fullNm:"Others",isSelected:!0},{cd:"21",classCd:"",fullNm:"Atypical Lymphoid cells",isSelected:!0},{cd:"22",classCd:"",fullNm:"Leukemic cells",isSelected:!0},{cd:"23",classCd:"",fullNm:"Abnormal lymphocyte",isSelected:!0},{cd:"24",classCd:"",fullNm:"Reactive lymphocyte",isSelected:!0},{cd:"25",classCd:"",fullNm:"Plasmacytoid lymphocyte",isSelected:!0},{cd:"26",classCd:"",fullNm:"ANC calc",isSelected:!0},{cd:"27",classCd:"",fullNm:"WBC",isSelected:!0},{cd:"28",classCd:"",fullNm:"RBC",isSelected:!0},{cd:"29",classCd:"",fullNm:"HGB",isSelected:!0},{cd:"30",classCd:"",fullNm:"HCT",isSelected:!0},{cd:"31",classCd:"",fullNm:"MCV",isSelected:!0},{cd:"32",classCd:"",fullNm:"MCH",isSelected:!0},{cd:"33",classCd:"",fullNm:"MCHC",isSelected:!0},{cd:"34",classCd:"",fullNm:"RDW",isSelected:!0},{cd:"35",classCd:"",fullNm:"Platelet",isSelected:!0},{cd:"36",classCd:"",fullNm:"PCT",isSelected:!0},{cd:"37",classCd:"",fullNm:"MPV",isSelected:!0},{cd:"38",classCd:"",fullNm:"PDW",isSelected:!0},{cd:"39",classCd:"",fullNm:"ESR",isSelected:!0}],dt={rbcClassList:[{categoryId:"01",categoryNm:"Size",classInfo:[{classId:"01",classNm:"Normal",degree:"0"},{classId:"02",classNm:"Macrocyte",degree:"0"},{classId:"03",classNm:"Microcyte",degree:"0"},{classId:"04",classNm:"Anisocytosis",degree:"0"}]},{categoryId:"02",categoryNm:"Chromia",classInfo:[{classId:"01",classNm:"Normal",degree:"0"},{classId:"02",classNm:"Hyperchromic",degree:"0"},{classId:"03",classNm:"Hypochromic",degree:"0"},{classId:"04",classNm:"Polychromia",degree:"0"}]},{categoryId:"03",categoryNm:"Shape",classInfo:[{classId:"01",classNm:"Normal",degree:"0"},{classId:"02",classNm:"Poikilocytosis",degree:"0"},{classId:"03",classNm:"Target Cell",degree:"0"},{classId:"04",classNm:"Burr Cell",degree:"0"},{classId:"05",classNm:"Acanthocyte",degree:"0"},{classId:"06",classNm:"Ovalocyte",degree:"0"},{classId:"07",classNm:"Schistocyte",degree:"0"},{classId:"08",classNm:"Sickle Cell",degree:"0"},{classId:"09",classNm:"Stomatocyte",degree:"0"},{classId:"10",classNm:"Tear Drop Cell",degree:"0"},{classId:"11",classNm:"Spherocyte",degree:"0"}]},{categoryId:"05",categoryNm:"Inclusion Body",classInfo:[{classId:"01",classNm:"Howell-Jolly Body",degree:"0"},{classId:"02",classNm:"Basophilic Stippling",degree:"0"}]}],malariaCount:0,currentRbcResults:null},mt=[{categoryId:"01",classId:"02",degree1:"5",degree2:"10",degree3:"20"},{categoryId:"01",classId:"03",degree1:"5",degree2:"10",degree3:"20"},{categoryId:"01",classId:"04",degree1:"5",degree2:"10",degree3:"20"},{categoryId:"02",classId:"02",degree1:"5",degree2:"10",degree3:"20"},{categoryId:"02",classId:"03",degree1:"5",degree2:"10",degree3:"20"},{categoryId:"02",classId:"04",degree1:"5",degree2:"10",degree3:"20"},{categoryId:"03",classId:"03",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"03",classId:"04",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"03",classId:"05",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"03",classId:"06",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"03",classId:"07",degree1:"0.5",degree2:"1",degree3:"2"},{categoryId:"03",classId:"08",degree1:"0.5",degree2:"1",degree3:"2"},{categoryId:"03",classId:"09",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"03",classId:"10",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"03",classId:"11",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"05",classId:"01",degree1:"1",degree2:"2",degree3:"3"},{categoryId:"05",classId:"02",degree1:"2.5",degree2:"5",degree3:"20"}],vt=[{id:"01",abbreviation:"NE",fullNm:"Neutrophil",key:"",orderIdx:1},{id:"02",abbreviation:"ME",fullNm:"Metamyelocyte",key:"",orderIdx:4},{id:"03",abbreviation:"MY",fullNm:"Myelocyte",key:"",orderIdx:5},{id:"04",abbreviation:"PR",fullNm:"Promyelocyte",key:"",orderIdx:6},{id:"05",abbreviation:"LY",fullNm:"Lymphocyte",key:"",orderIdx:7},{id:"07",abbreviation:"MO",fullNm:"Monocyte",key:"",orderIdx:10},{id:"08",abbreviation:"EO",fullNm:"Eosinophil",key:"",orderIdx:11},{id:"09",abbreviation:"BA",fullNm:"Basophil",key:"",orderIdx:12},{id:"10",abbreviation:"BL",fullNm:"Blast",key:"",orderIdx:13},{id:"11",abbreviation:"PC",fullNm:"Plasma cell",key:"",orderIdx:14},{id:"12",abbreviation:"NR",fullNm:"nRBC",key:"",orderIdx:15},{id:"13",abbreviation:"GP",fullNm:"Giant platelet",key:"",orderIdx:16},{id:"14",abbreviation:"PA",fullNm:"Platelet aggregation",key:"",orderIdx:17},{id:"15",abbreviation:"AR",fullNm:"Artifact(Smudge)",key:"",orderIdx:19},{id:"16",abbreviation:"MA",fullNm:"Malaria",key:"",orderIdx:18},{id:"61",abbreviation:"LR",fullNm:"Reactive lymphocyte",key:"",orderIdx:8},{id:"62",abbreviation:"LA",fullNm:"Abnormal lymphocyte",key:"",orderIdx:9},{id:"71",abbreviation:"NS",fullNm:"Neutrophil-Segmented",key:"",orderIdx:2},{id:"72",abbreviation:"NB",fullNm:"Neutrophil-Band",key:"",orderIdx:3}],pt=[{id:"01",abbreviation:"NE",fullNm:"Neutrophil",key:"",orderIdx:1},{id:"71",abbreviation:"NS",fullNm:"Neutrophil-Segmented",key:"",orderIdx:2},{id:"72",abbreviation:"NB",fullNm:"Neutrophil-Band",key:"",orderIdx:3},{id:"02",abbreviation:"ME",fullNm:"Metamyelocyte",key:"",orderIdx:4},{id:"03",abbreviation:"MY",fullNm:"Myelocyte",key:"",orderIdx:5},{id:"04",abbreviation:"PR",fullNm:"Promyelocyte",key:"",orderIdx:6},{id:"05",abbreviation:"LY",fullNm:"Lymphocyte",key:"",orderIdx:7},{id:"06",abbreviation:"LA",fullNm:"Abnormal lymphocyte",key:"",orderIdx:8},{id:"07",abbreviation:"MO",fullNm:"Monocyte",key:"",orderIdx:9},{id:"08",abbreviation:"EO",fullNm:"Eosinophil",key:"",orderIdx:10},{id:"09",abbreviation:"BA",fullNm:"Basophil",key:"",orderIdx:11},{id:"10",abbreviation:"BL",fullNm:"Blast",key:"",orderIdx:12},{id:"11",abbreviation:"PC",fullNm:"Plasma cell",key:"",orderIdx:13},{id:"12",abbreviation:"ON",fullNm:"Orthochromic Normoblast",key:"",orderIdx:14},{id:"13",abbreviation:"PN",fullNm:"Polychromic Normoblast",key:"",orderIdx:15},{id:"14",abbreviation:"BN",fullNm:"Basophilic Normoblast",key:"",orderIdx:16},{id:"15",abbreviation:"PE",fullNm:"Proerythroblast",key:"",orderIdx:17},{id:"16",abbreviation:"HC",fullNm:"Histiocyte",key:"",orderIdx:18},{id:"17",abbreviation:"OT",fullNm:"Others",key:"",orderIdx:19}],gt=[{id:"01",abbreviation:"NE",fullNm:"Neutrophil",key:"",orderIdx:1},{id:"02",abbreviation:"LY",fullNm:"Lymphocyte",key:"",orderIdx:2},{id:"03",abbreviation:"MO",fullNm:"Monocyte",key:"",orderIdx:3},{id:"04",abbreviation:"EO",fullNm:"Eosinophil",key:"",orderIdx:4},{id:"05",abbreviation:"BA",fullNm:"Basophil",key:"",orderIdx:5},{id:"06",abbreviation:"BL",fullNm:"Blast",key:"",orderIdx:6},{id:"07",abbreviation:"PC",fullNm:"Plasma cell",key:"",orderIdx:7},{id:"08",abbreviation:"NR",fullNm:"NRBC",key:"",orderIdx:8},{id:"09",abbreviation:"AR",fullNm:"Artifact(Smudge)",key:"",orderIdx:9},{id:"10",abbreviation:"MC",fullNm:"Malignant cell",key:"",orderIdx:10},{id:"11",abbreviation:"MT",fullNm:"Mesothelial cell",key:"",orderIdx:11}],It=[{abbreviation:"NE",fullNm:"Neutrophil",classId:"01",min:42,max:85,unit:"%"},{abbreviation:"ME",fullNm:"Metamyelocyte",classId:"02",min:0,max:100,unit:"%"},{abbreviation:"MY",fullNm:"Myelocyte",classId:"03",min:0,max:100,unit:"%"},{abbreviation:"PR",fullNm:"Promyelocyte",classId:"04",min:0,max:100,unit:"%"},{abbreviation:"LY",fullNm:"Lymphocyte",classId:"05",min:11,max:49,unit:"%"},{abbreviation:"MO",fullNm:"Monocyte",classId:"07",min:0,max:9,unit:"%"},{abbreviation:"EO",fullNm:"Eosinophil",classId:"08",min:0,max:6,unit:"%"},{abbreviation:"BA",fullNm:"Basophil",classId:"09",min:0,max:2,unit:"%"},{abbreviation:"BL",fullNm:"Blast",classId:"10",min:0,max:100,unit:"%"},{abbreviation:"PC",fullNm:"Plasma cell",classId:"11",min:0,max:100,unit:"%"},{abbreviation:"NR",fullNm:"nRBC",classId:"12",min:0,max:100,unit:"Count"},{abbreviation:"GP",fullNm:"Giant platelet",classId:"13",min:0,max:100,unit:"Count"},{abbreviation:"PA",fullNm:"Platelet aggregation",classId:"14",min:0,max:100,unit:"Count"},{abbreviation:"AR",fullNm:"Artifact(Smudge)",classId:"15",min:0,max:100,unit:"Count"},{abbreviation:"MA",fullNm:"Malaria",classId:"16",min:0,max:100,unit:"Count"},{abbreviation:"LR",fullNm:"Reactive lymphocyte",classId:"61",min:0,max:100,unit:"%"},{abbreviation:"LA",fullNm:"Abnormal lymphocyte",classId:"62",min:0,max:100,unit:"%"}],ft=[{fullNm:"Neutrophil",classId:"01",checked:!1},{fullNm:"Neutrophil-Segmented",classId:"71",checked:!1},{fullNm:"Neutrophil-Band",classId:"72",checked:!1},{fullNm:"Metamyelocyte",classId:"02",checked:!1},{fullNm:"Myelocyte",classId:"03",checked:!1},{fullNm:"Promyelocyte",classId:"04",checked:!1},{fullNm:"Lymphocyte",classId:"05",checked:!1},{fullNm:"Reactive lymphocyte",classId:"61",checked:!1},{fullNm:"Abnormal lymphocyte",classId:"62",checked:!1},{fullNm:"Monocyte",classId:"07",checked:!1},{fullNm:"Eosinophil",classId:"08",checked:!1},{fullNm:"Basophil",classId:"09",checked:!1},{fullNm:"Blast",classId:"10",checked:!1},{fullNm:"Plasma cell",classId:"11",checked:!1},{fullNm:"nRBC",classId:"12",checked:!1},{fullNm:"Giant platelet",classId:"13",checked:!1},{fullNm:"Platelet aggregation",classId:"14",checked:!1},{fullNm:"Malaria",classId:"16",checked:!1},{fullNm:"Artifact(Smudge)",classId:"15",checked:!1},{fullNm:"rbcPrintModel",classId:"99999",checked:!1}],bt=[{fullNm:"Neutrophil",classId:"01",checked:!0},{fullNm:"Neutrophil-Segmented",classId:"71",checked:!0},{fullNm:"Neutrophil-Band",classId:"72",checked:!0},{fullNm:"Metamyelocyte",classId:"02",checked:!0},{fullNm:"Myelocyte",classId:"03",checked:!0},{fullNm:"Promyelocyte",classId:"04",checked:!0},{fullNm:"Lymphocyte",classId:"05",checked:!0},{fullNm:"Abnormal lymphocyte",classId:"06",checked:!0},{fullNm:"Monocyte",classId:"07",checked:!0},{fullNm:"Eosinophil",classId:"08",checked:!0},{fullNm:"Basophil",classId:"09",checked:!0},{fullNm:"Blast",classId:"10",checked:!0},{fullNm:"Plasma cell",classId:"11",checked:!0},{fullNm:"Orthochromic Normoblast",classId:"12",checked:!0},{fullNm:"Polychromic Normoblast",classId:"13",checked:!0},{fullNm:"Basophilic Normoblast",classId:"14",checked:!0},{fullNm:"Proerythroblast",classId:"15",checked:!0},{fullNm:"Histiocyte",classId:"16",checked:!0},{fullNm:"Others",classId:"17",checked:!0}],yt=[{fullNm:"Neutrophil",classId:"01",key:"NE"},{fullNm:"Neutrophil-Segmented",classId:"71",key:"NS"},{fullNm:"Neutrophil-Band",classId:"72",key:"NB"},{fullNm:"Metamyelocyte",classId:"02",key:"ME"},{fullNm:"Myelocyte",classId:"03",key:"MY"},{fullNm:"Promyelocyte",classId:"04",key:"PR"},{fullNm:"Lymphocyte",classId:"05",key:"LY"},{fullNm:"Reactive lymphocyte",classId:"61",key:"LR"},{fullNm:"Abnormal lymphocyte",classId:"62",key:"LA"},{fullNm:"Monocyte",classId:"07",key:"MO"},{fullNm:"Eosinophil",classId:"08",key:"EO"},{fullNm:"Basophil",classId:"09",key:"BA"},{fullNm:"Blast",classId:"10",key:"BL"},{fullNm:"Plasma cell",classId:"11",key:"PC"},{fullNm:"nRBC",classId:"12",key:"NR"},{fullNm:"Giant platelet",classId:"13",key:"GP"},{fullNm:"Platelet aggregation",classId:"14",key:"PA"},{fullNm:"Malaria",classId:"16",key:"MA"},{fullNm:"Artifact(Smudge)",classId:"15",key:"AR"},{fullNm:"rbcPrintModel",classId:"99999",key:""}],Ct=[{categoryId:"01",categoryNm:"Size",classId:"01",fullNm:"Normal",key:"SIZN"},{categoryId:"01",categoryNm:"Size",classId:"02",fullNm:"Macrocyte",key:"SIZMA"},{categoryId:"01",categoryNm:"Size",classId:"03",fullNm:"Microcyte",key:"SIZMI"},{categoryId:"01",categoryNm:"Size",classId:"04",fullNm:"Anisocytosis",key:""},{categoryId:"02",categoryNm:"Chromia",classId:"01",fullNm:"Normal",key:"CHRN"},{categoryId:"02",categoryNm:"Chromia",classId:"02",fullNm:"Hyperchromic",key:"CHRHYPER"},{categoryId:"02",categoryNm:"Chromia",classId:"03",fullNm:"Hypochromic",key:"CHRHYPO"},{categoryId:"02",categoryNm:"Chromia",classId:"04",fullNm:"Polychromia",key:""},{categoryId:"03",categoryNm:"Shape",classId:"01",fullNm:"Normal",key:"SHAPN"},{categoryId:"03",categoryNm:"Shape",classId:"02",fullNm:"Poikilocytosis",key:"SHAPPO"},{categoryId:"03",categoryNm:"Shape",classId:"03",fullNm:"Target Cell",key:""},{categoryId:"03",categoryNm:"Shape",classId:"04",fullNm:"Burr Cell",key:""},{categoryId:"03",categoryNm:"Shape",classId:"05",fullNm:"Acanthocyte",key:""},{categoryId:"03",categoryNm:"Shape",classId:"06",fullNm:"Ovalocyte",key:""},{categoryId:"03",categoryNm:"Shape",classId:"07",fullNm:"Schistocyte",key:""},{categoryId:"03",categoryNm:"Shape",classId:"08",fullNm:"Sickle Cell",key:""},{categoryId:"03",categoryNm:"Shape",classId:"09",fullNm:"Stomatocyte",key:""},{categoryId:"03",categoryNm:"Shape",classId:"10",fullNm:"Tear Drop Cell",key:""},{categoryId:"03",categoryNm:"Shape",classId:"11",fullNm:"Spherocyte",key:""},{categoryId:"05",categoryNm:"Inclusion Body",classId:"01",fullNm:"Howell-Jolly Body",key:""},{categoryId:"05",categoryNm:"Inclusion Body",classId:"02",fullNm:"Basophilic Stippling",key:""}],ht=[{minGPCount:0,minPACount:0}],kt=[{min:0,max:700,wbcTargetCount:50},{min:701,max:1e3,wbcTargetCount:100},{min:1001,max:2e3,wbcTargetCount:150},{min:2001,max:3e3,wbcTargetCount:250}],St=[{lisHotKey:"",lisFilePath:"",cbcFilePath:""}],Nt={barcodeDirName:"00_Barcode_Image"},_t={howellJollyDirName:"19_Howell_jolly",malariaDirName:"43_InclusionBody_Malaria",noMalariaDirName:"44_InclusionBody_NoMalaria",rbcClassDirName:"03_RBC_Classification",rbcImageDirName:"02_RBC_Image",barcodeDirName:"00_Barcode_Image",wbcClassDirName:"01_WBC_Classification",bfDirName:"02_LowPower_Image",bfHighDirName:"03_HighPower_Image",bfClassDirName:"05_BF_Classification",iaRootPath:"D:/ia_proc"},Et={class:"mb1"};var Lt={__name:"Confirm",props:["isVisible","type","message"],emits:["okConfirm"],setup(e,{emit:t}){const a=e,l=(0,s.EW)((()=>`confirm-${a.type}`)),o=t,i=()=>{o("hide")},u=()=>{o("okConfirm")};return(t,a)=>e.isVisible?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,n.C4)(["alert",l.value])},[(0,s.Lk)("p",Et,(0,n.v_)(e.message),1),(0,s.Lk)("button",{class:"alertButton",onClick:u},"OK"),(0,s.Lk)("button",{class:"alertCloseButton",onClick:i},"CLOSE")],2)):(0,s.Q3)("",!0)}};const Rt=Lt;var wt=Rt;const Tt=Z(),Pt=async e=>Tt.httpPost(ee.device.getDeviceInfo.create,e),At=async()=>Tt.httpGet(ee.device.getDeviceInfo.get),Dt=async()=>Tt.httpGet(ee.device.getDeviceInfo.ip),Mt={class:"execute"},xt={class:"startDiv"},Kt=["disabled"],Ot=["value"],Bt={class:"stopDiv"},Ut=["disabled"],Wt=["value"],Xt=["disabled"],Ft=["value"],$t=(0,s.Lk)("span",null," INITIALIZING ",-1);var Gt=(0,s.pM)({__name:"execute",setup(e,{emit:t}){const a=(0,r.Pj)(),i=(0,s.EW)((()=>a.state.embeddedStatusModule)),u=(0,s.EW)((()=>a.state.userModule)),c=(0,o.KR)("pb"),d=(0,o.KR)([]),m=(0,s.EW)((()=>a.state.commonModule)),v=(0,s.EW)((()=>a.state.executeModule)),p=(0,o.KR)(m.value?.isPause),g=(0,o.KR)(v.value?.isRunningState),I=(0,o.KR)(i.value?.userStop),f=(0,o.KR)(i.value?.isRecoveryRun),b=(0,o.KR)(i.value?.isInit),y=(0,o.KR)(""),C=(0,o.KR)(),h=(0,o.KR)(),k=(0,o.KR)(),S=(0,o.KR)([]),N=(0,s.EW)((()=>a.state.commonModule)),_=(0,o.KR)(!1),E=(0,o.KR)(""),L=(0,o.KR)(!1),R=(0,o.KR)(""),w=(0,o.KR)(""),T=(0,o.KR)([]),P=t,A=(0,o.KR)(!1),D=(0,o.KR)(""),M=(0,o.KR)(""),x=(0,o.KR)(""),K=(0,o.KR)();(0,s.wB)(u.value,(async(e,t)=>{""!==e.id&&(y.value=e.id,await X())})),(0,s.sV)((async()=>{await X()}));const X=async()=>{c.value="bm"===window.PROJECT_TYPE?"bm":"pb",T.value="bm"===window.PROJECT_TYPE?at:O,d.value="bm"===window.PROJECT_TYPE?U:B,await(0,s.dY)(),await z(),await ee(),await Z(),J(),g.value?(E.value="isRunning",_.value=!1):(E.value="start",_.value=!0)};(0,s.wB)(N.value,(e=>{""===e.loginSetData&&(X(),a.dispatch("commonModule/setCommonInfo",{loginSetData:"nn"}))})),(0,s.wB)([m.value],(async e=>{await(0,s.dY)();const[t]=e,{isRunningState:a,bfSelectFiles:l}=t||{};g.value=a,S.value=l,g.value?(E.value="isRunning",_.value=!1):_.value=!0})),(0,s.wB)([i.value,v.value],(async e=>{const[t,a]=e;await(0,s.dY)();const{isPause:l,userStop:o,isRecoveryRun:n,isInit:i}=t||{};p.value=l,I.value=o,f.value=n,b.value=i,p.value?E.value="isPause":I.value&&!f.value?E.value="onRecover":"N"===b.value||""===b.value?E.value="isInit":E.value="start"}));const F=async(e,t)=>{Je.publish("childEmitSocketData",t)},G=e=>{if("start"===e){if(p.value)return Q().embedStatus.restart.bfSelectFiles=S.value,Q().embedStatus.restart.reqUserId=y.value,void F("SEND_DATA",Q().embedStatus.restart);if(g.value)return void H($.IDS_ERROR_ALREADY_RUNNING);if(I.value)return M.value=$.IDS_RECOVER_GRIPPER_CONDITION,void(A.value=!0);const e=sessionStorage.getItem("rbcPositionMargin"),t=sessionStorage.getItem("wbcPositionMargin"),l=sessionStorage.getItem("pltPositionMargin");let s=Q().embedStatus.startAction;if(Object.assign(s,{testType:C.value,wbcCount:K.value||h.value,stitchCount:k.value,reqUserId:y.value,rbcPositionMargin:e||"0",wbcPositionMargin:t||"0",pltPositionMargin:l||"0"}),"bm"===window.PROJECT_TYPE&&(s={jobCmd:"START",reqUserId:y.value,reqDttm:Q().embedStatus.startAction.reqDttm,orderInfo:[{orderId:"1",cassetNo:"",slotNo:"1",bmNo:"1",patientId:"",patientNm:"",age:"1",gender:"01",testType:"02",stainType:"01",userInputStainType:"",analysisType:C.value,bmSamplingSide:"01",cellCount:h.value,department:"s",stitchCount:k.value}],runningMode:"00",positionMargin:"0"}),"Y"===b.value){F("SEND_DATA",s);const e={startEmbedded:!0};a.dispatch("commonModule/setCommonInfo",e)}}else{if(!g.value)return void H($.IDS_ERROR_STOP_PROCESS);a.dispatch("embeddedStatusModule/setEmbeddedStatusInfo",{userStop:!0}),Q().embedStatus.stop.reqUserId=y.value,F("SEND_DATA",Q().embedStatus.stop)}},H=e=>{L.value=!0,R.value="success",w.value=e},j=()=>{L.value=!1},V=()=>{A.value=!1},Y=()=>{A.value=!1,Q().embedStatus.recovery.reqUserId=y.value,F("SEND_DATA",Q().embedStatus.recovery)},q=()=>{"Y"===b.value||"isRunning"===E.value||g.value?H($.alreadyInitialized):(Q().embedStatus.init.reqUserId=y.value,F("SEND_DATA",Q().embedStatus.init),P("initDataChangeText",!0))},J=()=>{const e={...i.value},t={...m.value};b.value=e.isInit,p.value=e.isPause,I.value=e.userStop,f.value=e.isRecoveryRun,g.value=t.isRunningState,_.value=("N"===b.value||""===b.value)&&!g.value},z=async()=>{try{const e=await le();if(e&&e?.data){const t=e.data;if(C.value=t.analysisType,"bm"===window.PROJECT_TYPE)h.value=t.diffCellAnalyzingCount;else switch(C.value){case"01":h.value=t.diffCellAnalyzingCount;break;case"04":h.value=t.pbsCellAnalyzingCount;break;default:h.value=t.bfCellAnalyzingCount}k.value=t.stitchCount}}catch(e){console.log(e)}},Z=async()=>{if("pb"===window.PROJECT_TYPE&&"0011"===x.value)try{const e=await Oe();if(e&&e.data){const t=e.data;if(t&&t?.length>0){const e=t.filter((e=>e.min<=h.value&&h.value<=e.max))[0];e.wbcTargetCount&&(K.value=e.wbcTargetCount)}}}catch(e){console.log(e)}},ee=async()=>{try{const e=await At();x.value=e.data.siteCd}catch(e){console.log(e)}};return(e,t)=>{const a=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Mt,[(0,s.Lk)("div",xt,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>C.value=e),disabled:g.value},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(T.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,Ot)))),128))],8,Kt),[[l.u1,C.value]]),_.value?((0,s.uX)(),(0,s.CE)("p",{key:0,class:"startStopP",onClick:t[1]||(t[1]=e=>"Y"===b.value&&G("start"))},[(0,s.bF)(a,{icon:["fas","circle-play"],class:(0,n.C4)({startBtn:!0,[E.value]:!0})},null,8,["class"])])):((0,s.uX)(),(0,s.CE)("p",{key:1,class:"startStopP",onClick:t[2]||(t[2]=e=>G("stop"))},[(0,s.bF)(a,{icon:["fas","circle-stop"],class:"stopBtn"})]))]),(0,s.Lk)("div",Bt,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>h.value=e),disabled:g.value},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,Wt)))),128))],8,Ut),[[l.u1,h.value]]),(0,s.bo)((0,s.Lk)("select",{class:"stopDivSelect","onUpdate:modelValue":t[4]||(t[4]=e=>k.value=e),disabled:g.value},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(W),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,Ft)))),128))],8,Xt),[[l.u1,k.value]]),(0,s.Lk)("div",{class:(0,n.C4)(["initBtn",{isInitDisabled:"Y"===b.value}]),onClick:q},[(0,s.bF)(a,{icon:["fas","rotate-right"],style:{"font-size":"0.9rem"},class:(0,n.C4)({disabled:"N"!==b.value})},null,8,["class"]),$t],2)])]),L.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":L.value,type:R.value,message:w.value,onHide:j,"onUpdate:hideAlert":j},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0),A.value?((0,s.uX)(),(0,s.Wv)(wt,{key:1,"is-visible":A.value,type:D.value,message:M.value,onHide:V,onOkConfirm:Y},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const Ht=Gt;var jt=Ht;const Vt=(0,s.Lk)("h3",{class:"titleText"},[(0,s.Lk)("span",{class:"greenColor"},"W"),(0,s.eW)("orking "),(0,s.Lk)("span",{class:"greenColor"},"V"),(0,s.eW)("iew ")],-1),Yt={class:"circular-progress-bar mt2"},qt={class:"progress-ring",width:"120",height:"120"},Jt=["cx","cy","r","stroke-width"],Qt=["cx","cy","r","stroke-width","stroke","stroke-dasharray","stroke-dashoffset"],zt={class:"slideTime"},Zt={class:"slideTime1 mt2"},ea={class:"slideCardWrap"},ta={class:"slideContent"},aa=(0,s.Lk)("p",{class:"mt1"},"INPUT",-1),la={class:"slideContent"},sa=(0,s.Lk)("p",{class:"mt1"},"OUTPUT",-1);var oa=(0,s.pM)({__name:"workingView",props:["parsedData","initValData"],setup(e){const t=(0,r.Pj)(),a=(0,s.EW)((()=>t.state.runningInfoModule)),l=(0,s.EW)((()=>t.state.commonModule)),i=(0,s.EW)((()=>t.state.timeModule)),u=e,c=(0,o.KR)(0),d=(0,o.KR)(120),m=(0,o.KR)(6),v=(0,o.KR)("#00c2ff"),p=(0,o.KR)(d.value/2),g=(0,o.KR)(2*Math.PI*(p.value-m.value/2)),I=(0,o.KR)(g.value),f=(0,o.KR)(0),b=(0,o.KR)(0),y=(0,o.KR)(""),C=(0,o.KR)(""),h=(0,o.KR)("");let k=null,S=null;const N=(0,o.KR)(X);let _=(0,o.KR)(0),E=(0,o.KR)(0);const L=(0,o.KR)(!1);let R=(0,o.KR)(null);const w=(0,o.KR)(!1);(0,s.wB)((()=>t.state.embeddedStatusModule),(e=>{const t=e.sysInfo;y.value=e.sysInfo.eqStatCd,l.value.isRunningState?(T(t.iCasStat,N.value.input),T(t.oCasStat,N.value.output)):(M(),D());const a=/[1,2,9]/g,s=String(t?.iCasStat);"999999999999"!==String(t?.iCasStat)&&(s.search(a)<0||"111111111111"===t?.oCasStat)&&(T(t.iCasStat,N.value.input),T(t.oCasStat,N.value.output))}),{deep:!0}),(0,s.wB)([l.value],(async e=>{const t=JSON.parse(JSON.stringify(e));t[0].startEmbedded?""===t[0].runningSlotId&&t[0].startEmbedded&&A():D(),t[0].isRunningState||(M(),D())})),(0,s.wB)([a.value],(e=>{const t=JSON.parse(JSON.stringify(e));if("start"===t[0].changeSlideState?.changeSlide.value&&!0===t[0].slideBooleanState?.slideIs.value?P():"stop"===t[0].changeSlideState?.changeSlide.value&&null!==k&&(clearInterval(k),k=null),"afterChange"===t[0].changeSlideState?.changeSlide.value&&(D(),P()),t[0].runningInfo){const e=t[0].runningInfo.slotInfo;if(e&&"03"===e?.stateCd){f.value=Number(e.wbcCount),b.value=Number(e.maxWbcCount),f.value>b.value&&(f.value=b.value);const t=f.value/b.value*100;I.value=g.value*(1-t/100)}}})),(0,s.wB)((()=>y.value),(e=>{"05"===e?R.value=setInterval((()=>{L.value=!L.value}),1e3):(L.value=!1,clearInterval(R.value))})),(0,s.wB)((()=>u.initValData),(e=>{e&&(y.value="05")})),(0,s.sV)((()=>{y.value="01",N.value.input.forEach((e=>{e.slotState="0"})),N.value.output.forEach((e=>{e.slotState="0"})),w.value="bm"===window.PROJECT_TYPE}));const T=(e,t)=>{t.forEach(((t,a)=>{t.slotState=e.charAt(a)}))},P=()=>{k||(k=setInterval((()=>{l.value.isRunningState&&(E.value+=1,c.value=E.value%60,sessionStorage.setItem("elapsedTimeCount",String(E.value)),t.dispatch("timeModule/setTimeInfo",{slideTime:Y(E.value)}))}),1e3)),(0,s.xo)((()=>{k&&(clearInterval(k),k=null)}))},A=()=>{S||(S=setInterval((()=>{l.value.isRunningState&&(_.value+=1,sessionStorage.setItem("totalElapsedTimeCount",String(_.value)),t.dispatch("timeModule/setTimeInfo",{totalSlideTime:Y(_.value)}))}),1e3)),(0,s.xo)((()=>{S&&(clearInterval(S),S=null)}))},D=()=>{clearInterval(k),k=null,E.value=0,C.value=Y(0),sessionStorage.removeItem("elapsedTimeCount"),t.dispatch("timeModule/setTimeInfo",{slideTime:"00:00:00"})},M=()=>{clearInterval(S),S=null,_.value=0,h.value=Y(0),sessionStorage.removeItem("totalElapsedTimeCount"),t.dispatch("timeModule/setTimeInfo",{totalSlideTime:"00:00:00"})},x=()=>{switch(y.value){case"01":return"IDLE";case"02":return"READY";case"03":return"ERROR";case"04":return"RUNNING";case"05":return"INITIALIZATION";default:return"UNKNOWN"}},K=(e,t)=>{if("input"===t)switch(e){case"0":return"class-for-state-0";case"1":return"class-for-state-1";case"2":return"class-for-state-2";case"3":return"class-for-state-3";case"4":return"class-for-state-4";default:return""}else switch(e){case"0":return"out-for-state-0";case"1":return"out-for-state-1";default:return"outClassDefault"}};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[Vt,(0,s.Lk)("div",null,[(0,s.Lk)("p",{class:(0,n.C4)({blinkColor:L.value})},(0,n.v_)(x()),3),(0,s.Lk)("p",null,(0,n.v_)(f.value),1),(0,s.Lk)("div",Yt,[((0,s.uX)(),(0,s.CE)("svg",qt,[(0,s.Lk)("circle",{cx:p.value,cy:p.value,r:p.value-m.value/2,"stroke-width":m.value,stroke:"#ccc",fill:"none"},null,8,Jt),(0,s.Lk)("circle",{cx:p.value,cy:p.value,r:p.value-m.value/2,"stroke-width":m.value,stroke:v.value,fill:"none","stroke-dasharray":g.value,"stroke-dashoffset":I.value},null,8,Qt)])),(0,s.Lk)("p",zt,(0,n.v_)(i.value.slideTime),1)]),(0,s.Lk)("p",Zt,"Number of "+(0,n.v_)(w.value?"BMs":"WBCs"),1),(0,s.Lk)("p",null,(0,n.v_)(i.value.totalSlideTime),1)]),(0,s.Lk)("div",ea,[(0,s.Lk)("ul",ta,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(N.value.input,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.slotNo,class:(0,n.C4)(K(e.slotState,"input"))},null,2)))),128)),aa]),(0,s.Lk)("ul",la,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(N.value.output,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.slotNo,class:(0,n.C4)(K(e.slotState,"output"))},null,2)))),128)),sa])])]))}});const na=oa;var ia=na;const ua={class:"orderListTableContainer"},ra=(0,s.Lk)("h3",{class:"titleText"},[(0,s.Lk)("span",{class:"greenColor"},"O"),(0,s.eW)("rder "),(0,s.Lk)("span",{class:"greenColor"},"L"),(0,s.eW)("ist")],-1),ca={class:"orderListTable"},da=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Barcode ID"),(0,s.Lk)("th",null,"Patient Name"),(0,s.Lk)("th",null,"Order Date"),(0,s.Lk)("th",null,"State")])],-1),ma={key:0},va={key:1},pa=(0,s.Lk)("tr",null,[(0,s.Lk)("td",{colspan:"4"},"Data is empty.")],-1),ga=[pa];var Ia=(0,s.pM)({__name:"orderList",props:["parsedData","startStatus","pb100aCassette"],setup(e){const t=e,a=(0,o.KR)([]);(0,s.wB)((()=>t.parsedData),(e=>{l(e)}),{deep:!0}),(0,s.wB)((()=>t.pb100aCassette),(e=>{"reset"===e&&(a.value=[],console.log("pb100aCassette 초기화",a.value))}),{deep:!0}),(0,s.wB)((()=>t.startStatus),(e=>{!0===e&&(a.value=[])}),{deep:!0});const l=async e=>{const t=e;if("RUNNING_INFO"===t.jobCmd){const e=t?.slotInfo;if(e){const t=e.barcodeNo,l=a.value.findIndex((e=>e.barcodeId===t));-1===l&&""!==t?a.value.push({barcodeId:t,patientName:e.patientNm,orderDate:p(e.orderDttm),analyzedDttm:p(e.analyzedDttm),state:e.stateCd}):a.value[l]={barcodeId:t,patientName:e.patientNm,orderDate:p(e.orderDttm),analyzedDttm:p(e.analyzedDttm),state:e.stateCd}}}};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",ua,[ra,(0,s.Lk)("table",ca,[da,a.value.length>0?((0,s.uX)(),(0,s.CE)("tbody",ma,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,((e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:t},[(0,s.Lk)("td",null,(0,n.v_)(e?.barcodeId),1),(0,s.Lk)("td",null,(0,n.v_)(e?.patientName),1),(0,s.Lk)("td",null,(0,n.v_)(e?.analyzedDttm?(0,o.R1)(V)(e?.analyzedDttm):(0,o.R1)(V)(e?.orderDate)),1),(0,s.Lk)("td",null,(0,n.v_)((0,o.R1)(v)("14",e?.state)),1)])))),128))])):((0,s.uX)(),(0,s.CE)("tbody",va,ga))])]))}});const fa=Ia;var ba=fa;const ya=[{id:"01",abbreviation:"NE",fullNm:"Neutrophil",key:"",orderIdx:1},{id:"71",abbreviation:"NS",fullNm:"Neutrophil-Segmented",key:"",orderIdx:2},{id:"72",abbreviation:"NB",fullNm:"Neutrophil-Band",key:"",orderIdx:3},{id:"02",abbreviation:"ME",fullNm:"Metamyelocyte",key:"",orderIdx:4},{id:"03",abbreviation:"MY",fullNm:"Myelocyte",key:"",orderIdx:5},{id:"04",abbreviation:"PR",fullNm:"Promyelocyte",key:"",orderIdx:6},{id:"05",abbreviation:"LY",fullNm:"Lymphocyte",key:"",orderIdx:7},{id:"61",abbreviation:"LR",fullNm:"Reactive lymphocyte",key:"",orderIdx:8},{id:"62",abbreviation:"LA",fullNm:"Abnormal lymphocyte",key:"",orderIdx:9},{id:"07",abbreviation:"MO",fullNm:"Monocyte",key:"",orderIdx:10},{id:"08",abbreviation:"EO",fullNm:"Eosinophil",key:"",orderIdx:11},{id:"09",abbreviation:"BA",fullNm:"Basophil",key:"",orderIdx:12},{id:"10",abbreviation:"BL",fullNm:"Blast",key:"",orderIdx:13},{id:"11",abbreviation:"PC",fullNm:"Plasma cell",key:"",orderIdx:14},{id:"12",abbreviation:"NR",fullNm:"nRBC",key:"",orderIdx:15},{id:"13",abbreviation:"GP",fullNm:"Giant platelet",key:"",orderIdx:16},{id:"14",abbreviation:"PA",fullNm:"Platelet aggregation",key:"",orderIdx:17},{id:"16",abbreviation:"MA",fullNm:"Malaria",key:"",orderIdx:18},{id:"15",abbreviation:"AR",fullNm:"Artifact",key:"",orderIdx:19},{id:"17",abbreviation:"SM",fullNm:"Smudge",key:"",orderIdx:20}],Ca=[{id:"01",abbreviation:"NE",fullNm:"Neutrophil",key:"",orderIdx:1},{id:"71",abbreviation:"NS",fullNm:"Neutrophil-Segmented",key:"",orderIdx:2},{id:"72",abbreviation:"NB",fullNm:"Neutrophil-Band",key:"",orderIdx:3},{id:"02",abbreviation:"ME",fullNm:"Metamyelocyte",key:"",orderIdx:4},{id:"03",abbreviation:"MY",fullNm:"Myelocyte",key:"",orderIdx:5},{id:"04",abbreviation:"PR",fullNm:"Promyelocyte",key:"",orderIdx:6},{id:"05",abbreviation:"LY",fullNm:"Lymphocyte",orderIdx:7},{id:"06",abbreviation:"LA",fullNm:"Abnormal lymphocyte",orderIdx:8},{id:"07",abbreviation:"MO",fullNm:"Monocyte",orderIdx:9},{id:"08",abbreviation:"EO",fullNm:"Eosinophil",orderIdx:10},{id:"09",abbreviation:"BA",fullNm:"Basophil",orderIdx:11},{id:"10",abbreviation:"BL",fullNm:"Blast",orderIdx:12},{id:"11",abbreviation:"PC",fullNm:"Plasma cell",orderIdx:13},{id:"12",abbreviation:"ON",fullNm:"Orthochromic Normoblast",orderIdx:14},{id:"13",abbreviation:"PN",fullNm:"Polychromic Normoblast",orderIdx:15},{id:"14",abbreviation:"BN",fullNm:"Basophilic Normoblast",orderIdx:16},{id:"15",abbreviation:"PE",fullNm:"Proerythroblast",orderIdx:17},{id:"16",abbreviation:"HC",fullNm:"Histiocyte",orderIdx:18},{id:"17",abbreviation:"OT",fullNm:"Others",orderIdx:19}],ha=[{classId:"01",abbreviation:"NE",fullNm:"Neutrophil",orderIdx:1},{classId:"71",abbreviation:"NS",fullNm:"Neutrophil-Segmented",orderIdx:2},{classId:"72",abbreviation:"NB",fullNm:"Neutrophil-Band",orderIdx:3},{classId:"02",abbreviation:"ME",fullNm:"Metamyelocyte",orderIdx:4},{classId:"03",abbreviation:"MY",fullNm:"Myelocyte",orderIdx:5},{classId:"04",abbreviation:"PR",fullNm:"Promyelocyte",orderIdx:6},{classId:"05",abbreviation:"LY",fullNm:"Lymphocyte",orderIdx:7},{classId:"61",abbreviation:"LR",fullNm:"Reactive lymphocyte",orderIdx:8},{classId:"62",abbreviation:"LA",fullNm:"Abnormal lymphocyte",orderIdx:9},{classId:"07",abbreviation:"MO",fullNm:"Monocyte",orderIdx:10},{classId:"08",abbreviation:"EO",fullNm:"Eosinophil",orderIdx:11},{classId:"09",abbreviation:"BA",fullNm:"Basophil",orderIdx:12},{classId:"10",abbreviation:"BL",fullNm:"Blast",orderIdx:13},{classId:"11",abbreviation:"PC",fullNm:"Plasma cell",orderIdx:14},{classId:"12",abbreviation:"NR",fullNm:"nRBC",orderIdx:15},{classId:"13",abbreviation:"GP",fullNm:"Giant platelet",orderIdx:16},{classId:"14",abbreviation:"PA",fullNm:"Platelet aggregation",orderIdx:17},{classId:"16",abbreviation:"MA",fullNm:"Malaria",orderIdx:18},{classId:"15",abbreviation:"AR",fullNm:"Artifact",orderIdx:19},{classId:"17",abbreviation:"SM",fullNm:"Smudge",orderIdx:20}],ka=[{classId:"01",abbreviation:"NE",fullNm:"Neutrophil",orderIdx:1},{classId:"71",abbreviation:"NS",fullNm:"Neutrophil-Segmented",orderIdx:2},{classId:"72",abbreviation:"NB",fullNm:"Neutrophil-Band",orderIdx:3},{classId:"02",abbreviation:"ME",fullNm:"Metamyelocyte",orderIdx:4},{classId:"03",abbreviation:"MY",fullNm:"Myelocyte",orderIdx:5},{classId:"04",abbreviation:"PR",fullNm:"Promyelocyte",orderIdx:6},{classId:"05",abbreviation:"LY",fullNm:"Lymphocyte",orderIdx:7},{classId:"06",abbreviation:"LA",fullNm:"Abnormal lymphocyte",orderIdx:8},{classId:"07",abbreviation:"MO",fullNm:"Monocyte",orderIdx:9},{classId:"08",abbreviation:"EO",fullNm:"Eosinophil",orderIdx:10},{classId:"09",abbreviation:"BA",fullNm:"Basophil",orderIdx:11},{classId:"10",abbreviation:"BL",fullNm:"Blast",orderIdx:12},{classId:"11",abbreviation:"PC",fullNm:"Plasma cell",orderIdx:13},{classId:"12",abbreviation:"ON",fullNm:"Orthochromic Normoblast",orderIdx:14},{classId:"13",abbreviation:"PN",fullNm:"Polychromic Normoblast",orderIdx:15},{classId:"14",abbreviation:"BN",fullNm:"Basophilic Normoblast",orderIdx:16},{classId:"15",abbreviation:"PE",fullNm:"Proerythroblast",orderIdx:17},{classId:"16",abbreviation:"HC",fullNm:"Histiocyte",orderIdx:18},{classId:"17",abbreviation:"OT",fullNm:"Others",orderIdx:19}],Sa=[{id:"01",title:"NE",name:"Neutrophil",count:0,percent:0,key:"",order:1},{id:"71",title:"NS",name:"Neutrophil-Segmented",count:0,percent:0,key:"",order:2},{id:"72",title:"NB",name:"Neutrophil-Band",count:0,percent:0,key:"",order:3},{id:"02",title:"ME",name:"Metamyelocyte",count:0,percent:0,key:"",order:4},{id:"03",title:"MY",name:"Myelocyte",count:0,percent:0,key:"",order:5},{id:"04",title:"PR",name:"Promyelocyte",count:0,percent:0,key:"",order:6},{id:"05",title:"LY",name:"Lymphocyte",count:0,percent:0,key:"",order:7},{id:"61",title:"LR",name:"Reactive lymphocyte",count:0,percent:0,key:"",order:8},{id:"62",title:"LA",name:"Abnormal lymphocyte",count:0,percent:0,key:"",order:9},{id:"07",title:"MO",name:"Monocyte",count:0,percent:0,key:"",order:10},{id:"08",title:"EO",name:"Eosinophil",count:0,percent:0,key:"",order:11},{id:"09",title:"BA",name:"Basophil",count:0,percent:0,key:"",order:12},{id:"10",title:"BL",name:"Blast",count:0,percent:0,key:"",order:13},{id:"11",title:"PC",name:"Plasma cell",count:0,percent:0,key:"",order:14},{id:"12",title:"NR",name:"nRBC",count:0,percent:0,key:"",order:15},{id:"13",title:"GP",name:"Giant platelet",count:0,percent:0,key:"",order:16},{id:"14",title:"PA",name:"Platelet aggregation",count:0,percent:0,key:"",order:17},{id:"16",title:"MA",name:"Malaria",count:0,percent:0,key:"",order:18},{id:"15",title:"AR",name:"Artifact",count:0,percent:0,key:"",order:19},{id:"17",title:"SM",name:"Smudge",count:0,percent:0,key:"",order:20}],Na=[{id:"01",title:"NE",name:"Neutrophil",count:0,percent:0,order:1},{id:"71",title:"NS",name:"Neutrophil-Segmented",count:0,percent:0,key:"",order:2},{id:"72",title:"NB",name:"Neutrophil-Band",count:0,percent:0,key:"",order:3},{id:"02",title:"ME",name:"Metamyelocyte",count:0,percent:0,order:4},{id:"03",title:"MY",name:"Myelocyte",count:0,percent:0,order:5},{id:"04",title:"PR",name:"Promyelocyte",count:0,percent:0,order:6},{id:"05",title:"LY",name:"Lymphocyte",count:0,percent:0,order:7},{id:"06",title:"LA",name:"Abnormal lymphocyte",count:0,percent:0,order:8},{id:"07",title:"MO",name:"Monocyte",count:0,percent:0,order:9},{id:"08",title:"EO",name:"Eosinophil",count:0,percent:0,order:10},{id:"09",title:"BA",name:"Basophil",count:0,percent:0,order:11},{id:"10",title:"BL",name:"Blast",count:0,percent:0,order:12},{id:"11",title:"PC",name:"Plasma cell",count:0,percent:0,order:13},{id:"12",title:"ON",name:"Orthochromic Normoblast",count:0,percent:0,order:14},{id:"13",title:"PN",name:"Polychromic Normoblast",count:0,percent:0,order:15},{id:"14",title:"BN",name:"Basophilic Normoblast",count:0,percent:0,order:16},{id:"15",title:"PE",name:"Proerythroblast",count:0,percent:0,order:17},{id:"16",title:"HC",name:"Histiocyte",count:0,percent:0,order:18},{id:"17",title:"OT",name:"Others",count:0,percent:0,order:19}],_a={class:"titleText"},Ea=(0,s.Lk)("span",{class:"greenColor"},"BM",-1),La=(0,s.Lk)("span",{class:"greenColor"},"C",-1),Ra=(0,s.Lk)("span",{class:"greenColor"},"WBC",-1),wa=(0,s.Lk)("span",{class:"greenColor"},"C",-1),Ta={class:"analysisWbc"},Pa={key:0,class:"categories"},Aa={class:"categoryNm"},Da={key:0,class:"mb1 liTitle"},Ma={class:"classNm"},xa={key:0,class:"mb1 liTitle"},Ka={style:{"text-align":"center"}},Oa={class:"degree"},Ba={key:0,class:"mb1 liTitle"},Ua={class:"categories"},Wa=(0,s.Lk)("ul",{class:"categoryNm"},[(0,s.Lk)("li",null," Total ")],-1),Xa={class:"classNm"},Fa=(0,s.Lk)("ul",{class:"degree"},[(0,s.Lk)("li",null," 100.00 ")],-1),$a={key:0,class:"categories mt1"},Ga={class:"categoryNm"},Ha={key:0,class:"mb1 liTitle"},ja={class:"classNm"},Va={key:0,class:"mb1 liTitle"},Ya={style:{"text-align":"center"}},qa={class:"degree"},Ja={key:0,class:"mb1 liTitle"},Qa={class:"mt1"},za={class:"categoryNm"},Za={key:0,class:"mb1 liTitle"},el={class:"classNm"},tl={key:0,class:"mb1 liTitle"},al={key:0},ll={class:"degree"},sl={key:0,class:"mb1 liTitle"},ol=(0,s.Lk)("li",null,"-",-1);var nl=(0,s.pM)({__name:"classInfoification",props:["bmIsBoolen","parsedData"],setup(e,{emit:t}){const a=e,l=(0,r.Pj)(),i=(0,s.EW)((()=>l.state.commonModule.siteCd)),u=(0,o.KR)([]),c=(0,o.KR)([]),d=(0,o.KR)([]),m=(0,o.KR)(""),v=(0,o.KR)("0"),p=(0,o.KR)(""),g=t;(0,s.sV)((()=>{f(Ca,null,!0)})),(0,s.wB)((()=>a.parsedData),((e,t)=>{I(e)}),{deep:!0});const I=async e=>{const t=e;"RUNNING_INFO"===t.jobCmd&&await f({wbcInfo:t.slotInfo},t)},f=async(e,t,l)=>{const s=JSON.parse(JSON.stringify(e));if(s.wbcInfo){m.value=s?.wbcInfo?.testType;const e=a.bmIsBoolen?[s.wbcInfo.bmInfo]:[s.wbcInfo.wbcInfo],t=e,l=a.bmIsBoolen?[Na]:[Sa];u.value=t[0].length>0?t:l;const o=e=>e.every((e=>e.every((e=>"0"===e.count)))),n=o(u.value);n&&(v.value="0"),c.value=u.value.flat();const i=t.flat().filter((e=>["NR","AR","GP","PA","MC","MA","GP","PA","SM"].includes(e?.title)));d.value=i}else{const e=a.bmIsBoolen?[Na]:[Sa];u.value=e,c.value=u.value.flat()}if(s&&s.wbcInfo){const e=s.wbcInfo;e&&"03"===e?.stateCd&&(await C(e),p.value=e.maxWbcCount)}const o=t?.iCasStat??"",n=[...o];if(-1!==n.lastIndexOf("2")){const e={classInfo:{wbcInfo:u.value,totalCount:v.value,maxWbcCount:p.value,slotId:t.slotInfo.slotId},iCasStatArr:n.lastIndexOf("2")};g("classInfoUpdate",e)}},b=(e,t)=>{e&&""!==e||(e="0000",t="01");const a={"0006":{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","SM","NE","GP","PA","OT"]}},l=a[e]||{includesStr:["AR","NR","GP","PA","MC","SM","MA","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","NE","SM","GP","PA","OT"]};return"01"===t||"04"===t?l.includesStr:l.includesStr2},y=(e,t)=>{const a=b(i.value,m.value);let l=0;for(let s of e)a.includes(s.title)||(l+=Number(s.count));return l},C=async e=>{const t=a.bmIsBoolen?e.bmInfo:e.wbcInfo,l=t;let s="0";s="01"===m.value||"04"===m.value?y(u.value.flat(),l).toFixed(0):y(c.value,l).toFixed(0),v.value=s,await S()},h=e=>{const t=k(i.value,m.value);return!t.includes(e.title)},k=(e,t)=>{const a={"0006":{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","SM","NE","GP","PA","OT"]}},l=a[e]||{includesStr:["AR","NR","GP","PA","MC","SM","MA","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","NE","SM","GP","PA","OT"]};return"01"===t||"04"===t?l.includesStr:l.includesStr2},S=async()=>{const e=u.value.map((e=>e.map((e=>{const t=v.value&&"0"!==v.value?(Number(e.count)/Number(v.value)*100).toFixed(1):"0",a=Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t;return{...e,percent:a}}))));u.value=e},N=e=>e?.name;return(t,a)=>((0,s.uX)(),(0,s.CE)("div",{class:(0,n.C4)([e.bmIsBoolen?"bmclass":""])},[(0,s.Lk)("h3",_a,[e.bmIsBoolen?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[Ea,(0,s.eW)(),La,(0,s.eW)("lassification ")],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[Ra,(0,s.eW)(),wa,(0,s.eW)("lassification")],64))]),(0,s.Lk)("div",Ta,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:a},[h(e)?((0,s.uX)(),(0,s.CE)("div",Pa,[(0,s.Lk)("ul",Aa,[0===a&&0===t?((0,s.uX)(),(0,s.CE)("li",Da,"Class")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(N(e)),1)]),(0,s.Lk)("ul",Ma,[0===a&&0===t?((0,s.uX)(),(0,s.CE)("li",xa,"Count")):(0,s.Q3)("",!0),(0,s.Lk)("li",Ka,(0,n.v_)(e?.count),1)]),(0,s.Lk)("ul",Oa,[0===a&&0===t?((0,s.uX)(),(0,s.CE)("li",Ba,"%")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(v.value&&"0"!==v.value?(Number(e?.count)/Number(v.value)*100).toFixed(Number(e?.count)/Number(v.value)===0?0:1):"0"),1)])])):(0,s.Q3)("",!0)],64)))),128))],64)))),128)),(0,s.Lk)("div",Ua,[Wa,(0,s.Lk)("ul",Xa,[(0,s.Lk)("li",null,(0,n.v_)(v.value||0),1)]),Fa]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:a},["OT"===e.title?((0,s.uX)(),(0,s.CE)("div",$a,[(0,s.Lk)("ul",Ga,[0===a&&0===t?((0,s.uX)(),(0,s.CE)("li",Ha,"Class")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(N(e)),1)]),(0,s.Lk)("ul",ja,[0===a&&0===t?((0,s.uX)(),(0,s.CE)("li",Va,"Count")):(0,s.Q3)("",!0),(0,s.Lk)("li",Ya,(0,n.v_)(e?.count),1)]),(0,s.Lk)("ul",qa,[0===a&&0===t?((0,s.uX)(),(0,s.CE)("li",Ja,"%")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(v.value&&"0"!==v.value?(Number(e?.count)/Number(v.value)*100).toFixed(0):"0"),1)])])):(0,s.Q3)("",!0)],64)))),128))],64)))),128)),(0,s.Lk)("div",Qa,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"categories"},[(0,s.Lk)("ul",za,[0===t?((0,s.uX)(),(0,s.CE)("li",Za,"non-WBC")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(N(e)),1)]),(0,s.Lk)("ul",el,[0===t?((0,s.uX)(),(0,s.CE)("li",tl)):(0,s.Q3)("",!0),(0,s.Lk)("li",null,[(0,s.eW)((0,n.v_)(e?.count)+" ",1),"NR"===e.title||"GP"===e.title?((0,s.uX)(),(0,s.CE)("span",al," / "+(0,n.v_)(p.value)+" WBC",1)):(0,s.Q3)("",!0)])]),(0,s.Lk)("ul",ll,[0===t?((0,s.uX)(),(0,s.CE)("li",sl)):(0,s.Q3)("",!0),ol])])))),128))])])],2))}});const il=nl;var ul=il;const rl=[{categoryId:"01",categoryNm:"Size",classInfo:[{classId:"01",classNm:"Normal",degree:"0"},{classId:"02",classNm:"Macrocyte",degree:"0"},{classId:"03",classNm:"Microcyte",degree:"0"},{classId:"04",classNm:"Anisocytosis",degree:"0"}]},{categoryId:"02",categoryNm:"Chromia",classInfo:[{classId:"01",classNm:"Normal",degree:"0"},{classId:"02",classNm:"Hyperchromic",degree:"0"},{classId:"03",classNm:"Hypochromic",degree:"0"},{classId:"04",classNm:"Polychromia",degree:"0"}]},{categoryId:"03",categoryNm:"Shape",classInfo:[{classId:"01",classNm:"Normal",degree:"0"},{classId:"02",classNm:"Poikilocytosis",degree:"0"},{classId:"03",classNm:"Target Cell",degree:"0"},{classId:"04",classNm:"Burr Cell",degree:"0"},{classId:"05",classNm:"Acanthocyte",degree:"0"},{classId:"06",classNm:"Ovalocyte",degree:"0"},{classId:"07",classNm:"Schistocyte",degree:"0"},{classId:"08",classNm:"Sickle Cell",degree:"0"},{classId:"09",classNm:"Stomatocyte",degree:"0"},{classId:"10",classNm:"Tear Drop Cell",degree:"0"},{classId:"11",classNm:"Spherocyte",degree:"0"}]},{categoryId:"05",categoryNm:"Inclusion Body",classInfo:[{classId:"01",classNm:"Howell-Jolly Body",degree:"0"},{classId:"02",classNm:"Basophilic Stippling",degree:"0"}]}],cl={key:0},dl=(0,s.Lk)("h3",{class:"titleText"},[(0,s.Lk)("span",{class:"greenColor"},"Whole"),(0,s.eW)(" Slide Image ")],-1),ml={class:"row"},vl=["src","id","onClick"],pl={key:0,class:"mt-3 row"},gl=(0,s.Lk)("div",{class:"col"},[(0,s.Lk)("div",{style:{color:"#2798DC"}},"Select Interest Area")],-1),Il={class:"col"},fl={key:1},bl=(0,s.Lk)("h3",{class:"titleText"},[(0,s.Lk)("span",{class:"greenColor"},"RBC"),(0,s.eW)(),(0,s.Lk)("span",{class:"greenColor"},"C"),(0,s.eW)("lassification ")],-1),yl={class:"categoryNm"},Cl={key:0,class:"mb1 liTitle"},hl={class:"classNmRbc"},kl={key:0,class:"mb1 liTitle"},Sl={class:"degree analysis"},Nl={key:0,class:"mb1 liTitle"},_l={key:0},El={key:1},Ll={key:0},Rl={key:1},wl={class:"categories"},Tl=(0,s.Lk)("ul",{class:"categoryNm"},[(0,s.Lk)("li",null,"Others")],-1),Pl=(0,s.Lk)("ul",{class:"classNmRbc"},[(0,s.Lk)("li",null,"Platelets"),(0,s.Lk)("li",null,"Malaria")],-1),Al={class:"degree analysis"},Dl={style:{"font-size":"0.7rem"}},Ml={style:{"font-size":"0.7rem"}};var xl=(0,s.pM)({__name:"rbcclassification",props:["bmIsBoolen","parsedData"],setup(e,{emit:t}){const a=e,l=(0,o.KR)([]),i=(0,o.KR)(""),u=(0,o.KR)(""),r=(0,o.KR)(""),c=(0,o.KR)("01"),d=(0,o.KR)([]),m=(0,o.KR)([]),v=t;(0,s.sV)((async()=>{await C(),await I({rbcInfo:a.parsedData.slotInfo},"")})),(0,s.wB)((()=>a.parsedData),((e,t)=>{p(e)}),{deep:!0});const p=async e=>{const t=e;if("RUNNING_INFO"===t.jobCmd){const a=e?.slotInfo;a&&"03"===a?.stateCd&&(i.value=a.malariaCount,u.value=a.maxRbcCount,r.value=a.pltCount),await I({rbcInfo:t.slotInfo},t)}},g=(0,o.KR)([]),I=async(e,t)=>{const a=JSON.parse(JSON.stringify(e));if(Array.isArray(a.rbcInfo)){if(c.value=a.rbcInfo[0].testType,!a.rbcInfo[0])return;const e=[a.rbcInfo[0].rbcInfo],l=e[0].length>0?e:[rl];f(l[0],t),a.rbcInfo[0].lowPowerPath?g.value=a.rbcInfo[0].lowPowerPath.sort((function(e,t){return e.seqNo-t.seqNo})):g.value=[]}else f([rl][0],t)},f=(e,t)=>{let a=0,s=0,o=0;const n=0!==t.length&&t?JSON.parse(JSON.stringify(t?.slotInfo?.rbcInfo)):JSON.parse(JSON.stringify(e)),i=0!==t.length&&t?JSON.parse(JSON.stringify(t?.slotInfo?.rbcInfo)):JSON.parse(JSON.stringify(e));i.forEach((e=>{e.classInfo.forEach((t=>{"01"===e.categoryId?"04"!==t.classId&&(s+=Number(t.degree)):"02"===e.categoryId?"04"!==t.classId&&(o+=Number(t.degree)):a+=Number(t.degree)}))})),i.forEach(((e,t)=>{e.classInfo.forEach(((l,i)=>{m.value&&m.value.forEach((u=>{if(l.originalDegree=n[t].classInfo[i].degree,u.categoryId===e.categoryId&&u.classId===l.classId){const e=Number(l.degree);let t=0;t="01"===u.categoryId?Number((e/s*100).toFixed(2)):"02"===u.categoryId?Number((e/o*100).toFixed(2)):Number((e/a*100).toFixed(2)),isNaN(t)&&(t=0);const n=e=>l.degree=e;t<Number(u.degree1)?n("0"):t<Number(u.degree2)?n("1"):t<Number(u.degree3)?n("2"):n("3")}}))}))})),i.forEach((e=>{e.classInfo.forEach((t=>{if("01"===e.categoryId&&("01"===t.classId&&(e.classInfo[0].degree="1"),["02","03"].includes(t.classId)&&Number(t.degree)>0&&(e.classInfo[0].degree="0")),"02"===e.categoryId&&("01"===t.classId&&(e.classInfo[0].degree="1"),["02","03"].includes(t.classId)&&Number(t.degree)>0&&(e.classInfo[0].degree="0")),"03"===e.categoryId&&("01"===t.classId&&(e.classInfo[0].degree="1",e.classInfo[1].degree="0"),"01"!==t.classId&&"02"!==t.classId)){var a=Number(e.classInfo[1].degree);Number(t.degree)>a&&(e.classInfo[0].degree="0",e.classInfo[1].degree=t.degree)}}))})),l.value[0]=i;const u=t?.iCasStat??"",r=[...u];if(-1!==r.lastIndexOf("2")){const e={rbc:{rbcInfo:i,slotId:t.slotInfo.slotId},iCasStatArr:r.lastIndexOf("2")};v("rbcUpdate",e)}},b=e=>e?.categoryNm,y=(e,t)=>{if("03"===c.value){const e=d.value.findIndex((e=>e.seqNo===t.seqNo));-1!==e?d.value.splice(e,1):d.value.push(t)}},C=async()=>{try{const e=await ie(),t=e.data;m.value=t}catch(e){console.log(e)}};return(e,t)=>{const a=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)("div",null,["01"!==c.value&&"04"!==c.value?((0,s.uX)(),(0,s.CE)("div",cl,[dl,(0,s.Lk)("div",null,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)([0,6,12,18,24,30],((e,t)=>(0,s.Lk)("div",{key:t,class:"pl-2"},[(0,s.Lk)("div",ml,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(g.value.slice(e,e+6),((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"col-2 p-1"},[(0,s.Lk)("img",{src:e.path,id:e.seqNo,ref_for:!0,ref:"wholeSlideImg",class:"wholeSlideImg",onClick:t=>y(t,e),style:{width:"75px"}},null,8,vl)])))),128))])]))),64)),"03"===c.value?((0,s.uX)(),(0,s.CE)("div",pl,[gl,(0,s.Lk)("div",Il,[(0,s.Lk)("div",null,(0,n.v_)(d.value.length),1)])])):(0,s.Q3)("",!0)])])):((0,s.uX)(),(0,s.CE)("div",fl,[bl,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"categories"},[(0,s.Lk)("ul",yl,[0===t?((0,s.uX)(),(0,s.CE)("li",Cl,"Category")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(b(e)),1)]),(0,s.Lk)("ul",hl,[0===t?((0,s.uX)(),(0,s.CE)("li",kl,"Class")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},(0,n.v_)(e?.classNm),1)))),128))]),(0,s.Lk)("ul",Sl,[0===t?((0,s.uX)(),(0,s.CE)("li",Nl,"Degree")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((t,l)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:l},["01"!==t.classId||"05"===e.categoryId?((0,s.uX)(),(0,s.CE)("li",_l,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(4,(e=>(0,s.bF)(a,{icon:["fas","circle"],key:e,class:(0,n.C4)({degreeActive:e<Number(t?.degree)+2||0,"degree0-img":e>=Number(t?.degree)+1||0})},null,8,["class"]))),64))])):((0,s.uX)(),(0,s.CE)("li",El,["0"===t.degree?((0,s.uX)(),(0,s.CE)("div",Ll,[(0,s.bF)(a,{icon:["fas","circle"]})])):((0,s.uX)(),(0,s.CE)("div",Rl,[(0,s.bF)(a,{icon:["fas","circle"],class:"degreeActive"})]))]))],64)))),128))])])))),128))],64)))),128))])),(0,s.Lk)("div",null,[(0,s.Lk)("div",wl,[Tl,Pl,(0,s.Lk)("ul",Al,[(0,s.Lk)("li",Dl,(0,n.v_)(r.value||0)+" PLT / 1000 RBC",1),(0,s.Lk)("li",Ml,(0,n.v_)(i.value||0)+" / "+(0,n.v_)(u.value||0)+" RBC",1)])])])])}}});const Kl=xl;var Ol=Kl;const Bl={class:"mt1"},Ul={key:0,class:"slider-found"},Wl=["src"];var Xl=(0,s.pM)({__name:"foundingCells",props:["parsedData","pb100aCassette"],setup(e){const t=window.APP_API_BASE_URL||"http://192.168.0.131:3002",a=e,n=(0,o.KR)([]);function i(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function u(e){if(!e||0===e.length)return"";const a=e?.path.match(/^(.*\\)\d+_Real_Time\\/)?.[0],l=e?.path.match(/[^\\]*$/)[0],s=`${t}/images/getImageRealTime?folder=${a}&imageName=${l}`;return s}return(0,s.wB)((()=>a.pb100aCassette),(e=>{console.log("IMAGE_RESET - should be 'reset'",e),"reset"===e&&(n.value=[])}),{deep:!0}),(0,s.wB)((()=>a.parsedData),((e,t)=>{const a=e?.slotInfo;if(a&&"03"===a.stateCd&&a.runningPath&&a.runningPath.length>0){const e=a.runningPath.map((e=>({...e,path:e.path,id:i()})));for(const t of e)n.value.unshift(t)}}),{deep:!0}),(e,t)=>((0,s.uX)(),(0,s.CE)("div",Bl,[(0,s.bF)(l.eB,{name:"fade",mode:"out-in"},{default:(0,s.k6)((()=>[n.value.length>0?((0,s.uX)(),(0,s.CE)("div",Ul,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.value,(e=>((0,s.uX)(),(0,s.CE)(s.FK,{key:e.id},[u(e)?((0,s.uX)(),(0,s.CE)("img",{key:0,src:u(e),alt:"Slide"},null,8,Wl)):(0,s.Q3)("",!0)],64)))),128))])):(0,s.Q3)("",!0)])),_:1})]))}});const Fl=Xl;var $l=Fl;const Gl=(0,s.Lk)("h3",{class:"titleText"},[(0,s.Lk)("span",{class:"greenColor"},"W"),(0,s.eW)("orking "),(0,s.Lk)("span",{class:"greenColor"},"V"),(0,s.eW)("iew ")],-1),Hl={class:"circular-progress-bar mt2"},jl={class:"progress-ring",width:"120",height:"120"},Vl=["cx","cy","r","stroke-width"],Yl=["cx","cy","r","stroke-width","stroke","stroke-dasharray","stroke-dashoffset"],ql={class:"slideTime"},Jl={class:"slideTime1 mt2"},Ql={class:"slideCardWrap"},zl={class:"slideContent pb100a"},Zl={class:"mt1"};var es=(0,s.pM)({__name:"workingView100A",props:["parsedData","pb100aCassette","initValData"],setup(e){const t=(0,r.Pj)(),a=(0,s.EW)((()=>t.state.runningInfoModule)),l=(0,s.EW)((()=>t.state.commonModule)),i=(0,s.EW)((()=>t.state.timeModule)),u=e,c=(0,o.KR)(!1),d=(0,o.KR)(0),m=(0,o.KR)(120),v=(0,o.KR)(6),p=(0,o.KR)("#00c2ff"),g=(0,o.KR)(m.value/2),I=(0,o.KR)(2*Math.PI*(g.value-v.value/2)),f=(0,o.KR)(I.value),b=(0,o.KR)(0),y=(0,o.KR)(0),C=(0,o.KR)(""),h=(0,o.KR)(""),k=(0,o.KR)("");let S=null,N=null;const _=(0,o.KR)(F);let E=(0,o.KR)(0),L=(0,o.KR)(0);const R=(0,o.KR)(!1);let w=(0,o.KR)(null);const T=(0,o.KR)("0"),P=(0,o.KR)("0");(0,s.wB)((()=>u.initValData),(e=>{e&&(C.value="05")})),(0,s.wB)((()=>u.pb100aCassette),(e=>{"reset"===e&&(O(),x(),K())}),{deep:!0}),(0,s.wB)((()=>t.state.embeddedStatusModule),(e=>{const t=e.sysInfo;C.value=e.sysInfo.eqStatCd,l.value.isRunningState?(D(t.iCasStat,_.value.input),D(t.oCasStat,_.value.output)):(O(),K());const a=/[1,2,9]/g,s=String(t?.iCasStat);"999999999999"!==String(t?.iCasStat)&&(s.search(a)<0||"111111111111"===t?.oCasStat)&&(D(t.iCasStat,_.value.input),D(t.oCasStat,_.value.output))}),{deep:!0}),(0,s.wB)([l.value],(async e=>{const t=JSON.parse(JSON.stringify(e));t[0].startEmbedded?""===t[0].runningSlotId&&t[0].startEmbedded&&x():K(),t[0].isRunningState||(O(),K())})),(0,s.wB)([a.value],(e=>{const t=JSON.parse(JSON.stringify(e));if(T.value=t[0]?.runningInfo?.iCasExist,P.value=t[0]?.runningInfo?.oCasExist,"start"===t[0].changeSlideState?.changeSlide.value&&!0===t[0].slideBooleanState?.slideIs.value?M():"stop"===t[0].changeSlideState?.changeSlide.value&&null!==S&&(clearInterval(S),S=null),"afterChange"===t[0].changeSlideState?.changeSlide.value&&(K(),M()),t[0].runningInfo){const e=t[0].runningInfo.slotInfo;if(e&&"03"===e?.stateCd){b.value=Number(e.wbcCount),y.value=Number(e.maxWbcCount),b.value>y.value&&(b.value=y.value);const t=b.value/y.value*100;f.value=I.value*(1-t/100)}}}));const A=e=>{switch(e){case"0":return"EMPTY";case"1":return"EXIST";case"2":return"FULL"}};(0,s.wB)((()=>C.value),(e=>{"05"===e?w.value=setInterval((()=>{R.value=!R.value}),1e3):(R.value=!1,clearInterval(w.value))})),(0,s.sV)((()=>{C.value="01",_.value.input.forEach((e=>{e.slotState="0"})),_.value.output.forEach((e=>{e.slotState="0"})),c.value="bm"===window.PROJECT_TYPE}));const D=(e,t)=>{t.forEach(((t,a)=>{t.slotState=e.charAt(a)}))},M=()=>{S||(S=setInterval((()=>{l.value.isRunningState&&(L.value+=1,d.value=L.value%60,sessionStorage.setItem("elapsedTimeCount",String(L.value)),t.dispatch("timeModule/setTimeInfo",{slideTime:Y(L.value)}))}),1e3)),(0,s.xo)((()=>{S&&(clearInterval(S),S=null)}))},x=()=>{N||(N=setInterval((()=>{l.value.isRunningState&&(E.value+=1,sessionStorage.setItem("totalElapsedTimeCount",String(E.value)),t.dispatch("timeModule/setTimeInfo",{totalSlideTime:Y(E.value)}))}),1e3)),(0,s.xo)((()=>{N&&(clearInterval(N),N=null)}))},K=()=>{clearInterval(S),S=null,L.value=0,h.value=Y(0),sessionStorage.removeItem("elapsedTimeCount"),t.dispatch("timeModule/setTimeInfo",{slideTime:"00:00:00"})},O=()=>{clearInterval(N),N=null,E.value=0,k.value=Y(0),sessionStorage.removeItem("totalElapsedTimeCount"),t.dispatch("timeModule/setTimeInfo",{totalSlideTime:"00:00:00"})},B=()=>{switch(C.value){case"01":return"IDLE";case"02":return"READY";case"03":return"ERROR";case"04":return"RUNNING";case"05":return"INITIALIZATION";default:return"UNKNOWN"}},U=(e,t)=>{if("input"===t)switch(e){case"0":return"class-for-state-0";case"1":return"class-for-state-1";case"2":return"class-for-state-2";case"3":return"class-for-state-3";case"4":return"class-for-state-4";default:return""}else switch(e){case"0":return"out-for-state-0";case"1":return"out-for-state-1";default:return"outClassDefault"}};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[Gl,(0,s.Lk)("div",null,[(0,s.Lk)("p",{class:(0,n.C4)({blinkColor:R.value})},(0,n.v_)(B()),3),(0,s.Lk)("p",null,(0,n.v_)(b.value),1),(0,s.Lk)("div",Hl,[((0,s.uX)(),(0,s.CE)("svg",jl,[(0,s.Lk)("circle",{cx:g.value,cy:g.value,r:g.value-v.value/2,"stroke-width":v.value,stroke:"#ccc",fill:"none"},null,8,Vl),(0,s.Lk)("circle",{cx:g.value,cy:g.value,r:g.value-v.value/2,"stroke-width":v.value,stroke:p.value,fill:"none","stroke-dasharray":I.value,"stroke-dashoffset":f.value},null,8,Yl)])),(0,s.Lk)("p",ql,(0,n.v_)(i.value.slideTime),1)]),(0,s.Lk)("p",Jl,"Number of "+(0,n.v_)(c.value?"BMs":"WBCs"),1),(0,s.Lk)("p",null,(0,n.v_)(i.value.totalSlideTime),1)]),(0,s.Lk)("div",Ql,[(0,s.Lk)("ul",zl,[(0,s.Lk)("p",null,"INPUT : "+(0,n.v_)(A(T.value)),1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(_.value.input,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.slotNo,class:(0,n.C4)(U(e.slotState,"input"))},null,2)))),128)),(0,s.Lk)("p",Zl,"OUTPUT : "+(0,n.v_)(A(P.value)),1)])])]))}});const ts=es;var as=ts;const ls={class:"contentLeft"},ss={class:"contentRight"},os={class:"contentBottom"};var ns=(0,s.pM)({__name:"index",props:["parsedData","isClass","startStatus","pb100aCassette"],setup(e,{emit:t}){const a=t,n=(0,r.Pj)(),i=(0,o.KR)(!1),u=e,c=(0,o.KR)(""),d=(0,o.KR)(!1),m=(0,s.EW)((()=>n.state.commonModule.viewerCheck));(0,s.KC)((async()=>{"viewer"===m.value&&yy.push("/database"),"bm"===window.PROJECT_TYPE?i.value=!0:(i.value=!1,c.value=window.PB_VERSION)}));const v=e=>{a("rbcAppUpdate",e)},p=e=>{a("classAppUpdateLast",e)},g=e=>{d.value=e};return(t,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bo)((0,s.Lk)("div",ls,[(0,s.bF)(jt,{onInitDataChangeText:g}),(0,s.bF)(K,{parsedData:u.parsedData,pb100aCassette:e.pb100aCassette},null,8,["parsedData","pb100aCassette"]),(0,s.bF)(ba,{parsedData:u.parsedData,startStatus:u.startStatus,pb100aCassette:e.pb100aCassette},null,8,["parsedData","startStatus","pb100aCassette"])],512),[[l.aG,u.isClass]]),(0,s.bo)((0,s.Lk)("div",ss,["100a"!==c.value?((0,s.uX)(),(0,s.Wv)(ia,{key:0,initValData:d.value,parsedData:u.parsedData,class:"contentRightChild"},null,8,["initValData","parsedData"])):((0,s.uX)(),(0,s.Wv)(as,{key:1,initValData:d.value,parsedData:u.parsedData,pb100aCassette:e.pb100aCassette,class:"contentRightChild"},null,8,["initValData","parsedData","pb100aCassette"])),i.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(Ol,{key:2,onRbcUpdate:v,parsedData:u.parsedData,class:"contentRightChild"},null,8,["parsedData"])),(0,s.bF)(ul,{onClassInfoUpdate:p,parsedData:u.parsedData,bmIsBoolen:i.value,class:"contentRightChild"},null,8,["parsedData","bmIsBoolen"]),(0,s.Lk)("div",os,[(0,s.bF)($l,{parsedData:u.parsedData,pb100aCassette:e.pb100aCassette},null,8,["parsedData","pb100aCassette"])])],512),[[l.aG,u.isClass]])],64))}}),is=a(6262);const us=(0,is.A)(ns,[["__scopeId","data-v-240bbbce"]]);var rs=us,cs=(0,s.pM)({__name:"HomeView",setup(e){return(e,t)=>{const a=(0,s.g2)("Fragment");return(0,s.uX)(),(0,s.Wv)(a,null,{default:(0,s.k6)((()=>[(0,s.bF)(rs)])),_:1})}}});const ds=cs;var ms=ds;const vs=Z(),ps=async e=>vs.httpPost(ee.user.register,e),gs=async e=>vs.httpPost(ee.user.login,e),Is=async e=>vs.httpGet(ee.user.getUsers,e),fs=async e=>vs.httpGet(ee.user.userCheck,e),bs=async(e,t)=>vs.httpPut(ee.user.userDataPut,e,t),ys=async e=>vs.httpDelete(ee.user.deleteUser,e,!0),Cs={class:"joinContent"},hs=(0,s.Lk)("p",{class:"mt2 mb4"},"CREATE ACCOUNT",-1),ks={class:"joinWrapper"},Ss=(0,s.Lk)("span",{class:"loginTitle"},"ID",-1),Ns=(0,s.Lk)("span",{class:"loginTitle"},"password",-1),_s=(0,s.Lk)("span",{class:"loginTitle"},"Repeat password",-1),Es=(0,s.Lk)("span",{class:"loginTitle"},"name",-1),Ls=(0,s.Lk)("span",{class:"loginTitle"},"Employee No",-1),Rs=(0,s.Lk)("span",{class:"loginTitle"},"user Type",-1),ws=(0,s.Lk)("option",{value:"admin"},"Admin",-1),Ts=(0,s.Lk)("option",{value:"normal"},"Normal",-1),Ps=[ws,Ts];var As=(0,s.pM)({__name:"index",setup(e){const t=(0,o.KR)(""),a=(0,o.KR)(""),n=(0,o.KR)(""),i=(0,o.KR)(""),u=(0,o.KR)(""),r=(0,o.KR)("admin"),c=(0,o.KR)(!1),d=(0,o.KR)(""),m=(0,o.KR)(""),v=()=>{yy.push("/user/login")},p=async()=>{const e=new Date;if(""===a.value)return void await I("Please enter id");if(""===u.value)return void await I("Please enter password");if(""===n.value)return void await I("Please enter name");if(""===t.value)return void await I("Please enter Employee No");if(""===i.value)return void await I("Please enter repeat password");if(u.value!==i.value)return void await I("Please check if the password and password are the same");const l={userId:a.value,password:u.value,name:n.value,employeeNo:t.value,userType:r.value,subscriptionDate:e};try{const e=await ps(l);e.data?.userId?(await g("registration successful"),await yy.push("/user/login")):e.data.includes("Duplicate")&&await I("Duplicate User Id")}catch(s){console.log(s),await I("Signin Fail")}},g=async e=>{c.value=!0,d.value="success",m.value=e},I=e=>{c.value=!0,d.value="error",m.value=e},f=()=>{c.value=!1};return(e,o)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Cs,[hs,(0,s.Lk)("div",null,[(0,s.Lk)("ul",ks,[(0,s.Lk)("li",null,[Ss,(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e)},null,512),[[l.Jo,a.value]])]),(0,s.Lk)("li",null,[Ns,(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"text","onUpdate:modelValue":o[1]||(o[1]=e=>u.value=e)},null,512),[[l.Jo,u.value]])]),(0,s.Lk)("li",null,[_s,(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"text","onUpdate:modelValue":o[2]||(o[2]=e=>i.value=e)},null,512),[[l.Jo,i.value]])]),(0,s.Lk)("li",null,[Es,(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"text","onUpdate:modelValue":o[3]||(o[3]=e=>n.value=e)},null,512),[[l.Jo,n.value]])]),(0,s.Lk)("li",null,[Ls,(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"text","onUpdate:modelValue":o[4]||(o[4]=e=>t.value=e)},null,512),[[l.Jo,t.value]])]),(0,s.Lk)("li",null,[Rs,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":o[5]||(o[5]=e=>r.value=e)},Ps,512),[[l.u1,r.value]])])]),(0,s.Lk)("div",{class:"joinBtn"},[(0,s.Lk)("button",{class:"defaultBtn",type:"button",onClick:p},"Create Account"),(0,s.Lk)("button",{class:"defaultBtn",type:"button",onClick:v},"Back")])])]),c.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":c.value,type:d.value,message:m.value,onHide:f,"onUpdate:hideAlert":f},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Ds=As;var Ms=Ds;const xs=(0,o.Kh)({value:[]}),Ks="bm"===window.PROJECT_TYPE,Os={testTypeCd:Ks?"02":"01",diffCellAnalyzingCount:Ks?"500":"100",diffWbcPositionMargin:"0",diffRbcPositionMargin:"0",diffPltPositionMargin:"0",pbsCellAnalyzingCount:"100",stitchCount:"1",bfCellAnalyzingCount:"100",iaRootPath:Ks?"D:\\BMIA_proc":"D:\\PBIA_proc",isNsNbIntegration:!1,isAlarm:!1,alarmCount:"5",keepPage:!1,backupPath:"",backupStartDate:new Date,backupEndDate:new Date,userId:""},Bs=(0,o.KR)({lisCodeWbc:{sendingForm:"lisCodeItems",defaultItem:yt,getRequest:_e,createRequest:Se},lisCodeRbc:{sendingForm:"lisCodeItems",defaultItem:Ct,getRequest:Re,createRequest:Ee},cbcCode:{sendingForm:"cbcCodeItems",defaultItem:ct,getRequest:Pe,createRequest:we},cellImage:{getRequest:le,createRequest:ae},normalRange:{sendingForm:"normalRangeItems",defaultItem:It,getRequest:ye,createRequest:fe},orderClass:{getRequest:Ge,createRequest:$e},rbcDegree:{getRequest:ie,createRequest:oe}}),Us=async()=>{await Ws("cellImage"),await Ws("orderClass"),await Ws("rbcDegree"),await Ws("lisCodeWbc"),await Ws("lisCodeRbc"),await Ws("cbcCode"),await Ws("normalRange")},Ws=async e=>{const t=Bs.value[e].getRequest;try{const{data:a}=await t()||{};if(!a||0===a.length){const t=Bs.value[e]?.sendingForm,a=Bs.value[e].defaultItem,l=Bs.value[e].createRequest,s=await Xs(e);t?await l({[t]:s||a}):await l(s||a),Fs(e)}}catch(a){console.log(`${e} Error - ${a}`)}},Xs=async e=>{switch(e){case"cellImage":const e={analysisType:Os.testTypeCd,diffCellAnalyzingCount:Os.diffCellAnalyzingCount,diffWbcPositionMargin:Os.diffWbcPositionMargin,diffRbcPositionMargin:Os.diffRbcPositionMargin,diffPltPositionMargin:Os.diffPltPositionMargin,pbsCellAnalyzingCount:Os.pbsCellAnalyzingCount,stitchCount:Os.stitchCount,bfCellAnalyzingCount:Os.bfCellAnalyzingCount,iaRootPath:Os.iaRootPath,isNsNbIntegration:Os.isNsNbIntegration,isAlarm:Os.isAlarm,alarmCount:Os.alarmCount,keepPage:Os.keepPage,backupPath:Os.backupPath,backupStartDate:Os.backupStartDate.toISOString().split("T")[0],backupEndDate:Os.backupEndDate.toISOString().split("T")[0],autoBackUpMonth:"Not selected",autoBackUpStartDate:null};return e;case"orderClass":const t="bm"===window.PROJECT_TYPE?ka:ha;for(const l in t)t[l].orderIdx=l;return t;case"rbcDegree":await $s();const a=[];return xs.value.forEach((e=>{e.classInfo.forEach((t=>{a.push({categoryId:e.categoryId,categoryNm:e.categoryNm,classId:t.classId,classNm:t.classNm,degree1:t.degree1,degree2:t.degree2,degree3:t.degree3})}))})),a;default:return null}},Fs=e=>{switch(e){case"cellImage":sessionStorage.setItem("isNsNbIntegration",Os?.isNsNbIntegration?"Y":"N"),sessionStorage.setItem("wbcPositionMargin",String(Os?.diffWbcPositionMargin)),sessionStorage.setItem("rbcPositionMargin",String(Os?.diffRbcPositionMargin)),sessionStorage.setItem("pltPositionMargin",String(Os?.diffPltPositionMargin)),sessionStorage.setItem("iaRootPath",String(Os?.iaRootPath)),sessionStorage.setItem("keepPage",String(Os?.keepPage));break;default:break}},$s=async()=>{xs.value=dt.rbcClassList.map((e=>({...e,classInfo:e.classInfo.map((t=>{const a=mt.find((a=>a.categoryId===e.categoryId&&a.classId===t.classId));return{...t,degree1:a?.degree1||0,degree2:a?.degree2||0,degree3:a?.degree3||0}}))})))},Gs={class:"uimdLogin"},Hs={class:"loginContent"},js=(0,s.Lk)("p",{class:"loginTitle"},[(0,s.Lk)("span",{class:"loginColorSpan"},"U"),(0,s.eW)("IMD")],-1),Vs=(0,s.Lk)("p",{class:"loginP mt2"},"Unique Idea Medical Device",-1),Ys={class:"mt3 loginDiv"},qs={class:"loginUl"};var Js=(0,s.pM)({__name:"index",setup(e){const t=(0,r.Pj)(),a=(0,o.KR)(""),n=(0,o.KR)(""),i=((0,s.nI)(),(0,o.KR)(!1)),u=(0,o.KR)(""),c=(0,o.KR)(""),d=(0,o.KR)(!1);(0,s.sV)((()=>{m()}));const m=()=>{const e=JSON.parse(localStorage.getItem("user")||"{}");e.userId&&e.password&&(n.value=e.userId,a.value=e.password,p())},v=()=>{yy.push("/user/join")},p=async()=>{const e={userId:n.value,password:a.value};if(""!==e.userId&&""!==e.password)try{const a=await gs(e);a?.data?.user?(await Us(),await t.dispatch("userModule/setUserAction",a.data?.user),sessionStorage.setItem("user",JSON.stringify(a.data.user)),d.value&&localStorage.setItem("user",JSON.stringify(a.data.user)),await g(a?.data?.user.userId)):f("Login failed.")}catch(l){f("server Err."),console.log(l)}else f("Login failed.")},g=async e=>{try{const e=await Dt();"1"===e.data||window.APP_API_BASE_URL&&window.APP_API_BASE_URL.includes(e.data)?(await t.dispatch("commonModule/setCommonInfo",{viewerCheck:"main"}),await I("main"),sessionStorage.setItem("viewerCheck","main"),sessionStorage.setItem("pcIp",JSON.stringify(e.data))):(await t.dispatch("commonModule/setCommonInfo",{viewerCheck:"viewer"}),await I("viewer"),sessionStorage.setItem("viewerCheck","viewer"),sessionStorage.setItem("pcIp",JSON.stringify(e.data)))}catch(a){console.log(a)}},I=async e=>{f("login successful."),"main"===e?(await yy.push("/"),await document.documentElement.requestFullscreen()):(await yy.push("/dataBase"),await document.documentElement.requestFullscreen()),await t.dispatch("commonModule/setCommonInfo",{loginSetData:""}),await t.dispatch("commonModule/setCommonInfo",{resFlag:!1})},f=e=>{i.value=!0,u.value="success",c.value=e},b=()=>{i.value=!1};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Gs,[(0,s.Lk)("div",Hs,[js,Vs,(0,s.Lk)("div",Ys,[(0,s.Lk)("ul",qs,[(0,s.Lk)("li",null,[(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),placeholder:"ID"},null,512),[[l.Jo,n.value]])]),(0,s.Lk)("li",null,[(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>a.value=e),placeholder:"password"},null,512),[[l.Jo,a.value]])])]),(0,s.Lk)("div",{class:"loginBtn"},[(0,s.Lk)("button",{type:"button",onClick:p},"Login"),(0,s.Lk)("button",{type:"button",onClick:v},"Add User")])])])]),i.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":i.value,type:u.value,message:c.value,onHide:b,"onUpdate:hideAlert":b},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Qs=Js;var zs=Qs,Zs=a(2903);const eo=Z(),to=async e=>eo.httpPost(ee.backUp.backUpDate,e),ao={class:"settingTable"},lo=(0,s.Lk)("th",null,"Analysis Type",-1),so={colspan:"2"},oo=["value"],no={key:0,rowspan:"4"},io={key:1},uo=(0,s.Lk)("th",null,"Cell Analyzing Count",-1),ro=["value"],co={key:0},mo=(0,s.Lk)("th",null,"Wbc Position Margin",-1),vo=["value"],po={key:1},go=(0,s.Lk)("th",null,"Rbc Position Margin",-1),Io=["value"],fo={key:2},bo=(0,s.Lk)("th",null,"Plt Position Margin",-1),yo=["value"],Co={key:3},ho=(0,s.Lk)("th",{rowspan:"2"},"PBS Analysis Values",-1),ko=(0,s.Lk)("th",null," Cell Analyzing Count ",-1),So=["value"],No={key:0},_o=(0,s.Lk)("th",null,"Stitch Count",-1),Eo=["value"],Lo={key:4},Ro=(0,s.Lk)("th",null,"BF Analysis Values",-1),wo=(0,s.Lk)("th",null,"Cell Analyzing Count",-1),To=["value"],Po=(0,s.Lk)("th",null,"IA Root Path",-1),Ao={colspan:"2"},Do=["value"],Mo=(0,s.Lk)("th",null,"NS/NB Integration",-1),xo=(0,s.Lk)("th",null,"Alarm Timer (sec)",-1),Ko={key:5},Oo=(0,s.Lk)("th",null,"Keep WBC Page",-1),Bo={class:"settingTable auto"},Uo=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{width:"80"}),(0,s.Lk)("col",{width:"20"})],-1),Wo=(0,s.Lk)("th",null,"BackUp Save Path",-1),Xo=["value"],Fo=(0,s.Lk)("th",null,"Backup and Restore",-1),$o={class:"settingDatePickers"};var Go=(0,s.pM)({__name:"cellImageAnalyzed",setup(e){const t=(0,o.KR)(!1),a=(0,o.KR)(""),i=(0,o.KR)(""),u=(0,o.KR)([]),c=(0,o.KR)("01"),d=(0,o.KR)("100"),m=(0,o.KR)("0"),v=(0,o.KR)("0"),p=(0,o.KR)("0"),g=(0,o.KR)("100"),I=(0,o.KR)("1"),f=(0,o.KR)("100"),b=(0,o.KR)("bm"===window.PROJECT_TYPE?"D:\\BMIA_proc":"D:\\PBIA_proc"),y=(0,o.KR)("bm"===window.PROJECT_TYPE?"D:\\BM_backup":"D:\\PB_backup"),C=(0,o.KR)(!1),h=(0,o.KR)(!1),k=(0,o.KR)("5"),S=(0,o.KR)(!1),N=(0,o.KR)(H()().local().toDate()),_=(0,o.KR)(H()().local().toDate()),E=((0,o.KR)([{value:"Not selected"},{value:1},{value:2},{value:3},{value:4},{value:5},{value:6},{value:7},{value:8},{value:9},{value:10},{value:11},{value:12}]),(0,o.KR)("Not selected")),L=(0,o.KR)(""),R=(0,o.KR)([]),w=(0,o.KR)([]),T=(0,o.KR)(""),P=(0,o.KR)("pb"),A=(0,o.KR)([]),D=(0,r.Pj)(),M=e=>{const t=e.target,a=t.value.replace(/[^0-9]/g,"");k.value=a.trim()},x=async()=>{if(""===y.value)return void G("Please select a backup save path");const e={startDate:H()(N.value).add(1,"day").local().toDate().toISOString().split("T")[0],endDate:H()(_.value).add(1,"day").local().toDate().toISOString().split("T")[0],backupPath:y.value,sourceFolderPath:`${b.value}`};await to(e)};(0,s.sV)((async()=>{await(0,s.dY)(),c.value="bm"===window.PROJECT_TYPE?"02":"01",P.value="bm"===window.PROJECT_TYPE?"bm":"pb",A.value="bm"===window.PROJECT_TYPE?at:tt,u.value="bm"===window.PROJECT_TYPE?st:lt,await O(),await K()}));const K=async()=>{try{const e=await Fe();if(e)if(e?.data){const t=e.data,a=JSON.parse(JSON.stringify(t)),l=JSON.parse(JSON.stringify(t)),s="bm"===window.PROJECT_TYPE?"BMIA_proc":"PBIA_proc",o="bm"===window.PROJECT_TYPE?"BM_backup":"PB_backup";for(const e in t)a[e]=a[e]+`\\${s}`,l[e]=l[e]+`\\${o}`;R.value=a,w.value=l}else;}catch(e){console.log(e)}},O=async()=>{try{const e=await le();if(e)if(e?.data){L.value="put";const t=e.data;T.value=String(t.id),c.value=t.analysisType,d.value=t.diffCellAnalyzingCount,m.value=t.diffWbcPositionMargin,v.value=t.diffRbcPositionMargin,p.value=t.diffPltPositionMargin,g.value=t.pbsCellAnalyzingCount,I.value=t.stitchCount,f.value=t.bfCellAnalyzingCount,b.value=t.iaRootPath,y.value=t.backupPath||("bm"===window.PROJECT_TYPE?"D:\\BM_backup":"D:\\PB_backup"),C.value=t.isNsNbIntegration,h.value=t.isAlarm,k.value=t.alarmCount,S.value=t.keepPage,N.value=H()(t.backupStartDate).local().toDate(),_.value=H()(t.backupEndDate).local().toDate(),E.value=t?.autoBackUpMonth}else L.value="post"}catch(e){console.log(e)}},B=async()=>{const e={analysisType:c.value,diffCellAnalyzingCount:d.value,diffWbcPositionMargin:m.value,diffRbcPositionMargin:v.value,diffPltPositionMargin:p.value,pbsCellAnalyzingCount:g.value,stitchCount:I.value,bfCellAnalyzingCount:f.value,iaRootPath:b.value,isNsNbIntegration:C.value,isAlarm:h.value,alarmCount:k.value,keepPage:S.value,backupPath:y.value,backupStartDate:H()(N.value).add(1,"day").local().toDate().toISOString().split("T")[0],backupEndDate:H()(_.value).add(1,"day").local().toDate().toISOString().split("T")[0],autoBackUpMonth:E.value,autoBackUpStartDate:"Not selected"!==E.value?H()(new Date).local().toDate().toISOString().split("T")[0]:null};try{let t={};if(t="post"===L.value?await ae(e):await se(e,T.value),t){const e="post"===L.value?"save successful":$.UPDATE_SUCCESSFULLY;F(e);const a=t?.data;await D.dispatch("dataBaseSetDataModule/setDataBaseSetData",{isNsNbIntegration:a?.isNsNbIntegration?"Y":"N"}),sessionStorage.setItem("isNsNbIntegration",a.isNsNbIntegration?"Y":"N"),sessionStorage.setItem("wbcPositionMargin",a?.diffWbcPositionMargin),sessionStorage.setItem("rbcPositionMargin",a?.diffRbcPositionMargin),sessionStorage.setItem("pltPositionMargin",a?.diffPltPositionMargin),sessionStorage.setItem("iaRootPath",a?.iaRootPath),sessionStorage.setItem("keepPage",String(a?.keepPage))}}catch(t){console.log(t)}},U=()=>{C.value=!C.value},W=()=>{h.value=!h.value},X=()=>{S.value=!S.value},F=e=>{t.value=!0,a.value="success",i.value=e},G=e=>{t.value=!0,a.value="error",i.value=e},j=()=>{t.value=!1};return(e,r)=>{const E=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("table",ao,[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[lo,(0,s.Lk)("td",so,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":r[0]||(r[0]=e=>c.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(A.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,oo)))),128))],512),[[l.u1,c.value]])])]),(0,s.Lk)("tr",null,["pb"===P.value?((0,s.uX)(),(0,s.CE)("th",no,"WBC Diff Analysis Values")):(0,s.Q3)("",!0),"bm"===P.value?((0,s.uX)(),(0,s.CE)("th",io,"BM Diff Analysis Values")):(0,s.Q3)("",!0),uo,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":r[1]||(r[1]=e=>d.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,ro)))),128))],512),[[l.u1,d.value]])])]),"pb"===P.value?((0,s.uX)(),(0,s.CE)("tr",co,[mo,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":r[2]||(r[2]=e=>m.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(ut),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,vo)))),128))],512),[[l.u1,m.value]])])])):(0,s.Q3)("",!0),"pb"===P.value?((0,s.uX)(),(0,s.CE)("tr",po,[go,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":r[3]||(r[3]=e=>v.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(it),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,Io)))),128))],512),[[l.u1,v.value]])])])):(0,s.Q3)("",!0),"pb"===P.value?((0,s.uX)(),(0,s.CE)("tr",fo,[bo,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":r[4]||(r[4]=e=>p.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(it),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,yo)))),128))],512),[[l.u1,p.value]])])])):(0,s.Q3)("",!0),"pb"===P.value?((0,s.uX)(),(0,s.CE)("tr",Co,[ho,ko,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":r[5]||(r[5]=e=>g.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(lt),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,So)))),128))],512),[[l.u1,g.value]])])])):(0,s.Q3)("",!0),(0,s.Lk)("tr",null,["bm"===P.value?((0,s.uX)(),(0,s.CE)("th",No)):(0,s.Q3)("",!0),_o,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":r[6]||(r[6]=e=>I.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(nt),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,Eo)))),128))],512),[[l.u1,I.value]])])]),"pb"===P.value?((0,s.uX)(),(0,s.CE)("tr",Lo,[Ro,wo,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":r[7]||(r[7]=e=>f.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(lt),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,To)))),128))],512),[[l.u1,f.value]])])])):(0,s.Q3)("",!0),(0,s.Lk)("tr",null,[Po,(0,s.Lk)("td",Ao,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":r[8]||(r[8]=e=>b.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(R.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,n.v_)(e),9,Do)))),128))],512),[[l.u1,b.value]])])]),(0,s.Lk)("tr",null,[Mo,(0,s.Lk)("td",null,[(0,s.bF)(E,{icon:C.value?["fas","toggle-on"]:["fas","toggle-off"],class:"iconSize",onClick:U},null,8,["icon"])])]),(0,s.Lk)("tr",null,[xo,(0,s.Lk)("td",null,[(0,s.bF)(E,{icon:h.value?["fas","toggle-on"]:["fas","toggle-off"],class:"iconSize",onClick:W},null,8,["icon"])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":r[9]||(r[9]=e=>k.value=e),class:"alarmInput",onInput:r[10]||(r[10]=e=>M(e))},null,544),[[l.Jo,k.value]])])]),"pb"===P.value?((0,s.uX)(),(0,s.CE)("tr",Ko,[Oo,(0,s.Lk)("td",null,[(0,s.bF)(E,{icon:S.value?["fas","toggle-on"]:["fas","toggle-off"],class:"iconSize",onClick:X},null,8,["icon"])])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("table",Bo,[Uo,(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[Wo,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":r[11]||(r[11]=e=>y.value=e),class:"autoBackUpPath"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(w.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,n.v_)(e),9,Xo)))),128))],512),[[l.u1,y.value]])])]),(0,s.Lk)("tr",null,[Fo,(0,s.Lk)("td",null,[(0,s.Lk)("div",$o,[(0,s.bF)((0,o.R1)(Zs.A),{modelValue:N.value,"onUpdate:modelValue":r[12]||(r[12]=e=>N.value=e)},null,8,["modelValue"]),(0,s.bF)((0,o.R1)(Zs.A),{modelValue:_.value,"onUpdate:modelValue":r[13]||(r[13]=e=>_.value=e)},null,8,["modelValue"]),(0,s.Lk)("button",{class:"backupBtn",onClick:x},"backup")])])])])]),(0,s.Lk)("button",{class:"saveBtn mb2",type:"button",onClick:r[14]||(r[14]=e=>B())},"Save Cell Image Analyzed")]),t.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":t.value,type:a.value,message:i.value,onHide:j,"onUpdate:hideAlert":j},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const Ho=Go;var jo=Ho;const Vo={id:"collapse-4"},Yo={class:"rbcDegreeCategoryNm"},qo={class:"mb1"},Jo={class:"degreeInput mb1"},Qo=["onUpdate:modelValue"],zo=["onUpdate:modelValue"],Zo=["onUpdate:modelValue"];var en=(0,s.pM)({__name:"rbcDegree",setup(e){const t=(0,o.Kh)({value:[]}),a=(0,o.KR)("post"),i=(0,o.KR)(!1),u=(0,o.KR)(""),r=(0,o.KR)("");(0,s.sV)((async()=>{await v()}));const c=async()=>{t.value=dt.rbcClassList.map((e=>({...e,classInfo:e.classInfo.map((t=>{const a=mt.find((a=>a.categoryId===e.categoryId&&a.classId===t.classId));return{...t,degree1:a?.degree1||0,degree2:a?.degree2||0,degree3:a?.degree3||0}}))})))},d=()=>{c()},m=async()=>{const e=[];t.value.forEach((t=>{t.classInfo.forEach((a=>{e.push({categoryId:t.categoryId,categoryNm:t.categoryNm,classId:a.classId,classNm:a.classNm,degree1:a.degree1,degree2:a.degree2,degree3:a.degree3})}))}));try{let t={};t="post"===a.value?await oe(e):await ne(e),t&&(g("Save successful"),a.value="put")}catch(l){I(l),console.error(l)}},v=async()=>{try{const e=await ie();a.value="put";const t=e.data;p(t)}catch(e){a.value="post",await c()}},p=e=>{const a=new Map;e.forEach((e=>{const t=e.categoryId,l=e.classId;if(a.has(t)){const s=a.get(t),o=s.classInfo.findIndex((e=>e.classId===l));-1===o?s.classInfo.push({classId:l,classNm:e.classNm,degree1:e.degree1,degree2:e.degree2,degree3:e.degree3}):s.classInfo[o].degree=e.degree}else{const s={categoryId:t,categoryNm:e.categoryNm,classInfo:[{classId:l,classNm:e.classNm,degree1:e.degree1,degree2:e.degree2,degree3:e.degree3}]};a.set(t,s)}})),t.value=Array.from(a.values())},g=e=>{i.value=!0,u.value="success",r.value=e},I=e=>{i.value=!0,u.value="error",r.value=e},f=()=>{i.value=!1};return(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("div",Vo,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"mt2 rbcClassListArr",key:"rbc"+t},[(0,s.Lk)("div",Yo,(0,n.v_)(e?.categoryNm),1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.classInfo,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t},[(0,s.Lk)("div",null,(0,n.v_)(e.classNm),1),(0,s.Lk)("div",qo," [ "+(0,n.v_)(`${e.degree1} , ${e.degree2} , ${e.degree3}`)+" ] ",1),(0,s.Lk)("div",null,[(0,s.Lk)("div",Jo,[(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.degree1=t},null,8,Qo),[[l.Jo,e.degree1]]),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.degree2=t},null,8,zo),[[l.Jo,e.degree2]]),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.degree3=t},null,8,Zo),[[l.Jo,e.degree3]])])])])))),128))])))),128))]),(0,s.Lk)("div",{class:"mt-2 degreeDiv"},[(0,s.Lk)("button",{onClick:d},"Reset"),(0,s.Lk)("button",{type:"button",onClick:m},"Save")])]),i.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":i.value,type:u.value,message:r.value,onHide:f,"onUpdate:hideAlert":f},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const tn=en;var an=tn;const ln={class:"customSettingContainer"},sn=(0,s.Lk)("p",{class:"mb1"},"Gripper Open",-1),on={class:"mt2"},nn=(0,s.Lk)("p",{class:"mb1"},"Camera Reset",-1),un=(0,s.Lk)("p",{class:"mb1"},"Charge Remaining Count",-1);var rn=(0,s.pM)({__name:"deviceControls",setup(e){const t=(0,o.KR)(!1),a=(0,o.KR)(""),l=(0,o.KR)(""),i=(0,r.Pj)(),u=(0,o.KR)(""),c=(0,s.EW)((()=>i.state.userModule)),d=(0,s.EW)((()=>i.state.commonModule)),m=(0,o.KR)(!1),v=(0,o.KR)(!1),p=(0,o.KR)(!1);let g=null,I=null;(0,s.sV)((async()=>{const e=JSON.parse(JSON.stringify(c.value));u.value=e.userId})),(0,s.wB)([d.value],(async e=>{await(0,s.dY)();const[t]=e,{isRunningState:a}=t||{};m.value=a}));const f=async()=>{await je()},b=()=>{null!==g&&clearTimeout(g),v.value=!0,Q().embedStatus.gripperOpen.reqUserId=u.value,Je.publish("childEmitSocketData",Q().embedStatus.gripperOpen),g=setTimeout((()=>{v.value=!1,g=null}),1500)},y=()=>{null!==I&&clearTimeout(I),p.value=!0,Q().embedStatus.gripperOpen.reqUserId=u.value,Je.publish("childEmitSocketData",Q().embedStatus.cameraReset),I=setTimeout((()=>{p.value=!1,I=null}),1500)},C=()=>{t.value=!1};return(e,o)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",ln,[(0,s.Lk)("li",null,[sn,(0,s.Lk)("button",{onClick:b,class:(0,n.C4)({defaultBtn:!0,blinkGripper:v.value})},"OK",2)]),(0,s.Lk)("li",on,[nn,(0,s.Lk)("button",{type:"button",class:(0,n.C4)(["defaultBtn",{defaultBtn:!0,blinkGripper:p.value}]),onClick:y},"OK ",2)]),(0,s.Lk)("li",{class:"mt2"},[un,(0,s.Lk)("button",{type:"button",class:"defaultBtn",onClick:f},"Scan")])])]),t.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":t.value,type:a.value,message:l.value,onHide:C,"onUpdate:hideAlert":C},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const cn=rn;var dn=cn;const mn={class:"customClass customSettingContainer"},vn=["onUpdate:modelValue","onInput"],pn=["onUpdate:modelValue","onInput"];var gn=(0,s.pM)({__name:"customClass",setup(e){const t=(0,o.KR)(""),a=[{customNum:90,abbreviation:"",fullNm:""},{customNum:91,abbreviation:"",fullNm:""},{customNum:92,abbreviation:"",fullNm:""},{customNum:93,abbreviation:"",fullNm:""},{customNum:94,abbreviation:"",fullNm:""}],i=(0,o.KR)([]),u=(0,o.KR)(!1),r=(0,o.KR)(""),c=(0,o.KR)("");(0,s.sV)((async()=>{await v()}));const d=async()=>{try{let e;if("post"!==t.value){const e=await re({classArr:i.value});return void(e.data?(p($.UPDATE_SUCCESSFULLY),await v()):g("update failed"))}e=await ue({classArr:i.value}),e&&(p("save successful"),t.value="put",await v())}catch(e){console.log(e)}},m=(e,t,a)=>{const l=e.target,s=l.value.replace(/[^a-zA-Z0-9]/g,"");t[a]=s.trim()},v=async()=>{try{const e=await ce();if(e)if(!e?.data||e?.data instanceof Array&&0===e?.data.length)t.value="post",i.value=a;else{t.value="put";const a=e.data;i.value=a}}catch(e){console.log(e)}},p=e=>{u.value=!0,r.value="success",c.value=e},g=e=>{u.value=!0,r.value="error",c.value=e},I=()=>{u.value=!1};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",mn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id},[(0,s.Lk)("span",null,"ID: "+(0,n.v_)(e.customNum),1),(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.abbreviation=t,type:"text",maxlength:"3",placeholder:"abbreviation",onInput:t=>m(t,e,"abbreviation")},null,40,vn),[[l.Jo,e.abbreviation]])]),(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.fullNm=t,type:"text",maxlength:"25",placeholder:"class name",onInput:t=>m(t,e,"fullNm")},null,40,pn),[[l.Jo,e.fullNm]])])])))),128))]),(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:d},"Save")]),u.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":u.value,type:r.value,message:c.value,onHide:I,"onUpdate:hideAlert":I},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const In=gn;var fn=In;const bn={class:"wbcHotKeysItems"},yn=["onUpdate:modelValue","onInput"];var Cn=(0,s.pM)({__name:"wbcHotKeys",setup(e){const t=(0,o.KR)(""),a=(0,o.KR)([]),i=(0,o.KR)(!1),u=(0,o.KR)(""),r=(0,o.KR)(""),c=(0,o.KR)("pb");(0,s.sV)((async()=>{c.value="bm"===window.PROJECT_TYPE?"bm":"pb",await v()}));const d=(e,t,a)=>{const l=e.target,s=l.value.replace(/[^a-zA-Z0-9]/g,"");t[a]=s.trim()},m=async()=>{try{let e;if("post"!==t.value){const e=await me({wbcHotKeysItems:a.value});return void(e.data?(p($.UPDATE_SUCCESSFULLY),await v()):g("update failed"))}e=await de({wbcHotKeysItems:a.value}),e&&(p("save successful"),t.value="put",await v())}catch(e){console.log(e)}},v=async()=>{try{const e=await ve();e&&(!e?.data||e?.data instanceof Array&&0===e?.data.length?(t.value="post",a.value="bm"===c.value?pt:vt):(t.value="put",a.value=e.data))}catch(e){console.log(e)}},p=e=>{i.value=!0,u.value="success",r.value=e},g=e=>{i.value=!0,u.value="error",r.value=e},I=()=>{i.value=!1};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",bn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id},[(0,s.Lk)("span",null,(0,n.v_)(e.abbreviation),1),(0,s.Lk)("span",null,(0,n.v_)(e.fullNm),1),(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.key=t,type:"text",maxlength:"25",placeholder:"class name",onInput:t=>d(t,e,"key")},null,40,yn),[[l.Jo,e.key]])])])))),128))]),(0,s.Lk)("button",{onClick:m,class:"saveBtn",type:"button"},"Save")]),i.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":i.value,type:u.value,message:r.value,onHide:I,"onUpdate:hideAlert":I},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const hn=Cn;var kn=hn;const Sn={class:"wbcHotKeysItems"},Nn=["onUpdate:modelValue","onInput"];var _n=(0,s.pM)({__name:"bfHotKeys",setup(e){const t=(0,o.KR)(""),a=(0,o.KR)([]),i=(0,o.KR)(!1),u=(0,o.KR)(""),r=(0,o.KR)("");(0,s.sV)((async()=>{await m()}));const c=(e,t,a)=>{const l=e.target,s=l.value.replace(/[^a-zA-Z0-9]/g,"");t[a]=s.trim()},d=async()=>{try{let e;if("post"!==t.value){const e=await ge({bfHotKeysItems:a.value});return void(e.data?(v($.UPDATE_SUCCESSFULLY),await m()):p("update failed"))}e=await pe({bfHotKeysItems:a.value}),e&&(v("save successful"),t.value="put",await m())}catch(e){console.log(e)}},m=async()=>{try{const e=await Ie();e&&(!e?.data||e?.data instanceof Array&&0===e?.data.length?(t.value="post",a.value=gt):(t.value="put",a.value=e.data))}catch(e){console.log(e)}},v=e=>{i.value=!0,u.value="success",r.value=e},p=e=>{i.value=!0,u.value="error",r.value=e},g=()=>{i.value=!1};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",Sn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id},[(0,s.Lk)("span",null,(0,n.v_)(e?.abbreviation),1),(0,s.Lk)("span",null,(0,n.v_)(e?.fullNm),1),(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.key=t,type:"text",maxlength:"25",placeholder:"class name",onInput:t=>c(t,e,"key")},null,40,Nn),[[l.Jo,e.key]])])])))),128))]),(0,s.Lk)("button",{onClick:d,class:"saveBtn",type:"button"},"Save")]),i.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":i.value,type:u.value,message:r.value,onHide:g,"onUpdate:hideAlert":g},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const En=_n;var Ln=En;const Rn={class:"normalItems"},wn={class:"mt1"},Tn=["onUpdate:modelValue","onInput"],Pn=["onInput","onUpdate:modelValue"];var An=(0,s.pM)({__name:"normalRange",setup(e){const t=(0,o.KR)(""),a=(0,o.KR)([]),i=(0,o.KR)(!1),u=(0,o.KR)(""),r=(0,o.KR)("");(0,s.sV)((async()=>{await m()}));const c=async()=>{try{let e;if("post"!==t.value){const e=await be({normalRangeItems:a.value});return void(e.data?(v($.UPDATE_SUCCESSFULLY),await m()):p("update failed"))}e=await fe({normalRangeItems:a.value}),e&&(v("save successful"),t.value="put",await m())}catch(e){console.log(e)}},d=(e,t,a)=>{const l=e.target,s=l.value.replace(/[^0-9]/g,"");t[a]=s.trim()},m=async()=>{try{const e=await ye();e&&(!e?.data||e?.data instanceof Array&&0===e?.data.length?(t.value="post",a.value=It):(t.value="put",a.value=e.data))}catch(e){console.log(e)}},v=e=>{i.value=!0,u.value="success",r.value=e},p=e=>{i.value=!0,u.value="error",r.value=e},g=()=>{i.value=!1};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",Rn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id},[(0,s.Lk)("div",null,(0,n.v_)(e.abbreviation)+" - "+(0,n.v_)(e.fullNm),1),(0,s.Lk)("div",wn,[(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.min=t,type:"text",maxlength:"25",placeholder:"class name",onInput:t=>d(t,e,"min")},null,40,Tn),[[l.Jo,e.min]])]),(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{onInput:t=>d(t,e,"max"),"onUpdate:modelValue":t=>e.max=t,type:"text",maxlength:"25",placeholder:"class name"},null,40,Pn),[[l.Jo,e.max]])]),(0,s.Lk)("span",null,(0,n.v_)(e.unit),1)])])))),128))]),(0,s.Lk)("button",{onClick:c,class:"saveBtn",type:"button"},"Save")]),i.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":i.value,type:u.value,message:r.value,onHide:g,"onUpdate:hideAlert":g},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Dn=An;var Mn=Dn;const xn={class:"wbcClassScroll"},Kn=(0,s.Lk)("h1",{class:"classTitle"},"Class",-1),On=["onDragstart","onDrop"],Bn={class:"nth1ChildOrder"};var Un=(0,s.pM)({__name:"classOrder",setup(e){const t=(0,o.KR)([]),a=(0,o.KR)(-1),i=(0,o.KR)(0),u=(0,o.KR)(""),r=(0,o.KR)(!1),c=(0,o.KR)(""),d=(0,o.KR)("");(0,s.sV)((async()=>{t.value="bm"===window.PROJECT_TYPE?ka:ha,await m()}));const m=async()=>{try{const e=await Ge();e&&(0===e?.data.length?u.value="post":(u.value="put",t.value=e.data.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx)))))}catch(e){console.log(e)}},v=async()=>{let e=t.value;for(const t in e)e[t].orderIdx=t;try{let t={};if(t="post"===u.value?await $e(e):await He(e),t){const e="post"===u.value?"save successful":$.UPDATE_SUCCESSFULLY;I(e)}}catch(a){console.log(a)}},p=(e,t)=>{a.value=e,i.value=t.clientY-t.target.getBoundingClientRect().top},g=(e,l)=>{if(l.preventDefault(),-1!==a.value){const l=t.value.splice(a.value,1)[0];t.value.splice(e,0,l),a.value=-1}},I=e=>{r.value=!0,c.value="success",d.value=e},f=()=>{r.value=!1};return(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",xn,[Kn,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"wbcClassDbDiv",draggable:"true",onDragstart:e=>p(t,e),onDragover:a[0]||(a[0]=(0,l.D$)((()=>{}),["prevent"])),onDrop:e=>g(t,e)},[(0,s.Lk)("ul",Bn,[(0,s.Lk)("li",null,(0,n.v_)(e?.fullNm),1)])],40,On)))),128))]),(0,s.Lk)("button",{onClick:v,class:"saveBtn",type:"button"},"Save"),r.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":r.value,type:c.value,message:d.value,onHide:f,"onUpdate:hideAlert":f},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Wn=Un;var Xn=Wn;const Fn={class:"alignDiv"},$n={class:"defaultTable",style:{margin:"auto"}},Gn=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"WBC min"),(0,s.Lk)("th",null,"WBC max"),(0,s.Lk)("th",null,"count")])],-1),Hn=["onUpdate:modelValue"],jn=["onUpdate:modelValue"],Vn=["onUpdate:modelValue"],Yn=["value"],qn={class:"mt1"};var Jn=(0,s.pM)({__name:"wbcRunningCount",setup(e){const t=(0,o.KR)(""),a=(0,o.KR)([]),i=(0,o.KR)(!1),u=(0,o.KR)(""),r=(0,o.KR)("");(0,s.sV)((async()=>{await c()}));const c=async()=>{try{const e=await Oe();if(e&&e.data){const l=e.data;!l||l instanceof Array&&0===l.length?(console.log(null),t.value="post",a.value=kt):(t.value="put",a.value=l)}}catch(e){console.error(e)}},d=async()=>{try{let e;if("post"!==t.value){const e=await Ke({wbcRunCountItems:a.value});return void(e.data?(m($.UPDATE_SUCCESSFULLY),await c()):v("update failed"))}e=await xe({wbcRunCountItems:a.value}),e&&(m("save successful"),t.value="put",await c())}catch(e){console.error(e)}},m=e=>{i.value=!0,u.value="success",r.value=e},v=e=>{i.value=!0,u.value="error",r.value=e},p=()=>{i.value=!1};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Fn,[(0,s.Lk)("table",$n,[Gn,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.min=t,class:"form-control form-control-sm"},null,8,Hn),[[l.Jo,e.min]])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.max=t,class:"form-control form-control-sm"},null,8,jn),[[l.Jo,e.max]])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t=>e.wbcTargetCount=t,class:"form-select form-select-sm"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(ot),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:+e.value},(0,n.v_)(e.text),9,Yn)))),128))],8,Vn),[[l.u1,e.wbcTargetCount]])])])))),128))])])]),(0,s.Lk)("div",qn,[(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:t[0]||(t[0]=e=>d())},"Save")]),i.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":i.value,type:u.value,message:r.value,onHide:p,"onUpdate:hideAlert":p},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Qn=Jn;var zn=Qn;const Zn={class:"settingTabSubButtons"},ei={class:"tab-content"};var ti=(0,s.pM)({__name:"index",setup(e){const t=(0,o.KR)("cellImageAnalyzed"),a=(0,o.KR)(""),l=e=>{t.value=e},i=(0,s.EW)((()=>{switch(t.value){case"cellImageAnalyzed":return jo;case"rbcDegree":return an;case"deviceControls":return dn;case"wbcCustomClass":return fn;case"wbcHotKeys":return kn;case"bfHotKeys":return Ln;case"normalRange":return Mn;case"wbcOrder":return Xn;case"wbcRunningCount":return zn;default:return null}}));return(0,s.sV)((async()=>{a.value="bm"===window.PROJECT_TYPE?"bm":"pb"})),(e,o)=>((0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",Zn,[(0,s.Lk)("button",{onClick:o[0]||(o[0]=e=>l("cellImageAnalyzed")),class:(0,n.C4)({active:"cellImageAnalyzed"===t.value})},"Cell Image Analyzed",2),"pb"===a.value?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:o[1]||(o[1]=e=>l("rbcDegree")),class:(0,n.C4)({active:"rbcDegree"===t.value})},"RBC Degree",2)):(0,s.Q3)("",!0),(0,s.Lk)("button",{onClick:o[2]||(o[2]=e=>l("deviceControls")),class:(0,n.C4)({active:"deviceControls"===t.value})},"Device Controls",2),(0,s.Lk)("button",{onClick:o[3]||(o[3]=e=>l("wbcRunningCount")),class:(0,n.C4)({active:"wbcRunningCount"===t.value})},"WBC Running Count",2),(0,s.Lk)("button",{onClick:o[4]||(o[4]=e=>l("wbcCustomClass")),class:(0,n.C4)({active:"wbcCustomClass"===t.value})},(0,n.v_)("pb"===a.value?"WBC":"BM")+" Custom Class ",3),(0,s.Lk)("button",{onClick:o[5]||(o[5]=e=>l("wbcHotKeys")),class:(0,n.C4)({active:"wbcHotKeys"===t.value})},(0,n.v_)("pb"===a.value?"WBC":"BM")+" Hot Keys ",3),"pb"===a.value?((0,s.uX)(),(0,s.CE)("button",{key:1,onClick:o[6]||(o[6]=e=>l("bfHotKeys")),class:(0,n.C4)({active:"bfHotKeys"===t.value})},"BF Hot Keys",2)):(0,s.Q3)("",!0),(0,s.Lk)("button",{onClick:o[7]||(o[7]=e=>l("normalRange")),class:(0,n.C4)({active:"normalRange"===t.value})},"Normal Range",2),(0,s.Lk)("button",{onClick:o[8]||(o[8]=e=>l("wbcOrder")),class:(0,n.C4)({active:"wbcOrder"===t.value})},(0,n.v_)("pb"===a.value?"WBC":"BM")+" Order ",3)]),(0,s.Lk)("div",ei,[((0,s.uX)(),(0,s.Wv)((0,s.$y)(i.value)))])]))}});const ai=ti;var li=ai;const si={class:"layer"},oi={class:"layer-content"},ni={class:"layer-header"},ii={class:"layer-body"};var ui={__name:"modal",emits:["update:closeLayer"],setup(e,{emit:t}){const a=(0,o.KR)(!1),l=t,n=()=>{a.value=!1,l("update:closeLayer",!1)};return(0,s.sV)((()=>{l("afterOpen")})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",si,[(0,s.Lk)("div",oi,[(0,s.Lk)("div",ni,[(0,s.RG)(e.$slots,"header"),(0,s.Lk)("button",{onClick:n,class:"alertCloseButton"},"Close")]),(0,s.Lk)("div",ii,[(0,s.RG)(e.$slots,"content")])])]))}};const ri=ui;var ci=ri;const di={class:"settingContainer"},mi={class:"searchUserContainer"},vi=["value"],pi={class:"table defaultTable mt2"},gi=(0,s.Lk)("th",null,"No.",-1),Ii=(0,s.Lk)("th",null,"User Type",-1),fi=(0,s.Lk)("th",null,"User ID",-1),bi=(0,s.Lk)("th",null,"Name",-1),yi=(0,s.Lk)("th",null,"Employee",-1),Ci=(0,s.Lk)("th",null,"Subscription Date",-1),hi=(0,s.Lk)("th",null,"Latest Date",-1),ki=(0,s.Lk)("th",null,"Edit",-1),Si=(0,s.Lk)("th",null,"Delete",-1),Ni=["onClick"],_i=["onClick"],Ei=(0,s.Lk)("h2",null,"Edit Account",-1),Li={class:"editModalContainer"},Ri={class:"userInputWrapper"},wi=(0,s.Lk)("label",{class:"userLabel",for:"userType",style:{"line-height":"0"}},"User Type",-1),Ti=["value"],Pi={class:"userInputWrapper"},Ai=(0,s.Lk)("label",{class:"userLabel",for:"userId"},"User ID",-1),Di={class:"userInputWrapper"},Mi=(0,s.Lk)("label",{class:"userLabel",for:"userName"},"Name",-1),xi={class:"userInputWrapper"},Ki=(0,s.Lk)("label",{class:"userLabel",for:"employeeNo"},"Employee",-1),Oi={class:"userInputWrapper"},Bi=(0,s.Lk)("label",{class:"userLabel",for:"subscriptionDate"},"Subscription Date",-1),Ui={class:"userInputWrapper"},Wi=(0,s.Lk)("label",{class:"userLabel",for:"latestDate"},"Latest Date",-1);var Xi=(0,s.pM)({__name:"index",setup(e){const t=(0,r.Pj)(),a=(0,s.EW)((()=>t.state.userModule)),i=a.value,u=(0,o.KR)(""),c=(0,o.KR)([]),d=e=>e.replace("T"," ").replace(".000Z",""),m=(0,o.KR)("userId"),v=(0,o.KR)([{value:"userId",text:"User Id"},{value:"name",text:"User Name"}]),p=(0,o.KR)([{value:"normal",text:"normal"},{value:"admin",text:"admin"}]),g=(0,o.KR)(""),I=(0,o.KR)(!1),f=(0,o.KR)({}),b=(0,o.KR)(""),y=(0,s.EW)((()=>d(f.value.subscriptionDate))),C=(0,s.EW)((()=>d(f.value.latestDate))),h=(0,o.KR)(!1),k=(0,o.KR)(""),S=(0,o.KR)("");(0,s.sV)((async()=>{u.value=i.userId,await L()}));const N=(e,t,a)=>{const l=t.toLowerCase();return e.filter((e=>{const t="userId"===a?String(e.userId):e.name;return t.toLowerCase().includes(l)}))},_=async()=>{try{const e=await Is(String(u.value));if(e&&e.data){const t=e.data.users||[],a=N(t,g.value,m.value);c.value=a}}catch(e){console.error("An error occurred:",e)}},E=async()=>{try{await bs(f.value,b.value),await L(),I.value=!1;const e=c.value.find((e=>e.userId===u.value));await t.dispatch("userModule/setUserAction",{id:e.id,userId:e.userId,employeeNo:e.employeeNo,latestDate:e.latestDate,password:e.password,subscriptionDate:e.subscriptionDate,userType:e.userType,name:e.name}),sessionStorage.setItem("user",JSON.stringify(c.value.find((e=>e.userId===u.value)))),localStorage.setItem("user",JSON.stringify(c.value.find((e=>e.userId===u.value))))}catch(e){console.log(e)}},L=async()=>{try{const e=await Is(String(u.value));e&&e?.data&&(c.value=e.data.users||[])}catch(e){console.log(e)}},R=async e=>{b.value=e;try{const t=await fs(e);f.value=t.data.user}catch(t){console.log(t)}},w=async e=>{await R(e),""!==e&&(I.value=!0)},T=()=>{},P=e=>{I.value=e,f.value={},b.value=""},A=()=>{h.value=!1},D=async()=>{h.value=!1;try{await ys({userId:b.value}),await L(),b.value===u.value&&(yy.push("/user/login"),localStorage.removeItem("user"),sessionStorage.removeItem("user"))}catch(e){console.log(e)}},M=e=>{h.value=!0,b.value=e,S.value=`Do you wish to proceed with deleting user ID ${e}?`};return(e,t)=>{const a=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",di,[(0,s.Lk)("div",mi,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),class:"searchSelect"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(v.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,vi)))),128))],512),[[l.u1,m.value]]),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>g.value=e),class:"searchInputBox"},null,512),[[l.Jo,g.value]]),(0,s.bF)(a,{icon:["fas","search"],class:"searchBtn",onClick:_})]),(0,s.Lk)("table",pi,[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[gi,Ii,fi,bi,yi,Ci,hi,"admin"===(0,o.R1)(i).userType?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[ki,Si],64)):(0,s.Q3)("",!0)])]),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,n.v_)(e.id),1),(0,s.Lk)("td",null,(0,n.v_)(e.userType),1),(0,s.Lk)("td",null,(0,n.v_)(e.userId),1),(0,s.Lk)("td",null,(0,n.v_)(e.name),1),(0,s.Lk)("td",null,(0,n.v_)(e.employeeNo),1),(0,s.Lk)("td",null,(0,n.v_)(d(e.subscriptionDate)),1),(0,s.Lk)("td",null,(0,n.v_)(d(e.latestDate)),1),"admin"===(0,o.R1)(i).userType?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("td",{class:"cursorPointer hoverSizeAction",onClick:t=>w(e.userId)},[(0,s.bF)(a,{icon:["fas","pen-to-square"]})],8,Ni),(0,s.Lk)("td",{class:"cursorPointer hoverSizeAction",onClick:t=>M(e.userId)},[(0,s.bF)(a,{icon:["fas","trash"]})],8,_i)],64)):(0,s.Q3)("",!0)])))),128))])])]),I.value?((0,s.uX)(),(0,s.Wv)(ci,{key:0,"onUpdate:closeLayer":P,onAfterOpen:T},{header:(0,s.k6)((()=>[Ei])),content:(0,s.k6)((()=>[(0,s.Lk)("div",Li,[(0,s.Lk)("div",Ri,[wi,(0,s.bo)((0,s.Lk)("select",{id:"userType","onUpdate:modelValue":t[2]||(t[2]=e=>f.value.userType=e),class:"searchSelect inputMiddleWrapper",style:{width:"132px !important"}},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(p.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,Ti)))),128))],512),[[l.u1,f.value.userType]])]),(0,s.Lk)("div",Pi,[Ai,(0,s.bo)((0,s.Lk)("input",{id:"userId",class:"inputMiddleWrapper disabledInput",type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>f.value.userId=e),disabled:"",readonly:""},null,512),[[l.Jo,f.value.userId]])]),(0,s.Lk)("div",Di,[Mi,(0,s.bo)((0,s.Lk)("input",{id:"userName",class:"inputMiddleWrapper",type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>f.value.name=e)},null,512),[[l.Jo,f.value.name]])]),(0,s.Lk)("div",xi,[Ki,(0,s.bo)((0,s.Lk)("input",{id:"employeeNo",class:"inputMiddleWrapper",type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>f.value.employeeNo=e)},null,512),[[l.Jo,f.value.employeeNo]])]),(0,s.Lk)("div",Oi,[Bi,(0,s.bo)((0,s.Lk)("input",{id:"subscriptionDate",class:"inputMiddleWrapper disabledInput",type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>y.value=e),disabled:""},null,512),[[l.Jo,y.value]])]),(0,s.Lk)("div",Ui,[Wi,(0,s.bo)((0,s.Lk)("input",{id:"latestDate",class:"inputMiddleWrapper disabledInput",type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>C.value=e),disabled:""},null,512),[[l.Jo,C.value]])])]),(0,s.Lk)("div",{class:"modalBottom"},[(0,s.Lk)("button",{type:"button",class:"alertButton",onClick:E},"Edit")])])),_:1})):(0,s.Q3)("",!0),h.value?((0,s.uX)(),(0,s.Wv)(wt,{key:1,"is-visible":h.value,type:k.value,message:S.value,onHide:A,onOkConfirm:D},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const Fi=Xi;var $i=Fi;const Gi={class:"settingImagePrint"},Hi=["value"],ji={class:"mt1"};var Vi=(0,s.pM)({__name:"ImagePrint",setup(e){const t=(0,o.KR)([]),a=(0,o.KR)([]),i=(0,o.KR)(""),u=(0,o.KR)(!1),r=(0,o.KR)(""),c=(0,o.KR)("");(0,s.sV)((async()=>{await m()}));const d=async()=>{try{let e;if(t.value.forEach((e=>{e.checked=a.value.includes(e.classId)})),"post"!==i.value){const e=await he({imagePrintItems:t.value});return void(e.data?(v($.UPDATE_SUCCESSFULLY),await m()):p("update failed"))}e=await Ce({imagePrintItems:t.value}),e&&(v("save successful"),i.value="put",await m())}catch(e){console.error(e)}},m=async()=>{try{const e=await ke();if(e&&e.data){const l=e.data;!l||l instanceof Array&&0===l.length?(i.value="post",t.value="bm"===window.PROJECT_TYPE?bt:ft):(i.value="put",t.value=l,a.value=l.filter((e=>e.checked)).map((e=>e.classId)))}}catch(e){console.error(e)}},v=e=>{u.value=!0,r.value="success",c.value=e},p=e=>{u.value=!0,r.value="error",c.value=e},g=()=>{u.value=!1};return(e,o)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Gi,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,(e=>((0,s.uX)(),(0,s.CE)("label",{key:e.id},[(0,s.Lk)("div",null,(0,n.v_)(e.fullNm),1),(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:e.classId,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e)},null,8,Hi),[[l.lH,a.value]])])])))),128))]),(0,s.Lk)("div",ji,[(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:o[1]||(o[1]=e=>d())},"Save")]),u.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":u.value,type:r.value,message:c.value,onHide:g,"onUpdate:hideAlert":g},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Yi=Vi;var qi=Yi;const Ji={class:"alignDiv"},Qi=(0,s.Lk)("p",{class:"mb4"}," [ WBC ] ",-1),zi={class:"mb1"},Zi=["onUpdate:modelValue"],eu={class:"alignDiv"},tu=(0,s.Lk)("p",{class:"mt2 mb4"}," [ RBC ] ",-1),au={class:"mb1"},lu=["onUpdate:modelValue"],su={class:"alignDiv"},ou=(0,s.Lk)("p",{class:"mb2"}," [ Min Count ] ",-1),nu={key:0},iu=(0,s.Lk)("p",{class:"mb1 mt1"},"Giant Platelet",-1),uu={key:1},ru=(0,s.Lk)("p",{class:"mb1 mt1"},"Platelet Aggregation",-1),cu={class:"mt1"};var du=(0,s.pM)({__name:"lisCode",setup(e){const t=(0,o.KR)([]),a=(0,o.KR)([]),i=(0,o.KR)([]),u=(0,o.KR)(""),r=(0,o.KR)(!1),c=(0,o.KR)(""),d=(0,o.KR)("");(0,s.sV)((async()=>{await p()}));const m=async()=>{try{let e,l,s;if("post"!==u.value){const e=await Ne({lisCodeItems:t.value}),l=await Le({lisCodeItems:a.value}),s=await Ue({minCountItems:i.value});return void(e.data&&l.data&&s.data?(g($.UPDATE_SUCCESSFULLY),await p()):I("update failed"))}e=await Se({lisCodeItems:t.value}),l=await Ee({lisCodeItems:a.value}),s=await Be({minCountItems:i.value}),e&&l&&s&&(g("save successful"),u.value="put",await p())}catch(e){console.error(e)}},v=(e,t)=>{const a=e.target,l=a.value.replace(/[^0-9]/g,"");t?i.value[0].minGPCount=Number(l.trim()):i.value[0].minPACount=Number(l.trim())},p=async()=>{try{const e=await _e(),l=await Re(),s=await We();if(e&&e.data&&l&&l.data&&s&&s.data){const o=e.data,n=l.data,r=s.data;!o||o instanceof Array&&0===o.length?(u.value="post",t.value=yt):(u.value="put",t.value=o),!n||n instanceof Array&&0===n.length?(u.value="post",a.value=Ct):(u.value="put",a.value=n),!r||r instanceof Array&&0===r.length?(u.value="post",i.value=ht):(u.value="put",i.value=r)}}catch(e){console.error(e)}},g=e=>{r.value=!0,c.value="success",d.value=e},I=e=>{r.value=!0,c.value="error",d.value=e},f=()=>{r.value=!1};return(e,o)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Ji,[Qi,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,(e=>((0,s.uX)(),(0,s.CE)("label",{key:e.classId},[(0,s.Lk)("p",zi,(0,n.v_)(e.fullNm),1),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.key=t},null,8,Zi),[[l.Jo,e.key]])])))),128))]),(0,s.Lk)("div",eu,[tu,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("label",{key:e.fullNm},[(0,s.Lk)("p",au,(0,n.v_)(e.categoryNm)+" - "+(0,n.v_)(e.fullNm),1),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.key=t},null,8,lu),[[l.Jo,e.key]])])))),128))]),(0,s.Lk)("div",su,[ou,(0,s.Lk)("ul",null,[i.value.length>0?((0,s.uX)(),(0,s.CE)("li",nu,[iu,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>i.value[0].minGPCount=e),onInput:o[1]||(o[1]=e=>v(e,!0)),class:"form-control form-control-sm"},null,544),[[l.Jo,i.value[0].minGPCount]])])):(0,s.Q3)("",!0),i.value.length>0?((0,s.uX)(),(0,s.CE)("li",uu,[ru,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=e=>i.value[0].minPACount=e),onInput:o[3]||(o[3]=e=>v(e,!1)),class:"form-control form-control-sm"},null,544),[[l.Jo,i.value[0].minPACount]])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",cu,[(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:o[4]||(o[4]=e=>m())},"Save")]),r.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":r.value,type:c.value,message:d.value,onHide:f,"onUpdate:hideAlert":f},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const mu=du;var vu=mu;const pu=[{siteCd:"0002",hospitalNm:"서울성모병원"},{siteCd:"0003",hospitalNm:"스타고"},{siteCd:"0004",hospitalNm:"이원의료재단"},{siteCd:"0006",hospitalNm:"고대안암병원"},{siteCd:"0007",hospitalNm:"삼광의료재단"},{siteCd:"0011",hospitalNm:"인하대병원"},{siteCd:"0019",hospitalNm:"인천길병원"},{siteCd:"0026",hospitalNm:"건국대학교병원"},{siteCd:"0000",hospitalNm:"0000"}],gu={class:"alignDiv"},Iu={class:"mb1"},fu=["onUpdate:modelValue"],bu={class:"mt1"};var yu=(0,s.pM)({__name:"cbcCode",setup(e){const t=(0,o.KR)([]),a=(0,o.KR)(""),i=(0,o.KR)(!1),u=(0,o.KR)(""),r=(0,o.KR)(""),c=(0,o.KR)("");(0,s.sV)((async()=>{await g(),await m()}));const d=async()=>{try{let e;if("post"!==a.value){const e=await Te({cbcCodeItems:t.value});return void(e.data?(v($.UPDATE_SUCCESSFULLY),await m()):p("update failed"))}e=await we({cbcCodeItems:t.value}),e&&(v("save successful"),a.value="put",await m())}catch(e){console.error(e)}},m=async()=>{try{const e=await Pe();if(e&&e.data){const l=e.data;if(!l||l instanceof Array&&0===l.length){a.value="post";const e=pu.filter((e=>e.siteCd===c.value))[0].hospitalNm;t.value="인하대병원"===e?rt:ct}else a.value="put",t.value=l}}catch(e){console.error(e)}},v=e=>{i.value=!0,u.value="success",r.value=e},p=e=>{i.value=!0,u.value="error",r.value=e},g=async()=>{try{const e=await At();c.value=e.data.siteCd}catch(e){console.log(e)}},I=()=>{i.value=!1};return(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",gu,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,(e=>((0,s.uX)(),(0,s.CE)("label",{key:e.cd},[(0,s.Lk)("p",Iu,(0,n.v_)(e.fullNm),1),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.classCd=t},null,8,fu),[[l.Jo,e.classCd]])])))),128))]),(0,s.Lk)("div",bu,[(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:a[0]||(a[0]=e=>d())},"Save")]),i.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":i.value,type:u.value,message:r.value,onHide:I,"onUpdate:hideAlert":I},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Cu=yu;var hu=Cu;const ku={class:"alignDiv",style:{"text-align":"center"}},Su=(0,s.Lk)("p",{class:"mb2"},"LIS Hot Key",-1),Nu=["value"],_u=(0,s.Lk)("p",{class:"mb2 mt2"},"Lis File Path",-1),Eu=["value"],Lu=(0,s.Lk)("p",{class:"mb2 mt2"},"Cbc File Path",-1),Ru=["value"],wu={class:"mt1"};var Tu=(0,s.pM)({__name:"filePathSet",setup(e){const t=(0,o.KR)([]),a=(0,o.KR)(""),l=(0,o.KR)(!1),n=(0,o.KR)(""),i=(0,o.KR)("");(0,s.sV)((async()=>{await r()}));const u=async()=>{try{let e;if("post"!==a.value){const e=await De({filePathSetItems:t.value});return void(e.data?(v($.UPDATE_SUCCESSFULLY),await r()):p("update failed"))}e=await Ae({filePathSetItems:t.value}),e&&(v("save successful"),a.value="put",await r())}catch(e){console.error(e)}},r=async()=>{try{const e=await Me();if(e&&e.data){const l=e.data;!l||l instanceof Array&&0===l.length?(a.value="post",t.value=St):(a.value="put",t.value=l)}}catch(e){console.error(e)}},c=(e,a)=>{t.value[a].lisHotKey=e.target.value},d=(e,a)=>{t.value[a].lisFilePath=e.target.value},m=(e,a)=>{t.value[a].cbcFilePath=e.target.value},v=e=>{l.value=!0,n.value="success",i.value=e},p=e=>{l.value=!0,n.value="error",i.value=e},g=()=>{l.value=!1};return(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",ku,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,[Su,(0,s.Lk)("input",{type:"text",value:t.value[0]?t.value[0].lisHotKey:"",onInput:a[0]||(a[0]=e=>c(e,0))},null,40,Nu)]),(0,s.Lk)("li",null,[_u,(0,s.Lk)("input",{type:"text",value:t.value[0]?t.value[0].lisFilePath:"",onInput:a[1]||(a[1]=e=>d(e,0))},null,40,Eu)]),(0,s.Lk)("li",null,[Lu,(0,s.Lk)("input",{type:"text",value:t.value[0]?t.value[0].cbcFilePath:"",onInput:a[2]||(a[2]=e=>m(e,0))},null,40,Ru)])])]),(0,s.Lk)("div",wu,[(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:a[3]||(a[3]=e=>u())},"Save")]),l.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":l.value,type:n.value,message:i.value,onHide:g,"onUpdate:hideAlert":g},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Pu=Tu;var Au=Pu;const Du={class:"settingTabSubButtons"},Mu={key:0},xu={class:"tab-content"};var Ku=(0,s.pM)({__name:"index",setup(e){const t=(0,o.KR)(!1);let a=(0,o.KR)("ImagePrint");const l=e=>{a.value=e},i=(0,s.EW)((()=>{switch(a.value){case"ImagePrint":return qi;case"LisCode":return vu;case"CbcCode":return hu;case"filePathSet":return Au;default:return null}}));return(0,s.sV)((()=>{t.value="bm"===window.PROJECT_TYPE})),(e,u)=>((0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",Du,[(0,s.Lk)("button",{onClick:u[0]||(u[0]=e=>l("ImagePrint")),class:(0,n.C4)({active:"ImagePrint"===(0,o.R1)(a)})},"Image Print",2),t.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Mu,[(0,s.Lk)("button",{onClick:u[1]||(u[1]=e=>l("LisCode")),class:(0,n.C4)({active:"LisCode"===(0,o.R1)(a)})},"Lis Code",2),(0,s.Lk)("button",{onClick:u[2]||(u[2]=e=>l("CbcCode")),class:(0,n.C4)({active:"CbcCode"===(0,o.R1)(a)})},"CBC Code",2),(0,s.Lk)("button",{onClick:u[3]||(u[3]=e=>l("filePathSet")),class:(0,n.C4)({active:"filePathSet"===(0,o.R1)(a)})},"Lis(CBC) Hot Key & File Path",2)]))]),(0,s.Lk)("div",xu,[((0,s.uX)(),(0,s.Wv)((0,s.$y)(i.value)))])]))}});const Ou=Ku;var Bu=Ou;const Uu=(0,s.Lk)("p",{class:"mb1"},"QualityCheck",-1);var Wu=(0,s.pM)({__name:"index",setup(e){const t=async()=>{await Ve()};return(e,a)=>((0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("ul",{class:"customSettingContainer"},[(0,s.Lk)("li",{class:"mt2"},[Uu,(0,s.Lk)("button",{type:"button",class:"defaultBtn",onClick:t},"Ok")])])]))}});const Xu=Wu;var Fu=Xu;const $u={class:"versionContainer"};var Gu=(0,s.pM)({__name:"index",setup(e){const t=(0,o.KR)();return(0,s.sV)((()=>{t.value=[{key:"AI Version",name:window.AI_VERSION},{key:"Web Frontend Version",name:window.WEB_FRONTEND_VERSION},{key:"Web Backend Version",name:window.WEB_BACKEND_VERSION},{key:"PB Version",name:window.PB_VERSION}]})),(e,a)=>((0,s.uX)(),(0,s.CE)("div",$u,[(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},[(0,s.Lk)("span",null,(0,n.v_)(e.key),1),(0,s.Lk)("span",null,(0,n.v_)(e.name),1)])))),128))])]))}});const Hu=Gu;var ju=Hu;const Vu={class:"settingWrapDiv"},Yu={class:"settingTabBtn"},qu=["onClick"],Ju=["onClick"];var Qu=(0,s.pM)({__name:"index",setup(e){const t=(0,r.Pj)(),a=["Login/Account","Analysis/Database","Report","Quality Check","Version"],l=["Login/Account","Version"],i=(0,o.KR)(a[0]),u=(0,s.EW)((()=>t.state.commonModule.viewerCheck)),c=e=>{i.value=e,sessionStorage.setItem("selectedTab",e)},d={"Login/Account":$i,"Analysis/Database":li,Report:Bu,"Quality Check":Fu,Version:ju},m={"Login/Account":$i,Version:ju},v=sessionStorage.getItem("selectedTab");v&&a.includes(v)&&(i.value=v);const p=(0,s.EW)((()=>"viewer"===u.value?m[i.value]:d[i.value]));return(e,t)=>((0,s.uX)(),(0,s.CE)("div",Vu,[(0,s.Lk)("ul",Yu,["viewer"===u.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},(0,s.pI)(l,(e=>(0,s.Lk)("li",{key:e,class:(0,n.C4)({activeTab:i.value===e}),onClick:t=>c(e)},(0,n.v_)(e),11,qu))),64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},(0,s.pI)(a,(e=>(0,s.Lk)("li",{key:e,class:(0,n.C4)({activeTab:i.value===e}),onClick:t=>c(e)},(0,n.v_)(e),11,Ju))),64))]),((0,s.uX)(),(0,s.Wv)((0,s.$y)(p.value),{class:"settingWrap"}))]))}});const zu=Qu;var Zu=zu;const er=Z(),tr=async e=>er.httpPost(ee.settings.runningInfo.create,e),ar=async e=>er.httpPut(ee.settings.runningInfo.update,e,"",!0),lr=async e=>{const t=Object.entries(e).filter((([e,t])=>void 0!==t)).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(String(t))}`)).join("&");return er.httpGet(ee.settings.runningInfo.get,`${t}`,!0)},sr=async e=>er.httpDelete(ee.settings.runningInfo.delete,e,!0),or=async e=>er.httpGet(ee.settings.runningInfo.detail,`${e}`,!1),nr=async e=>er.httpGet(ee.settings.runningInfo.pageUpDown,`${e}`,!0),ir=async e=>er.httpGet(ee.settings.runningInfo.updatePcIpState,`${e}`,!0),ur=async e=>er.httpGet(ee.settings.runningInfo.clearPcIpState,`${e}`,!0);a(4603),a(7566),a(8721);var rr=a(3075);const cr=Z(),dr=async e=>cr.httpPost(ee.jsonReader.get,e,"",!1,sessionStorage.getItem("viewerCheck")||"viewer"),mr=async e=>cr.httpPost(ee.dziReader.get,e),vr=async e=>cr.httpGet(ee.fileTxtRead.get,`${e}`,!0),pr=async e=>cr.httpPost(ee.H7Read.post,e,"text/plain",!1,sessionStorage.getItem("viewerCheck")||"viewer"),gr=async e=>cr.httpPost(ee.H7Message.post,e,"",!1,sessionStorage.getItem("viewerCheck")||"viewer"),Ir=async e=>cr.httpPost(ee.Hl7Create.post,e),fr=()=>{document.body.style.overflow="hidden"},br=()=>{document.body.style.overflow="auto"},yr={class:"moveImgIsBool"},Cr={style:{width:"900px",height:"90%","overflow-y":"auto",background:"#fff",color:"#000",position:"absolute",top:"10%",left:"33%","box-sizing":"border-box",padding:"3rem 7rem",border:"2px solid #ccc","border-radius":"10px","z-index":"9999"}},hr={style:{margin:"40px 0","font-size":"1.2rem","font-weight":"600","text-align":"center"}},kr={style:{display:"flex","flex-direction":"column","justify-content":"space-between"}},Sr={style:{width:"100%"}},Nr=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{style:{width:"30%"}}),(0,s.Lk)("col",{style:{width:"70%"}})],-1),_r={style:{"padding-bottom":"5px"}},Er=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Slot ID",-1),Lr={style:{"text-align":"left",padding:"5px 0"}},Rr={style:{"padding-bottom":"5px"}},wr=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Ordered date",-1),Tr={style:{"text-align":"left",padding:"5px 0"}},Pr={style:{"padding-bottom":"5px"}},Ar=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Signed by ID",-1),Dr={style:{"text-align":"left",padding:"5px 0"}},Mr={style:{"padding-bottom":"5px"}},xr=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Signed date",-1),Kr={style:{"text-align":"left",padding:"5px 0"}},Or={style:{"padding-bottom":"5px"}},Br=(0,s.Lk)("th",{style:{"text-align":"left"}},"Ordered Classification",-1),Ur={style:{"text-align":"left",padding:"5px 0"}},Wr={style:{"padding-bottom":"5px"}},Xr=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Name",-1),Fr={style:{"text-align":"left",padding:"5px 0"}},$r={style:{"padding-bottom":"5px"}},Gr=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Birth",-1),Hr={style:{"text-align":"left",padding:"5px 0"}},jr={style:{"padding-bottom":"5px"}},Vr=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Gender",-1),Yr={style:{"text-align":"left",padding:"5px 0"}},qr=(0,s.Lk)("div",{style:{"margin-top":"20px","border-top":"2px dotted #696969"}},null,-1),Jr={key:0,style:{"margin-top":"20px"}},Qr=(0,s.Lk)("h3",{style:{margin:"40px 0","font-size":"1.2rem","font-weight":"600","text-align":"center"}},"RBC classification result",-1),zr={style:{width:"100%"}},Zr=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{style:{width:"20%"}}),(0,s.Lk)("col",{style:{width:"25%"}}),(0,s.Lk)("col",{style:{width:"25%"}}),(0,s.Lk)("col",{style:{width:"15%"}}),(0,s.Lk)("col",{style:{width:"15%"}})],-1),ec=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",{style:{"margin-bottom":"15px","font-size":"18px","font-weight":"normal","padding-bottom":"100px"}},[(0,s.Lk)("th",{style:{"text-align":"left"}},"Category"),(0,s.Lk)("th",{style:{"text-align":"left"}},"Class"),(0,s.Lk)("th",{style:{"text-align":"left"}},"Degree"),(0,s.Lk)("th",{style:{"text-align":"left"}},"Count"),(0,s.Lk)("th",{style:{"text-align":"left"}},"Percent")])],-1),tc=["rowspan"],ac={style:{"text-align":"left"}},lc={style:{"text-align":"left"}},sc={style:{"text-align":"left"}},oc={style:{"text-align":"left"}},nc={style:{"text-align":"left"}},ic={style:{"text-align":"left"}},uc={style:{"text-align":"left"}},rc={style:{"text-align":"left"}},cc={key:0},dc=(0,s.Lk)("td",{style:{"text-align":"left"}},null,-1),mc=(0,s.Lk)("td",{style:{"text-align":"left"}},"Total",-1),vc={style:{"text-align":"left"}},pc={style:{"text-align":"left"}},gc=(0,s.Lk)("th",{style:{"text-align":"left",padding:"15px 0"}},"Others",-1),Ic=(0,s.Lk)("th",{style:{"text-align":"left",padding:"15px 0"}},"Platelets",-1),fc={style:{"text-align":"left",padding:"15px 0"},colspan:"3"},bc=(0,s.Lk)("th",null,null,-1),yc=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Malaria",-1),Cc={style:{"text-align":"left",padding:"5px 0"},colspan:"3"},hc=(0,s.Lk)("th",{style:{"text-align":"left","padding-top":"15px"}},"Comment",-1),kc={style:{"text-align":"left","padding-top":"15px"},colspan:"4"},Sc={style:{"text-align":"left",outline:"1px solid #252629",padding:"4px"}},Nc={style:{"margin-top":"20px","border-top":"2px dotted #696969"}},_c=(0,s.Lk)("h3",{style:{margin:"40px 0","font-size":"1.2rem","font-weight":"600","text-align":"center"}},"WBC classification result",-1),Ec={style:{width:"100%"}},Lc=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{style:{width:"30%"}}),(0,s.Lk)("col",{style:{width:"45%"}}),(0,s.Lk)("col",{style:{width:"25%"}})],-1),Rc=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{style:{"text-align":"left"}},"Class"),(0,s.Lk)("th",{style:{"text-align":"left"}},"Count"),(0,s.Lk)("th",{style:{"text-align":"left"}},"Percent")])],-1),wc={style:{"text-align":"left",padding:"5px 0"}},Tc={style:{"text-align":"left",padding:"5px 0"}},Pc={style:{"text-align":"left",padding:"5px 0"}},Ac={style:{"padding-bottom":"5px"}},Dc=(0,s.Lk)("th",{style:{"text-align":"left","font-weight":"bold",padding:"5px 0"}},"Total count",-1),Mc={style:{"text-align":"left",padding:"5px 0"}},xc=(0,s.Lk)("td",{style:{"text-align":"left",padding:"5px 0"}},"100.00%",-1),Kc={key:0,style:{"text-align":"left","padding-top":"30px","font-weight":"bold"}},Oc={key:1,style:{"padding-top":"5px","padding-bottom":"15px"}},Bc={style:{"text-align":"left",padding:"5px 0"}},Uc={style:{"text-align":"left",padding:"5px 0"}},Wc={style:{"padding-bottom":"5px"}},Xc=(0,s.Lk)("th",{style:{"text-align":"left",padding:"15px 0"}},"Comment",-1),Fc={colspan:"2",style:{"text-align":"left",padding:"5px 0"}},$c={style:{"text-align":"left",outline:"1px solid #252629",padding:"4px"}},Gc={class:"print",style:{"list-style":"none","padding-left":"0","margin-top":"20px","text-align":"center",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},Hc={style:{"font-weight":"bold","font-size":"18px",margin:"40px auto 20px"}},jc={style:{position:"relative"}},Vc=["src","width","height"];var Yc=(0,s.pM)({__name:"print",props:["printOnOff","selectItemWbc"],emits:["printClose"],setup(e,{emit:t}){const a=e,i=window.PROJECT_TYPE,u=(0,r.Pj)(),c=(0,s.EW)((()=>u.state.commonModule.viewerCheck)),d="viewer"===c.value?window.MAIN_API_IP:window.APP_API_BASE_URL,m=(0,o.KR)(null),v=(0,o.KR)([]),p=(0,s.EW)((()=>u.state.commonModule.iaRootPath)),f=(0,s.EW)((()=>u.state.commonModule.selectedSampleId)),b=(0,o.KR)(null),y=(0,o.KR)({}),C=(0,o.KR)([]),h=t,k=["12","13","14","15","16"],S=(0,o.KR)([]),N=(0,o.KR)(0),_=(0,o.KR)(0),E=(0,o.KR)(0),L=(0,o.KR)(0),R=["NR","GP","PA","AR","MA","SM"],w=(0,o.KR)([]),T=(0,o.KR)(0),P=(0,o.KR)(0),A=(0,o.KR)(0),D=(0,o.KR)(!1);(0,s.sV)((async()=>{await B(),v.value="object"===typeof a.selectItemWbc?a.selectItemWbc:JSON.parse(a.selectItemWbc),await O(),await M(),await F(),await X()}));const M=async()=>{const e=""!==b.value?.img_drive_root_path&&b.value?.img_drive_root_path?b.value?.img_drive_root_path:p.value,t=`${e}/${b.value?.slotId}/03_RBC_Classification/${b.value?.slotId}_new.json`,a=await dr({fullPath:t}),l=`${e}/${b.value?.slotId}/03_RBC_Classification/${b.value?.slotId}.json`,s=await dr({fullPath:l});if("not file"!==a.data){const e=a?.data;for(const t of s.data[0].rbcClassList)for(const a of e){const e=t.classInfo.findIndex((e=>Number(e.index)===Number(a.index)));if(-1!==e&&t.classInfo.splice(e,1),t.categoryId===a.categoryId){let e={classNm:a.classNm,classId:a.classId,posX:String(a.posX),posY:String(a.posY),width:a.width,height:a.height,index:a.index};t.classInfo.push(e)}}S.value=s.data[0].rbcClassList}else S.value=s?.data[0].rbcClassList;if(!S.value||!Array.isArray(S.value))return void console.error("rbcInfoPathAfter.value is not iterable");let o=0,n=0,i=0,u=0;S.value.forEach((e=>{const t=e.classInfo.length>0?e.classInfo[e.classInfo.length-1].index.replace(/[^\d]/g,""):"";switch(e.categoryId){case"01":o=t;break;case"02":n=t;break;case"03":i=t;break;case"05":u=t;break;default:break}})),N.value=Number(o)+1,_.value=Number(o)+1,E.value=n,L.value=Number(i)+Number(u)+2,b.value.rbcInfoAfter.forEach((e=>{e.classInfo.forEach((e=>{e.originalDegree=0}))})),S.value.forEach((e=>{const t=b.value.rbcInfoAfter.find((t=>t.categoryId===e.categoryId));t&&e.classInfo.forEach((e=>{const a=t.classInfo.find((t=>t.classId===e.classId));a&&a.originalDegree++}))})),await K()},x=e=>{const t=(Number(e)/Number(N.value)*100).toFixed(1);return Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t},K=async()=>{let e=0,t=0;for(const a of S.value){if("01"===a.categoryId){const e=a.classInfo[a.classInfo.length-1].index;T.value=Number(e.replace("S",""))+1}if("04"===a.categoryId)for(const t of a.classInfo)"Platelet"===t.classNm&&(e+=1);else if("05"===a.categoryId)for(const e of a.classInfo)"Malaria"===e.classNm&&(t+=1,console.log(t))}P.value=Math.floor(e/parseFloat(T.value)*1e3),A.value=t},O=async()=>{try{const e=await Ge();e&&(0===e?.data.length?y.value=[]:y.value=e.data.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx))))}catch(e){console.log(e)}},B=async()=>{try{const e=await or(String(f.value));b.value=e.data}catch(e){console.log(e)}},U=(0,s.EW)((()=>v.value.filter((e=>!k.includes(e.id)&&e.count>0))));function W(e,t,a){if(!v.value||0===v.value.length)return"";const l=""!==b.value.img_drive_root_path&&b.value.img_drive_root_path?b.value.img_drive_root_path:p.value,s=b.value.slotId||"",o="bm"===i?`${l}/${s}/04_BM_Classification/${t}_${a}`:`${l}/${s}/01_WBC_Classification/${t}_${a}`;return`${d}/images/print?folder=${o}&imageName=${e}`}const X=async()=>{D.value=!0,fr();try{const e=m.value;if(!e)throw new Error("프린트할 내용을 찾을 수 없습니다.");const t=rr.Ay.gzip(e.innerHTML,{level:9}),a=await fetch(`${d}/pdf/convert`,{method:"POST",headers:{"Content-Type":"application/octet-stream","Content-Encoding":"gzip"},body:t});if(!a.ok)throw new Error("HTML을 PDF로 변환하는데 실패했습니다.");const l=await a.blob(),s=window.URL.createObjectURL(l);window.open(s,"_blank","width=800,height=500,noopener,noreferrer"),window.URL.revokeObjectURL(s),D.value=!1}catch(e){console.error("Error:",e),D.value=!1}finally{br()}},F=async()=>{try{const e=await ke();if(e&&e.data){const t=e.data;if(!t||t instanceof Array&&0===t.length)console.log(null);else{C.value=t.filter((e=>e.checked)).map((e=>e.classId)),v.value=v.value.filter((e=>C.value.includes(e.id))),v.value=v.value.filter((e=>"0"!==e.count));const e=y.value.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx))),a=0!==y.value.length?e:"bm"===i?Ca:ya,l=await $(v.value,a);v.value=l,w.value=l.filter((e=>R.includes(e.title)))}}}catch(e){console.error(e)}},$=(e,t)=>{let a=e.slice();return a.sort(((e,a)=>{const l=t.findIndex((t=>(t.title||t.abbreviation)===(e.title||e.abbreviation))),s=t.findIndex((e=>(e.title||e.abbreviation)===(a.title||a.abbreviation)));return-1===l?1:-1===s?-1:l-s})),e.splice(0,e.length,...a)},G=()=>{h("printClose")};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bo)((0,s.Lk)("div",yr," Loading Print...",512),[[l.aG,D.value]]),(0,s.Lk)("div",Cr,[(0,s.Lk)("button",{style:{position:"absolute",right:"8px",background:"none",border:"1px solid #000","border-radius":"5px",padding:"7px 25px",top:"5px",cursor:"pointer"},onClick:G},"Close"),(0,s.Lk)("div",{ref_key:"printContent",ref:m,style:{"margin-top":"20px"}},[(0,s.Lk)("div",null,[(0,s.Lk)("h3",hr,"Analysis Report from UIMD "+(0,n.v_)("bm"===(0,o.R1)(i)?"BM":"PB")+" system",1)]),(0,s.Lk)("div",kr,[(0,s.Lk)("table",Sr,[Nr,(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",_r,[Er,(0,s.Lk)("td",Lr,(0,n.v_)(b.value?.slotId),1)]),(0,s.Lk)("tr",Rr,[wr,(0,s.Lk)("td",Tr,(0,n.v_)((0,o.R1)(V)(b.value?.orderDttm)),1)]),(0,s.Lk)("tr",Pr,[Ar,(0,s.Lk)("td",Dr,(0,n.v_)(b.value?.submitUserId),1)]),(0,s.Lk)("tr",Mr,[xr,(0,s.Lk)("td",Kr,(0,n.v_)(b.value?.submitOfDate),1)]),(0,s.Lk)("tr",Or,[Br,(0,s.Lk)("td",Ur,(0,n.v_)("pb"===(0,o.R1)(i)?(0,o.R1)(g)(b.value?.testType):(0,o.R1)(I)(b.value?.testType)),1)]),(0,s.Lk)("tr",Wr,[Xr,(0,s.Lk)("td",Fr,(0,n.v_)(b.value?.patientName),1)]),(0,s.Lk)("tr",$r,[Gr,(0,s.Lk)("td",Hr,(0,n.v_)(b.value?.birthDay),1)]),(0,s.Lk)("tr",jr,[Vr,(0,s.Lk)("td",Yr,(0,n.v_)("01"===b.value?.gender?"Male":"Female"),1)])])]),qr,["01","04"].includes(b.value?.testType)?((0,s.uX)(),(0,s.CE)("div",Jr,[Qr,(0,s.Lk)("table",zr,[Zr,ec,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)([b.value.rbcInfoAfter],((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[(0,s.Lk)("tr",null,[(0,s.Lk)("td",{rowspan:e.classInfo.length+("Shape"!==e.categoryNm?1:0),style:{"text-align":"left","vertical-align":"top"}},(0,n.v_)(e.categoryNm),9,tc),(0,s.Lk)("td",ac,(0,n.v_)(e.classInfo[0]?.classNm),1),(0,s.Lk)("td",lc,(0,n.v_)(e.classInfo[0]?.degree),1),(0,s.Lk)("td",sc,(0,n.v_)(e.classInfo[0]?.originalDegree),1),(0,s.Lk)("td",oc,(0,n.v_)(x(e.classInfo[0]?.originalDegree)),1)]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.classInfo.slice(1),((e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:t},[(0,s.Lk)("td",nc,(0,n.v_)(e.classNm),1),(0,s.Lk)("td",ic,(0,n.v_)(e.degree),1),(0,s.Lk)("td",uc,(0,n.v_)(e.originalDegree),1),(0,s.Lk)("td",rc,(0,n.v_)(x(e.originalDegree)),1)])))),128)),"Shape"!==e.categoryNm?((0,s.uX)(),(0,s.CE)("tr",cc,[dc,mc,(0,s.Lk)("td",vc,(0,n.v_)(_.value),1),(0,s.Lk)("td",pc,(0,n.v_)(x(_.value))+" %",1)])):(0,s.Q3)("",!0)],64)))),128))],64)))),128)),(0,s.Lk)("tr",null,[gc,Ic,(0,s.Lk)("th",fc,(0,n.v_)(P.value)+" PLT / 1000 RBC",1)]),(0,s.Lk)("tr",null,[bc,yc,(0,s.Lk)("th",Cc,(0,n.v_)(A.value)+" / "+(0,n.v_)(T.value)+" RBC",1)]),(0,s.Lk)("tr",null,[hc,(0,s.bo)((0,s.Lk)("th",kc,[(0,s.Lk)("pre",Sc,(0,n.v_)(b.value?.rbcMemo),1)],512),[[l.aG,b.value?.rbcMemo]])])])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Nc,[_c,(0,s.Lk)("table",Ec,[Lc,Rc,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(U.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id,style:{"padding-bottom":"5px"}},[(0,s.Lk)("th",wc,(0,n.v_)(e?.name),1),(0,s.Lk)("td",Tc,(0,n.v_)(e?.count),1),(0,s.Lk)("td",Pc,(0,n.v_)(e?.percent)+" %",1)])))),128)),(0,s.Lk)("tr",Ac,[Dc,(0,s.Lk)("td",Mc,(0,n.v_)(b.value?.wbcInfo?.totalCount),1),xc]),"bm"!==(0,o.R1)(i)?((0,s.uX)(),(0,s.CE)("th",Kc,"non-Wbc")):(0,s.Q3)("",!0),"bm"!==(0,o.R1)(i)?((0,s.uX)(),(0,s.CE)("tr",Oc,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(w.value,(e=>((0,s.uX)(),(0,s.CE)(s.FK,{key:e.id},[(0,s.Lk)("td",Bc,(0,n.v_)(e.name),1),(0,s.Lk)("td",Uc,(0,n.v_)(e.count),1)],64)))),128))])):(0,s.Q3)("",!0),(0,s.Lk)("tr",Wc,[Xc,(0,s.bo)((0,s.Lk)("td",Fc,[(0,s.Lk)("pre",$c,(0,n.v_)(b.value?.wbcMemo),1)],512),[[l.aG,b.value?.wbcMemo]])])])]),(0,s.Lk)("ul",Gc,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(v.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id,style:{}},[(0,s.Lk)("div",Hc,(0,n.v_)(e?.title)+" ("+(0,n.v_)(e?.count)+")",1),(0,s.Lk)("ul",{class:(0,n.C4)("wbcImgWrap "+e?.title),style:{"list-style":"none","padding-left":"0","margin-top":"10px"}},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.images,(t=>((0,s.uX)(),(0,s.CE)("li",{key:t.fileName,style:{display:"inline-block","margin-right":"5px","margin-top":"5px",outline:"1px solid #2c2d2c",cursor:"auto"}},[(0,s.Lk)("div",jc,[(0,s.Lk)("img",{src:W(t.fileName,e.id,e.title),width:t.width?t.width:"150px",height:t.height?t.height:"150px",style:(0,n.Tr)({filter:t.filter}),class:"cellImg",ref_for:!0,ref:"cellRef"},null,12,Vc),(0,s.Lk)("div",{class:"center-point",style:(0,n.Tr)(t.coordinates)},null,4)])])))),128))],2)])))),128))])])])],512)])],64))}});const qc=Yc;var Jc=qc;const Qc={key:0,class:"loaderBackground"},zc=(0,s.Lk)("div",{class:"loader"},null,-1),Zc=(0,s.Lk)("p",{class:"loadingText"},"Loading...",-1),ed=[zc,Zc],td=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"15%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"15%"}),(0,s.Lk)("col",{width:"3%"})],-1),ad=(0,s.Lk)("th",null,"NO",-1),ld=(0,s.Lk)("th",null,"Type",-1),sd=(0,s.Lk)("th",null,"State",-1),od=(0,s.Lk)("th",null,"Tray Slot",-1),nd=(0,s.Lk)("th",null,"Barcode NO",-1),id=(0,s.Lk)("th",null,"Patient ID",-1),ud=(0,s.Lk)("th",null,"Patient Name",-1),rd=(0,s.Lk)("th",null,"Analyzed Date",-1),cd=(0,s.Lk)("th",null,"Tact Time(S)",-1),dd=(0,s.Lk)("th",null,"Submit",-1),md=(0,s.Lk)("th",null,"Submit Date",-1),vd=(0,s.Lk)("th",null,"Edit",-1),pd={key:0},gd=["onClick","onDblclick","data-row-id","onContextmenu"],Id=["onClick"],fd=["onUpdate:modelValue","checked"],bd={key:1},yd=(0,s.Lk)("tr",{class:"text-center"},[(0,s.Lk)("td",{colspan:"13"}," NO Data")],-1),Cd=[yd],hd=(0,s.Lk)("h2",null,"Edit order data",-1),kd={class:"editOrder"},Sd={class:"flexColumn"},Nd=(0,s.Lk)("label",{for:"testType"},"PB/BF",-1),_d={class:"flexColumn"},Ed=(0,s.Lk)("label",{for:"traySlot"},"Tray Slot",-1),Ld={class:"flexColumn"},Rd=(0,s.Lk)("label",{for:"barcode"},"BARCODE ID",-1),wd={class:"flexColumn"},Td=(0,s.Lk)("label",{for:"patientId"},"PATIENT ID",-1),Pd={class:"flexColumn"},Ad=(0,s.Lk)("label",{for:"patientName"},"PATIENT NAME",-1),Dd={class:"flexColumn"},Md=(0,s.Lk)("label",{for:"analyzedDate"},"Analyzed date",-1),xd={class:"flexColumn"},Kd=(0,s.Lk)("label",{for:"signedState"},"Signed state",-1),Od=(0,s.Lk)("p",null,"Barcode Image",-1),Bd=["src"];var Ud={__name:"listTable",props:["dbData","selectedItemIdFalse","notStartLoading","loadingDelayParents"],setup(e,{emit:t}){const a=e,i=(0,o.KR)(null),u=t,c=(0,o.KR)(""),d=(0,o.KR)(!1),m=(0,o.KR)({}),v=(0,r.Pj)(),p=(0,s.EW)((()=>v.state.userModule)),b=(0,o.KR)(""),y=(0,o.KR)(!1),C=(0,o.KR)(""),h=(0,o.KR)(""),k=(0,o.KR)(""),S=(0,o.KR)(!1),N=e=>{const t=H()(e,"YYYYMMDDHHmmssSSSSS");return t.format("YYYY-MM-DD HH:mm:ss")},_=(0,o.KR)({visible:!1,x:0,y:0}),E=(0,o.KR)([]),L=sessionStorage.getItem("user"),R=JSON.parse(L||"{}"),w=(0,o.KR)(""),T=(0,o.KR)({}),P=(0,o.KR)(!1),A=(0,o.KR)(null),D=(0,o.KR)([]),M=(0,o.KR)(!1),x=(0,s.nI)(),K=(0,o.KR)(""),O=(0,s.EW)((()=>v.state.commonModule.iaRootPath)),B=(0,s.EW)((()=>v.state.commonModule.selectedSampleId)),U=(0,s.EW)((()=>v.state.commonModule)),W=(0,o.KR)(!1),X=(0,o.KR)(!1),F=(0,o.KR)(""),G=(0,o.KR)("");let j;const V=(0,o.KR)(null);async function Y(e){e.ctrlKey&&(W.value=!0),e.shiftKey&&(X.value=!0)}(0,s.sV)((async()=>{k.value=JSON.parse(sessionStorage.getItem("pcIp")),b.value=window.PROJECT_TYPE,V.value.scrollTop=50,V.value&&V.value.addEventListener("scroll",q);try{w.value=R.id,await fe()}catch(e){console.log(e)}document.addEventListener("click",se),window.addEventListener("keydown",Y),window.addEventListener("keyup",J)}));const q=()=>{};function J(e){e.ctrlKey||(W.value=!1),e.shiftKey||(X.value=!1)}(0,s.hi)((()=>{document.removeEventListener("click",se),V.value&&V.value.removeEventListener("scroll",q)})),(0,s.wB)((()=>a.loadingDelayParents),(e=>{S.value=!!e}),{deep:!0}),(0,s.nT)((async()=>{if(a.dbData.length>0){await(0,s.dY)(),a.selectedItemIdFalse;const e=a.dbData.filter((e=>e.id===Number(B.value||0)));if(!0===U.value.dataBasePageReset&&0!==e.length){await ve(e[0]),await v.dispatch("commonModule/setCommonInfo",{dataBasePageReset:!1}),await ae();const t=document.querySelector(`[data-row-id="${e[0].id}"]`);return void(t&&"0"!==c.value&&(S.value=!1))}const t=new IntersectionObserver(re,{root:null,rootMargin:"0px",threshold:.5});i.value&&t.observe(i.value),"0"!==c.value&&c.value||(S.value=!1)}}));const Q=()=>{P.value=!1},z=()=>{P.value=!0,le()},Z=()=>{he(T.value),le()},ee=()=>{Ie(T.value),le()},te=()=>{a.dbData.forEach((e=>{e.checked=M.value})),u("checkListItem",a.dbData.filter((e=>e.checked)))},ae=()=>{a.dbData.forEach((e=>{e.checked=!1})),u("checkListItem",a.dbData.filter((e=>e.checked)))},le=()=>{_.value.x=0,_.value.y=0,_.value.visible=!1},se=e=>{const t=document.querySelector(".context-menu");t&&!t.contains(e.target)&&le()},oe=async(e,t)=>{if(!1!==a.dbData.filter((t=>t.id===e.id)).lock_status){if(await v.dispatch("commonModule/setCommonInfo",{selectedSampleId:e.id}),T.value=e,0!==Object.keys(e?.wbcInfo).length){const t=e?.wbcInfo?.wbcInfo[0],a=t.sort(((e,t)=>e.id-t.id));D.value=a}t&&(_.value.x=t.clientX,_.value.y=t.clientY,_.value.visible=!0)}else ce($.IDS_ERROR_SELECT_A_TARGET_ITEM)},ne=()=>{const e=Math.min(Number(F.value),Number(G.value)),t=Math.max(Number(F.value),Number(G.value)),l=a.dbData;l.forEach((a=>{const l=Number(a.id);l>=e&&l<=t&&(a.checked=!0)})),u("checkListItem",a.dbData.filter((e=>e.checked)))},ue=e=>{e&&(e.checked=!e.checked,u("checkListItem",a.dbData.filter((e=>e.checked))))},re=(e,t)=>{e.forEach((e=>{e.isIntersecting&&1!==e.intersectionRatio&&u("loadMoreData")}))},ce=e=>{y.value=!0,C.value="success",h.value=e},de=e=>{y.value=!0,C.value="error",h.value=e},me=()=>{y.value=!1},ve=async e=>{X.value?F.value?(G.value=e.id,ne()):F.value=e.id:(F.value="",G.value=""),W.value&&ue(e),e&&(u("selectItem",e),c.value=e.id,await v.dispatch("commonModule/setCommonInfo",{selectedSampleId:String(e.id)}))},pe=async e=>{try{const t=await Dt(),a=t.data,l=`oldPcIp=${a}&newEntityId=${e.id}&newPcIp=${a}`;await ir(l).then((e=>{ge("SEND_DATA","refreshDb",300)})).catch((e=>{console.log(e)}))}catch(t){console.log(t)}},ge=(e,t,a)=>{void 0!==j&&clearTimeout(j),j=window.setTimeout((()=>{x?.appContext.config.globalProperties.$socket.emit("state",{type:"SEND_DATA",payload:"refreshDb"})}),a)},Ie=async e=>{e.lock_status&&e?.pcIp!==k.value||(await v.dispatch("commonModule/setCommonInfo",{selectedSampleId:e.id}),await v.dispatch("commonModule/setCommonInfo",{clonedWbcInfo:e.wbcInfoAfter}),await v.dispatch("commonModule/setCommonInfo",{clonedRbcInfo:e.rbcInfo.rbcClass}),await pe(e),await yy.push("/databaseDetail"))},fe=async()=>{try{const e=await ie(),t=e.data;E.value=t}catch(e){}},be=e=>{d.value=e},ye=()=>{},Ce=async()=>{try{const e={id:m.value.id,barcodeNo:m.value.barcodeNo,patientId:m.value.patientId,patientNm:m.value.patientNm},t=[...a.dbData],l=t.findIndex((e=>e.id===m.value.id));-1!==l&&(t[l]={...t[l],...e});const s=await ar({userId:Number(p.value.id),runingInfoDtoItems:[t[l]]});s?(ce("success"),u("initData"),be()):console.error("백엔드가 디비에 저장 실패함")}catch(e){console.error("Error:",e)}},he=async e=>{ke(),m.value=JSON.parse(JSON.stringify(e)),m.value.submitState=["","Ready","checkFirst"].includes(m.value.submitState)?"":m.value.submitState,m.value.testType="bm"!==b.value?g(e?.testType):I(e?.testType);const t=""!==e?.img_drive_root_path&&e?.img_drive_root_path?e?.img_drive_root_path:O.value;K.value=f("barcode_image.jpg",t,e.slotId,Nt.barcodeDirName)},ke=()=>{d.value=!0},Se=async()=>{try{let e=a.dbData.filter((e=>e.checked));if(0===e.length&&""===c.value)de($.IDS_ERROR_SELECT_A_TARGET_ITEM);else if(0===e.length&&""!==c.value){if(e=a.dbData.find((e=>e.id===c.value)),e.lock_status)return void de($.lockRow);const t=e,l=""!==e?.img_drive_root_path&&e?.img_drive_root_path?e?.img_drive_root_path:sessionStorage.getItem("iaRootPath"),s=`${l}/${e.slotId}`,o={ids:[t.id],img_drive_root_path:[s]},n=await sr(o);n.success?(ce("Items deleted successfully"),u("refresh"),le()):console.error("Failed to delete items")}else{const t=e.map((e=>e.id)),a=e.map((e=>e.lock_status));if(a.includes(!0))return void de($.lockRow);const l=""!==e?.img_drive_root_path&&e?.img_drive_root_path?e?.img_drive_root_path:sessionStorage.getItem("iaRootPath"),s=e.map((e=>`${l}/${e.slotId}`)),o={ids:t,img_drive_root_path:s},n=await sr(o);n.success?(ce("Items deleted successfully"),u("refresh"),le()):console.error("Failed to delete items")}}catch(e){console.error("Error:",e)}},Ne=(e,t)=>{switch(e){case"Ready":return"Ready";case"Submit":return`Submit (${t})`;default:return"Ready"}};return(t,a)=>{const u=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[S.value?((0,s.uX)(),(0,s.CE)("div",Qc,ed)):(0,s.Q3)("",!0),(0,s.Lk)("table",{class:"defaultTable mt2 dbDataTable",ref_key:"scrollableDiv",ref:V},[td,(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[ad,(0,s.Lk)("th",null,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=e=>M.value=e),onChange:te},null,544),[[l.lH,M.value]])]),ld,sd,od,nd,id,ud,rd,cd,dd,md,vd])]),0!==e.dbData.length?((0,s.uX)(),(0,s.CE)("tbody",pd,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.dbData,((e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id,class:(0,n.C4)({selectedTr:c.value===e.id,submittedTr:"Submit"===e.submitState,rock:e.lock_status&&e.pcIp!==k.value,checkFirst:"checkFirst"===e.submitState}),onClick:t=>ve(e),onDblclick:t=>Ie(e),ref_for:!0,ref:"firstRow",style:{height:"49px"},"data-row-id":e.id,onContextmenu:(0,l.D$)((t=>oe(e,t)),["prevent"]),title:"Double click the row"},[(0,s.Lk)("td",null,(0,n.v_)(t+1),1),(0,s.Lk)("td",{onClick:t=>ue(e)},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t=>e.checked=t,checked:e.checked},null,8,fd),[[l.lH,e.checked]])],8,Id),(0,s.Lk)("td",null,(0,n.v_)("bm"!==b.value?(0,o.R1)(g)(e?.testType):(0,o.R1)(I)(e?.testType)),1),(0,s.Lk)("td",null,[(0,s.bF)(u,{icon:["fas",""+(e?.lock_status?"lock":"lock-open")]},null,8,["icon"])]),(0,s.Lk)("td",null,(0,n.v_)(e?.traySlot),1),(0,s.Lk)("td",null,(0,n.v_)(e?.barcodeNo),1),(0,s.Lk)("td",null,(0,n.v_)(e?.patientId),1),(0,s.Lk)("td",null,(0,n.v_)(e?.patientNm),1),(0,s.Lk)("td",null,(0,n.v_)(""===e?.analyzedDttm?"":N(e?.analyzedDttm)),1),(0,s.Lk)("td",null,(0,n.v_)(e?.tactTime),1),(0,s.Lk)("td",null,(0,n.v_)(Ne(e?.submitState,e?.submitUserId)),1),(0,s.Lk)("td",null,(0,n.v_)(""!==e?.submitOfDate&&e?.submitOfDate?N(e?.submitOfDate):""),1),(0,s.Lk)("td",null,["checkFirst"===e?.submitState||""===e?.submitState?((0,s.uX)(),(0,s.Wv)(u,{key:0,icon:["fas","pen-to-square"],onClick:t=>he(e)},null,8,["onClick"])):(0,s.Q3)("",!0)])],42,gd)))),128)),(0,s.Lk)("tr",null,[(0,s.Lk)("div",{ref_key:"loadMoreRef",ref:i,style:{height:"10px"}},null,512)])])):((0,s.uX)(),(0,s.CE)("tbody",bd,Cd))],512),_.value.visible?((0,s.uX)(),(0,s.CE)("div",{key:1,style:(0,n.Tr)({top:_.value.y-100+"px",left:_.value.x+"px"}),class:"context-menu"},[(0,s.Lk)("ul",null,[(0,s.Lk)("li",{onClick:z},"Print"),(0,s.Lk)("li",{onClick:ee},"Classification"),(0,s.Lk)("li",{onClick:Z},"Edit order data"),(0,s.Lk)("li",{onClick:Se},"Delete")])],4)):(0,s.Q3)("",!0),d.value?((0,s.uX)(),(0,s.Wv)(ci,{key:2,"onUpdate:closeLayer":be,onAfterOpen:ye},{header:(0,s.k6)((()=>[hd])),content:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.Lk)("ul",kd,[(0,s.Lk)("li",Sd,[Nd,(0,s.bo)((0,s.Lk)("input",{id:"testType",class:"inputDisabled",type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>m.value.testType=e),readonly:"",disabled:""},null,512),[[l.Jo,m.value.testType]])]),(0,s.Lk)("li",_d,[Ed,(0,s.bo)((0,s.Lk)("input",{id:"traySlot",class:"inputDisabled",type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>m.value.traySlot=e),readonly:"",disabled:""},null,512),[[l.Jo,m.value.traySlot]])]),(0,s.Lk)("li",Ld,[Rd,(0,s.bo)((0,s.Lk)("input",{id:"barcode",type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>m.value.barcodeNo=e),placeholder:"BARCODE ID"},null,512),[[l.Jo,m.value.barcodeNo]])]),(0,s.Lk)("li",wd,[Td,(0,s.bo)((0,s.Lk)("input",{id:"patientId",type:"text","onUpdate:modelValue":a[4]||(a[4]=e=>m.value.patientId=e),placeholder:"PATIENT ID"},null,512),[[l.Jo,m.value.patientId]])]),(0,s.Lk)("li",Pd,[Ad,(0,s.bo)((0,s.Lk)("input",{id:"patientName",type:"text","onUpdate:modelValue":a[5]||(a[5]=e=>m.value.patientNm=e),placeholder:"PATIENT NAME"},null,512),[[l.Jo,m.value.patientNm]])]),(0,s.Lk)("li",Dd,[Md,(0,s.bo)((0,s.Lk)("input",{id:"analyzedDate",class:"inputDisabled",type:"text","onUpdate:modelValue":a[6]||(a[6]=e=>m.value.analyzedDttm=e),readonly:"",disabled:""},null,512),[[l.Jo,m.value.analyzedDttm]])]),(0,s.Lk)("li",xd,[Kd,(0,s.bo)((0,s.Lk)("input",{id:"signedState",class:"inputDisabled",type:"text","onUpdate:modelValue":a[7]||(a[7]=e=>m.value.submitState=e),readonly:"",disabled:""},null,512),[[l.Jo,m.value.submitState]])]),(0,s.Lk)("li",null,[Od,(0,s.Lk)("img",{class:"mt1",src:K.value},null,8,Bd)])])]),(0,s.Lk)("div",{class:"modalBottom"},[(0,s.Lk)("button",{class:"alertButton",onClick:Ce},"Save")])])),_:1})):(0,s.Q3)("",!0),P.value?((0,s.uX)(),(0,s.Wv)(Jc,{key:3,selectItems:T.value,ref_key:"printContent",ref:A,printOnOff:P.value,selectItemWbc:D.value,onPrintClose:Q},null,8,["selectItems","printOnOff","selectItemWbc"])):(0,s.Q3)("",!0),y.value?((0,s.uX)(),(0,s.Wv)(et,{key:4,"is-visible":y.value,type:C.value,message:h.value,onHide:me,"onUpdate:hideAlert":me},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}};const Wd=Ud;var Xd=Wd;const Fd={key:0},$d=(0,s.Lk)("h3",{class:"orderTitle hh3title"},"Order Information",-1),Gd={class:"orderListUi"},Hd=(0,s.Lk)("li",null,[(0,s.eW)("LIS status: "),(0,s.Lk)("span",null,"No data sent or received from LIS")],-1),jd={key:0},Vd={key:1},Yd=["src"],qd=(0,s.Lk)("h3",{class:"mt2 mb1 hh3title"},"Result Information",-1),Jd={key:0},Qd={class:"resInfoContainer"},zd=(0,s.Lk)("li",{class:"resInfoWrapper mb1"},[(0,s.Lk)("p",null,"Class"),(0,s.Lk)("p",null,"Count"),(0,s.Lk)("p",null,"Percent")],-1),Zd={key:0,class:"resInfoWrapper resInfoWrapperLine"},em={class:"resInfoWrapper mt1 mb2"},tm=(0,s.Lk)("p",null,"Total",-1),am=(0,s.Lk)("p",null,"100%",-1),lm={key:0,class:"resInfoWrapper resInfoWrapperLine"},sm=(0,s.Lk)("p",null,"-",-1);var om={__name:"listInfo",props:["selectedItem"],setup(e){const t=(0,r.Pj)(),a=e,i=(0,o.KR)(t.state.commonModule.iaRootPath),u=(0,s.EW)((()=>t.state.commonModule.siteCd)),c=(0,o.KR)(""),d=(0,o.KR)(!1),m=(0,o.KR)(0),v=["NR","GP","PA","AR","MA","SM"];(0,s.sV)((()=>{d.value=!1,i.value&&(c.value=y("barcode_image.jpg"))})),(0,s.wB)((()=>a.selectedItem),(e=>{d.value=!1,p(),i.value&&(c.value=y("barcode_image.jpg",e))}));const p=()=>{m.value=a.selectedItem.wbcInfoAfter.reduce(((e,t)=>v.includes(t.title)?e:e+Number(t.count)),0);for(const e of a.selectedItem.wbcInfoAfter)if("bm"===window.PROJECT_TYPE){if("OT"!==e.title){const t=(Number(e.count)/Number(m.value)*100).toFixed(1);e.percent=Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t}}else{const t=g(u.value,a.selectedItem?.testType);if(!t.includes(e.title)){const t=(Number(e.count)/Number(m.value)*100).toFixed(1);e.percent=Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t}}},g=(e,t)=>{e||""!==e||(e="0000",t="01");const a={"0006":{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","SM","NE","GP","PA","OT"]}},l=a[e]||{includesStr:["AR","NR","GP","PA","MC","SM","MA","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","NE","SM","GP","PA","OT"]};return"01"===t||"04"===t?l.includesStr:l.includesStr2},I=e=>e&&e.length>0&&!v.includes(e),f=e=>e&&e.length>0&&v.includes(e),b="viewer"===sessionStorage.getItem("viewerCheck")?window.MAIN_API_IP:window.APP_API_BASE_URL;function y(e){const t=""!==a.selectedItem?.img_drive_root_path&&a.selectedItem?.img_drive_root_path?a.selectedItem?.img_drive_root_path:i.value;return`${b}/images?folder=${t+"/"+a.selectedItem.slotId+"/"+Nt.barcodeDirName+"/"}&imageName=${e}`}const C=()=>{d.value=!0};return(t,a)=>0!==Object.keys(e.selectedItem).length?((0,s.uX)(),(0,s.CE)("div",Fd,[(0,s.Lk)("div",null,[$d,(0,s.Lk)("ul",Gd,[(0,s.Lk)("li",null,[(0,s.eW)("Order ID: "),(0,s.Lk)("span",null,(0,n.v_)(e.selectedItem?.slotId),1)]),Hd,(0,s.Lk)("li",null,[(0,s.eW)("Type of order: "),"01"===e.selectedItem?.testType||"04"===e.selectedItem?.testType?((0,s.uX)(),(0,s.CE)("span",jd,"WBC + RBC")):((0,s.uX)(),(0,s.CE)("span",Vd,(0,n.v_)(e.selectedItem?.testType),1))]),(0,s.Lk)("li",null,[(0,s.eW)("NS, NB Integration: "),(0,s.Lk)("span",null,(0,n.v_)(e.selectedItem?.isNsNbIntegration),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Patient ID: "),(0,s.Lk)("span",null,(0,n.v_)(e.selectedItem?.patientId),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Patient Name: "),(0,s.Lk)("span",null,(0,n.v_)(e.selectedItem?.patientNm),1)]),(0,s.Lk)("li",null,[(0,s.bo)((0,s.Lk)("img",{onError:C,src:c.value,style:{width:"355px"}},null,40,Yd),[[l.aG,!d.value]])])])]),(0,s.Lk)("div",null,[qd,(0,s.Lk)("ul",null,["01"===e.selectedItem?.testType||"04"===e.selectedItem?.testType?((0,s.uX)(),(0,s.CE)("li",Jd,[(0,s.Lk)("div",Qd,[zd,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.selectedItem?.wbcInfoAfter,(e=>((0,s.uX)(),(0,s.CE)(s.FK,{key:e.title},[I(e.title)&&e.count>0?((0,s.uX)(),(0,s.CE)("li",Zd,[(0,s.Lk)("p",null,(0,n.v_)(e.title),1),(0,s.Lk)("p",null,(0,n.v_)(e.count),1),(0,s.Lk)("p",null,(0,n.v_)(e.percent+"%"),1)])):(0,s.Q3)("",!0)],64)))),128)),(0,s.Lk)("li",em,[tm,(0,s.Lk)("p",null,(0,n.v_)(m.value),1),am]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.selectedItem?.wbcInfoAfter,(e=>((0,s.uX)(),(0,s.CE)(s.FK,{key:e.title},[f(e.title)&&e.count>0?((0,s.uX)(),(0,s.CE)("li",lm,[(0,s.Lk)("p",null,(0,n.v_)(e.title),1),(0,s.Lk)("p",null,(0,n.v_)(e.count),1),sm])):(0,s.Q3)("",!0)],64)))),128))])])):(0,s.Q3)("",!0)])])])):(0,s.Q3)("",!0)}};const nm=om;var im=nm;const um={class:"mt1"},rm=(0,s.Lk)("h3",{class:"mb1 hh3title infoImageTitle"},"WBC Images",-1),cm={key:0,class:"dbWbcImageContainer"},dm=["src","onError","onClick"],mm={key:1};var vm=(0,s.pM)({__name:"listWbcImg",props:["dbData","selectedItem"],setup(e){const t=e,a=(0,r.Pj)(),i=(0,o.KR)(a.state.commonModule.iaRootPath),u=(0,s.EW)((()=>a.state.commonModule.viewerCheck)),c="viewer"===u.value?window.MAIN_API_IP:window.APP_API_BASE_URL,d=(0,o.KR)([]),m=(0,o.KR)({}),v=(0,o.KR)("");(0,s.sV)((()=>{d.value=[],I()})),(0,s.wB)((()=>t.selectedItem),(()=>{d.value=[],I()}),{deep:!0});const p=e=>{v.value===e?v.value="":v.value=e},g=e=>v.value===e;function I(){t.selectedItem?.wbcInfo&&0!==Object.keys(t.selectedItem?.wbcInfo).length&&(d.value=t.selectedItem?.wbcInfo?.wbcInfo[0]?.reduce(((e,t)=>(t.images&&t.images.length>0&&e.push({id:t.id,images:t.images,title:t.title}),e)),[])||[])}function f(e,a,l){const{selectedItem:s}=t;if(!s?.wbcInfo?.wbcInfo||0===s?.wbcInfo?.wbcInfo.length)return"";const o=s.slotId||"",n=""!==s?.img_drive_root_path&&s?.img_drive_root_path?s?.img_drive_root_path:i.value,u=`${n}/${o}/01_WBC_Classification/${a}_${l}`;return`${c}/images/getImageRealTime?folder=${u}&imageName=${e}`}function b(e,t){m.value[`${e}-${t}`]=!0}return(e,t)=>((0,s.uX)(),(0,s.CE)("div",um,[rm,d.value.length>0?((0,s.uX)(),(0,s.CE)("div",cm,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value,(e=>((0,s.uX)(),(0,s.CE)(s.FK,{key:e.id},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.images,(t=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("img",{key:t.fileName,class:(0,n.C4)(["dbRightImages",["dbRightImages",{"selected-image":g(`${e.id}-${t.fileName}`)}]]),src:f(t.fileName,e.id,e.title),onError:a=>b(e.id,t.fileName),onClick:a=>p(`${e.id}-${t.fileName}`)},null,42,dm)),[[l.aG,!m.value[`${e.id}-${t.fileName}`]]]))),128))],64)))),128))])):((0,s.uX)(),(0,s.CE)("div",mm,"No images available"))]))}});const pm=vm;var gm=pm;const Im={class:"mt3"},fm=(0,s.Lk)("h3",{class:"mb1 hh3title infoImageTitle"},"BM Images",-1),bm={key:0,class:"dbBmImageContainer"},ym=["src","onError"],Cm={key:1};var hm=(0,s.pM)({__name:"listBmImg",props:["dbData","selectedItem"],setup(e){const t=e,a=(0,r.Pj)(),n=(0,s.EW)((()=>a.state.commonModule.iaRootPath)),i=(0,s.EW)((()=>a.state.commonModule.viewerCheck)),u="viewer"===i.value?window.MAIN_API_IP:window.APP_API_BASE_URL,c=(0,o.KR)([]),d=(0,o.KR)({});function m(){t.selectedItem?.wbcInfo&&0!==Object.keys(t.selectedItem?.wbcInfo).length&&(c.value=t.selectedItem?.wbcInfo?.wbcInfo[0]?.reduce(((e,t)=>(t.images&&t.images.length>0&&e.push({id:t.id,images:t.images,title:t.title}),e)),[])||[])}function v(e,a,l){const{selectedItem:s}=t;if(!s?.wbcInfo?.wbcInfo||0===s?.wbcInfo?.wbcInfo.length)return"";const o=s.slotId||"",i=""!==s?.rootPath&&s?.rootPath?s?.rootPath:n.value,r=`${i}/${o}/04_BM_Classification/${a}_${l}`;return`${u}/images?folder=${r}&imageName=${e}`}function p(e,t){d.value[`${e}-${t}`]=!0}return(0,s.sV)((()=>{m()})),(0,s.wB)((()=>t.selectedItem),(()=>{console.log(t.selectedItem),m()})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",Im,[fm,c.value.length>0?((0,s.uX)(),(0,s.CE)("div",bm,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.value,(e=>((0,s.uX)(),(0,s.CE)(s.FK,{key:e.id},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.images,(t=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("img",{key:t.fileName,class:"dbRightImages",src:v(t.fileName,e.id,e.title),onError:a=>p(e.id,t.fileName)},null,40,ym)),[[l.aG,!d.value[`${e.id}-${t.fileName}`]]]))),128))],64)))),128))])):((0,s.uX)(),(0,s.CE)("div",Cm,"No images available"))]))}});const km=hm;var Sm=km;const Nm=Z(),_m=async e=>Nm.httpPost(ee.excel.execute,e),Em={class:"titleH3"},Lm={class:"listBoxTable"},Rm={class:"filterListDiv"},wm=(0,s.Lk)("option",{value:"barcodeNo"},"Barcode No",-1),Tm=(0,s.Lk)("option",{value:"patientId"},"Patient ID",-1),Pm=(0,s.Lk)("option",{value:"patientNm"},"Patient Name",-1),Am=[wm,Tm,Pm],Dm={class:"settingDatePickers"},Mm={key:0,class:"excelDivList"},xm={key:0,class:"filterDivBox"},Km={key:0,class:"nrCount"},Om=(0,s.Lk)("span",null,"NR count",-1),Bm={class:"wbcTotal"},Um=(0,s.Lk)("span",null,"WBC Total",-1),Wm=(0,s.Lk)("option",{value:"all"},"Do Not Select",-1),Xm=(0,s.Lk)("option",null,"DESC",-1),Fm=(0,s.Lk)("option",null,"ASC",-1),$m=[Wm,Xm,Fm],Gm={class:"wbcInfoFilter"},Hm={class:"wbcInfoFilter"},jm=["id","onUpdate:modelValue"],Vm=["for"],Ym={class:"lastTestType"},qm=(0,s.Lk)("span",null,"Test Type",-1),Jm=["checked"],Qm=(0,s.Lk)("span",null,"ALL",-1),zm=["checked"],Zm=(0,s.Lk)("span",null,"Diff",-1),ev=["checked"],tv=(0,s.Lk)("span",null,"PBS",-1),av=["checked"],lv=(0,s.Lk)("span",null,"Wedge",-1),sv=["checked"],ov=(0,s.Lk)("span",null,"Biopsy",-1),nv=["checked"],iv=(0,s.Lk)("span",null,"Squash",-1),uv={class:"listBox"};var rv=(0,s.pM)({__name:"index",setup(e){const t=(0,r.Pj)(),a=(0,o.KR)([]),i=(0,o.KR)(!1),u=(0,o.KR)(""),c=new Date,d=new Date(c);d.setDate(c.getDate()-30);const m=(0,o.KR)(d),v=(0,o.KR)(new Date),p=(0,o.KR)(""),g=(0,o.KR)("barcodeNo"),I=(0,o.KR)(1),f=(0,o.KR)(1),b=(0,o.KR)({}),y=(0,o.KR)([]),C=(0,o.KR)([]),h=(0,o.KR)(0),k=(0,o.KR)(""),S=(0,o.KR)(""),N=(0,o.KR)(!1),_=(0,o.KR)(!1),E=(0,s.nI)(),L=(0,o.KR)(""),R=(0,o.KR)(""),w=(0,o.KR)([]),T=(0,o.KR)(t.state.commonModule.iaRootPath),P=((0,o.KR)(t.state.commonModule.dataBaseOneCall),(0,s.EW)((()=>t.state.commonModule.viewerCheck))),A=(0,o.KR)(!1),D=(0,o.KR)(!1),M=(0,o.KR)(!1),x=(0,o.KR)(!1);function K(e){A.value=!0,x.value=!1,W().then((()=>{}))}(0,s.KC)((async()=>{_.value="bm"===window.PROJECT_TYPE})),(0,s.sV)((async()=>{A.value||await W(),x.value=!0,E?.appContext.config.globalProperties.$socket.on("stateVal",K)})),(0,s.xo)((()=>{E?.appContext.config.globalProperties.$socket.off("stateVal",K)}));const O=()=>{N.value=!N.value},B=e=>{k.value=k.value===e?"":e},U=()=>{const e=y.value?.filter((e=>e.checked)).map((e=>e.title));C.value=e},W=async()=>{y.value=[],D.value=!0;const e=$();0!==Object.keys(e).length?(g.value=e.searchType||"barcodeNo",p.value=e.searchText||"",m.value=new Date(e.startDate)||new Date,v.value=new Date(e.endDate)||new Date,I.value=e.page||1,await G("search")):await G("mounted",1)},X=e=>{b.value=e},F=()=>{const e={page:I.value,prevPage:f.value,searchType:g.value,searchText:p.value,startDate:J(m.value),endDate:J(v.value)};sessionStorage.setItem("lastSearchParams",JSON.stringify(e))},$=()=>{const e=sessionStorage.getItem("lastSearchParams");return e?JSON.parse(e):{}},G=async(e,t)=>{"search"===e?(w.value=[],M.value=!0,x.value=!0,I.value=1):(M.value=!1,x.value=!1);let l=0;l="loadMoreData"===e?I.value:"loadPrevData"===e?f.value:I.value;const s={page:"mounted"!==e?l:Number(t),pageSize:20,startDay:J(m.value),endDay:J(v.value),barcodeNo:"barcodeNo"===g.value?p.value:void 0,patientId:"patientId"===g.value?p.value:void 0,patientNm:"patientNm"===g.value?p.value:void 0,nrCount:h.value};""===L.value&&(L.value=s.page),0!==C.value.length&&(s.title=C.value),"00"!==k.value&&""!==k.value&&(s.testType=k.value),""!==S.value&&"all"!==S.value&&(s.wbcCountOrder=S.value);try{const t=await lr(s);if(1===I.value&&0===t.data.data.length)return void(D.value=!1);if(t&&t.data){L.value=s.page,R.value=s;const l=t.data.data;0===l.length?(1===I.value?I.value=1:I.value-=1,0===l.length&&"1"===String(t.data?.page)&&(a.value=l)):("search"===e?a.value=l:l.forEach((e=>{const t=a.value.findIndex((t=>t.id===e.id));-1!==t?a.value[t]=e:a.value.push(e)})),y.value=a.value[0]?.wbcInfo?.wbcInfo[0],""!==S.value&&"all"!==S.value||(a.value=a.value.sort(((e,t)=>{const a=H()(e.analyzedDttm,"YYYYMMDDHHmmssSSS"),l=H()(t.analyzedDttm,"YYYYMMDDHHmmssSSS");return l.diff(a)}))),0!==a.value.length?F():I.value-=1)}}catch(o){console.error(o)}},j=()=>{a.value=[],sessionStorage.removeItem("lastSearchParams");const e=v.value.getTime()-m.value.getTime(),t=e/864e5;t>30?Q("You cannot select a period of more than 30 days."):G("search")},V=()=>{G("search")},Y=async()=>{I.value+=1,await G("loadMoreData")},q=async()=>{f.value=$().prevPage,f.value-=1,f.value<=0||await G("loadPrevData")},Q=async e=>{i.value=!0,u.value=e},z=()=>{i.value=!1},Z=async()=>{if(0===w.value.length)return void Q("Select an Item");const e="01"===w.value[0].testType||"04"===w.value[0].testType?"01_WBC_Classification":"05_BF_Classification",t=w.value.map((t=>`${T.value}\\${t.slotId}\\${e}`));try{await _m(t)}catch(a){console.log(a)}},ee=()=>{m.value=d,v.value=new Date},te=e=>{w.value=e};return(e,t)=>{const r=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("h3",Em,[(0,s.eW)(" Classification List "),(0,s.Lk)("button",{onClick:O},[(0,s.bF)(r,{icon:["fas","list-check"]})])]),(0,s.Lk)("div",Lm,[(0,s.Lk)("div",Rm,[(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),class:"searchSelect"},Am,512),[[l.u1,g.value]]),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>p.value=e),class:"searchInputBox"},null,512),[[l.Jo,p.value]]),(0,s.Lk)("button",{class:"searchClass",onClick:ee},[(0,s.bF)(r,{icon:["fas","calendar-days"]}),(0,s.eW)(" Refresh ")]),(0,s.Lk)("div",Dm,[(0,s.bF)((0,o.R1)(Zs.A),{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=e=>m.value=e)},null,8,["modelValue"]),(0,s.bF)((0,o.R1)(Zs.A),{modelValue:v.value,"onUpdate:modelValue":t[3]||(t[3]=e=>v.value=e)},null,8,["modelValue"])]),(0,s.Lk)("button",{type:"button",class:"searchClass",onClick:j},"Search"),"viewer"!==P.value?((0,s.uX)(),(0,s.CE)("div",Mm,[(0,s.bF)(r,{icon:["fas","file-csv"],onClick:Z})])):(0,s.Q3)("",!0)]),N.value?((0,s.uX)(),(0,s.CE)("div",xm,[_.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Km,[Om,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>h.value=e)},null,512),[[l.Jo,h.value]])])),(0,s.Lk)("div",Bm,[Um,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>S.value=e)},$m,512),[[l.u1,S.value]])]),(0,s.Lk)("div",Gm,[(0,s.Lk)("span",null,(0,n.v_)(_.value?"BM":"WBC")+" Info Filter",1),(0,s.Lk)("ul",Hm,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(y.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"checkbox_"+t,"onUpdate:modelValue":t=>e.checked=t,onChange:U},null,40,jm),[[l.lH,e.checked]]),(0,s.Lk)("label",{for:"checkbox_"+t},(0,n.v_)(e.title),9,Vm)])))),128))])]),(0,s.Lk)("div",Ym,[qm,(0,s.Lk)("div",null,[(0,s.Lk)("label",null,[(0,s.Lk)("input",{type:"checkbox",value:"00",onChange:t[6]||(t[6]=e=>B("00")),checked:"00"===k.value},null,40,Jm),Qm]),_.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("label",null,[(0,s.Lk)("input",{type:"checkbox",value:"01",onChange:t[7]||(t[7]=e=>B("01")),checked:"01"===k.value},null,40,zm),Zm]),(0,s.Lk)("label",null,[(0,s.Lk)("input",{type:"checkbox",value:"04",onChange:t[8]||(t[8]=e=>B("04")),checked:"04"===k.value},null,40,ev),tv])],64)),_.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.Lk)("label",null,[(0,s.Lk)("input",{type:"checkbox",value:"02",onChange:t[9]||(t[9]=e=>B("02")),checked:"02"===k.value},null,40,av),lv]),(0,s.Lk)("label",null,[(0,s.Lk)("input",{type:"checkbox",value:"04",onChange:t[10]||(t[10]=e=>B("04")),checked:"04"===k.value},null,40,sv),ov]),(0,s.Lk)("label",null,[(0,s.Lk)("input",{type:"checkbox",value:"06",onChange:t[11]||(t[11]=e=>B("06")),checked:"06"===k.value},null,40,nv),iv])],64)):(0,s.Q3)("",!0)])])])):(0,s.Q3)("",!0)]),((0,s.uX)(),(0,s.Wv)(s.PR,null,[(0,s.bF)(Xd,{loadingDelayParents:D.value,dbData:a.value,onLoadMoreData:Y,onLoadPrevData:q,onInitData:W,onSelectItem:X,onRefresh:V,onCheckListItem:te,selectedItemIdFalse:M.value,notStartLoading:x.value},null,8,["loadingDelayParents","dbData","selectedItemIdFalse","notStartLoading"])],1024))]),(0,s.Lk)("div",uv,[(0,s.bF)(im,{dbData:a.value,selectedItem:b.value},null,8,["dbData","selectedItem"]),_.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(gm,{key:0,dbData:a.value,selectedItem:b.value},null,8,["dbData","selectedItem"])),_.value?((0,s.uX)(),(0,s.Wv)(Sm,{key:1,dbData:a.value,selectedItem:b.value},null,8,["dbData","selectedItem"])):(0,s.Q3)("",!0)])]),i.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":i.value,message:u.value,onHide:z,"onUpdate:hideAlert":z},null,8,["is-visible","message"])):(0,s.Q3)("",!0)],64)}}});const cv=rv;var dv=cv;const mv={class:"createdRbc"},vv={class:"mt1 flexSpaceBetween"},pv=(0,s.Lk)("h3",{class:"wbcClassInfoLeft"},"RBC Classification",-1),gv={class:"leftWbcInfo rbcClass"},Iv={style:{position:"relative"}},fv={key:0,class:"memoModal"},bv={class:"categoryNm"},yv={key:0,class:"mb1 liTitle"},Cv=["onClick"],hv={class:"classNmRbc"},kv={key:0,class:"mb1 liTitle"},Sv=["onClick"],Nv={key:0},_v=["value"],Ev={key:0},Lv=(0,s.Lk)("span",null,"Others",-1),Rv=[Lv],wv={key:0},Tv=(0,s.Lk)("span",null,"Malaria",-1),Pv={class:"degree analysis"},Av={key:0,class:"mb1 liTitle"},Dv={key:0},Mv={key:0,class:"rbcSapn"},xv={key:1,class:"rbcSapnDown"},Kv={key:1},Ov={key:0,class:"rbcSapn"},Bv={key:1,class:"rbcSapn"},Uv={key:2,class:"rbcSapnDown"},Wv={key:3,class:"rbcSapnDown"},Xv={key:2},Fv={key:3},$v={key:4},Gv={class:"rbcPercent"},Hv={key:0,class:"mb1 liTitle"},jv={key:0},Vv={key:1},Yv={key:2,class:"defaultText"},qv={key:3,class:"defaultText"},Jv={key:4},Qv={key:5,class:"underline"},zv={class:"rbcPercent mr1"},Zv={key:0,class:"mb1 liTitle"},ep={key:0},tp={key:1},ap={key:2,class:"defaultText"},lp={key:3,class:"defaultText"},sp={key:4},op={class:"categories rbcClass"},np=(0,s.Lk)("ul",{class:"categoryNm"},[(0,s.Lk)("li",null,"Others")],-1),ip={class:"classNmRbc"},up={key:0},rp=(0,s.Lk)("span",null,"Platelet",-1),cp={class:"degree analysis"},dp={style:{"font-size":"0.8rem"}},mp=(0,s.Lk)("ul",{class:"rbcPercent"},null,-1),vp=(0,s.Lk)("ul",{class:"rbcPercent"},null,-1);var pp=(0,s.pM)({__name:"rbcClass",props:["rbcInfo","selectItems","type","allCheckClear","isCommitChanged"],setup(e,{emit:t}){const a=e=>e?.categoryNm,i=(0,o.KR)([]),c=e,d=(0,o.KR)([]),m=(0,o.KR)([]),v=(0,o.KR)(0),p=(0,o.KR)(0),g=(0,o.KR)(""),I=(0,o.KR)(50),f=(0,o.KR)(!1),b=(0,r.Pj)(),y=(0,o.KR)(!1),C=(0,o.KR)(""),h=(0,o.KR)(""),k=(0,o.KR)(!1),S=(0,o.KR)(""),N=(0,o.KR)(""),_=(0,s.EW)((()=>b.state.userModule)),E=(0,o.KR)(!1),L=(0,o.KR)([]),R=t,w=(0,o.KR)(""),T=(0,u.rd)(),P=(0,o.KR)(!1),A=(0,o.KR)([]),D=(0,o.KR)("Macrocyte"),M=(0,o.KR)(!0),x=(0,o.KR)([]),K=(0,o.KR)(0),O=(0,s.EW)((()=>b.state.commonModule.iaRootPath)),B=(0,o.KR)(!1),U=(0,s.EW)((()=>b.state.commonModule.rbcReData)),W=(0,s.EW)((()=>b.state.commonModule.resetRbcArr)),X=(0,s.EW)((()=>b.state.commonModule.selectedSampleId)),F=(0,o.KR)([]),G=(0,o.KR)(0),j=(0,o.KR)(0),V=(0,o.KR)(0),Y=(0,o.KR)(0),q=(0,o.KR)(0),J=(0,s.EW)((()=>b.state.commonModule.rbcReDataCheck)),z=(0,o.KR)(null);let Z;const ee=(0,o.KR)(""),te=(0,o.KR)(window.PROJECT_TYPE),ae=(0,o.KR)(0),le=(0,o.KR)(0);(0,s.sV)((async()=>{const{path:e}=T.currentRoute.value;g.value=c.selectItems?.rbcMemo,v.value=c.selectItems?.rbcInfo.pltCount,p.value=c.selectItems?.rbcInfo.malariaCount,g.value=c.selectItems?.rbcMemo,w.value=c.selectItems?.rbcInfo.maxRbcCount,ee.value=c.selectItems?.submitState,P.value="/report"===e,A.value=[],se()})),(0,s.wB)((()=>c.isCommitChanged),(()=>{ee.value="Submit"})),(0,s.wB)((()=>c.allCheckClear),(e=>{i.value=[],L.value=[]}),{deep:!0}),(0,s.wB)((()=>c.selectItems),(async e=>{v.value=c.selectItems?.pltCount,p.value=c.selectItems?.malariaCount,g.value=c.selectItems?.rbcMemo,ee.value=c.selectItems?.submitState,ge(e),se(),M.value=!0}));const se=()=>{A.value=[];const e=c.selectItems?.rbcInfo.rbcClass||c.selectItems?.rbcInfo;if(e)for(const t of e)t.classInfo.forEach((e=>{"Normal"!==e.classNm&&A.value.push({...e,categoryId:t.categoryId})}));A.value.push({categoryId:"04",classId:"01",classNm:"Platelet"},{categoryId:"05",classId:"03",classNm:"Malaria"})};(0,s.wB)((()=>c.rbcInfo),(async e=>{await ge(e),await re(),await Ie(),await Ae(),await De()})),(0,s.wB)((()=>W),(async e=>{e&&await b.dispatch("commonModule/setCommonInfo",{resetRbcArr:!1})}),{deep:!0}),(0,s.wB)((()=>c.allCheckClear),(e=>{i.value=[],L.value=[]}),{deep:!0}),(0,s.wB)((()=>U),(async e=>{e&&(clearTimeout(Z),Z=setTimeout((async()=>{B.value=!1,await re(),await Ie(),await Ae(),await De()}),1e3))}),{deep:!0});const oe=(e,t,a,l,s,o)=>{const n=i.value.includes(o);n?i.value=i.value.filter((e=>e!==o)):i.value.push(o),ye(l.classNm,!n,s.categoryId,l.classId),pe(l.classNm,"Others",s.categoryId,l.classId)};function ne(e,t,a,l,s){ue(e,t,a,l,s),pe(l.classNm,s.categoryNm,s.categoryId,l.classId)}function ue(e,t,a,l,s){const o=`${e}-${t}-${a}`,n=i.value.includes(o);n?i.value=i.value.filter((e=>e!==o)):i.value.push(o),ye(l.classNm,!n,s.categoryId,l.classId)}const re=async()=>{const e=""!==c.selectItems?.img_drive_root_path&&c.selectItems?.img_drive_root_path?c.selectItems?.img_drive_root_path:O.value,t=`${e}/${c.selectItems.slotId}/03_RBC_Classification/${c.selectItems.slotId}_new.json`,a=await dr({fullPath:t}),l=`${e}/${c.selectItems.slotId}/03_RBC_Classification/${c.selectItems.slotId}.json`,s=await dr({fullPath:l});if("not file"!==a.data){const e=a?.data;for(const t of s.data[0].rbcClassList)for(const a of e){const e=t.classInfo.findIndex((e=>e.index===a.index));if(-1!==e&&t.classInfo.splice(e,1),t.categoryId===a.categoryId){let e={classNm:a.classNm,classId:a.classId,posX:String(a.posX),posY:String(a.posY),width:a.width,height:a.height,index:a.index};t.classInfo.push(e)}}x.value=s.data[0].rbcClassList}else x.value=s?.data[0].rbcClassList;if(!x.value||!Array.isArray(x.value))return void console.error("rbcInfoPathAfter.value is not iterable");let o=0,n=0,i=0,u=0;ae.value=0,le.value=0,x.value.forEach((e=>{if("03"===e.categoryId)for(const t of e.classInfo)"Artifact"===t.classNm?ae.value+=1:"DoubleNormal"===t.classNm&&(le.value+=1);switch(e.categoryId){case"01":o=e.classInfo.length;break;case"02":n=e.classInfo.length;break;case"03":i=e.classInfo.length;break;case"05":u=e.classInfo.length;break;default:break}})),K.value=Number(o),G.value=Number(o),j.value=n,V.value=Number(u),Y.value=Number(i),q.value=Number(i)+Number(u)},ce=e=>{const t=(Number(e)/Number(K.value)*100).toFixed(1);return Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t},de=()=>{const e=JSON.parse(JSON.stringify(d.value)),t=e.find((e=>e.categoryNm===D.value));if(t)I.value=t.sensitivity||50;else{for(const t of e){const e=t.classInfo.find((e=>e.classNm===D.value));if(e)return void(I.value=e.sensitivity||50)}I.value=50}},me=()=>{null!==z.value&&clearTimeout(z.value)};(0,s.wB)(J,(e=>{me(),null!==z.value&&clearInterval(z.value),z.value=window.setInterval((()=>{e&&ve()}),800)}),{deep:!0});const ve=async()=>{B.value=!0,await fe(D.value),await b.dispatch("commonModule/setCommonInfo",{rbcReData:!1});const e={jobCmd:"RBC_RE_CLASSIFICATION",sensitivity:Number(I.value),reqDttm:Q().embedStatus.settings.reqDttm,reqUserId:_.value.userId||"",className:D.value.replace(/\s/g,""),slotId:c.selectItems?.slotId,anyWay:"true"};Je.publish("childEmitSocketData",e)},pe=(e,t,a,l)=>{if("Normal"===e)return;const s=JSON.parse(JSON.stringify(d.value));for(const o of s)for(const t of o?.classInfo)t.classNm===e&&t.classId===l&&(I.value=t.sensitivity||50);D.value=e},ge=async e=>{E.value=!1,R("isBeforeUpdate",!1);let t={};if(t=e||c.selectItems,m.value=t.rbcInfo?.rbcClass?t.rbcInfo.rbcClass:t,t?.rbcInfoAfter&&"object"===typeof c.selectItems.rbcInfoAfter?d.value=0===Object.entries(t.rbcInfoAfter).length?m.value:t.rbcInfoAfter:d.value=t.rbcInfoAfter&&1===t.rbcInfoAfter.length?m.value:t,"report"===c.type){const e=await or(String(X.value));d.value=e.data.rbcInfoAfter,await b.dispatch("commonModule/setCommonInfo",{rbcInfoAfterData:e.data.rbcInfoAfter})}await de()},Ie=async()=>{if(!m.value||!Array.isArray(m.value))return void console.error("rbcInfoBeforeVal.value is not an array");if(!x.value||!Array.isArray(x.value))return void console.error("rbcInfoPathAfter.value is not an array");for(const a of m.value)for(const e of a.classInfo){let t=0;for(const l of x.value)for(const s of l.classInfo)s.classNm.replace(/\s+/g,"")===e.classNm.replace(/\s+/g,"")&&l.categoryId===a.categoryId&&t++;e.originalDegree=t}let e=0,t=0;for(const a of x.value){if("01"===a.categoryId){const e=a.classInfo[a.classInfo.length-1].index;w.value=Number(e.replace("S",""))+1}if("04"===a.categoryId)for(const t of a.classInfo)"Platelet"===t.classNm&&(e+=1);else if("05"===a.categoryId)for(const e of a.classInfo)"Malaria"===e.classNm&&(t+=1)}v.value=Math.floor(e/parseFloat(w.value)*1e3),p.value=t},fe=async e=>{let t=JSON.parse(JSON.stringify(d.value));for(const o of t)if(o.categoryNm===e)o.sensitivity=I.value;else{const t=o?.classInfo?.findIndex((t=>t.classNm===e));-1!==t&&void 0!==t&&o?.classInfo&&(o.classInfo[t].sensitivity=I.value)}d.value=t;const a=await or(String(X.value)),l={rbcInfoAfter:t},s={...a.data,...l};await _e(s,!1)},be=(e,t)=>{let a=[];for(const l of m.value)"03"!==l.categoryId&&"04"!==l.categoryId&&"05"!==l.categoryId||l.classInfo.forEach(((e,t)=>{a.push({classNm:e.classNm,categoryId:l.categoryId,classId:e.classId})})),"05"===l.categoryId&&a.push({classNm:"Malaria",categoryId:"05",classId:"03"});a.push({classNm:"Platelet",categoryId:"04",classId:"01"}),i.value=e?["0-2-0","0-2-1","0-2-2","0-2-3","0-2-4","0-2-5","0-2-6","0-2-7","0-2-8","0-2-9","0-2-10","0-3-0","0-3-1","9-9-1","9-9-2"]:[],a.forEach((t=>{ye(t.classNm,e,t.categoryId,t.classId)})),M.value=!M.value},ye=(e,t,a,l)=>{t?L.value.some((t=>t.classNm===e&&t.classId===l&&t.categoryId===a))||L.value.push({classNm:e,categoryId:a,classId:l}):L.value=L.value.filter((t=>!(t.classNm===e&&t.classId===l&&t.categoryId===a))),R("classInfoArrUpdate",L.value)};(0,s.wB)(U,(async(e,t)=>{e&&Ce()}),{deep:!0});const Ce=()=>{R("classInfoArrUpdateRe",L.value)},he=async(e,t,a,l=!1)=>{if("report"===c.type)return;const s=JSON.parse(JSON.stringify(d.value)).map((s=>(s.categoryNm===e.categoryNm&&(s.classInfo=s.classInfo.map((e=>(e.classNm===t.classNm&&(e.degree=String(l?0===Number(e.degree)?1:0:a)),e)))),s)));d.value=s;const o=await or(String(X.value)),n={rbcInfoAfter:s},i={...o.data,...n};await b.dispatch("commonModule/setCommonInfo",{rbcInfoAfterData:s}),await _e(i,!1)},ke=()=>{f.value=!f.value},Se=()=>{f.value=!1},Ne=async()=>{const e=await or(String(X.value)),t=g.value.replaceAll("\r\n","<br>"),a={rbcMemo:t},l={...e.data,...a};await _e(l,!0),f.value=!1},_e=async(e,t)=>{try{const a=await ar({userId:Number(_.value.id),runingInfoDtoItems:[e]});if(a){t&&Ee("success");const a=e;g.value=a.rbcMemo}else console.error("백엔드가 디비에 저장 실패함")}catch(a){console.error("Error:",a)}},Ee=e=>{y.value=!0,C.value="success",h.value=e,window.scrollTo({top:0,behavior:"smooth"})},Le=()=>{y.value=!1},Re=()=>{k.value=!0,N.value=$.IDS_MSG_CONFIRM_SLIDE},we=()=>{Pe(),k.value=!1},Te=()=>{k.value=!1},Pe=async()=>{const e=H()().local(),t=await or(String(X.value)),a={submitState:"Submit",submitOfDate:e.format(),submitUserId:_.value.name},l={...t.data,...a};await _e(l),R("submitStateChanged","Submit")},Ae=async()=>{try{const e=await ie(),t=e.data;F.value=t}catch(e){console.log(e)}},De=async()=>{if("bm"===te.value)return;let e=K.value,t=G.value,a=j.value;m.value.forEach(((l,s)=>{l.classInfo.forEach(((s,o)=>{F.value&&F.value.forEach((o=>{if(o.categoryId===l.categoryId&&o.classId===s.classId){const l=Number(s.degree);let n=0;n="01"===o.categoryId?Number((l/t*100).toFixed(2)):"02"===o.categoryId?Number((l/a*100).toFixed(2)):Number((l/e*100).toFixed(2)),isNaN(n)&&(n=0);const i=e=>s.degree=e;n<Number(o.degree1)?i("0"):n<Number(o.degree2)?i("1"):n<Number(o.degree3)?i("2"):i("3")}}))}))})),m.value.forEach(((l,s)=>{l.classInfo.forEach(((s,o)=>{F.value&&F.value.forEach((o=>{if(o.categoryId===l.categoryId&&o.classId===s.classId){const l=Number(s.originalDegree);let n=0;n="01"===o.categoryId?Number((l/t*100).toFixed(2)):"02"===o.categoryId?Number((l/a*100).toFixed(2)):Number((l/e*100).toFixed(2)),isNaN(n)&&(n=0);const i=e=>s.degree=e;n<Number(o.degree1)?i("0"):n<Number(o.degree2)?i("1"):n<Number(o.degree3)?i("2"):i("3")}}))}))})),m.value.forEach((e=>{e.classInfo.forEach((t=>{if("01"===e.categoryId&&("01"===t.classId&&(e.classInfo[0].degree="1"),["02","03"].includes(t.classId)&&Number(t.degree)>0&&(e.classInfo[0].degree="0")),"02"===e.categoryId&&("01"===t.classId&&(e.classInfo[0].degree="1"),["02","03"].includes(t.classId)&&Number(t.degree)>0&&(e.classInfo[0].degree="0")),"03"===e.categoryId&&("01"===t.classId&&(e.classInfo[0].degree="1",e.classInfo[1].degree="0"),"01"!==t.classId&&"02"!==t.classId)){var a=Number(e.classInfo[1].degree);Number(t.degree)>a&&(e.classInfo[0].degree="0",e.classInfo[1].degree=t.degree)}}))}))};return(t,o)=>{const u=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bo)((0,s.Lk)("div",mv," Creating a new RBC classification ...",512),[[l.aG,B.value]]),(0,s.Lk)("div",null,[(0,s.Lk)("div",vv,[pv,(0,s.Lk)("ul",gv,[(0,s.Lk)("li",Iv,[(0,s.bF)(u,{icon:["fas","comment-dots"],onClick:ke}),f.value?((0,s.uX)(),(0,s.CE)("div",fv,[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":o[0]||(o[0]=e=>g.value=e)},null,512),[[l.Jo,g.value]]),(0,s.Lk)("button",{onClick:Ne},"ok"),(0,s.Lk)("button",{onClick:Se},"cancel")])):(0,s.Q3)("",!0)]),(0,s.Lk)("li",{onClick:Re,class:(0,n.C4)({submitted:"Submit"===ee.value})},[(0,s.bF)(u,{icon:["fas","square-check"]})],2)])]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)([m.value],((t,r)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:r},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t,((t,c)=>((0,s.uX)(),(0,s.CE)("div",{key:c,class:"categories rbcClass"},[(0,s.Lk)("ul",bv,[0===c?((0,s.uX)(),(0,s.CE)("li",yv,"Category")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,[(0,s.Lk)("span",null,(0,n.v_)(a(t)),1),"Shape"===a(t)&&"report"!==e.type?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"degreeAllCheckBtn",onClick:e=>be(M.value,t)},(0,n.v_)(M.value?"All Check":"All Uncheck"),9,Cv)):(0,s.Q3)("",!0)])]),(0,s.Lk)("ul",hv,[0===c?((0,s.uX)(),(0,s.CE)("li",kv,"Class")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t?.classInfo,((a,u)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:`${r}-${c}-${u}`},[(0,s.Lk)("li",{onClick:e=>ne(r,c,u,a,t)},["Shape"!==t?.categoryNm&&"Inclusion Body"!==t.categoryNm||"report"===e.type||"Poikilocyte"===a?.classNm?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Nv,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:`${r}-${c}-${u}`,"onUpdate:modelValue":o[1]||(o[1]=e=>i.value=e)},null,8,_v),[[l.aG,!P.value],[l.lH,i.value]])])),(0,s.Lk)("span",null,(0,n.v_)("TearDropCell"===a?.classNm?"TearDrop Cell":a?.classNm),1)],8,Sv),u===t.classInfo.length-1&&"03"===t?.categoryId?((0,s.uX)(),(0,s.CE)("li",Ev,Rv)):(0,s.Q3)("",!0),u===t.classInfo.length-1&&"05"===t?.categoryId?((0,s.uX)(),(0,s.CE)("li",{key:1,onClick:o[4]||(o[4]=e=>oe(0,0,2,{classNm:"Malaria",classId:"03"},{categoryId:"05"},"9-9-2"))},["report"!==e.type?((0,s.uX)(),(0,s.CE)("div",wv,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"9-9-2","onUpdate:modelValue":o[2]||(o[2]=e=>i.value=e),onChange:o[3]||(o[3]=e=>ye("Malaria",e.target.checked,"05","03"))},null,544),[[l.aG,!P.value],[l.lH,i.value]])])):(0,s.Q3)("",!0),Tv])):(0,s.Q3)("",!0)],64)))),128))]),(0,s.Lk)("ul",Pv,[0===c?((0,s.uX)(),(0,s.CE)("li",Av,"Degree")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t?.classInfo,((e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:`${r}-${c}-${a}`},["01"!==e.classId||"05"===t.categoryId||"01"!==d.value[c].classInfo[a].classId||"05"===d.value[c].categoryId?((0,s.uX)(),(0,s.CE)("li",Dv,["01"!==e.classId||"05"===t.categoryId?((0,s.uX)(),(0,s.CE)("span",Mv,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(4,(t=>(0,s.bF)(u,{icon:["fac","half-circle-up"],key:t,class:(0,n.C4)({degreeActive:t<Number(e?.degree)+2||0,"degree0-img":t>=Number(e?.degree)+1||0}),onClick:e=>he(d.value[c],d.value[c].classInfo[a],t-1,!1)},null,8,["class","onClick"]))),64))])):(0,s.Q3)("",!0),"01"!==d.value[c].classInfo[a].classId||"05"===d.value[c].categoryId?((0,s.uX)(),(0,s.CE)("span",xv,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(4,(e=>(0,s.bF)(u,{icon:["fac","half-circle-down"],key:e+"-down",class:(0,n.C4)({degreeActive:e<Number(d.value[c].classInfo[a]?.degree)+2||0,"degree0-img":e>=Number(d.value[c].classInfo[a]?.degree)+1||0}),onClick:t=>he(d.value[c],d.value[c].classInfo[a],e-1,!1)},null,8,["class","onClick"]))),64))])):(0,s.Q3)("",!0)])):((0,s.uX)(),(0,s.CE)("li",Kv,["0"===e.degree?((0,s.uX)(),(0,s.CE)("span",Ov,[(0,s.bF)(u,{icon:["fac","half-circle-up"]})])):((0,s.uX)(),(0,s.CE)("span",Bv,[(0,s.bF)(u,{icon:["fac","half-circle-up"],class:"degreeActive"})])),"0"===d.value[c].classInfo[a]?.degree?((0,s.uX)(),(0,s.CE)("span",Uv,[(0,s.bF)(u,{onClick:e=>he(d.value[c],d.value[c].classInfo[a],"0",!0),icon:["fac","half-circle-down"]},null,8,["onClick"])])):((0,s.uX)(),(0,s.CE)("span",Wv,[(0,s.bF)(u,{onClick:e=>he(d.value[c],d.value[c].classInfo[a],"1",!0),icon:["fac","half-circle-down"],class:"degreeActive"},null,8,["onClick"])]))])),a===t.classInfo.length-1&&"03"===d.value[c].categoryId?((0,s.uX)(),(0,s.CE)("li",Xv," - ")):(0,s.Q3)("",!0),a===t.classInfo.length-1&&"05"===d.value[c].categoryId?((0,s.uX)(),(0,s.CE)("li",Fv," - ")):(0,s.Q3)("",!0),a===t.classInfo.length-1?((0,s.uX)(),(0,s.CE)("div",$v,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(["01","02","05"],(e=>(0,s.bo)((0,s.Lk)("div",{key:e,class:"underline"}," Total "),[[l.aG,d.value[c].categoryId===e]]))),64))])):(0,s.Q3)("",!0)],64)))),128))]),(0,s.Lk)("ul",Gv,[0===c?((0,s.uX)(),(0,s.CE)("li",Hv,"count")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t?.classInfo,((e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:`${r}-${c}-${a}`},["Poikilocyte"!==e?.classNm?((0,s.uX)(),(0,s.CE)("li",jv,(0,n.v_)(e?.originalDegree),1)):((0,s.uX)(),(0,s.CE)("li",Vv,"-")),a===t.classInfo.length-1&&"03"===t?.categoryId?((0,s.uX)(),(0,s.CE)("li",Yv,(0,n.v_)(ae.value+le.value||0),1)):(0,s.Q3)("",!0),a===t.classInfo.length-1&&"05"===t?.categoryId?((0,s.uX)(),(0,s.CE)("li",qv,(0,n.v_)(p.value||0),1)):(0,s.Q3)("",!0),a===t.classInfo.length-1?((0,s.uX)(),(0,s.CE)("div",Jv,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(["01","02"],(e=>(0,s.bo)((0,s.Lk)("div",{key:e,class:"underline"},(0,n.v_)(G.value),1),[[l.aG,d.value[c].categoryId===e]]))),64))])):(0,s.Q3)("",!0),a===t.classInfo.length-1&&"05"===d.value[c].categoryId?((0,s.uX)(),(0,s.CE)("div",Qv,(0,n.v_)(q.value),1)):(0,s.Q3)("",!0)],64)))),128))]),(0,s.Lk)("ul",zv,[0===c?((0,s.uX)(),(0,s.CE)("li",Zv,"percent")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t?.classInfo,((e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:`${r}-${c}-${a}`},["Poikilocyte"!==e?.classNm?((0,s.uX)(),(0,s.CE)("li",ep,(0,n.v_)(ce(e?.originalDegree)),1)):((0,s.uX)(),(0,s.CE)("li",tp,"-")),a===t.classInfo.length-1&&"03"===d.value[c].categoryId?((0,s.uX)(),(0,s.CE)("li",ap,(0,n.v_)(ce(ae.value+le.value)),1)):(0,s.Q3)("",!0),a===t.classInfo.length-1&&"05"===d.value[c].categoryId?((0,s.uX)(),(0,s.CE)("li",lp,(0,n.v_)(ce(p.value)),1)):(0,s.Q3)("",!0),a===t.classInfo.length-1?((0,s.uX)(),(0,s.CE)("div",sp,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(["01","02","05"],(e=>(0,s.bo)((0,s.Lk)("div",{key:e,class:"underline"}," 100% "),[[l.aG,d.value[c].categoryId===e]]))),64))])):(0,s.Q3)("",!0)],64)))),128))])])))),128))],64)))),128)),(0,s.Lk)("div",null,[(0,s.Lk)("div",op,[np,(0,s.Lk)("ul",ip,[(0,s.Lk)("li",{onClick:o[7]||(o[7]=e=>oe(0,0,1,{classNm:"Platelet",classId:"01"},{categoryId:"04"},"9-9-1")),style:{"padding-top":"0"}},["report"!==e.type?((0,s.uX)(),(0,s.CE)("div",up,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"9-9-1","onUpdate:modelValue":o[5]||(o[5]=e=>i.value=e),onChange:o[6]||(o[6]=e=>ye("Platelet",e.target.checked,"04","01"))},null,544),[[l.aG,!P.value],[l.lH,i.value]])])):(0,s.Q3)("",!0),rp])]),(0,s.Lk)("ul",cp,[(0,s.Lk)("li",dp,(0,n.v_)(v.value||0)+" PLT / 1000 RBC",1)]),mp,vp])])]),y.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":y.value,type:C.value,message:h.value,onHide:Le,"onUpdate:hideAlert":Le},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0),k.value?((0,s.uX)(),(0,s.Wv)(wt,{key:1,"is-visible":k.value,type:S.value,message:N.value,onHide:Te,onOkConfirm:we},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const gp=pp;var Ip=gp,fp=a(4791),bp=a.n(fp);const yp=[{id:"none",text:"None"},{id:"line",text:"Line"},{id:"cross",text:"Cross"},{id:"circle",text:"Circle"}],Cp=Z(),hp=async e=>Cp.httpGet(ee.images.move,e,!0),kp=async e=>Cp.httpPost(ee.images.moveClassImage,e,"",!1,window.VIEWER_CHECK),Sp={key:0},Np=["src","onClick","onDragstart"],_p=(0,s.Lk)("div",{class:"no-malaria",style:{"text-align":"left"}},"No Malaria",-1),Ep=["src","onClick","onDragstart"],Lp={key:1},Rp=(0,s.Lk)("span",null,"Malaria Images do not exist.",-1),wp=[Rp];var Tp=(0,s.pM)({__name:"Malaria",props:["selectItems"],setup(e){const t=e,a=sessionStorage.getItem("iaRootPath")||_t.iaRootPath,i=window.APP_API_BASE_URL||"http://192.168.0.115:3002",u=(0,o.KR)([]),r=(0,o.KR)([]),c=(0,o.KR)([]);let d=(0,o.KR)(null),m=(0,o.KR)([]);const v=(0,o.KR)(!1);async function p(e,l){const s=t.selectItems.slotId||"",o=""!==t.selectItems?.img_drive_root_path&&t.selectItems?.img_drive_root_path?t.selectItems?.img_drive_root_path:a,n=`${o}/${s}/${_t.rbcClassDirName}/${e}`;try{const e=await fetch(`${i}/folders?folderPath=${n}`);if(!e.ok)throw v.value=!1,new Error("Network response was not ok");{const t=await e.json();l.value=t.map((e=>`${i}/folders?folderPath=${n}/${e}`)),v.value=!0}}catch(u){console.error(u)}}function g(e){const t=e.target;t.closest(".item-image")||(c.value=[])}function I(e,t,a,l){const s={section:e,imgName:t,index:a};if(c.value.length>0&&c.value[c.value.length-1].section!==e)c.value=[s];else if(l.shiftKey&&null!==d.value){const t=Math.min(d.value,a),l=Math.max(d.value,a);for(let a=t;a<=l;a++){const t=c.value.findIndex((e=>e.index===a));-1===t&&c.value.push({section:e,imgName:"malaria"===e?u.value[a]:r.value[a],index:a})}}else if(l.ctrlKey&&null!==d.value)c.value.push(s);else{const e=c.value.findIndex((e=>e.imgName===t));-1!==e?c.value.splice(e,1):c.value=[s]}d.value=a}function f(e,t){return c.value.some((e=>e.imgName===t))}function b(e,t,a){c.value.length>0?m.value=c.value:m.value=[{section:e,imgName:t,index:a}]}function y(e){for(const t of m.value)e!==t.section&&C(e,t.imgName)}async function C(e,l){const s=t.selectItems.slotId||"",o=""!==t.selectItems?.rootPath&&t.selectItems?.rootPath?t.selectItems?.rootPath:a,n=`${o}/${s}/${_t.rbcClassDirName}`,i="malaria"===e?`${n}/${_t.noMalariaDirName}`:`${n}/${_t.malariaDirName}`,d="malaria"===e?`${n}/${_t.malariaDirName}`:`${n}/${_t.noMalariaDirName}`,m=l.split("/"),v=m[m.length-1],p=await hp(`sourceFolder=${i}&destinationFolder=${d}&imageName=${v}`);if(p){const t="malaria"===e?r.value.findIndex((e=>e===l)):u.value.findIndex((e=>e===l));"malaria"===e?(r.value.splice(t,1),u.value.push(l)):(u.value.splice(t,1),r.value.push(l))}c.value=[]}return(0,s.sV)((async()=>{await p(_t.malariaDirName,u),await p(_t.noMalariaDirName,r),document.body.addEventListener("click",g)})),(e,t)=>v.value?((0,s.uX)(),(0,s.CE)("div",Sp,[(0,s.Lk)("div",null,[(0,s.Lk)("div",{onDrop:t[0]||(t[0]=e=>y("malaria")),onDragover:t[1]||(t[1]=(0,l.D$)((()=>{}),["prevent"])),style:{"text-align":"left",overflow:"auto",height:"400px"}},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,((e,t)=>((0,s.uX)(),(0,s.CE)("img",{key:"malaria-"+t,src:e,class:(0,n.C4)(["item-image",{selected:f("malaria",e)}]),alt:"malaria-image",onClick:a=>I("malaria",e,t,a),onDragstart:a=>b("malaria",e,t)},null,42,Np)))),128))],32)]),(0,s.Lk)("div",null,[_p,(0,s.Lk)("div",{onDrop:t[2]||(t[2]=e=>y("noMalaria")),onDragover:t[3]||(t[3]=(0,l.D$)((()=>{}),["prevent"])),style:{"text-align":"left",overflow:"auto",height:"400px"}},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,((e,t)=>((0,s.uX)(),(0,s.CE)("img",{key:"noMalaria-"+t,src:e,class:(0,n.C4)(["item-image",{selected:f("noMalaria",e)}]),alt:"noMalaria-image",onClick:a=>I("noMalaria",e,t,a),onDragstart:a=>b("noMalaria",e,t)},null,42,Ep)))),128))],32)])])):((0,s.uX)(),(0,s.CE)("div",Lp,wp))}});const Pp=Tp;var Ap=Pp;const Dp={class:"rbc-container imgList"},Mp={class:"btn-container_img_list"},xp={class:"btn-imgsetbox_img_list",ref:"imgSetWrap"},Kp={class:"imgSet_img_list"},Op={class:"alignItemsCenter"},Bp=(0,s.Lk)("label",null,"R",-1),Up={class:"alignItemsCenter"},Wp=(0,s.Lk)("label",null,"G",-1),Xp={class:"alignItemsCenter"},Fp=(0,s.Lk)("label",null,"B",-1),$p=(0,s.Lk)("span",null,"Grid",-1),Gp=(0,s.Lk)("span",null,"Ruler",-1),Hp={class:"ruler_box_img_list"},jp=["onClick"],Vp=(0,s.Lk)("span",null,"Zoom",-1),Yp={class:"tiling-viewer_img_list-box_img_list"},qp={key:2},Jp=(0,s.Lk)("span",null,"Tile does not exist.",-1),Qp=[Jp],zp={class:"categoryNm"},Zp={class:"classNmRbc"},eg=["onClick"],tg={class:"categories"},ag=(0,s.Lk)("ul",{class:"categoryNm"},[(0,s.Lk)("li",null,"Others")],-1),lg={class:"classNmRbc"},sg=(0,s.Lk)("span",null,"Platelets",-1),og=[sg],ng=(0,s.Lk)("span",null,"Malaria",-1),ig=[ng];var ug=(0,s.pM)({__name:"rbcImageList",props:["rbcInfo","selectItems","type","classInfoArr","isBefore"],setup(e,{emit:t}){const a=(0,o.KR)(!1),i=(0,o.KR)(""),u=(0,o.KR)(""),c=e,d=(0,o.KR)("lowMag");let m=(0,o.KR)(null);const v=(0,o.KR)(!1),p=(0,o.KR)(100),g=(0,o.KR)([0,0,0]),I=(0,o.KR)(!1),f=(0,o.KR)(!1),b=((0,o.KR)(null),(0,o.KR)("None")),y=(0,o.KR)(!1),C=(0,o.KR)({prevPosX:0,prevPosY:0,posX:0,posY:0,left:0,top:0,width:50,height:50}),h=(0,o.KR)(5),k=(0,o.KR)(0),S=(0,o.KR)(150),N=(0,o.KR)(null),_=(0,o.KR)(!0),E=(0,o.KR)([]),L=(0,r.Pj)(),R=(0,s.EW)((()=>L.state.commonModule.viewerCheck)),w="viewer"===R.value?window.MAIN_API_IP:window.APP_API_BASE_URL,T=(0,s.EW)((()=>L.state.commonModule.iaRootPath)),P=(0,o.KR)([]),A=(0,o.KR)([]),D=(0,o.KR)(null),M=(0,o.KR)([]),x=(0,o.KR)([]),K=(0,o.KR)(0),O=(0,o.KR)(0),B=t,U=(0,o.KR)([]),W=(0,s.EW)((()=>L.state.commonModule.rbcReData)),X=(0,s.EW)((()=>L.state.commonModule.classInfoArr)),F=(0,o.KR)("0"),$=(0,o.KR)("0");(0,s.sV)((async()=>{await(0,s.dY)(),await ae(),document.addEventListener("click",q),U.value=c.selectItems.rbcInfo.rbcClass?c.selectItems.rbcInfo.rbcClass:c.selectItems.rbcInfo}));const G=async e=>{const t=""!==c.selectItems?.img_drive_root_path&&c.selectItems?.img_drive_root_path?c.selectItems?.img_drive_root_path:T.value,a=`${t}/${c.selectItems.slotId}/02_RBC_Image/${e}.dzi`,l=await mr({filePath:a});return await H(`${e}`,l)},H=(e,t)=>{const a=new DOMParser,l=a.parseFromString(t,"application/xml"),s=l.getElementsByTagName("Size")[0],o=s.getAttribute("Width"),n=s.getAttribute("Height");return{fileName:e,width:Number(o),height:Number(n)}},j=async(e,t,a)=>{const l=document.getElementsByClassName("overlayElement");if(0===l.length)return void Q("Nothing has been selected");let s=P.value.find((t=>t.categoryId===e));s||(s={categoryId:e,classInfo:[]},P.value.push(s));let o=[];for(const n of x.value)for(const l of P.value){if(n.categoryId===l.categoryId){const s=l.classInfo.findIndex((e=>String(e.index)===n.index));-1!==s&&(o.push({categoryId:e,classNm:a,classId:t,posX:n.posX,posY:n.posY,width:n.width,height:n.height,index:String(n.index)}),l.classInfo.splice(s,1))}l.categoryId===e&&l.classInfo.push({classNm:a,classId:t,posX:n.posX,posY:n.posY,width:n.width,height:n.height,index:String(n.index)})}await V(),await Y(o),await te(A.value)},V=async()=>{const e=document.getElementsByClassName("overlayElement"),t=Array.from(e);t.forEach((e=>{m.value.removeOverlay(e)})),y.value=!1},Y=async e=>{const t=""!==c.selectItems?.img_drive_root_path&&c.selectItems?.img_drive_root_path?c.selectItems?.img_drive_root_path:T.value,a=`${t}/${c.selectItems?.slotId}/03_RBC_Classification/${c.selectItems?.slotId}_new.json`,l=await dr({fullPath:a});let s=[];if("not file"!==l.data){const a=`${t}/${c.selectItems?.slotId}/03_RBC_Classification/${c.selectItems?.slotId}_new.json`,l=await dr({fullPath:a});s=[...l.data,...e]}else s=e;const o=JSON.stringify(s),n=(new TextEncoder).encode(o),i=rr.Ay.deflate(n),u=new Blob([i],{type:"application/octet-stream"}),r=new FormData;r.append("file",u,`${c.selectItems?.slotId}_new.json`);const d=`${t}/${c.selectItems?.slotId}/03_RBC_Classification/${c.selectItems?.slotId}_new.json`;try{const e=await fetch(`${w}/jsonReader/upload?filePath=${d}`,{method:"POST",body:r});await e.json()}catch(m){console.error("Error:",m)}},q=e=>{const t=document.querySelector(".rbc-select-box");t&&!t.contains(e.target)&&(y.value=!1)};(0,s.wB)((()=>c.classInfoArr),(e=>{E.value=e,0===e.length&&(V(),ee()),Z(e)}),{deep:!0}),(0,s.wB)(X,(async(e,t)=>{if(W.value)return 0===e.length&&(V(),ee()),await Z(e),await L.dispatch("commonModule/setCommonInfo",{rbcReData:!1}),void await L.dispatch("commonModule/setCommonInfo",{classInfoArr:[]})}),{deep:!0});const J=e=>{c.isBefore||0===A.value.length||(y.value=!0,e.currentTarget instanceof HTMLElement&&(K.value=e.clientX,O.value=e.clientY-300))},Q=e=>{a.value=!0,i.value="error",u.value=e},z=()=>{a.value=!1},Z=async e=>{const t=""!==c.selectItems?.img_drive_root_path&&c.selectItems?.img_drive_root_path?c.selectItems?.img_drive_root_path:T.value,a=`${t}/${c.selectItems.slotId}/03_RBC_Classification/${c.selectItems.slotId}_new.json`,l=await dr({fullPath:a}),s=`${t}/${c.selectItems.slotId}/03_RBC_Classification/${c.selectItems.slotId}.json`,o=await dr({fullPath:s});if("not file"!==l.data){const e=l?.data;for(const t of o.data[0].rbcClassList)for(const a of e){const e=t.classInfo.findIndex((e=>String(e.index)===String(a.index)));if(-1!==e&&t.classInfo.splice(e,1),t.categoryId===a.categoryId){let e={classNm:a.classNm,classId:a.classId,posX:String(a.posX),posY:String(a.posY),width:a.width,height:a.height,index:String(a.index)};t.classInfo.push(e)}}P.value=o.data[0].rbcClassList}else P.value=o?.data[0].rbcClassList;A.value=e,0===e.length?ee():await te(e)};(0,s.wB)((()=>c.selectItems),(async e=>{await(0,s.dY)();const t=document.getElementById("tiling-viewer_img_list");t&&(t.innerHTML="",m.value&&m.value.destroy(),d.value="lowMag",await ae())}));const ee=()=>{const e=D.value;if(!e)return console.error("Canvas element를 찾을 수 없습니다."),null;const t=e.getContext("2d");return t?(t.clearRect(0,0,e.width,e.height),t.beginPath(),M.value=[],t):(console.error("2D context를 가져올 수 없습니다."),null)},te=async e=>{const t={Normal:"red",Poikilocyte:"green","Target Cell":"blue","Burr Cell":"purple",Acanthocyte:"orange",Ovalocyte:"cyan",Schistocyte:"magenta","Sickle Cell":"lime",Stomatocyte:"teal","TearDrop Cell":"navy",Spherocyte:"gold","Howell-Jolly Body":"indigo","Basophilic Stippling":"olive",Malaria:"black",Platelet:"#ffac35"},a=ee();a?(e.forEach((e=>{P.value.forEach((l=>{l.classInfo.forEach((s=>{if(s.classNm.replace(/\s/g,"")===e.classNm.replace(/\s/g,"")&&l.categoryId===e.categoryId){a.lineWidth=6,a.strokeStyle=`${t[e.classNm]||"black"}`;let l,o,n,i,u=new Path2D;s?.width?(l=s.width,o=s.height,n=s.posX,i=s.posY):(l=Number(s.x2)-Number(s.x1),o=Number(s.y2)-Number(s.y1),n=Number(s.x1),i=Number(s.y1));let r={categoryId:e.categoryId,classNm:e.classNm,classId:e.classId,posX:n,posY:i,width:l,height:o,index:String(s.index)};u.rect(n,i,l,o),M.value.push(r),a.stroke(u)}}))}))})),await L.dispatch("commonModule/setCommonInfo",{resetRbcArr:!0})):console.error("Canvas context 초기화 실패")},ae=async()=>{const e=""!==c.selectItems?.img_drive_root_path&&c.selectItems?.img_drive_root_path?c.selectItems?.img_drive_root_path:T.value;try{const t=`${e}/${c.selectItems.slotId}/${_t.rbcImageDirName}`,a=await le(t);if(0!==a.length){m.value=bp()({id:"tiling-viewer_img_list",animationTime:.4,navigatorSizeRatio:.25,showNavigator:!0,sequenceMode:!0,defaultZoomLevel:1,prefixUrl:`${w}/folders?folderPath=D:/UIMD_Data/Res/uimdFe/images/`,tileSources:a,showReferenceStrip:!1,gestureSettingsMouse:{clickToZoom:!1},maxZoomLevel:15,minZoomLevel:1,zoomPerClick:1.2,zoomPerScroll:1.2,viewportMargins:{top:0,left:0,bottom:0,right:0},visibilityRatio:1}),new(bp().MouseTracker)({element:m.value.element,moveHandler:function(e){const t=document.getElementById("magCanvas");if(t&&m.value.element.removeChild(t),!f.value)return;const{canvas:a}=m.value.drawer,l=document.createElement("canvas"),s=l.getContext("2d");if(D.value=l,s){const t=200,o=200,n=5;l.id="magCanvas",l.style.position="absolute",l.style.left=e.position.x-t/2+"px",l.style.top=e.position.y-o/2+"px",l.style.border="1px solid",l.style.borderRadius="50%",l.style.width=`${t}px`,l.style.height=`${o}px`,l.style.zIndex="0",m.value.element.appendChild(l),s.drawImage(a,e.position.x-t/8,e.position.y-o/8,t,o,0,0,t*n,o*n),l.style.visibility=e.position.y<=0||e.position.x<=0?"hidden":"visible"}}});const e=document.createElement("canvas");m.value.addOverlay({element:e,location:new(bp().Rect)(0,0,1,1)});e.id="myCanvas",D.value=e,m.value.addHandler("open",(function(t){e.width=t.source.Image.Size.Width,e.height=t.source.Image.Size.Height})),m.value.addHandler("page",(function(t){e.parentElement!==m.value.container&&m.value.addOverlay({element:e,location:new(bp().Rect)(0,0,1,1)}),B("unChecked")})),m.value.addHandler("zoom",(()=>{"None"!==b.value&&Ie(b.value)})),m.value.addHandler("canvas-click",(async e=>{if(e.originalEvent.shiftKey)for(const t of M.value){if("Normal"===t.classNm)return;const e=t,a=t.categoryId,l="lightgreen";x.value.push(t);const s=document.createElement("ol");s.className="overlayElement",s.id="overlayElement",s.setAttribute("data-category-id",a),s.setAttribute("data-class-nm",t.classNm),s.style.width=t.width,s.style.backgroundColor=l,s.style.height=t.height,s.style.position="absolute",s.style.opacity="0.5";const o=parseFloat(e.posX),n=parseFloat(e.posY),i=m.value.viewport.imageToViewportRectangle(o,n,t.width,t.height);m.value.addOverlay({element:s,location:i})}else{e.originalEvent.ctrlKey||await V();const t=m.value.viewport.pointFromPixel(e.position),a={x:t.x*m.value.source.width,y:t.y*m.value.source.height};for(const l of M.value){const t=l,s=t.width,o=t.height;if(a.x>=Number(t.posX)&&a.x<=Number(t.posX)+s&&a.y>=Number(t.posY)&&a.y<=Number(t.posY)+o){const n=l.categoryId,i="lightgreen";if(e.originalEvent.ctrlKey){x.value.push(l);const e=document.createElement("ol");e.className="overlayElement",e.id="overlayElement",e.setAttribute("data-category-id",n),e.setAttribute("data-class-nm",l.classNm),e.style.width=`${l.width}px`,e.style.backgroundColor=i,e.style.height=`${l.height}px`,e.style.position="absolute",e.style.opacity="0.5";const a=parseFloat(t.posX),s=parseFloat(t.posY),o=m.value.viewport.imageToViewportRectangle(a,s,t.width,t.height);m.value.addOverlay({element:e,location:o})}else if(a.x>=Number(t.posX)&&a.x<=Number(t.posX)+s&&a.y>=Number(t.posY)&&a.y<=Number(t.posY)+o){const e=l.categoryId,a="lightgreen",s=P.value.find((t=>t.categoryId===e))?.classInfo.find((e=>e.index===l.index));if(s){x.value=[l];const s=document.getElementById("overlayElement");s&&m.value.removeOverlay(s);const o=document.querySelector(`.overlayElement[data-category-id="${e}"][data-class-nm="${l.classNm}"]`);if(o){const e=parseFloat(t.posX),a=parseFloat(t.posY),l=m.value.viewport.imageToViewportRectangle(e,a,t.width,t.height);m.value.updateOverlay(o,l)}else{const s=document.createElement("ol");s.className="overlayElement",s.id="overlayElement",s.setAttribute("data-category-id",e),s.setAttribute("data-class-nm",l.classNm),s.style.width=`${l.width}px`,s.style.backgroundColor=a,s.style.height=`${l.height}px`,s.style.position="absolute",s.style.opacity="0.5";const o=parseFloat(t.posX),n=parseFloat(t.posY),i=m.value.viewport.imageToViewportRectangle(Number(o),Number(n),Number(l.width),Number(l.height));m.value.addOverlay({element:s,location:i})}}}break}}}}))}}catch(t){console.error("Error:",t)}},le=async e=>{const t=`${w}/folders?folderPath=${e}`,a=await fetch(t);if(a.ok){const t=await a.json(),l=[];for(const a of t)if(a.endsWith("_files")){const t=se(a),{width:s,height:o}=await G(t);l.push({Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2009",Url:`${w}/folders?folderPath=${e}/${a}/`,Format:"jpg",Overlap:"1",TileSize:"1024",Size:{Width:s,Height:o}}}),$.value=s,F.value=o}return _.value=!0,l}throw _.value=!1,new Error("Network response was not ok")},se=e=>{const t="_files",a=e.indexOf(t);return-1!==a?e.substring(0,a):e},oe=e=>{switch(e){case"lowMag":d.value="lowMag";break;case"malaria":d.value="malaria",v.value=!1;break}"malaria"!==d.value&&ae()},ne=()=>{v.value=!v.value},ie=e=>{const t=e?.target?.value,a=g.value[0],l=g.value[1],s=g.value[2],o=document.getElementById("tiling-viewer_img_list");o&&(o.style.filter=`opacity(1) drop-shadow(0 0 0 rgb(${a}, ${l}, ${s})) brightness(${t}%)`)},ue=()=>{const e=g.value[0],t=g.value[1],a=g.value[2],l=p.value,s=document.getElementById("tiling-viewer_img_list");s&&(s.style.filter=`opacity(0.9) drop-shadow(0 0 0 rgb(${e}, ${t}, ${a})) brightness(${l}%)`)},re=()=>{const e=p.value;g.value=[0,0,0];const t=document.getElementById("tiling-viewer_img_list");t&&(t.style.filter=`opacity(1) drop-shadow(0 0 0 rgb(0,0,0)) brightness(${e}%)`)},ce=()=>{p.value=100,ue()},de=()=>{I.value=!I.value,m.value.addHandler("zoom",me),I.value?me():pe()},me=()=>{if(pe(),I.value){const e=m.value.world.getItemAt(0).getContentSize().y,t=m.value.world.getItemAt(0).getContentSize().x,a=m.value.viewport.getZoom(),l=400,s=Math.round(l/a),o=Math.min(t,e)/s;for(let n=1;n<s;n++){const a=n*o;ve(a,0,1,e,"rgba(128, 128, 128, 0.2)"),ve(0,a,t,1,"rgba(128, 128, 128, 0.2)")}}},ve=(e,t,a,l,s)=>{const o=document.createElement("div");o.className="grid-line",o.style.position="absolute",o.style.left=`${e}px`,o.style.top=`${t}px`,o.style.width=`${a}px`,o.style.height=`${l}px`,o.style.background=s,o.style.userSelect="none",o.style.pointerEvents="none",m.value.container.appendChild(o)},pe=()=>{const e=document.querySelectorAll(".grid-line");e.forEach((e=>e.remove()))},ge=e=>{switch(e.text){case"None":b.value="None";break;case"Line":b.value="Line";break;case"Cross":b.value="Cross";break;case"Circle":b.value="Circle";break}Ie(e)},Ie=e=>{const t=document.getElementById("tiling-viewer_img_list");if(t instanceof HTMLElement){const a=document.getElementById("rulerOverlay");a instanceof HTMLElement&&t.removeChild(a);const l=document.createElement("div");l.id="rulerOverlay",l.style.position="absolute",l.style.width=C.value.width+"px",l.style.height=C.value.height+"px",l.style.zIndex="9999999";const s=m.value.viewport.getZoom(!0);0===C.value.left?l.style.left=m.value.container.clientWidth/2-C.value.width/2+"px":l.style.left=C.value.left/s+"px",0===C.value.top?l.style.top=m.value.container.clientHeight/2-C.value.height/2+"px":l.style.top=C.value.top/s+"px",fe(l,h,e),t.appendChild(l);let o=!1;l.onmousedown=function(e){C.value.prevPosX=e.clientX,C.value.prevPosY=e.clientY,C.value.left<=30&&(C.value.left=31),C.value.top<=80&&(C.value.top=81),o=!0},l.onmouseup=function(){o=!1},l.onwheel=function(t){t.deltaY<0?h.value<20&&fe(l,++h.value,e):h.value>5&&fe(l,--h.value,e)};const n=document.getElementById("tilingViewer");n instanceof HTMLElement&&(n.onmousemove=function(e){o&&(C.value.left<=30||C.value.top<=80||(C.value.posX=C.value.prevPosX-e.clientX,C.value.posY=C.value.prevPosY-e.clientY,C.value.prevPosX=e.clientX,C.value.prevPosY=e.clientY,l.style.left=l.offsetLeft-C.value.posX+"px",l.style.top=l.offsetTop-C.value.posY+"px",C.value.left=l.offsetLeft,C.value.top=l.offsetTop))})}},fe=(e,t,a)=>{"object"===typeof t&&(t=t.value),null!==document.getElementById("rulerTitle")&&e.removeChild(document.getElementById("rulerTitle"));let l=1;t>5&&(l+=.06*(t-5));let s=m.value.viewport.viewportToImageZoom(m.value.viewport.getZoom());s>1?s*=1.02:s>.9&&s<1?s*=1.12:s>.7&&s<=.9?s*=1.22:s>.6&&s<=.7?s*=1.32:s>.5&&s<=.6?s*=1.42:s>.4&&s<=.5?s*=1.52:s>.3&&s<=.4?s*=1.72:s>.2&&s<=.3&&(s*=1.92),k.value=s*l*60;const o=document.createElement("div");if(o.id="rulerTitle",o.style.color="black",o.style.textAlign="center",o.style.fontSize="16px",o.style.minWidth="50px",o.style.width=k.value+"px","line"===a.id||"Line"===a){const a=S.value/2-k.value/2,l=S.value/2+k.value/2,s=S.value/2,n=s;o.innerHTML='<div style="width: 100%;">'+t+'μm</div><svg viewBox="0 0 150 150" xmlns="http://www.w3.org/2000/svg"><line x1="'+a+'" y1="'+s+'" x2="'+l+'" y2="'+n+'" stroke="black" stroke-width="2"/><line x1="'+a+'" y1="'+(s-5)+'" x2="'+a+'" y2="'+(n+5)+'" stroke="black" stroke-width="2"/><line x1="'+l+'" y1="'+(n-5)+'" x2="'+l+'" y2="'+(n+5)+'" stroke="black" stroke-width="2"/></svg>',e.appendChild(o)}else if("cross"===a.id||"Cross"===a){const a=S.value/2,l=S.value/2,s=k.value/2;o.innerHTML='<div style="width: 100%;">'+t+'μm</div><svg viewBox="0 0 150 150" xmlns="http://www.w3.org/2000/svg"><line x1="'+(a-s)+'" y1="'+l+'" x2="'+(a+s)+'" y2="'+l+'" stroke="black" stroke-width="2"/><line x1="'+a+'" y1="'+(l-s)+'" x2="'+a+'" y2="'+(l+s)+'" stroke="black" stroke-width="2"/></svg>',e.appendChild(o)}else if("circle"===a.id||"Circle"===a){const a=S.value/2,l=S.value/2,s=.5*k.value;o.innerHTML='<div style="width: 100%;">'+t+'μm</div><svg viewBox="0 0 150 150" xmlns="http://www.w3.org/2000/svg"><circle cx="'+a+'" cy="'+l+'" r="'+s+'" stroke="black" stroke-width="2" fill="transparent" opacity="0.6" /></svg>',e.appendChild(o)}else{const e=document.getElementById("rulerOverlay");if(null!==e){const t=document.getElementById("tilingViewer");t?.removeChild(e)}}},be=()=>{f.value=!f.value};return(t,r)=>{const c=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Dp,[(0,s.Lk)("div",Mp,[(0,s.Lk)("div",null,[(0,s.Lk)("button",{onClick:r[0]||(r[0]=e=>oe("lowMag")),class:(0,n.C4)(["tab-btn_img_list",{active:"lowMag"===d.value,inactive:"lowMag"!==d.value}])},"Low magnification ",2),(0,s.Lk)("button",{onClick:r[1]||(r[1]=e=>oe("malaria")),class:(0,n.C4)(["tab-btn_img_list",{active:"malaria"===d.value,inactive:"malaria"!==d.value}])},"Malaria ",2)]),(0,s.Lk)("div",xp,[(0,s.Lk)("button",{class:"darkButton",onClick:ne},"IMG Setting"),(0,s.bo)((0,s.Lk)("div",Kp,[(0,s.Lk)("div",null,[(0,s.bF)(c,{icon:["fas","sun"]}),(0,s.Lk)("span",null,"Brightness "+(0,n.v_)(p.value),1),(0,s.bo)((0,s.Lk)("input",{type:"range",min:"50",max:"120","onUpdate:modelValue":r[2]||(r[2]=e=>p.value=e),onInput:ie},null,544),[[l.Jo,p.value]]),(0,s.Lk)("button",{class:"resetBtn",onClick:ce},"Brightness Reset")]),(0,s.Lk)("div",null,[(0,s.bF)(c,{icon:["fas","palette"]}),(0,s.Lk)("span",null,"RGB [ "+(0,n.v_)(`${g.value[0]} , ${g.value[1]}, ${g.value[2]}`)+" ]",1),(0,s.Lk)("div",Op,[Bp,(0,s.bo)((0,s.Lk)("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":r[3]||(r[3]=e=>g.value[0]=e),onInput:ue},null,544),[[l.Jo,g.value[0]]])]),(0,s.Lk)("div",Up,[Wp,(0,s.bo)((0,s.Lk)("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":r[4]||(r[4]=e=>g.value[1]=e),onInput:ue},null,544),[[l.Jo,g.value[1]]])]),(0,s.Lk)("div",Xp,[Fp,(0,s.bo)((0,s.Lk)("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":r[5]||(r[5]=e=>g.value[2]=e),onInput:ue},null,544),[[l.Jo,g.value[2]]])]),(0,s.Lk)("button",{class:"resetBtn",onClick:re},"RGB Reset")]),(0,s.Lk)("div",null,[(0,s.bF)(c,{icon:["fas","th"]}),$p,(0,s.bF)(c,{icon:I.value?["fas","toggle-on"]:["fas","toggle-off"],onClick:de},null,8,["icon"])]),(0,s.Lk)("div",null,[(0,s.bF)(c,{icon:["fas","ruler"]}),Gp,(0,s.Lk)("div",Hp,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(yp),(e=>((0,s.uX)(),(0,s.CE)("button",{class:(0,n.C4)(["tab-ruler-btn_img_list",{active:b.value===e.text,inactive:b.value!==e.text}]),onClick:t=>ge(e),key:e.id},(0,n.v_)(e.text),11,jp)))),128))])]),(0,s.Lk)("div",null,[(0,s.bF)(c,{icon:["fas","magnifying-glass"]}),Vp,(0,s.bF)(c,{icon:f.value?["fas","toggle-on"]:["fas","toggle-off"],onClick:be},null,8,["icon"])])],512),[[l.aG,v.value]])],512)]),(0,s.Lk)("div",Yp,["malaria"===d.value?((0,s.uX)(),(0,s.Wv)(Ap,{key:0,selectItems:e.selectItems},null,8,["selectItems"])):"malaria"!==d.value&&_.value?((0,s.uX)(),(0,s.CE)("div",{key:1,ref_key:"tilingViewerLayer",ref:N,id:"tiling-viewer_img_list",style:{width:"100%"},onContextmenu:(0,l.D$)(J,["prevent"])},null,544)):((0,s.uX)(),(0,s.CE)("div",qp,Qp))])]),y.value?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"rbc-select-box",style:(0,n.Tr)({left:`${K.value}px`,top:`${O.value}px`})},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)([U.value],((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,a)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",{key:a,class:"categories"},[(0,s.Lk)("ul",zp,[(0,s.Lk)("li",null,(0,n.v_)(e.categoryNm),1)]),(0,s.Lk)("ul",Zp,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((l,o)=>((0,s.uX)(),(0,s.CE)("li",{key:`${t}-${a}-${o}`,onClick:t=>j(e.categoryId,l.classId,l.classNm)},[(0,s.Lk)("span",null,(0,n.v_)(l?.classNm),1)],8,eg)))),128))])],512)),[[l.aG,"Shape"===e?.categoryNm||"Inclusion Body"===e.categoryNm]]))),128)),(0,s.Lk)("div",tg,[ag,(0,s.Lk)("ul",lg,[(0,s.Lk)("li",{onClick:r[6]||(r[6]=e=>j("04","01","Platelet"))},og),(0,s.Lk)("li",{onClick:r[7]||(r[7]=e=>j("05","03","Malaria"))},ig)])])],64)))),128))],4)):(0,s.Q3)("",!0),a.value?((0,s.uX)(),(0,s.Wv)(et,{key:1,"is-visible":a.value,type:i.value,message:u.value,onHide:z,"onUpdate:hideAlert":z},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const rg=ug;var cg=rg;const dg={class:"wbcMenu"},mg={class:"menuIco"},vg={class:"menuIco"},pg={class:"menuIco"},gg=(0,s.Lk)("p",null,"REPORT",-1),Ig=(0,s.Lk)("p",null,"LIS-CBC",-1),fg={class:"wbcMenuBottom"},bg=["disabled"],yg=["disabled"];var Cg=(0,s.pM)({__name:"classInfoMenu",props:["isNext"],setup(e,{emit:t}){const a=t,l=(0,o.KR)(!1),i=(0,o.KR)(""),c=(0,o.KR)(""),d=(0,o.KR)("bm"),m=(0,o.KR)(null),v=(0,o.KR)([]),p=((0,o.KR)([]),(0,s.nI)()),g=(0,r.Pj)(),I=(0,s.EW)((()=>g.state.commonModule.selectedSampleId)),f=(0,u.lq)(),b=(0,o.KR)([]),y=(0,s.EW)((()=>g.state.commonModule.cbcLayer)),C=(0,o.KR)(!1);let h;const k=(0,o.KR)(!1),S=e,N=(0,o.KR)(""),_=(0,o.KR)(!0);let E;(0,s.wB)(S.isNext,(e=>{e&&K("down")})),(0,s.KC)((async()=>{await L(),_.value=!1})),(0,s.sV)((async()=>{d.value=window.PROJECT_TYPE,k.value=!0;const e=await Dt();N.value=e.data})),(0,s.hi)((async()=>{k.value&&await w(),await g.dispatch("commonModule/setCommonInfo",{cbcLayer:!1})}));const L=async()=>{try{const e=await or(String(I.value));m.value=e.data,v.value=e.data}catch(e){console.log(e),m.value=null,v.value=null}},R=()=>{l.value=!1},w=async()=>{await g.dispatch("commonModule/setCommonInfo",{selectedSampleId:String(v.value?.id)});const e=`oldPcIp=${N.value}`;await ur(e).then((e=>{A("SEND_DATA","refreshDb",300)})).catch((e=>{console.log("2 err",e)}))},T=async e=>{try{const e=`oldPcIp=${N.value}&newEntityId=${v.value?.id}&newPcIp=${N.value}`;await g.dispatch("commonModule/setCommonInfo",{selectedSampleId:String(v.value?.id)}),await ir(e).then((e=>{A("SEND_DATA","refreshDb",300)})).catch((e=>{console.log("3 err",e)}))}catch(t){console.log(t)}},P=async()=>{try{const e=await Ge();e&&(0===e?.data.length?b.value=[]:b.value=e.data.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx))))}catch(e){console.log(e)}},A=(e,t,a)=>{void 0!==E&&clearTimeout(E),E=window.setTimeout((()=>{p?.appContext.config.globalProperties.$socket.emit("state",{type:"SEND_DATA",payload:"refreshDb"})}),a)},D=e=>{yy.push(e),k.value=!1},M=(e,t)=>{let a=JSON.parse(JSON.stringify(e));return a.sort(((e,a)=>{const l=t.findIndex((t=>(t.title||t.abbreviation)===(e.title||e.abbreviation))),s=t.findIndex((e=>(e.title||e.abbreviation)===(a.title||a.abbreviation)));return-1===l?1:-1===s?-1:l-s})),a};async function x(e,t,a){try{const l=`id=${e}&step=${t}&type=${a}`,s=await nr(l);s&&(v.value=s.data,await g.dispatch("commonModule/setCommonInfo",{selectedSampleId:String(s.data.id)}))}catch(l){console.log(l)}}const K=async e=>{void 0!==h&&clearTimeout(h),C.value=!0,await P(),await O(e,m.value?.id),h=window.setTimeout((()=>{C.value=!1}),700)},O=async(e,t)=>{const a=await x(t,"1",e);if(v.value?.lock_status)return l.value=!0,i.value="success",void(c.value="Someone else is editing.");await B(a?.id,a)},B=async(e,t)=>{if(!v.value)return;m.value=v.value;const a=0===v.value?.wbcInfoAfter.length?v.value?.wbcInfo?.wbcInfo[0]:v.value?.wbcInfoAfter,l=0!==b.value.length?b.value:"bm"===window.PROJECT_TYPE?ka:ha,s=M(a,l);await g.dispatch("commonModule/setCommonInfo",{selectedSampleId:String(e)}),await g.dispatch("commonModule/setCommonInfo",{clonedWbcInfo:s}),await U(a,v.value)},U=async(e,t)=>{await g.dispatch("commonModule/setCommonInfo",{selectedSampleId:String(t.id)}),"pb"===d.value&&"01"===m.value?.testType&&D("/databaseDetail"),a("refreshClass",t),k.value=!0,await T(t)},W=e=>f.path===e,X=()=>{g.dispatch("commonModule/setCommonInfo",{cbcLayer:!y.value})};return(e,t)=>{const a=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",dg,[(0,s.Lk)("ul",null,[["bm","pb"].includes(d.value)?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},["pb"!==d.value||"01"!==m.value?.testType&&"pb"===d.value?((0,s.uX)(),(0,s.CE)("li",{key:0,class:(0,n.C4)({onRight:W("bm"===d.value?"/databaseWhole":"/databaseRbc")}),onClick:t[0]||(t[0]=e=>D("bm"===d.value?"/databaseWhole":"/databaseRbc"))},[(0,s.Lk)("p",mg,[(0,s.bF)(a,{icon:["fas","virus"]})]),(0,s.Lk)("p",null,(0,n.v_)("bm"===d.value?"WHOLE":"RBC"),1)],2)):(0,s.Q3)("",!0),(0,s.Lk)("li",{class:(0,n.C4)({onRight:W("/databaseDetail")}),onClick:t[1]||(t[1]=e=>D("/databaseDetail"))},[(0,s.Lk)("p",vg,[(0,s.bF)(a,{icon:["fas","disease"]})]),(0,s.Lk)("p",null,(0,n.v_)("bm"===d.value?"BM CELL":"WBC"),1)],2),_.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("li",{key:1,class:(0,n.C4)({onRight:W("/report")}),onClick:t[2]||(t[2]=e=>D("/report"))},[(0,s.Lk)("p",pg,[(0,s.bF)(a,{icon:["fas","clipboard"]})]),gg],2))],64)):(0,s.Q3)("",!0)]),"bm"!==d.value?((0,s.uX)(),(0,s.CE)("div",{key:0,onClick:X,class:(0,n.C4)({onRight:y.value,cbcLi:!0})},[(0,s.bF)(a,{icon:["fas","desktop"]}),Ig],2)):(0,s.Q3)("",!0),(0,s.Lk)("div",fg,[(0,s.Lk)("button",{onClick:t[3]||(t[3]=e=>K("up")),disabled:C.value},[(0,s.bF)(a,{icon:["fas","circle-up"]})],8,bg),(0,s.Lk)("button",{onClick:t[4]||(t[4]=e=>K("down")),disabled:C.value},[(0,s.bF)(a,{icon:["fas","circle-down"]})],8,yg)])]),l.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":l.value,type:i.value,message:c.value,onHide:R,"onUpdate:hideAlert":R},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const hg=Cg;var kg=hg,Sg=a(8990);const Ng={class:"cbcDiv"},_g=(0,s.Lk)("h1",{class:"titleCbc"},"CBC + DIFF",-1),Eg={key:0,class:"cbcDivWarp"},Lg={class:"cbcTable"},Rg={key:1,class:"cbcDivWarp"},wg={class:"cbcTable"},Tg={key:0},Pg={key:2,class:"cbcDivWarp"},Ag={class:"cbcTable"};var Dg=(0,s.pM)({__name:"lisCbc",props:["selectItems"],setup(e){const t=(0,r.Pj)(),a=e,l=(0,o.KR)([]),i=(0,o.KR)(""),u=(0,o.KR)(""),c=(0,o.KR)(""),d=(0,o.KR)(""),m=(0,o.KR)(""),v=(0,o.KR)(""),p=(0,s.EW)((()=>t.state.userModule)),g=(0,s.EW)((()=>t.state.commonModule.deviceSerialNm)),I=(0,s.EW)((()=>t.state.commonModule.siteCd)),f=(0,s.EW)((()=>t.state.commonModule.selectedSampleId)),b=(0,o.KR)([]),y=(0,o.KR)([]);(0,s.wB)(a.selectItems,(async e=>{y.value=e,await k(),await S(),await C(y.value)}),{deep:!0}),(0,s.sV)((async()=>{y.value=a.selectItems,await k(),await S(),await C(y.value)}));const C=async e=>{const s=pu.find((e=>e.siteCd===I.value))?.hospitalNm;switch(s){case"서울성모병원":const s="http://emr012.cmcnu.or.kr/cmcnu/.live";z.A.get(s,{params:{submit_id:"TRLII00124",business_id:"li",instcd:"012",bcno:e.barcodeNo}}).then((function(e){const t=e.data,a=JSON.parse((0,Sg.xml2json)(t,{compact:!0}));l.value=a.root.spcworklist.worklist})).catch((function(e){console.log(e.message)}));break;case"고대안암병원":await h();break;case"인천길병원":await h();break;case"0000":await h();break;case"삼광의료재단":break;case"인하대병원":if(v.value.includes("http")){const e={url:v.value,machine:"ADUIMD",episode:a.selectItems.barcodeNo};console.log(e.url,e.machine,e.episode),await z.A.post(e.url+"/api/MifMain/Order",{machine:e.machine,episode:e.episode}).then((function(e){l.value=[];const a=e.data[0];if("0"===a?.returnCode){i.value=a?.regNo,u.value=a.name,c.value=a.sex,d.value=a.age,m.value=a.testCode,t.dispatch("commonModule/setCommonInfo",{inhaTestCode:a.testCode});const e=a.testCode.split(",");e.forEach((function(e){const t=e.split("|"),a=t[0],s=t[1],o=t[2];b.value.forEach((function(e){if(e.cd===a){const t={classNm:e.classCd,count:s,unit:o};l.value.push(t)}}))}))}})).catch((function(e){console.log(e.message+" : no CBC result")}))}break;default:if(v.value.includes("http")){const e={url:v.value,barcodeNo:a.selectItems.barcodeNo,userId:p.value.userId,deviceBarcode:g.value},t=e.url+"?barcodeNo="+e.barcodeNo+"&deviceBarcode="+g.value+"&userid="+e.userId;await z.A.get(t).then((async function(e){const t=await pr(e.data);l.value=[],t.data?.segments.forEach((function(e){"OBX"===e.name.trim()?b.value.forEach((function(t){if(t.CBC_CD===e.fields[3].value[0][0].value[0]){var a={classNm:t.cd,count:e.fields[5].value[0][0].value[0],unit:e.fields[6].value[0][0].value[0]};l.value.push(a)}})):"PID"===e.name.trim()&&(i.value=e.fields[1].value[0][0].value[0],u.value=e.fields[4].value[0][0].value[0],c.value=e.fields[6].value[0][0].value[0],d.value=e.fields[7].value[0][0].value[0])}))})).catch((function(e){console.log(e.message)}))}else{const e=await vr(`path=${v.value}&filename=${a.selectItems.barcodeNo}.hl7`);if(e.data.success){const t=await pr(e.data.data);l.value=[],t?.data?.segments.forEach((e=>{"OBX"===e.name.trim()&&b.value.forEach((t=>{if(t.cd===e.fields[3].value[0][0].value[0]){const a={classNm:t.cd,count:e.fields[5].value[0][0].value[0],unit:e.fields[6].value[0][0].value[0]};l.value.push(a)}}))})),console.log("cbcWorkList",l.value)}else console.error(e.data.message)}break}y.value.cbcPatientNo=i.value,y.value.cbcPatientNm=u.value,y.value.cbcSex=c.value,y.value.cbcAge=d.value;const o={cbcPatientNo:i.value,cbcPatientNm:u.value,cbcSex:c.value,cbcAge:d.value},n=await or(String(f.value)),r={...n.data,...o};await N([r])},h=async()=>{let e;if(e="0000"===I.value?await vr("path=D:\\cbc&filename=1240459652.txt"):await vr(`path=C:/Users/user/Desktop/IA_MSG/CBC&filename=${a.selectItems.barcodeNo}`),e.data.success){const t=e.data.data.toString(),a=t.split("\n"),s=["SPC_NO","BLCL_DT","PT_NO","PT_NM","SEX","AGE","SCAT_WDF","SCAT_WNR","DIST_RBC","DIST_WDF(FSC)","DIST_PLT"];a.forEach((e=>{const[t,a]=e.split("\t").map((e=>e.trim()));if(s.includes(t))switch(t){case"PT_NO":i.value=a;break;case"SEX":c.value=a;break;case"AGE":d.value=a;break}else{const e=t.includes("%")?"%":"";l.value.push({classNm:t,count:a,unit:e})}}))}},k=async()=>{try{const e=await Me();if(e&&e.data){const t=e.data;v.value=t[0].cbcFilePath}}catch(e){console.error(e)}},S=async()=>{try{const e=await Pe();e&&e.data&&(b.value=e.data)}catch(e){console.error(e)}};async function N(e){try{const t=await ar({userId:Number(p.value.id),runingInfoDtoItems:e});t?console.log(""):console.error("백엔드가 디비에 저장 실패함")}catch(t){console.error("Error:",t)}}return(e,t)=>((0,s.uX)(),(0,s.CE)("div",Ng,[_g,"0002"===I.value?((0,s.uX)(),(0,s.CE)("div",Eg,[(0,s.Lk)("table",Lg,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,n.v_)(e?.tclsscrnnm._cdata),1),(0,s.Lk)("td",null,(0,n.v_)(e.tclsscrnnm._cdata),1),(0,s.Lk)("td",null,(0,n.v_)(e.inptrslt._cdata),1)])))),128))])])):(0,s.Q3)("",!0),"0007"===I.value?((0,s.uX)(),(0,s.CE)("div",Rg,[(0,s.Lk)("table",wg,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,n.v_)(e.classNm),1),(0,s.Lk)("td",null,[(0,s.eW)((0,n.v_)(e.count)+" ",1),""!==e.cham?((0,s.uX)(),(0,s.CE)("span",Tg," ("+(0,n.v_)(e.cham)+") ",1)):(0,s.Q3)("",!0),(0,s.eW)(" "+(0,n.v_)(e.unit),1)])])))),128))])])):((0,s.uX)(),(0,s.CE)("div",Pg,[(0,s.Lk)("table",Ag,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,n.v_)(e.classNm),1),(0,s.Lk)("td",null,(0,n.v_)(e.count)+" "+(0,n.v_)(e.unit),1)])))),128))])]))]))}});const Mg=Dg;var xg=Mg;const Kg={key:0,class:"wbcContent"},Og={class:"topClintInfo"};var Bg=(0,s.pM)({__name:"listDetailRbc",setup(e){const t=(0,o.KR)({}),a=(0,r.Pj)(),l=(0,o.KR)(null),i=(0,o.KR)([]),u=(0,o.KR)(!1),c=(0,o.KR)(!1),d=(0,s.EW)((()=>a.state.commonModule.cbcLayer)),m=(0,s.EW)((()=>a.state.commonModule.selectedSampleId)),v=(0,o.KR)(!1),p=((0,s.EW)((()=>a.state.commonModule.rbcReData)),(0,o.KR)(!1));(0,s.sV)((async()=>{v.value=!1,await f(),await I()}));const I=async()=>{l.value=t.value},f=async()=>{try{const e=await or(String(m.value));t.value=e.data}catch(e){console.log(e),t.value=null}v.value=!0},b=e=>{c.value=e},y=async e=>{l.value=e,t.value=e,u.value=!u.value},C=e=>{i.value=e},h=async e=>{const s=await or(String(m.value));t.value=s.data,l.value=s.data;let o=[];o=e,await a.dispatch("commonModule/setCommonInfo",{classInfoArr:o})},k=()=>{u.value=!u.value};return(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(kg,{onRefreshClass:y}),v.value?((0,s.uX)(),(0,s.CE)("div",Kg,[(0,s.Lk)("div",Og,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,(0,n.v_)((0,o.R1)(g)(t.value?.testType))+" Smear",1),(0,s.Lk)("li",null,(0,n.v_)(t.value?.barcodeNo),1),(0,s.Lk)("li",null,(0,n.v_)(t.value?.patientId||"patientId No Data"),1),(0,s.Lk)("li",null,(0,n.v_)(t.value?.cbcPatientNo),1),(0,s.Lk)("li",null,(0,n.v_)(t.value?.patientName),1),(0,s.Lk)("li",null,(0,n.v_)(t.value?.cbcPatientNm)+" "+(0,n.v_)(t.value?.cbcSex)+" "+(0,n.v_)(t.value?.cbcAge),1),(0,s.Lk)("li",null,(0,n.v_)(t.value?.analyzedDttm),1)])]),d.value?((0,s.uX)(),(0,s.Wv)(xg,{key:0,selectItems:t.value},null,8,["selectItems"])):(0,s.Q3)("",!0),(0,s.Lk)("div",{class:(0,n.C4)("databaseWbcRight shadowBox"+(d.value?" cbcLayer":""))},[(0,s.bF)(Ip,{allUnCheck:p.value,onIsBeforeUpdate:b,onClassInfoArrUpdate:C,onClassInfoArrUpdateRe:h,selectItems:t.value,type:"listTable",allCheckClear:u.value,rbcInfo:l.value},null,8,["allUnCheck","selectItems","allCheckClear","rbcInfo"])],2),(0,s.Lk)("div",{class:(0,n.C4)("databaseWbcLeft"+(d.value?" cbcLayer":""))},[(0,s.bF)(cg,{onUnChecked:k,isBefore:c.value,classInfoArr:i.value,selectItems:t.value,type:"listTable",rbcInfo:l.value},null,8,["isBefore","classInfoArr","selectItems","rbcInfo"])],2)])):(0,s.Q3)("",!0)],64))}});const Ug=Bg;var Wg=Ug;const Xg="http://emr012.cmcnu.or.kr/cmcnu/.live",Fg="li",$g="012",Gg="H59",Hg=[{id:"01",title:"NS",name:"Neutrophil-Segmented",cd:"LHR10501"},{id:"02",title:"ME",name:"Metamyelocyte",cd:"LHR10507"},{id:"03",title:"MY",name:"Myelocyte",cd:"LHR10508"},{id:"04",title:"PR",name:"Promyelocyte",cd:"LHR10509"},{id:"05",title:"LY",name:"Lymphocyte",cd:"LHR10503"},{id:"61",title:"LR",name:"Reactive lymphocyte",cd:"LHR10544"},{id:"62",title:"LA",name:"Abnormal lymphocyte",cd:"LHR10543"},{id:"07",title:"MO",name:"Monocyte",cd:"LHR10504"},{id:"08",title:"EO",name:"Eosinophil",cd:"LHR10505"},{id:"09",title:"BA",name:"Basophil",cd:"LHR10506"},{id:"10",title:"BL",name:"Blast",cd:"LHR10510"},{id:"11",title:"PC",name:"Plasma cell",cd:"LHR10517"}],jg={submit_id:"TRLII00124",business_id:"li",instcd:"012",bcno:"H59"},Vg=Z(),Yg=async e=>Vg.httpPost(ee.filesystem.post,e,""),qg=async e=>Vg.httpDelete(ee.filesystem.delete,e,!1),Jg=async e=>Vg.httpGet(ee.filesystem.createDirectory,`${e}`,!0),Qg=async e=>Vg.httpPost(ee.filesystem.fileCreate,e,""),zg=["src"],Zg={class:"mt1 mb2 flexSpaceBetween"},eI={class:"wbcClassInfoLeft"},tI={class:"leftWbcInfo"},aI={style:{position:"relative"}},lI={key:0,class:"memoModal"},sI={class:"wbcClassScroll"},oI=["onDragstart","onDrop"],nI={key:0,class:"nth1Child classAttribute"},iI=(0,s.Lk)("li",null,"Class",-1),uI=(0,s.Lk)("li",null,[(0,s.Lk)("p",null,"Before"),(0,s.Lk)("p",null,"(Count | Percent)")],-1),rI=(0,s.Lk)("li",null,[(0,s.Lk)("p",null,"After"),(0,s.Lk)("p",null,"(Count | Percent)")],-1),cI=[iI,uI,rI],dI=["onClick"],mI={style:{display:"flex","justify-content":"space-evenly"}},vI={class:"grayText"},pI={class:"grayText"},gI={style:{display:"flex","justify-content":"space-evenly"}},II={class:"categories classTotal"},fI=(0,s.Lk)("ul",{class:"categoryNm"},[(0,s.Lk)("li",null," Total ")],-1),bI={style:{display:"flex","justify-content":"center",gap:"22px"}},yI=(0,s.Lk)("p",null,"100%",-1),CI={class:"degree"},hI={style:{display:"flex","justify-content":"center",gap:"22px"}},kI=(0,s.Lk)("p",null,"100%",-1),SI={key:0},NI=["onDragstart","onDrop"],_I=["onClick"],EI=(0,s.Lk)("li",null," -",-1),LI={key:1},RI=["onClick"],wI={class:"categoryNm"},TI={key:0,class:"mb1 liTitle"},PI={class:"liNormalWidth"},AI={style:{width:"21%"}},DI={key:0,class:"mb1 liTitle"},MI={key:0},xI={class:"degree",style:{width:"22%"}},KI={key:0,class:"mb1 liTitle"},OI={key:0};var BI=(0,s.pM)({__name:"classInfo",props:["wbcInfo","selectItems","type","isCommitChanged","classCompareShow"],setup(e,{emit:t}){const a=e,i=(0,r.Pj)(),u=(0,s.EW)((()=>i.state.userModule)),c=t,d=(0,o.KR)(a.selectItems),m=(0,s.EW)((()=>i.state.commonModule.iaRootPath)),v=(0,s.EW)((()=>i.state.commonModule.clonedWbcInfo)),p=(0,s.EW)((()=>i.state.commonModule.inhaTestCode)),g=(0,s.EW)((()=>i.state.commonModule.deviceSerialNm)),I=(0,s.EW)((()=>i.state.commonModule.siteCd)),b=(0,s.EW)((()=>i.state.commonModule.selectedSampleId)),y=(0,o.KR)(""),C=(0,o.KR)(""),h=(0,o.KR)(""),k=(0,o.KR)(!1),S=(0,o.KR)([]),N=(0,o.KR)([]),_=(0,o.KR)([]),E=(0,o.KR)([]),L=(0,o.KR)([]),R=(0,o.KR)([]),w=(0,o.KR)([]),T=["NR","GP","PA","AR","MA","SM"],P=(0,o.KR)(!1),A=(0,o.KR)(-1),D=(0,o.KR)(0),M=(0,o.KR)(!1),x=(0,o.KR)(""),K=(0,o.KR)(""),O=(0,o.KR)(!1),B=(0,o.KR)(""),U=(0,o.KR)(""),W=(0,o.KR)([]),X=(0,o.KR)(!1),F=(0,o.KR)(0),G=(0,o.KR)(0),V=(0,o.KR)(""),Y=(0,o.KR)([]),q=(0,o.KR)([]),J=(0,o.KR)([]);(0,s.sV)((async()=>{await(0,s.dY)(),await Ne(),h.value=a.selectItems?.wbcMemo;const e=""!==a.selectItems?.img_drive_root_path&&a.selectItems?.img_drive_root_path?a.selectItems?.img_drive_root_path:m.value;if(y.value=f("barcode_image.jpg",e,a.selectItems?.slotId,Nt.barcodeDirName),X.value="bm"===window.PROJECT_TYPE,""===a.selectItems?.submitState){const e=await or(String(a.selectItems?.id)),t={submitState:"checkFirst"},l={...e.data,...t};await ke(l,!0)}await ve(),await pe()})),(0,s.wB)((()=>a.isCommitChanged),(()=>{d.value.submitState="Submit"})),(0,s.wB)(u.value,(e=>{C.value=e.id})),(0,s.wB)((()=>a.wbcInfo),(e=>{if(0!==Object.keys(e).length){_e(e),h.value=a.selectItems?.wbcMemo;const t=""!==a.selectItems?.img_drive_root_path&&a.selectItems?.img_drive_root_path?a.selectItems?.img_drive_root_path:m.value;y.value=f("barcode_image.jpg",t,a.selectItems?.slotId,Nt.barcodeDirName)}})),(0,s.wB)((()=>v.value),(e=>{_e(e)}),{deep:!0});const Q=()=>{O.value=!0,U.value=$.IDS_MSG_UPLOAD_LIS,V.value="lis"},Z=e=>{c("scrollEvent",e)},ee=()=>X.value?"BM Classification":"WBC Classification",te=(e,t)=>{A.value=e,D.value=t.clientY-t.target.getBoundingClientRect().top},ae=(e,t)=>{if(P.value&&(t.preventDefault(),-1!==A.value)){const t=S.value.splice(A.value,1)[0];S.value.splice(e,0,t),A.value=-1,Te()}},le=()=>{P.value=!P.value},se=()=>{O.value=!0,U.value=$.IDS_MSG_CONFIRM_SLIDE,V.value="commit"},oe=()=>{"commit"===V.value?fe():ne(),O.value=!1},ne=()=>{if("0002"===I.value){const e=Hg;z.A.get("http://emr012.cmcnu.or.kr/cmcnu/.live",{params:jg}).then((function(t){const l=t.data,s=JSON.parse((0,Sg.xml2json)(l,{compact:!0})),o=s.root.spcworklist.worklist,n=["LHR10501","LHR10502","LHR10503","LHR10504","LHR10505","LHR10506"],i=o.filter((function(e){return"LHR100"===e.classCd._cdata}));a.selectItems?.wbcInfoAfter.forEach((function(t){t.classCd="",e.forEach((function(e){t.id===e.id&&(t.classCd=e.cd)}))}));let r=[];a.selectItems?.wbcInfoAfter.forEach((function(e){n.forEach((function(t){(e.classCd===t||e.count>0&&""!==e.classCd)&&r.push(e)}))}));const c=r.filter((function(e){return"LHR10501"===e.classCd}));if(c.length>0&&i.length>0){const e=(Number(i[0].inptrslt._cdata)*c[0].percent/100).toFixed(2);r.push({classCd:"LHR10599",percent:e})}ge(u.value.userId).then((function(e){if("succ"===e){const e={empNo:u.value.userId,barcodeNo:a.selectItems?.barcodeNo,wbcInfo:r},t=new Date,l=`${t.getFullYear()}`;let s=`${t.getMonth()+1}`;1===s.length&&(s=`0${s}`);let o=`${t.getDate()}`;1===o.length&&(o=`0${o}`);const n=encodeURIComponent(String.fromCharCode(23)),i=encodeURIComponent(String.fromCharCode(23,23)),c=encodeURIComponent(String.fromCharCode(3)),d=e.wbcInfo.filter((e=>null!==e.classCd&&""!==e.classCd)).map((e=>`${e.classCd}${n}${e.percent}${i}${l}${s}${o}${c}`)).join(""),m=`${Xg}?submit_id=TXLII00101&business_id=${Fg}&ex_interface=${e.empNo}|${$g}&instcd=${$g}&userid=${e.empNo}&eqmtcd=${Gg}&bcno=${e.barcodeNo}&result=${d}&testcont=MANUAL DIFFERENTIAL COUNT RESULT&testcontcd=01&execdeptcd=H1`;z.A.get(m).then((function(e){const t=e.data,a=JSON.parse((0,Sg.xml2json)(t,{compact:!0})),l=a.root.ResultFlag.resultflag._text;"Y"===l?Ae($.IDS_MSG_SUCCESS):De(a.root.ResultFlag.error2._text)})).catch((function(e){De(e.message)}))}else De($.IDS_ERROR_PLEASE_CONFIRM_YOUR_USER_ID)}))})).catch((function(e){De(e.message)}))}else ie()},ie=()=>{if("0019"===I.value){let e="H|^&||||||||||P||"+a.selectItems?.barcodeNo+"\n",t=0;Y.value.forEach((function(l){""!==l.LIS_CD&&a.selectItems?.wbcInfoAfter.forEach((function(a){l.IA_CD===a.id&&(Number(a.percent)>0||Number(a.count))&&(e+="R|"+ ++t+"|^^^^"+l.LIS_CD+"|"+a.count+"|||||||^"+u.value.userId+"\n",e+="R|"+ ++t+"|^^^^"+l.LIS_CD+"%|"+a.percent+"|%||||||^"+u.value.userId+"\n")}))})),e+="L|1|N",de(e)}else if("0006"===I.value){const e=ce();de(e)}else"0011"===I.value?re():ue()},ue=async()=>{const e=J.value,t=await Jg(e);if(t){const e={sendingApp:"PBIA",sendingFacility:"PBIA",receivingApp:"LIS",receivingFacility:"LIS",dateTime:j(),security:"",messageType:["ADT","R02"],messageControlId:a.selectItems?.barcodeNo,processingId:"P",hl7VersionId:"2.5",selectedItem:{},wbcInfo:a.selectItems?.wbcInfoAfter,result:Y.value},t=await gr(e);if(t)if(J.value.includes("http"))me(t);else{const e={filepath:`${J.value}\\${a.selectItems.barcodeNo}.hl7`,msg:t};try{await Ir(e);Ae($.IDS_MSG_SUCCESS)}catch(l){De(l.response.data.message)}}}},re=()=>{let e="";const t=p.value.split(",");let l=[];t.forEach((function(e){if(e.length>0){var t=e.split("|"),a=t[0],s=t[1],o=(t[2],t[3],"");"L0210"===a&&(s+="5"),"H1151"===a?(o+="H9511|"+s+"|",l.push(o)):"H1152"===a?(o+="H9512|"+s+"|",l.push(o)):"H1153"===a?(o+="H9513|"+s+"|",l.push(o)):"H1154"===a?(o+="H9514|"+s+"|",l.push(o)):"H1155"===a?(o+="H9515|"+s+"|",l.push(o)):"H1165"===a?(o+="H9510|"+s+"|",l.push(o)):"H1162"===a?(o+="H9570|"+s+"|",l.push(o)):"H1101"!==a&&"H1102"!==a&&"H1103"!==a&&"H1104"!==a&&"H1105"!==a&&"H1106"!==a&&"H1121"!==a&&"H1122"!==a&&"H1123"!==a||(o+=a+"|"+s+"|",l.push(o))}})),p.value="",l.forEach((function(e){p.value+=e+","})),e+=p.value;let s="";Y.value.forEach((function(t,l){a.selectItems?.wbcInfoAfter.forEach((function(a){t.IA_CD===a.id&&("H9600"===t.LIS_CD||"H9365"===t.LIS_CD||"H9366"===t.LIS_CD?Number(a.count)>0?e+=t.LIS_CD+"|1|,":e+=t.LIS_CD+"| |,":"13"===t.IA_CD||"14"===t.IA_CD?Number(a.count)>Number(t.MIN_COUNT)?e+=t.LIS_CD+"|"+a.percent+"|,":e+=t.LIS_CD+"| |,":Number(a.percent)>0?e+=t.LIS_CD+"|"+a.percent+"|,":e+=t.LIS_CD+"| |,")}))}));const o=["H9531","H9535","H9594","H9571","H9574","H9595"];q.value.forEach((function(t){""!==t.LIS_CD&&a.selectItems?.rbcInfoAfter.forEach((function(a){if(t.IA_CATEGORY_CD===a.IA_CATEGORY_CD)for(const l of a.classInfo)if(t.IA_CLASS_CD===l.IA_CLASS_CD){const a=0===Number(l.degree)?" ":o.includes(t.LIS_CD)?"0":l.degree;s+=`${t.LIS_CD}|${a}|,`,e+=`${t.LIS_CD}|${a}|,`}}))}));const n={H9531:"H9571",H9532:"H9572",H9533:"H9573",H9535:"H9574",H9536:"H9575",H9537:"H9576",H9534:"H9577",H9538:"H9578",H9542:"H9518",H9544:"H9520",H9546:"H9517",H9548:"H9519",H9550:"H9522",H9552:"H9521",H9554:"H9525",H9556:"H9524",H9558:"H9526",H9560:"H9523",H9562:"H9528",H9564:"H9530",H9594:"H9595"};let i=s.replace(/H9531|H9532|H9533|H9535|H9536|H9537|H9534|H9538|H9542|H9544|H9546|H9548|H9550|H9552|H9554|H9556|H9558|H9560|H9562|H9564|H9594/g,(e=>n[e]));e+=s,e+=i;var u={url:J.value,machine:"ADUIMD",episode:a.selectItems?.barcodeNo,result:e};z.A.post(u.url+"/api/MifMain/File",{machine:u.machine,episode:u.episode,result:u.result}).then((function(e){const t=e.data[0];"0"===t.returnCode?Ae($.IDS_MSG_SUCCESS):Ae("return code : "+t.returnCode)})).catch((function(e){Ae(e.message)}))},ce=()=>{let e="H|^&||||||||||P||"+a.selectItems?.barcodeNo+"\n",t=0,l=0,s=0;if(a.selectItems?.wbcInfoAfter.forEach((function(e){"02"!==e.id&&"03"!==e.id&&"04"!==e.id&&"10"!==e.id||(l+=Number(e.percent)),"72"===e.id&&(s=Number(e.percent))})),l>0&&s<6){const e=a.selectItems?.wbcInfoAfter.filter((function(e){return"71"===e.id})),t=a.selectItems?.wbcInfoAfter.filter((function(e){return"72"===e.id}));e[0].percent=Number(e[0].percent)+Number(s)+"",t[0].percent="0"}return Y.value.forEach((function(l){""!==l.LIS_CD&&a.selectItems?.wbcInfoAfter.forEach((function(a){l.IA_CD===a.id&&("01"===a.id||"71"===a.id||"05"===a.id||"07"===a.id||"08"===a.id||"09"===a.id||Number(a.percent)>0)&&(e+="R|"+ ++t+"|^^^^"+l.LIS_CD+"|"+a.count+"|||||||^"+u.value.userId+"\n",e+="R|"+ ++t+"|^^^^"+l.LIS_CD+"%|"+a.percent+"|%||||||^"+u.value.userId+"\n")}))})),e+="L|1|N"},de=async e=>{if(J.value.includes("http"))me(e);else{const t=J.value,l=await Jg(t);if(l){const t={path:J.value,filename:`${J.value}/${a.selectItems?.barcodeNo}.lst2msg`,content:e},l=await Qg(t);if(l){const e=await or(String(a.selectItems?.id)),t={submitState:"lis"},l={...e.data,...t};await ke(l,!0),Ae($.IDS_MSG_SUCCESS),M.value||c("nextPage")}else De("lis file err")}}},me=e=>{const t={url:J.value,barcodeNo:a.selectItems?.barcodeNo,userId:u.value.userId,deviceBarcode:g.value,resultMsg:e};z.A.post(t.url,{barcodeNo:t.barcodeNo,userid:t.userId,deviceBarcode:g.value,resultMsg:t.resultMsg}).then((function(e){"E000"===e.data.errorCode?Ae($.IDS_MSG_SUCCESS):De(e.data.errorMessage)})).catch((function(e){De(e.message)}))},ve=async()=>{try{const e=await Xe(),t=await Re();if(e&&e.data&&t&&t.data){const a=e.data,l=t.data;if(a){let e=[];for(const t of a)e.push({CD_NM:t.fullNm,IA_CD:t?.id,LIS_CD:t?.key,MIN_COUNT:0});Y.value=e}if(l){let e=[];for(const t of l)e.push({CATEGORY_NM:t.categoryNm,CLASS_NM:t?.fullNm,IA_CATEGORY_CD:t?.categoryId,IA_CLASS_CD:t?.id,LIS_CD:t?.key});q.value=e}}}catch(e){console.error(e)}},pe=async()=>{try{const e=await Me();e&&e.data&&0!==e.data.length&&(J.value=e.data[0].lisFilePath)}catch(e){console.error(e)}},ge=async e=>new Promise(((t,a)=>{if("0002"===I.value){const l=`http://emr012.cmcnu.or.kr/cmcnu/.live?submit_id=TRLII00104&business_id=li&instcd=012&userid=${e}`;z.A.get(l).then((function(e){const a=e.data,l=JSON.parse((0,Sg.xml2json)(a,{compact:!0})),s=l.root.getUsernm.usernm._text;t(null===s||""===s?"fail":"succ")})).catch((function(e){console.log("checkUserAuth :"+e.message),a(new Error(e.message))}))}})),Ie=()=>{O.value=!1},fe=async()=>{const e=H()().local(),t=await or(String(a.selectItems?.id)),l={submitState:"Submit",submitOfDate:e.format(),submitUserId:u.value.name},s={...t.data,...l};await ke(s),d.value.submitState="Submit",c("submitStateChanged","Submit")},be=async()=>{const e=h.value.replaceAll("\r\n","<br>"),t={wbcMemo:e},l=await or(String(a.selectItems?.id)),s={...l.data,...t};await ke(s),k.value=!1},ye=()=>{k.value=!k.value},Ce=()=>{k.value=!1},he=e=>"Artifact(Smudge)"===e&&"0006"===I.value?"Artifact":e,ke=async(e,t)=>{try{const a=await ar({userId:Number(u.value.id),runingInfoDtoItems:[e]});if(a){t||Ae("success");const a=e;h.value=a.wbcMemo}else console.error("백엔드가 디비에 저장 실패함")}catch(a){console.error("Error:",a)}},Se=(e,t)=>{let a=JSON.parse(JSON.stringify(e));return a.sort(((e,a)=>{const l=t.findIndex((t=>(t.title||t.abbreviation)===(e.title||e.abbreviation))),s=t.findIndex((e=>(e.title||e.abbreviation)===(a.title||a.abbreviation)));return-1===l?1:-1===s?-1:l-s})),a},Ne=async()=>{try{const e=await Ge();e&&(0===e?.data.length?W.value=[]:W.value=e.data.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx))))}catch(e){console.log(e)}},_e=async e=>{await Ne();const t=await or(String(b.value));await i.dispatch("commonModule/setCommonInfo",{selectedSampleId:String(t?.data?.id)}),d.value=t.data,d.value.wbcInfoAfter=e;const l=d.value.wbcInfo.wbcInfo[0],s=d.value?.wbcInfoAfter&&0!==d.value?.wbcInfoAfter.length?d.value?.wbcInfoAfter:t.data.wbcInfo.wbcInfo[0],o=0!==W.value.length?W.value:"bm"===window.PROJECT_TYPE?ka:ha,n=0!==W.value.length?W.value:"bm"===window.PROJECT_TYPE?Ca:ya,u=Se(l,o),r=Se(s,n);if(N.value=r.filter((e=>!T.includes(e.title))),_.value=u.filter((e=>!T.includes(e.title))),w.value=r.filter((e=>T.includes(e.title))),R.value=u.filter((e=>T.includes(e.title))),we("before",_.value),we("after",N.value),_.value.forEach((e=>{if(X.value){if("OT"!==e.title){const t=(Number(e.count)/Number(F.value)*100).toFixed(1);e.percent=Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t}}else{const t=Le(I.value,d.value?.testType);if(!t.includes(e.title)){const t=(Number(e.count)/Number(F.value)*100).toFixed(1);e.percent=Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t}}})),N.value.forEach((e=>{if(X.value){if("OT"!==e.title){const t=(Number(e.count)/Number(G.value)*100).toFixed(1);e.percent=Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t}}else{const t=Le(I.value,d.value?.testType);if(!t.includes(e.title)){const t=(Number(e.count)/Number(G.value)*100).toFixed(1);e.percent=Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t}}})),E.value=[],S.value=[],R.value.forEach((e=>{const t=w.value.find((t=>t.id===e.id));t&&!E.value.find((t=>t.id===e.id))&&E.value.push({id:e.id,name:e.name,title:e.title,count:{before:e.count,after:t.count},images:{before:e.images,after:t.images},percent:{before:e.percent,after:t.percent}})})),_.value.forEach((e=>{const t=N.value.find((t=>t.id===e.id));t&&!S.value.find((t=>t.id===e.id))&&S.value.push({id:e.id,name:e.name,title:e.title,count:{before:e.count,after:t.count},images:{before:e.images,after:t.images},percent:{before:e.percent,after:t.percent}})})),""===a.selectItems?.submitState){const e=await or(String(a.selectItems?.id)),t={submitState:"checkFirst"},l={...e.data,...t};await ke(l,!0)}},Ee=e=>{const t=Le(I.value,d.value?.testType);return!t.includes(e)},Le=(e,t)=>{e||""!==e||(e="0000",t="01");const a={"0006":{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","SM","NE","GP","PA","OT"]}},l=a[e]||{includesStr:["AR","NR","GP","PA","MC","SM","MA","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","NE","SM","GP","PA","OT"]};return"01"===t||"04"===t?l.includesStr:l.includesStr2},we=(e,t)=>{"before"===e?F.value=0:"after"===e&&(G.value=0),t.forEach((t=>{if(X.value)"OT"!==t.title&&("before"===e?F.value+=Number(t.count):G.value+=Number(t.count));else{const a=Le(I.value,d.value?.testType),l=a.includes(t.title);l||("before"===e?F.value+=Number(t.count):G.value+=Number(t.count))}}))};async function Te(){let e=JSON.parse(JSON.stringify([...N.value,...L.value])),t=0;e.forEach((e=>{e.images.forEach((e=>{if(X.value)"OT"!==e.title&&(t+=1);else{const a=Le(I.value,d.value?.testType);a.includes(e.title)||(t+=1)}}))})),e.forEach((e=>{if(e.images.forEach((e=>{delete e.width,delete e.height,delete e.filter})),X.value){if("OT"!==e.title){const a=(Number(e.count)/Number(t)*100).toFixed(1);e.percent=Number(a)===Math.floor(Number(a))?Math.floor(Number(a)).toString():a}}else{const a=Le(I.value,d.value?.testType);if(!a.includes(e.title)){const a=(Number(e.count)/Number(t)*100).toFixed(1);e.percent=Number(a)===Math.floor(Number(a))?Math.floor(Number(a)).toString():a}}})),d.value.wbcInfoAfter=e,await i.dispatch("commonModule/setCommonInfo",{classInfoSort:[...N.value,...L.value]});const a=Se(W.value,N.value);a.forEach(((e,t)=>{e.orderIdx=t}));const l=await or(String(b.value));l&&(l.data.wbcInfoAfter=e),await He(a),await Pe(e,[l.data]),c("classOrderChanged"),await i.dispatch("commonModule/setCommonInfo",{classInfoSort:[]})}async function Pe(e,t){try{const e=await ar({userId:Number(C.value),runingInfoDtoItems:t});e||console.error("백엔드가 디비에 저장 실패함")}catch(a){console.error("Error:",a)}}const Ae=e=>{M.value=!0,x.value="success",K.value=e,window.scrollTo({top:0,behavior:"smooth"})},De=e=>{M.value=!0,x.value="error",K.value=e},xe=()=>{M.value=!1};return(t,a)=>{const o=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,["report"!==e.type?((0,s.uX)(),(0,s.CE)("img",{key:0,class:"mt1",src:y.value},null,8,zg)):(0,s.Q3)("",!0),(0,s.Lk)("div",Zg,[(0,s.Lk)("h3",eI,(0,n.v_)(ee()),1),(0,s.Lk)("ul",tI,[(0,s.Lk)("li",aI,[(0,s.bF)(o,{icon:["fas","comment-dots"],onClick:ye}),k.value?((0,s.uX)(),(0,s.CE)("div",lI,[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>h.value=e)},null,512),[[l.Jo,h.value]]),(0,s.Lk)("button",{onClick:be},"ok"),(0,s.Lk)("button",{onClick:Ce},"cancel")])):(0,s.Q3)("",!0)]),(0,s.Lk)("li",{onClick:se,class:(0,n.C4)({submitted:"Submit"===d.value?.submitState})},[(0,s.bF)(o,{icon:["fas","square-check"]})],2),(0,s.Lk)("li",{onClick:Q},[(0,s.bF)(o,{icon:["fas","upload"]})]),(0,s.Lk)("li",null,[P.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(o,{key:0,icon:["fas","lock"],onClick:le})),P.value?((0,s.uX)(),(0,s.Wv)(o,{key:1,icon:["fas","lock-open"],onClick:le})):(0,s.Q3)("",!0)])])]),(0,s.Lk)("div",sI,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(S.value,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"wbcClassDbDiv",draggable:"true",onDragstart:e=>te(t,e),onDragover:a[1]||(a[1]=(0,l.D$)((()=>{}),["prevent"])),onDrop:e=>ae(t,e)},[0===t?((0,s.uX)(),(0,s.CE)("ul",nI,cI)):(0,s.Q3)("",!0),Ee(e.title)?((0,s.uX)(),(0,s.CE)("ul",{key:1,class:"nth1Child",onClick:t=>Z(e.id)},[(0,s.Lk)("li",null,(0,n.v_)(e?.name),1),(0,s.Lk)("li",mI,[(0,s.Lk)("span",vI,(0,n.v_)(e.count.before),1),(0,s.Lk)("span",pI,(0,n.v_)(e.percent.before+"%"||0),1)]),(0,s.Lk)("li",gI,[(0,s.Lk)("span",null,(0,n.v_)(e?.count.after),1),(0,s.Lk)("span",null,(0,n.v_)(e?.percent.after+"%"||0),1)])],8,dI)):(0,s.Q3)("",!0)],40,oI)))),128)),(0,s.Lk)("div",II,[fI,(0,s.Lk)("ul",null,[(0,s.Lk)("li",bI,[(0,s.Lk)("p",null,(0,n.v_)(F.value||0),1),yI])]),(0,s.Lk)("ul",CI,[(0,s.Lk)("li",hI,[(0,s.Lk)("p",null,(0,n.v_)(G.value||0),1),kI])])]),X.value?((0,s.uX)(),(0,s.CE)("div",SI,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(S.value,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"wbcClassDbDiv mb2",draggable:"true",onDragstart:e=>te(t,e),onDragover:a[2]||(a[2]=(0,l.D$)((()=>{}),["prevent"])),onDrop:e=>ae(t,e)},["OT"===e?.title?((0,s.uX)(),(0,s.CE)("ul",{key:0,class:"nth1Child",onClick:t=>Z(e.id)},[(0,s.Lk)("li",null,(0,n.v_)(e?.name),1),(0,s.Lk)("li",null,(0,n.v_)(e?.count.after),1),EI],8,_I)):(0,s.Q3)("",!0)],40,NI)))),128))])):(0,s.Q3)("",!0),X.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",LI,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(E.value,((e,t)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",{key:t,class:"categories",onClick:t=>Z(e.id)},[(0,s.Lk)("ul",wI,[0===t?((0,s.uX)(),(0,s.CE)("li",TI,"non-WBC")):(0,s.Q3)("",!0),(0,s.Lk)("li",PI,(0,n.v_)(he(e.name)),1)]),(0,s.Lk)("ul",AI,[0===t?((0,s.uX)(),(0,s.CE)("li",DI)):(0,s.Q3)("",!0),(0,s.Lk)("li",null,[(0,s.eW)((0,n.v_)(e?.count.before)+" ",1),"NR"===e?.title||"GP"===e?.title?((0,s.uX)(),(0,s.CE)("span",MI," / "+(0,n.v_)(d.value?.wbcInfo?.maxWbcCount)+" WBC",1)):(0,s.Q3)("",!0)])]),(0,s.Lk)("ul",xI,[0===t?((0,s.uX)(),(0,s.CE)("li",KI)):(0,s.Q3)("",!0),(0,s.Lk)("li",null,[(0,s.eW)((0,n.v_)(e?.count.after)+" ",1),"NR"===e?.title||"GP"===e?.title?((0,s.uX)(),(0,s.CE)("span",OI," / "+(0,n.v_)(d.value?.wbcInfo?.maxWbcCount)+" WBC",1)):(0,s.Q3)("",!0)])])],8,RI)),[[l.aG,"0006"!==d.value?.siteCd&&"SM"!==e?.title]]))),128))]))]),M.value?((0,s.uX)(),(0,s.Wv)(et,{key:1,"is-visible":M.value,type:x.value,message:K.value,onHide:xe,"onUpdate:hideAlert":xe},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0),O.value?((0,s.uX)(),(0,s.Wv)(wt,{key:2,"is-visible":O.value,type:B.value,message:U.value,onHide:Ie,onOkConfirm:oe},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const UI=BI;var WI=UI;const XI={class:"reportDiv"},FI={class:"wbcDiv shadowBox"},$I={key:0,class:"rbcDiv shadowBox"},GI={class:"reportDetail shadowBox"},HI={class:"reportTitle"},jI=(0,s.Lk)("span",null,"[Hospital]",-1),VI={class:"reportDivTop"},YI={key:0,class:"reportH3"},qI={key:1,class:"reportH3"},JI={class:"reportTable"},QI=(0,s.Lk)("th",null,"Slot ID",-1),zI=(0,s.Lk)("th",null,"Ordered date",-1),ZI=(0,s.Lk)("th",null,"Signed by ID",-1),ef=(0,s.Lk)("th",null,"Signed date",-1),tf=(0,s.Lk)("th",null,"Patient ID",-1),af=(0,s.Lk)("th",null,"Ordered Classification",-1),lf=(0,s.Lk)("th",null,"Name",-1),sf=(0,s.Lk)("th",null,"Birth",-1),of=(0,s.Lk)("th",null,"Gender",-1),nf={class:"reportDivBottom"},uf={class:"reportH3 mb1 pl0"},rf={class:"tableClass"},cf=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{width:"40%"}),(0,s.Lk)("col",{width:"20%"}),(0,s.Lk)("col",{width:"20%"})],-1),df=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Class"),(0,s.Lk)("th",null,"Count"),(0,s.Lk)("th",null,"%")])],-1),mf=(0,s.Lk)("td",null,"Total",-1),vf=(0,s.Lk)("td",null,"100.00",-1),pf={key:0,class:"reportH3 mb1 pl0"},gf={key:1,class:"tableClass"},If=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{width:"40%"}),(0,s.Lk)("col",{width:"20%"}),(0,s.Lk)("col",{width:"20%"})],-1),ff={key:0},bf=(0,s.Lk)("td",null,"-",-1),yf={key:0,class:"rbcRight"},Cf=(0,s.Lk)("h3",{class:"reportH3 mb1 pl0"},"RBC classification result",-1),hf={class:"printRbcCategory"},kf={key:0,class:"mb1 liTitle"},Sf={class:"printRbcClass"},Nf={key:0,class:"mb1 liTitle"},_f={class:"printRbcDegree"},Ef={key:0,class:"mb1 liTitle"},Lf={class:"printTotalText"},Rf={class:"printRbcCount"},wf={key:0,class:"mb1 liTitle"},Tf={class:"printRbcPercent"},Pf={key:0,class:"mb1 liTitle"};var Af=(0,s.pM)({__name:"report",setup(e){const t=e=>e?.name,a=(0,r.Pj)(),i=(0,o.KR)([]),u=(0,o.KR)(null),c=(0,o.KR)(!1),d=(0,o.KR)(null),m=(0,o.KR)([]),v=(0,s.EW)((()=>a.state.commonModule.siteCd)),p=(0,s.EW)((()=>a.state.commonModule.clonedWbcInfo)),f=(0,s.EW)((()=>a.state.commonModule.cbcLayer)),b=(0,s.EW)((()=>a.state.commonModule.selectedSampleId)),y=(0,s.EW)((()=>a.state.commonModule.iaRootPath)),C=(0,s.EW)((()=>a.state.commonModule.rbcInfoAfterData)),h=((0,s.nI)(),(0,o.KR)(!1)),k=(0,o.KR)([]),S=(0,o.KR)([]),N=(0,o.KR)(!0),_=["NR","GP","PA","AR","MA","SM"],E=(0,o.KR)([]),L=(0,o.KR)([]),R=(0,o.KR)(0),w=(0,o.KR)(0),T=(0,o.KR)(0),P=(0,o.KR)(0),A=(0,o.KR)([]),D=(0,o.KR)(!1);(0,s.sV)((async()=>{await M(),N.value=!1,await G(),await H(),await x(),await q(),await Y(),h.value="bm"===window.PROJECT_TYPE}));const M=async()=>{try{const e=await or(String(b.value));i.value=e.data,m.value=e.data}catch(e){console.log(e)}},x=async()=>{const e=""!==i.value?.img_drive_root_path&&i.value?.img_drive_root_path?i.value?.img_drive_root_path:y.value,t=`${e}/${i.value?.slotId}/03_RBC_Classification/${i.value?.slotId}_new.json`,a=await dr({fullPath:t}),l=`${e}/${i.value?.slotId}/03_RBC_Classification/${i.value?.slotId}.json`,s=await dr({fullPath:l});if("not file"!==a.data){const e=a?.data;for(const t of s.data[0].rbcClassList)for(const a of e){const e=t.classInfo.findIndex((e=>Number(e.index)===Number(a.index)));if(-1!==e&&t.classInfo.splice(e,1),t.categoryId===a.categoryId){let e={classNm:a.classNm,classId:a.classId,posX:String(a.posX),posY:String(a.posY),width:a.width,height:a.height,index:a.index};t.classInfo.push(e)}}L.value=s.data[0].rbcClassList}else L.value=s?.data[0].rbcClassList;if(!L.value||!Array.isArray(L.value))return void console.error("rbcInfoPathAfter.value is not iterable");let o=0,n=0,u=0,r=0;L.value.forEach((e=>{const t=e.classInfo.length>0?e.classInfo[e.classInfo.length-1].index.replace(/[^\d]/g,""):"";switch(e.categoryId){case"01":o=t;break;case"02":n=t;break;case"03":u=t;break;case"05":r=t;break;default:break}})),R.value=Number(o)+1,w.value=Number(o)+1,T.value=n,P.value=Number(u)+Number(r)+2,C.value.forEach((e=>{e.classInfo.forEach((e=>{e.originalDegree=0}))})),L.value.forEach((e=>{const t=C.value.find((t=>t.categoryId===e.categoryId));t&&e.classInfo.forEach((e=>{const a=t.classInfo.find((t=>t.classId===e.classId));a&&a.originalDegree++}))}))},K=e=>{const t=(Number(e)/Number(R.value)*100).toFixed(1);return Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t},O=async()=>{await G(),await H()},B=e=>{const t=U(v.value,i.value?.testType);return!t.includes(e)},U=(e,t)=>{e||""!==e||(e="0000",t="01");const a={"0006":{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","SM","NE","GP","PA","OT"]}},l=a[e]||{includesStr:["AR","NR","GP","PA","MC","SM","MA","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","NE","SM","GP","PA","OT"]};return"01"===t||"04"===t?l.includesStr:l.includesStr2},W=async e=>{await M(),await G(),await H(),await x()},X=()=>{c.value=!1},F=()=>h.value?"BM Classification":"WBC Classification",$=()=>{c.value=!0},G=async()=>{try{const e=await Ge();e&&(0===e?.data.length?S.value=[]:S.value=e.data.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx))))}catch(e){console.log(e)}};async function H(e){if(i.value?.wbcInfoAfter&&0!==i.value?.wbcInfoAfter.length){let e=0!==S.value.length?S.value:"bm"===window.PROJECT_TYPE?ka:ha;const t=j(p.value,e);E.value=t.filter((e=>_.includes(e.title))),u.value=t,k.value=t}else{let e=0!==S.value.length?S.value:"bm"===window.PROJECT_TYPE?ka:ha;const t=j(i.value?.wbcInfo.wbcInfo[0],e);E.value=t.filter((e=>_.includes(e.title))),u.value=t,k.value=t}m.value=i.value?.rbcInfoAfter&&0!==i.value?.rbcInfoAfter.length?i.value?.rbcInfoAfter:i.value?.rbcInfo.rbcClass}const j=(e,t)=>{let a=JSON.parse(JSON.stringify(e));return a.sort(((e,a)=>{const l=t.findIndex((t=>(t.title||t.abbreviation)===(e.title||e.abbreviation))),s=t.findIndex((e=>(e.title||e.abbreviation)===(a.title||a.abbreviation)));return-1===l?1:-1===s?-1:l-s})),a},Y=async()=>{let e=R.value,t=w.value,a=T.value;i.value?.rbcInfoAfter.forEach(((l,s)=>{l.classInfo.forEach(((s,o)=>{A.value&&A.value.forEach((o=>{if(o.categoryId===l.categoryId&&o.classId===s.classId){const l=Number(s.degree);let n=0;n="01"===o.categoryId?Number((l/t*100).toFixed(2)):"02"===o.categoryId?Number((l/a*100).toFixed(2)):Number((l/e*100).toFixed(2)),isNaN(n)&&(n=0);const i=e=>s.degree=e;n<Number(o.degree1)?i("0"):n<Number(o.degree2)?i("1"):n<Number(o.degree3)?i("2"):i("3")}}))}))})),i.value.rbcInfoAfter.forEach(((l,s)=>{l.classInfo.forEach(((s,o)=>{A.value&&A.value.forEach((o=>{if(o.categoryId===l.categoryId&&o.classId===s.classId){const l=Number(s.originalDegree);let n=0;n="01"===o.categoryId?Number((l/t*100).toFixed(2)):"02"===o.categoryId?Number((l/a*100).toFixed(2)):Number((l/e*100).toFixed(2)),isNaN(n)&&(n=0);const i=e=>s.degree=e;n<Number(o.degree1)?i("0"):n<Number(o.degree2)?i("1"):n<Number(o.degree3)?i("2"):i("3")}}))}))})),i.value.rbcInfoAfter.forEach((e=>{e.classInfo.forEach((t=>{if("01"===e.categoryId&&("01"===t.classId&&(e.classInfo[0].degree="1"),["02","03"].includes(t.classId)&&Number(t.degree)>0&&(e.classInfo[0].degree="0")),"02"===e.categoryId&&("01"===t.classId&&(e.classInfo[0].degree="1"),["02","03"].includes(t.classId)&&Number(t.degree)>0&&(e.classInfo[0].degree="0")),"03"===e.categoryId&&("01"===t.classId&&(e.classInfo[0].degree="1",e.classInfo[1].degree="0"),"01"!==t.classId&&"02"!==t.classId)){var a=Number(e.classInfo[1].degree);Number(t.degree)>a&&(e.classInfo[0].degree="0",e.classInfo[1].degree=t.degree)}}))}))},q=async()=>{try{const e=await ie(),t=e.data;A.value=t}catch(e){console.log(e)}},J=e=>{e&&(D.value=!D.value)};return(e,a)=>{const r=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(kg,{onRefreshClass:W}),(0,s.Lk)("div",{class:(0,n.C4)("reportSection"+(f.value?" cbcLayer":""))},[f.value?((0,s.uX)(),(0,s.Wv)(xg,{key:0,selectItems:i.value},null,8,["selectItems"])):(0,s.Q3)("",!0),(0,s.Lk)("div",XI,[(0,s.Lk)("div",FI,[N.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(WI,{key:0,wbcInfo:u.value,selectItems:i.value,type:"report",onClassOrderChanged:O,onSubmitStateChanged:J,isCommitChanged:D.value},null,8,["wbcInfo","selectItems","isCommitChanged"]))]),h.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",$I,[N.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(Ip,{key:0,rbcInfo:m.value,selectItems:i.value,type:"report",onSubmitStateChanged:J,isCommitChanged:D.value},null,8,["rbcInfo","selectItems","isCommitChanged"]))])),(0,s.Lk)("div",GI,[(0,s.Lk)("div",HI,[jI,(0,s.eW)(),(0,s.Lk)("span",null,"DM Serial Nbr : "+(0,n.v_)(i.value?.slotId),1),(0,s.bF)(r,{icon:["fas","print"],onClick:$,class:"printStart"})]),(0,s.Lk)("div",VI,[h.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("h3",YI,"Analysis Report from UIMD PB system")),h.value?((0,s.uX)(),(0,s.CE)("h3",qI,"Analysis Report from UIMD BM system")):(0,s.Q3)("",!0),(0,s.Lk)("table",JI,[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[QI,(0,s.Lk)("td",null,(0,n.v_)(i.value?.slotId),1)]),(0,s.Lk)("tr",null,[zI,(0,s.Lk)("td",null,(0,n.v_)((0,o.R1)(V)(i.value?.orderDttm)),1)]),(0,s.Lk)("tr",null,[ZI,(0,s.Lk)("td",null,(0,n.v_)(i.value?.submitUserId),1)]),(0,s.Lk)("tr",null,[ef,(0,s.Lk)("td",null,(0,n.v_)(i.value?.submitOfDate),1)]),(0,s.Lk)("tr",null,[tf,(0,s.Lk)("td",null,(0,n.v_)(i.value?.patientId),1)]),(0,s.Lk)("tr",null,[af,(0,s.Lk)("td",null,(0,n.v_)(h.value?(0,o.R1)(I)(i.value?.testType):(0,o.R1)(g)(i.value?.testType)),1)]),(0,s.Lk)("tr",null,[lf,(0,s.Lk)("td",null,(0,n.v_)(i.value?.patientName),1)]),(0,s.Lk)("tr",null,[sf,(0,s.Lk)("td",null,(0,n.v_)(i.value?.birthDay),1)]),(0,s.Lk)("tr",null,[of,(0,s.Lk)("td",null,(0,n.v_)("01"===i.value?.gender?"Male":"Female"),1)])])])]),(0,s.Lk)("div",nf,[(0,s.Lk)("div",{class:(0,n.C4)(["wbcLeft",h.value&&"wbcLeftBm"])},[(0,s.Lk)("h3",uf,(0,n.v_)(F())+" result",1),(0,s.Lk)("table",rf,[cf,df,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(k.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id,class:"wbcClassDbDiv"},[B(e.title)?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("td",null,(0,n.v_)(e?.name),1),(0,s.Lk)("td",null,(0,n.v_)(e?.count),1),(0,s.Lk)("td",null,(0,n.v_)(e?.percent||"-"),1)],64)):(0,s.Q3)("",!0)])))),128)),(0,s.Lk)("tr",null,[mf,(0,s.Lk)("td",null,(0,n.v_)(i.value?.wbcInfo?.totalCount||0),1),vf])])]),i.value?.wbcInfo?.nonRbcClassList||h.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("h3",pf,"non-WBC")),h.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("table",gf,[If,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(E.value,((e,a)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("tr",{key:a},[(0,s.Lk)("td",null,(0,n.v_)(t(e)),1),(0,s.Lk)("td",null,[(0,s.eW)((0,n.v_)(e?.count)+" ",1),"NR"===e?.title||"GP"===e?.title?((0,s.uX)(),(0,s.CE)("span",ff," /"+(0,n.v_)(i.value?.wbcInfo?.maxWbcCount)+" WBC",1)):(0,s.Q3)("",!0)]),bf],512)),[[l.aG,"0006"!==v.value&&"SM"!==e?.title]]))),128))])]))],2),h.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",yf,[Cf,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)([C.value],((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"categories"},[(0,s.Lk)("ul",hf,[0===t?((0,s.uX)(),(0,s.CE)("li",kf,"Category")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(e?.categoryNm),1)]),(0,s.Lk)("ul",Sf,[0===t?((0,s.uX)(),(0,s.CE)("li",Nf,"Class")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},(0,n.v_)(e?.classNm),1)))),128))]),(0,s.Lk)("ul",_f,[0===t?((0,s.uX)(),(0,s.CE)("li",Ef,"Degree")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},(0,n.v_)(e?.degree),1)))),128)),(0,s.bo)((0,s.Lk)("li",Lf,"Total",512),[[l.aG,"Shape"!==e.categoryNm]])]),(0,s.Lk)("ul",Rf,[0===t?((0,s.uX)(),(0,s.CE)("li",wf,"Count")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},(0,n.v_)(e?.originalDegree),1)))),128)),(0,s.bo)((0,s.Lk)("li",null,(0,n.v_)(w.value),513),[[l.aG,"Size"===e?.categoryNm||"Chromia"===e?.categoryNm]]),(0,s.bo)((0,s.Lk)("li",null,(0,n.v_)(P.value),513),[[l.aG,"Inclusion Body"===e?.categoryNm]])]),(0,s.Lk)("ul",Tf,[0===t?((0,s.uX)(),(0,s.CE)("li",Pf,"Percent")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},(0,n.v_)(K(e?.originalDegree)),1)))),128)),(0,s.bo)((0,s.Lk)("li",null,"100%",512),[[l.aG,"Shape"!==e.categoryNm]])])])))),128))],64)))),128))]))])])])],2),c.value?((0,s.uX)(),(0,s.Wv)(Jc,{key:0,ref_key:"printContent",ref:d,printOnOff:c.value,selectItemWbc:i.value.wbcInfo.wbcInfo[0],onPrintClose:X},null,8,["printOnOff","selectItemWbc"])):(0,s.Q3)("",!0)],64)}}});const Df=Af;var Mf=Df;const xf={key:0,class:"loaderBackground"},Kf=(0,s.Lk)("div",{class:"loader"},null,-1),Of=(0,s.Lk)("p",{class:"loadingText"},"Loading...",-1),Bf=[Kf,Of],Uf={class:"wbcInfoDbUl"},Wf=["onClick","onDrop"],Xf={class:"circle"},Ff={key:1,class:"cellImgBox"},$f={class:"mt1"},Gf=["onInput","checked"],Hf=["onDrop"],jf=["onClick","onDblclick","onContextmenu"],Vf={style:{position:"relative"}},Yf={key:0,class:"titleImg"},qf=["src","width","height","onDragstart","onError","onLoad"],Jf={key:2,class:"divCompare"},Qf={class:"divCompareChild"},zf=["value"],Zf={class:"cellImgBox"},eb={class:"mt1"},tb=["checked"],ab=["onClick","onDblclick","onContextmenu"],lb={style:{position:"relative"}},sb={key:0,class:"titleImg"},ob=["src","width","height","onDragstart","onError"],nb={class:"divCompareChild"},ib=["value"],ub={class:"cellImgBox"},rb={class:"mt1"},cb=["checked"],db=["onClick","onDblclick","onContextmenu"],mb={style:{position:"relative"}},vb={key:0,class:"titleImg"},pb=["src","width","height","onDragstart","onError"];var gb=(0,s.pM)({__name:"ImageGallery",props:{wbcInfo:{},updateWbcInfo:{type:Function},classCompareShow:{type:Boolean},selectedTitle:{},hiddenImages:{},setRef:{type:Function},replaceFileNamePrefix:{type:Function},getImageUrl:{type:Function},onDragOver:{type:Function},isBorderChanged:{type:Function},isSelected:{type:Function},totalCount:{}},setup(e,{expose:t,emit:a}){const i=(0,o.KR)([]),u=(0,r.Pj)(),c=(0,s.EW)((()=>u.state.commonModule.siteCd)),d=(0,o.KR)(null),m=(0,o.KR)("Neutrophil-Segmented"),v=(0,o.KR)({}),p=(0,o.KR)("Neutrophil-Band"),g=(0,o.KR)(0),I=(0,o.KR)(0),f=(0,o.KR)({}),b=(0,o.KR)([]),y=(0,o.KR)("Neutrophil-Segmented"),C=(0,o.KR)("Neutrophil-Band"),h=(0,o.KR)(!0),k=((0,o.KR)(0),(0,o.KR)(0),e=>{const t=i.value[e];t&&t.scrollIntoView({behavior:"smooth"})});t({scrollToElement:k});const S=e,N=a,{wbcInfo:_}=(0,o.QW)(S),E=(0,o.KR)({...S.hiddenImages});(0,s.wB)(S.hiddenImages,(e=>{E.value={...e},h.value=!1})),(0,s.wB)(_,(e=>{w("first",null),w("last",null)}),{deep:!0});const L=e=>{N("update:cellRef",d),w("first",null),w("last",null),b.value=S.wbcInfo.filter((e=>"0006"!==c.value&&"SM"!==e?.title)),e===S.wbcInfo.length-1||e<S.wbcInfo.length-1?h.value=!1:h.value=!0},R=e=>t=>{t&&(i.value[e]=t)},w=(e,t)=>{const a=(e,a,l,s)=>{m.value!==p.value?(a.value=t?t.target.value:e.value,l.value=S.wbcInfo.find((t=>t?.name===e.value)),s.value=S.wbcInfo.findIndex((t=>t?.name===e.value))):e.value=a.value};"first"===e?a(m,y,v,g):a(p,C,f,I),"0"===S.totalCount&&(h.value=!1)};return(e,t)=>{const a=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[h.value?((0,s.uX)(),(0,s.CE)("div",xf,Bf)):(0,s.Q3)("",!0),(0,s.Lk)("ul",Uf,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(_),(a=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("li",{key:a.id,onClick:e=>k(a.id),onDragover:t[0]||(t[0]=(0,l.D$)((t=>e.$emit("onDragOverCircle")),["prevent"])),onDrop:t=>e.$emit("onDropCircle",a)},[(0,s.Lk)("div",Xf,[(0,s.Lk)("p",null,(0,n.v_)(a?.title),1),(0,s.Lk)("p",null,(0,n.v_)(a?.count),1)])],40,Wf)),[[l.aG,"0006"!==c.value&&"SM"!==a?.title]]))),128))]),e.classCompareShow?((0,s.uX)(),(0,s.CE)("div",Jf,[(0,s.Lk)("div",Qf,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>m.value=e),onChange:t[3]||(t[3]=e=>w("first",e))},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(b.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e.name},(0,n.v_)(e?.name),9,zf)))),128))],544),[[l.u1,m.value]]),(0,s.Lk)("ul",Zf,[(0,s.Lk)("li",null,[(0,s.Lk)("div",null,[(0,s.Lk)("p",eb,[(0,s.Lk)("input",{type:"checkbox",onInput:t[4]||(t[4]=t=>e.$emit("allCheckChange",t,v.value?.title)),checked:e.selectedTitle===v.value?.title},null,40,tb),(0,s.Lk)("label",null,(0,n.v_)(v.value?.title)+" ("+(0,n.v_)(v.value?.count)+") ",1)])]),(0,s.Lk)("ul",{class:(0,n.C4)("wbcImgWrap "+v.value?.title),onDragover:t[6]||(t[6]=(0,l.D$)(((...t)=>e.onDragOver&&e.onDragOver(...t)),["prevent"])),onDrop:t[7]||(t[7]=()=>e.$emit("onDrop",g.value))},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(v.value.images,((o,i)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("li",{key:o?.fileName,class:(0,n.C4)({"border-changed":e.isBorderChanged(o),"selected-image":e.isSelected(o),wbcImgWrapLi:!0}),onClick:()=>e.$emit("selectImage",g.value,i,v.value),onDblclick:()=>e.$emit("openModal",o,v.value),onContextmenu:(0,l.D$)((t=>e.$emit("handleRightClick",t,o,v.value)),["prevent"])},[(0,s.Lk)("div",lb,[o?(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",sb,[(0,s.Lk)("div",{class:"fileTitle",style:(0,n.Tr)({fontSize:o.width?parseInt(o.width)/6+"px":"15px"})},[(0,s.eW)((0,n.v_)(e.replaceFileNamePrefix(o.fileName))+" ",1),(0,s.bF)(a,{icon:["fas","arrow-right"]}),(0,s.eW)(" "+(0,n.v_)(o.title),1)],4)],512)),[[l.aG,e.replaceFileNamePrefix(o.fileName)!==v.value?.title]]):(0,s.Q3)("",!0),o&&o.fileName?(0,s.bo)(((0,s.uX)(),(0,s.CE)("img",{key:1,src:e.getImageUrl(o.fileName,v.value.id,v.value.title,""),width:o.width?o.width:"150px",height:o.height?o.height:"150px",style:(0,n.Tr)({filter:o.filter}),onDragstart:()=>e.$emit("onDragStart",g.value,i),draggable:"true",class:"cellImg",ref_for:!0,ref_key:"cellRef",ref:d,onError:()=>e.$emit("hideImage",v.value.id,o.fileName,v.value.title),onLoad:t[5]||(t[5]=e=>L(g.value))},null,44,ob)),[[l.aG,o&&!E.value[`${v.value.id}-${o.fileName}`]]]):(0,s.Q3)("",!0),o&&o.coordinates?((0,s.uX)(),(0,s.CE)("div",{key:2,class:"center-point",style:(0,n.Tr)(o.coordinates)},null,4)):(0,s.Q3)("",!0)])],42,ab)),[[l.aG,o&&!E.value[`${v.value.id}-${o.fileName}`]]]))),128))],34)])])]),(0,s.Lk)("div",nb,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>p.value=e),onChange:t[9]||(t[9]=e=>w("last",e))},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(b.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e.name},(0,n.v_)(e?.name),9,ib)))),128))],544),[[l.u1,p.value]]),(0,s.Lk)("ul",ub,[(0,s.Lk)("li",null,[(0,s.Lk)("div",null,[(0,s.Lk)("p",rb,[(0,s.Lk)("input",{type:"checkbox",onInput:t[10]||(t[10]=t=>e.$emit("allCheckChange",t,f.value?.title)),checked:e.selectedTitle===f.value?.title},null,40,cb),(0,s.eW)(" "+(0,n.v_)(f.value?.title)+" ("+(0,n.v_)(f.value?.count)+") ",1)])]),(0,s.Lk)("ul",{class:(0,n.C4)("wbcImgWrap "+f.value?.title),onDragover:t[12]||(t[12]=(0,l.D$)(((...t)=>e.onDragOver&&e.onDragOver(...t)),["prevent"])),onDrop:t[13]||(t[13]=()=>e.$emit("onDrop",I.value))},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(f.value.images,((o,i)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("li",{key:o?.fileName,class:(0,n.C4)({"border-changed":e.isBorderChanged(o),"selected-image":e.isSelected(o),wbcImgWrapLi:!0}),onClick:()=>e.$emit("selectImage",I.value,i,f.value),onDblclick:()=>e.$emit("openModal",o,f.value),onContextmenu:(0,l.D$)((t=>e.$emit("handleRightClick",t,o,f.value)),["prevent"])},[(0,s.Lk)("div",mb,[o?(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",vb,[(0,s.Lk)("div",{class:"fileTitle",style:(0,n.Tr)({fontSize:o.width?parseInt(o.width)/6+"px":"15px"})},[(0,s.eW)((0,n.v_)(e.replaceFileNamePrefix(o.fileName))+" ",1),(0,s.bF)(a,{icon:["fas","arrow-right"]}),(0,s.eW)(" "+(0,n.v_)(o.title),1)],4)],512)),[[l.aG,e.replaceFileNamePrefix(o.fileName)!==f.value?.title]]):(0,s.Q3)("",!0),o&&o.fileName?(0,s.bo)(((0,s.uX)(),(0,s.CE)("img",{key:1,src:e.getImageUrl(o.fileName,f.value.id,f.value.title,""),width:o.width?o.width:"150px",height:o.height?o.height:"150px",style:(0,n.Tr)({filter:o.filter}),onDragstart:()=>e.$emit("onDragStart",I.value,i),draggable:"true",class:"cellImg",ref_for:!0,ref_key:"cellRef",ref:d,onError:()=>e.$emit("hideImage",f.value.id,o.fileName,f.value.title),onLoad:t[11]||(t[11]=e=>L(I.value))},null,44,pb)),[[l.aG,o&&!E.value[`${f.value.id}-${o.fileName}`]]]):(0,s.Q3)("",!0),o&&o.coordinates?((0,s.uX)(),(0,s.CE)("div",{key:2,class:"center-point",style:(0,n.Tr)(o.coordinates)},null,4)):(0,s.Q3)("",!0)])],42,db)),[[l.aG,o&&!E.value[`${f.value.id}-${o.fileName}`]]]))),128))],34)])])])])):((0,s.uX)(),(0,s.CE)("ul",Ff,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(_),((o,i)=>((0,s.uX)(),(0,s.CE)("li",{key:o.id,ref_for:!0,ref:R(o.id)},[(0,s.bo)((0,s.Lk)("div",null,[(0,s.Lk)("p",$f,[(0,s.Lk)("input",{type:"checkbox",onInput:t=>e.$emit("allCheckChange",t,o.title),checked:e.selectedTitle===o.title},null,40,Gf),(0,s.eW)(" "+(0,n.v_)(o?.title)+" ("+(0,n.v_)(o?.count)+") ",1)])],512),[[l.aG,"0"!==o?.count&&0!==o?.count]]),(0,s.bo)((0,s.Lk)("ul",{class:(0,n.C4)("wbcImgWrap "+o?.title),onDragover:t[1]||(t[1]=(0,l.D$)(((...t)=>e.onDragOver&&e.onDragOver(...t)),["prevent"])),onDrop:()=>e.$emit("onDrop",i)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.images,((t,u)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("li",{key:t?.fileName,class:(0,n.C4)({"border-changed":e.isBorderChanged(t),"selected-image":e.isSelected(t),wbcImgWrapLi:!0}),onClick:()=>e.$emit("selectImage",i,u,o),onDblclick:()=>e.$emit("openModal",t,o),onContextmenu:(0,l.D$)((a=>e.$emit("handleRightClick",a,t,o)),["prevent"])},[(0,s.Lk)("div",Vf,[t?(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",Yf,[(0,s.Lk)("div",{class:"fileTitle",style:(0,n.Tr)({fontSize:t.width?parseInt(t.width)/6+"px":"15px"})},[(0,s.eW)((0,n.v_)(e.replaceFileNamePrefix(t.fileName))+" ",1),(0,s.bF)(a,{icon:["fas","arrow-right"]}),(0,s.eW)(" "+(0,n.v_)(t.title),1)],4)],512)),[[l.aG,e.replaceFileNamePrefix(t.fileName)!==o?.title]]):(0,s.Q3)("",!0),t&&t.fileName?(0,s.bo)(((0,s.uX)(),(0,s.CE)("img",{key:1,src:e.getImageUrl(t.fileName,o.id,o.title,""),width:t.width?t.width:"150px",height:t.height?t.height:"150px",style:(0,n.Tr)({filter:t.filter}),onDragstart:()=>e.$emit("onDragStart",i,u),draggable:"true",class:"cellImg",ref_for:!0,ref_key:"cellRef",ref:d,onError:()=>e.$emit("hideImage",o.id,t.fileName,o.title),onLoad:e=>L(i)},null,44,qf)),[[l.aG,t&&!E.value[`${o.id}-${t.fileName}`]]]):(0,s.Q3)("",!0),t&&t.coordinates?((0,s.uX)(),(0,s.CE)("div",{key:2,class:"center-point",style:(0,n.Tr)(t.coordinates)},null,4)):(0,s.Q3)("",!0)])],42,jf)),[[l.aG,t&&!E.value[`${o.id}-${t.fileName}`]]]))),128))],42,Hf),[[l.aG,"0"!==o?.count&&0!==o?.count]])])))),128))]))],64)}}});const Ib=gb;var fb=Ib;const bb={class:"moveImgIsBool"},yb={class:"wbcContent"},Cb={class:"topClintInfo"},hb={class:"imgMenuSetDiv"},kb={class:"sizeContainer"},Sb={class:"imgSetWrap",ref:"imgSetWrap"},Nb={class:"imgSet"},_b={class:"alignItemsCenter"},Eb=(0,s.Lk)("label",null,"R",-1),Lb={class:"alignItemsCenter"},Rb=(0,s.Lk)("label",null,"G",-1),wb={class:"alignItemsCenter"},Tb=(0,s.Lk)("label",null,"B",-1),Pb=["onClick"],Ab={class:"wbcModal"},Db={class:"wbcModalImageContent"},Mb=["src"];var xb=(0,s.pM)({__name:"listDetail",setup(e){const t=(0,o.KR)(""),a=(0,o.KR)(null),i=(0,o.KR)(null),u=(0,o.KR)(null),c=(0,r.Pj)(),d=(0,o.KR)(""),m=(0,s.EW)((()=>c.state.userModule)),v=(0,s.EW)((()=>c.state.commonModule.cbcLayer)),p=(0,s.EW)((()=>c.state.commonModule.moveImgIsBool)),f=(0,s.EW)((()=>c.state.commonModule.classInfoSort)),b=(0,o.KR)(c.state.commonModule.iaRootPath),y=(0,s.EW)((()=>c.state.commonModule.siteCd)),C=(0,s.EW)((()=>c.state.commonModule.selectedSampleId)),h=(0,o.KR)(null),k=(0,o.KR)(null),S=(0,o.KR)(!1),N=(0,o.KR)(!1),_=(0,o.KR)(null),E=(0,o.KR)(null),L=(0,o.KR)([]),R=(0,o.KR)(null),w=(0,o.KR)([]),T=(0,o.KR)([]),P=[],A=(0,o.KR)(150),D=(0,o.KR)(100),M=(0,o.KR)([0,0,0]),x=(0,o.KR)("ME"),K=(0,o.KR)(""),O=(0,o.KR)(null),B=(0,o.KR)(!1),U=(0,o.KR)(!1),W=(0,o.KR)(""),X=(0,o.KR)("150px"),F=(0,o.KR)("150px"),$=(0,o.KR)(!1),G="viewer"===sessionStorage.getItem("viewerCheck")?window.MAIN_API_IP:window.APP_API_BASE_URL,H=(0,o.KR)([]),j=(0,o.KR)([]),V=(0,o.KR)([]),Y=((0,s.nI)(),(0,o.KR)("bm")),q=(0,o.KR)("0.9"),J=(0,o.KR)([]),Q=(0,o.KR)([]),z=(0,o.KR)([]),Z=(0,o.KR)(!1),ee=(0,o.KR)({}),te=(0,o.KR)(!1),ae=(0,o.KR)(0),le=(0,o.KR)(0),se=(0,o.KR)(null),oe=(0,o.KR)(!1),ne=(0,o.KR)(!1),ie=(0,o.KR)(!0),ue=(0,o.KR)(null),re=(0,o.KR)(!1),de=(0,o.KR)(""),me=(0,o.KR)("");(0,s.KC)((async()=>{ie.value=!1})),(0,s.sV)((async()=>{a.value=[],Y.value=window.PROJECT_TYPE,window.addEventListener("keydown",lt),window.addEventListener("keyup",ot),document.body.addEventListener("click",at),await we(!1,null),document.addEventListener("click",_e);const e=""!==u.value?.rootPath&&u.value?.rootPath?u.value?.rootPath:c.state.commonModule.iaRootPath;b.value=e,await ye()})),(0,s.hi)((async()=>{document.addEventListener("click",_e)})),(0,s.wB)(D,(e=>{localStorage.setItem("imgBrightness",String(e))})),(0,s.wB)(A,(e=>{localStorage.setItem("imageSize",String(e))})),(0,s.wB)(M,(e=>{const t=e[0],a=e[1],l=e[2];localStorage.setItem("imageRgb",JSON.stringify([t,a,l]))}),{deep:!0}),(0,s.wB)((()=>p.value),(e=>{e?fr():br()}));const pe=async()=>{try{const e=await or(String(C.value));u.value=e.data}catch(e){console.log(e)}},ge=e=>{O.value=e.value},fe=()=>{ne.value=!ne.value},be=e=>Math.floor((e-50)/240*170+30)+"%",ye=async()=>{const e=localStorage.getItem("imgBrightness"),t=localStorage.getItem("imageRgb"),l=localStorage.getItem("imageSize");t&&(M.value=JSON.parse(t)),e&&(D.value=Number(e)),l&&(A.value=Number(l));const s=255-M.value[0],o=255-M.value[1],n=255-M.value[2];a.value.forEach((e=>{e.images.forEach((e=>{e.filter=`opacity(0.9) drop-shadow(0 0 0 rgb(${s}, ${o}, ${n})) brightness(${D.value}%)`,e.width=Number(A.value),e.height=Number(A.value)}))}))},Ce=()=>{oe.value=!0},he=()=>{oe.value=!1},ke=(e,t,a)=>{e.preventDefault(),Ee(e,a)};function Se(e,t,a){ee.value[`${e}-${t}`]=!0}const Ne=()=>{Z.value=!Z.value},_e=e=>{e.target.closest(".imgSetWrap")||($.value=!1,t.value=""),e.target.closest(".sizeContainer, .sizeButton")||(Z.value=!1)};document.addEventListener("click",(e=>{te.value&&(te.value=!1)}));const Ee=(e,t)=>{const a=506,l=window.innerHeight,s=e.clientX,o=e.clientY;te.value=!0;let n=s,i=o;i=o+a>l?o-a:o;const u=200;n+u>window.innerWidth&&(n=window.innerWidth-u),ae.value=n,le.value=i,se.value=t},Le=async(e,t)=>{if(!w.value||0===Object.entries(w.value).length)return re.value=!0,de.value="error",void(me.value="Please select an image");const l=a.value.find((t=>t.id===e.id));if(se.value.title===l.title)return re.value=!0,de.value="error",void(me.value="Transfer to different classes is the only option available.");Ze();const s=a.value[t];if(se.value){const t=a.value.findIndex((t=>t.id===e.id));await gt(t,w.value,s,a.value[t],!1,"",a.value),te.value=!1}te.value=!1},Re=async(e,t)=>{let a=e.slice();a.sort(((e,a)=>{const l=t.findIndex((t=>(t.title||t.abbreviation)===(e.title||e.abbreviation))),s=t.findIndex((e=>(e.title||e.abbreviation)===(a.title||a.abbreviation)));return-1===l?1:-1===s?-1:l-s})),e.splice(0,e.length,...a)},we=async(e,t)=>{a.value=[],await pe();try{const l=await ce(),s=l.data,o=s.filter((e=>e.abbreviation)),n=sessionStorage.getItem("customClass"),i=JSON.parse(n);i&&i.forEach((e=>{const t=s.find((t=>t.customNum===e.customNum&&t.abbreviation!==e.abbreviation));if(t){if(""===e?.abbreviation)return;const t=`${b.value}/${u.value?.slotId}/${_t(Y.value)}/${e.customNum}_${e?.abbreviation}`;qg({path:t})}})),sessionStorage.setItem("customClass",JSON.stringify(s)),H.value=s;let r=[];if(r=0!==u.value?.wbcInfoAfter.length?u.value?.wbcInfoAfter:u.value?.wbcInfo.wbcInfo[0],0!==o.length)for(const e of o){const{fullNm:t,abbreviation:l,customNum:s}=e,o=`${b.value}/${u.value?.slotId}/${_t(Y.value)}/${s}_${l}`;await Yg({path:o});const n={id:s,name:t,count:"0",images:[],title:l},i=r.find((e=>e.id===n.id&&e.name===n.name));i||(r.push(n),a.value=r,await yt("notWbcAfterSave"))}else{const e=[],t="bm"===window.PROJECT_TYPE?Ca:ya;r.forEach((a=>{const l=t.find((e=>e.id===a.id));if(!l){const t=`${b.value}/${u.value?.slotId}/${_t(Y.value)}/${a}_${a?.title}`;qg({path:t}),e.push(a)}})),e.forEach((e=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)})),u.value.wbcInfoAfter=r,a.value=u.value.wbcInfoAfter,await yt()}await Pe(),await Te(),await it(),await nt(o,e,t)}catch(l){console.log(l)}},Te=async()=>{try{const e=await Ie();if(e&&e?.data){const t=e.data;V.value=t}}catch(e){console.log(e)}},Pe=async()=>{try{const e=await ve();e&&e?.data&&(j.value=e.data)}catch(e){console.log(e)}};function Ae(e){const t=e.fileName.split("_")[0],a={NES:"NS",NEB:"NB"},l=Object.keys(a).reduce(((e,t)=>e.replace(t,a[t])),t);return e.title!==l}function De(e){const t={NES:"NS",NEB:"NB"},a=e.split("_")[0],l=Object.keys(t).reduce(((e,a)=>e.replace(a,t[a])),a);return l}const Me=(e,t)=>{U.value=!0,W.value=ht(e.fileName,t.id,t.title,"getImageRealTime")},xe=()=>{U.value=!1},Ke=e=>{e.target.classList.contains("wbc-modal-content")&&(U.value=!1)},Oe=()=>{$.value=!$.value},Be=()=>{let e=Math.min(parseFloat(X.value)+50,400),t=Math.min(parseFloat(F.value)+50,400);X.value=`${e}px`,F.value=`${t}px`},Ue=()=>{let e=Math.max(parseFloat(X.value)-50,150),t=Math.max(parseFloat(F.value)-50,150);X.value=`${e}px`,F.value=`${t}px`};(0,s.wB)(m.value,((e,t)=>{d.value=e.id})),(0,s.wB)((()=>f.value),(async e=>{await it();const t=0!==z.value.length?z.value:"bm"===window.PROJECT_TYPE?ka:ha;await Re(a.value,t)}));const We=async e=>{B.value=!1,ne.value=!1,u.value=e;const t=""!==u.value?.rootPath&&u.value?.rootPath?u.value?.rootPath:c.state.commonModule.iaRootPath;b.value=t,await we(!0,e),await ye()},Xe=async e=>{if(e||(B.value=!B.value),B.value){let e="";"pb"===Y.value?e=`${b.value}/${u.value?.slotId}/${"01"===u.value.testType||"04"===u.value?.testType?"01_WBC_Classification":"05_BF_Classification"}/${u.value?.slotId}.json`:"bm"===Y.value&&(e=`${b.value}/${u.value?.slotId}/${_t(Y.value)}/${u.value?.slotId}.json`);const t=await dr({fullPath:e});if(t&&t.success){const e=t.data;a.value.forEach((t=>{0!==t.images.length&&t.images.forEach((t=>{const a=O.value,l=e.find((e=>e?.FILE_NM===t?.fileName));if(l){const e=(a[0]?.width||150)/Number(l.ORG_WIDTH)*100,s=(a[0]?.height||150)/Number(l.ORG_HEIGHT)*100,o=(Number(l.POSX2)-Number(l.POSX1))*(e/100),n=(Number(l.POSY2)-Number(l.POSY1))*(s/100),i=a[0]?.offsetLeft+Number(l.POSX1)*(e/100)+o/2+"px",u=a[0]?.offsetTop+Number(l.POSY1)*(s/100)+n/2+"px";t.coordinates={position:"absolute",left:i,top:u,width:"5px",height:"5px",background:"#10ff00"}}}))}))}}else a.value.forEach((e=>{e.images.forEach((e=>{e.coordinates={display:"none"}}))}))},Fe=(e,a)=>{K.value=e?.target?.checked?a:"",t.value=e?.target?.checked?a:"",$e()},$e=()=>{w.value=[],J.value=[],Q.value=[];for(const e in a.value)if(K.value===a.value[e].title)for(const t in a.value[e].images){const l={id:a.value[e].id,title:a.value[e].title,...a.value[e].images[t]};w.value.push(l),J.value.push(l)}},He=e=>{ue.value&&ue.value.scrollToElement(e)};function je(){M.value=[0,0,0],q.value="0.9",qe("reset")}function Ve(){Xe(!0),A.value=150,a.value.forEach((e=>{e.images.forEach((e=>{e.width=150,e.height=150}))}))}function Ye(){D.value=100,q.value="0.9",qe("reset")}function qe(e){const t=x.value;if(!t)return void je();"reset"!==e&&(q.value="0.9");const l=M.value[0],s=M.value[1],o=M.value[2];a.value.forEach((e=>{e.images.forEach((e=>{e.filter=`opacity(${q.value}) drop-shadow(0 0 0 rgb(${l}, ${s}, ${o})) brightness(${D.value}%)`}))}))}function Je(e){const t=M.value[0],l=M.value[1],s=M.value[2],o=e?.target?.value;a.value.forEach((e=>{e.images.forEach((e=>{e.filter=`opacity(0.9) drop-shadow(0 0 0 rgb(${t}, ${l}, ${s})) brightness(${o}%)`}))}))}function Qe(e){a.value.forEach((t=>{t.images.forEach((t=>{let a=e?.target?.value,l=e?.target?.value;t.width=Number(a),t.height=Number(l)}))})),Xe(!0)}function ze(){}function Ze(){P.push(JSON.parse(JSON.stringify(a.value)))}async function tt(e){const t=a.value[E.value];if(e.id!==t.id)if(Ze(),0===w.value.length){const l=t.images[R.value];e.images.push(l);const s=a.value.findIndex((t=>t.id===e.id));-1!==s?a.value[s].images.push(l):console.error("일치하는 id를 가진 요소 없음"),await gt(s,[{fileName:l.fileName}],t,a.value[s],!1)}else{const l=a.value.findIndex((t=>t.id===e.id));await gt(l,w.value,t,a.value[l],!1,"",a.value)}}function at(e){const t=e.target;t.closest(".wbcImgWrapLi")||t.closest(".context-menu")||(w.value=[],T.value=[],J.value=[])}async function lt(e){e.shiftKey&&(S.value=!0),e.ctrlKey&&(N.value=!0),"pb"===Y.value?e.key&&("01"===u.value?.testType||"04"===u.value?.testType?j.value:V.value).some((t=>t.key.toUpperCase()===e.key.toUpperCase()))&&await st(("01"===u.value?.testType||"04"===u.value?.testType?j.value:V.value).find((t=>t.key.toUpperCase()===e.key.toUpperCase()))):"bm"===Y.value&&e.key&&j.value.some((t=>t.key.toUpperCase()===e.key.toUpperCase()))&&await st(j.value.find((t=>t.key.toUpperCase()===e.key.toUpperCase())))}async function st(e){const t=a.value.findIndex((t=>(t.title||t.abbreviation)===(e.title||e.abbreviation))),l=w.value;Ze();for(const s of l){const l=a.value.findIndex((e=>(e.title||e.abbreviation)===(s.title||s.abbreviation))),o=a.value[l],n=o.images.findIndex((e=>e.fileName===s.fileName));-1!==n&&await gt(t,[{fileName:s.fileName,id:s.id,title:s.title}],e,a.value[t],!0,"keyMove")}}function ot(e){e.shiftKey||(S.value=!1),e.ctrlKey||(N.value=!1)}async function nt(e,t,l){a.value=[];let s=[];t?(a.value=0!==l.wbcInfoAfter.length?l.wbcInfoAfter:l.wbcInfo.wbcInfo[0],s=l):(a.value=0!==u.value.wbcInfoAfter.length?u.value.wbcInfoAfter:u.value.wbcInfo.wbcInfo[0],s=u.value),s.wbcInfoAfter&&0!==s.wbcInfoAfter.length?(a.value=s.wbcInfoAfter,s.wbcInfo.wbcInfo[0].forEach((e=>{const t=e.title,a=s.wbcInfoAfter.find((e=>e.title===t));a&&a.images.forEach((e=>{e.title=t}))}))):(a.value=s.wbcInfo.wbcInfo[0],s.wbcInfo.wbcInfo[0].forEach((e=>{e.images&&e.images.length>0&&e.images.forEach((t=>{t.title=e.title}))}))),""!==e&&(s.wbcInfo.wbcInfo[0]=s.wbcInfo.wbcInfo[0].filter((t=>!e.find((e=>e.customNum===t.id&&""===e.abbreviation)))));const o=a.value.map((e=>e.id)),n=s.wbcInfo.wbcInfo[0].filter((e=>!o.includes(e.id)));a.value=[...a.value,...n];const i=z.value.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx))),r=0!==z.value.length?i:"bm"===window.PROJECT_TYPE?Ca:ya;await Re(a.value,r)}const it=async()=>{try{const e=await Ge();e&&(0===e?.data.length?z.value=[]:z.value=e.data.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx))))}catch(e){console.log(e)}};function ut(){}function rt(e,t){h.value=e,k.value=t,R.value=t,E.value=e,L.value.push(e)}function ct(e,l,s){if(S.value){if(null!==_.value){T.value.push(l);const o=Math.min(_.value,l),n=Math.max(_.value,l);w.value=[],J.value=[];for(let t=o;t<=n;t++)w.value.push({id:a.value[e].id,title:a.value[e].title,...a.value[e].images[t]}),J.value.push(s);J.value.length===n-o+1&&(t.value=a.value[0].title)}}else{_.value=l;const t=a.value[e].images[l];if(!N.value)return w.value=[],J.value=[],w.value.push({...t,id:a.value[e].id}),void J.value.push(s);const o=w.value.findIndex((e=>e===t));-1===o?(w.value.push({...t,id:a.value[e].id}),J.value.push(s)):(w.value.splice(o,1),J.value.splice(o,1))}}function dt(e){const t=e.fileName;return w.value.some((e=>e.fileName===t))}async function mt(e){if(Ze(),0===w.value.length)return await vt(e);await c.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!0});for(const l of w.value){const s=l.fileName,o=a.value.findIndex((e=>e.images.some((e=>e.fileName===s)))),n=a.value[o];n.id!==a.value[e].id?await gt(e,[{fileName:l.fileName}],n,a.value[e],!1):t.value=""}await c.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!1}),w.value=[],J.value=[],T.value=[]}async function vt(e){if(null!==h.value&&null!==k.value&&h.value!==e){const t=a.value[h.value],l=t.images[k.value];await gt(e,[{fileName:l.fileName}],t,a.value[e],!1)}}let pt=null;async function gt(e,l,s,o,n,i,r){const{slotId:d}=u.value,m=l;let v=[],p=[],g=[];for(const t of m){const l=t.fileName;if(g.push(l),"keyMove"===i){const l="bm"===window.PROJECT_TYPE?Ca:ya,i=l.find((e=>e.abbreviation===(t.title||t.abbreviation))),u=n?`${b.value}/${d}/${_t(Y.value)}/${i?.id}_${t.title}`:`${b.value}/${d}/${_t(Y.value)}/${i?.id}_${s.title}`,r=`${b.value}/${d}/${_t(Y.value)}/${o.id}_${o.title}`;p.push(r),v.push(u);const m={sourceFolders:v,destinationFolders:p,fileNames:g};await c.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!0});const I=await kp(m);if(I){const l=a.value.findIndex((e=>e.title===(t.title||t.abbreviation))),s=a.value[l],o=s.images.findIndex((e=>e.fileName===t.fileName));if(-1!==o){const t=s.images.splice(o,1)[0];t.title=a.value[e].title,t.width=A.value,t.height=A.value,a.value[e].images.push(t),s.count--,a.value[e].count++}w.value=[],J.value=[],T.value=[],await yt(),await c.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!1}),pt=null}return}if(!r&&"keyMove"!==i){const i=n?`${b.value}/${d}/${_t(Y.value)}/${t.id}_${t.title}`:`${b.value}/${d}/${_t(Y.value)}/${s.id}_${s.title}`,u=`${b.value}/${d}/${_t(Y.value)}/${o.id}_${o.title}`;p.push(u),v.push(i);const r={sourceFolders:v,destinationFolders:p,fileNames:g};let c=await kp(r);if(c){const o=s.images.findIndex((e=>e.fileName===l));s.images.splice(o,1);const n={width:A.value,height:A.value};a.value[e].images.push({...t,...n}),a.value=ft(a.value),a.value.forEach((e=>{e.count=e.images.length,e.images.length>0&&e.images.forEach((t=>{t.title=e.title}))}))}}}if(r){await c.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!0});for(const e of J.value){const t="bm"===window.PROJECT_TYPE?Ca:ya,a=t.find((t=>t.abbreviation===(e.title||e.abbreviation))),l=`${b.value}/${d}/${_t(Y.value)}/${a?.id}_${e.title}`,s=`${b.value}/${d}/${_t(Y.value)}/${o.id}_${o.title}`;p.push(s),v.push(l)}const t={sourceFolders:v,destinationFolders:p,fileNames:g};let s=await kp(t);if(s){const t=a.value[e];for(const e of It(J.value,"title")){const s=l.filter((t=>t.title===(e.title||e.abbreviation)));t.images.push(...s),t.count=t.images.length;const o=a.value.findIndex((t=>t.title===(e.title||e.abbreviation)));if(-1!==o){const e=a.value[o],t=l.map((e=>e.fileName)),s=e.images.filter((e=>!t.includes(e.fileName)));e.images=s,e.count=e.images.length}}for(const s of l)s.title=a.value[e].title,s.width=A.value,s.height=A.value;await c.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!1})}else await c.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!1})}w.value=[],J.value=[],T.value=[],K.value="",t.value="",await yt()}function It(e,t){const a=new Set;return e.filter((e=>{const l=e[t];return!a.has(l)&&(a.add(l),!0)}))}function ft(e){const t=new Set;return e.map((e=>{const a=e.images.filter((e=>!t.has(e.fileName)&&(t.add(e.fileName),!0)));return{...e,images:a}}))}const bt=(e,t)=>{e||""!==e||(e="0000",t="01");const a={"0006":{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","SM","NE","GP","PA","OT"]}},l=a[e]||{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","NE","SM","GP","PA","OT"]};return"01"===t||"04"===t?l.includesStr:l.includesStr2};async function yt(e){let t=[],l=JSON.parse(JSON.stringify(a.value)),s=0;l.forEach((e=>{if("bm"===Y.value)"OT"!==e.title&&(s+=Number(e.count));else{const t=bt(y.value,u.value?.testType);t.includes(e.title)||(s+=Number(e.count))}})),l.forEach((e=>{if(e.images.forEach((e=>{delete e.width,delete e.height,delete e.filter})),"bm"===Y.value){if("OT"!==e.title){const t=(Number(e.count)/Number(s)*100).toFixed(1);e.percent=Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t}}else{const t=bt(y.value,u.value?.testType);if(!t.includes(e.title)){const t=(Number(e.count)/Number(s)*100).toFixed(1);e.percent=Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t}}}));let o=[];const n=l.map((e=>{const t=e.images.filter((e=>!o.includes(e.fileName)&&(o.push(e.fileName),!0)));return{...e,images:t}}));if(l=n,"notWbcAfterSave"!==e){u.value.wbcInfoAfter=l,await c.dispatch("commonModule/setCommonInfo",{selectedSampleId:u.value?.id}),await c.dispatch("commonModule/setCommonInfo",{clonedWbcInfo:l});const e=await or(String(u.value?.id));e&&(e.data.wbcInfoAfter=l),t=[e.data]}await Ct(l,t)}async function Ct(e,t){try{const e=await ar({userId:Number(d.value),runingInfoDtoItems:t});e?B.value&&(await Xe(!0),await we(!1,null)):console.error("백엔드가 디비에 저장 실패함")}catch(a){console.error("Error:",a)}}function ht(e,t,l,s,o){if(!a.value||0===a.value.length)return"";const n=u.value?.slotId||"";let i=`${b.value}/${n}/${_t(Y.value)}/${t}_${l}`,r="";return r="getImageRealTime"===s||"pb"===Y.value?`${G}/images/getImageRealTime?folder=${i}&imageName=${e}`:`${G}/images?folder=${i}&imageName=${e}`,r}async function kt(){if(P.length<=0)return;const e=P.pop();h.value=null,k.value=null,E.value=null,L.value=[],R.value=null,w.value=[],J.value=[],T.value=[],await Nt(a.value,e),a.value=e}const St=(e,t,a)=>{e.forEach(((e,l)=>{const s=t[l];e&&s&&e.images.forEach(((e,t)=>{const o=s.images[t];void 0===o&&a.push({itemIndex:l,imageIndex:t,fileName:e.fileName,title:s.title,id:s.id})}))}))};async function Nt(e,t){const l=[],s=[];St(e,t,l),St(t,e,s);let o=[],n=[],r=[];for(const a in l){const e=`${b.value}/${u.value?.slotId}/${_t(Y.value)}/${l[a].id}_${l[a].title}`,t=`${b.value}/${u.value?.slotId}/${_t(Y.value)}/${s[a].id}_${s[a].title}`;o.push(e),n.push(t),r.push(l[a].fileName)}const c={sourceFolders:o,destinationFolders:n,fileNames:r};let d=await kp(c);d&&(a.value=t),i.value=a.value;const m=z.value.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx))),v=0!==z.value.length?m:"bm"===window.PROJECT_TYPE?Ca:ya;await Re(a.value,v),await yt()}const _t=e=>"bm"===e?"04_BM_Classification":"pb"===e?"01_WBC_Classification":void 0,Et=()=>{re.value=!1};return(e,r)=>{const c=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bo)((0,s.Lk)("div",bb," Moving image...",512),[[l.aG,p.value]]),(0,s.bF)(kg,{onRefreshClass:We,isNext:oe.value,onIsNextFalse:he},null,8,["isNext"]),(0,s.Lk)("div",yb,[(0,s.Lk)("div",Cb,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,(0,n.v_)("bm"===Y.value?(0,o.R1)(I)(u.value?.testType):(0,o.R1)(g)(u.value?.testType)),1),(0,s.Lk)("li",null,(0,n.v_)(u.value?.barcodeNo),1),(0,s.Lk)("li",null,(0,n.v_)(u.value?.patientId||"patientId No Data"),1),(0,s.Lk)("li",null,(0,n.v_)(u.value?.cbcPatientNo),1),(0,s.Lk)("li",null,(0,n.v_)(u.value?.patientName),1),(0,s.Lk)("li",null,(0,n.v_)(u.value?.cbcPatientNm)+" "+(0,n.v_)(u.value?.cbcSex)+" "+(0,n.v_)(u.value?.cbcAge),1),(0,s.Lk)("li",null,(0,n.v_)(u.value?.analyzedDttm),1)])]),v.value?((0,s.uX)(),(0,s.Wv)(xg,{key:0,selectItems:u.value},null,8,["selectItems"])):(0,s.Q3)("",!0),(0,s.Lk)("div",{class:(0,n.C4)("databaseWbcRight shadowBox"+(v.value?" cbcLayer":""))},[ie.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(WI,{key:0,wbcInfo:a.value,selectItems:u.value,classCompareShow:ne.value,type:"listTable",onNextPage:Ce,onScrollEvent:He},null,8,["wbcInfo","selectItems","classCompareShow"]))],2),(0,s.Lk)("div",{class:(0,n.C4)("databaseWbcLeft"+(v.value?" cbcLayer":""))},[(0,s.Lk)("div",hb,[(0,s.Lk)("button",{type:"button",onClick:r[0]||(r[0]=e=>Xe(!1))},[(0,s.bF)(c,{icon:B.value?["fas","toggle-on"]:["fas","toggle-off"]},null,8,["icon"]),(0,s.eW)(" Cell Marking ")]),(0,s.Lk)("button",{onClick:Ne,class:"sizeButton"},[(0,s.bF)(c,{icon:["fas","plus-minus"]}),(0,s.eW)(" Size ")]),(0,s.bo)((0,s.Lk)("div",kb,[(0,s.Lk)("div",null,[(0,s.eW)(" Size "+(0,n.v_)(be(A.value))+" ",1),(0,s.bF)(c,{icon:["fas","undo"],onClick:Ve}),(0,s.bo)((0,s.Lk)("input",{type:"range",min:"50",max:"290","onUpdate:modelValue":r[1]||(r[1]=e=>A.value=e),onInput:Qe},null,544),[[l.Jo,A.value]])])],512),[[l.aG,Z.value]]),(0,s.Lk)("div",Sb,[(0,s.Lk)("button",{onClick:Oe},[(0,s.bF)(c,{icon:["fas","gear"]}),(0,s.eW)(" IMG Setting ")]),(0,s.bo)((0,s.Lk)("div",Nb,[(0,s.Lk)("div",null,[(0,s.bF)(c,{icon:["fas","sun"]}),(0,s.eW)(" Brightness "+(0,n.v_)(D.value)+" ",1),(0,s.bo)((0,s.Lk)("input",{type:"range",min:"50",max:"120","onUpdate:modelValue":r[2]||(r[2]=e=>D.value=e),onInput:Je},null,544),[[l.Jo,D.value]]),(0,s.Lk)("button",{class:"resetBtn mb2",onClick:Ye},"Brightness Reset")]),(0,s.Lk)("div",null,[(0,s.bF)(c,{icon:["fas","palette"]}),(0,s.eW)(" RGB [ "+(0,n.v_)(`${M.value[0]} , ${M.value[1]}, ${M.value[2]}`)+" ] ",1),(0,s.Lk)("div",_b,[Eb,(0,s.bo)((0,s.Lk)("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":r[3]||(r[3]=e=>M.value[0]=e),onInput:r[4]||(r[4]=e=>qe(""))},null,544),[[l.Jo,M.value[0]]])]),(0,s.Lk)("div",Lb,[Rb,(0,s.bo)((0,s.Lk)("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":r[5]||(r[5]=e=>M.value[1]=e),onInput:r[6]||(r[6]=e=>qe(""))},null,544),[[l.Jo,M.value[1]]])]),(0,s.Lk)("div",wb,[Tb,(0,s.bo)((0,s.Lk)("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":r[7]||(r[7]=e=>M.value[2]=e),onInput:r[8]||(r[8]=e=>qe(""))},null,544),[[l.Jo,M.value[2]]])]),(0,s.Lk)("button",{class:"resetBtn",onClick:je},"RGB Reset")])],512),[[l.aG,$.value]])],512),(0,s.Lk)("button",{onClick:fe},[(0,s.bF)(c,{icon:["fas","code-compare"]}),(0,s.eW)(" Class Compare ")]),(0,s.Lk)("button",{onClick:kt,class:"rollbackButton"},[(0,s.bF)(c,{icon:["fas","rotate-left"]}),(0,s.eW)(" Rollback ")])]),(0,s.Lk)("div",null,[(0,s.bF)(fb,{ref_key:"$imageGalleryRef",ref:ue,wbcInfo:a.value,totalCount:u.value?.wbcInfo?.totalCount,classCompareShow:ne.value,selectedTitle:t.value,hiddenImages:ee.value,replaceFileNamePrefix:De,getImageUrl:ht,onDragOver:ut,isBorderChanged:Ae,isSelected:dt,updateWbcInfo:i.value,onAllCheckChange:Fe,onSelectImage:ct,onOpenModal:Me,onHideImage:Se,onHandleRightClick:ke,onOnDrop:mt,onOnDragStart:rt,onOnDropCircle:tt,onOnDragOverCircle:ze,onScrollToElement:He,cellRef:O.value,"onUpdate:cellRef":ge},null,8,["wbcInfo","totalCount","classCompareShow","selectedTitle","hiddenImages","updateWbcInfo","cellRef"])]),te.value?((0,s.uX)(),(0,s.CE)("div",{key:0,style:(0,n.Tr)({top:le.value+"px",left:ae.value+"px"}),class:"context-menu detail"},[(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t,onClick:a=>Le(e,t)},(0,n.v_)(e.name),9,Pb)))),128))])],4)):(0,s.Q3)("",!0),(0,s.bo)((0,s.Lk)("div",Ab,[(0,s.Lk)("div",{class:"wbc-modal-content",onClick:Ke},[(0,s.Lk)("span",{class:"wbcClose",onClick:xe},"×"),(0,s.Lk)("div",Db,[(0,s.Lk)("img",{src:W.value,style:(0,n.Tr)({width:X.value,height:F.value}),class:"modal-image"},null,12,Mb)]),(0,s.Lk)("div",{class:"buttons"},[(0,s.Lk)("button",{onClick:Be},"+"),(0,s.Lk)("button",{onClick:Ue},"-")])])],512),[[l.aG,U.value]])],2)]),re.value?((0,s.uX)(),(0,s.Wv)(et,{key:0,"is-visible":re.value,type:de.value,message:me.value,onHide:Et,"onUpdate:hideAlert":Et},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const Kb=xb;var Ob=Kb;const Bb=e=>((0,s.Qi)("data-v-0dc8a6ac"),e=e(),(0,s.jt)(),e),Ub={key:0,class:"overlay"},Wb=Bb((()=>(0,s.Lk)("div",{class:"spinner"},null,-1))),Xb=[Wb];var Fb={__name:"LoadingOverlay",props:["type","isLoading"],setup(e){const t=e,a=(0,o.KR)(t.isLoading);return(0,s.wB)((()=>t.isLoading),(e=>{a.value=e})),(e,t)=>a.value?((0,s.uX)(),(0,s.CE)("div",Ub,Xb)):(0,s.Q3)("",!0)}};const $b=(0,is.A)(Fb,[["__scopeId","data-v-0dc8a6ac"]]);var Gb=$b;const Hb=(0,s.Lk)("div",{id:"viewerSmall"},null,-1),jb={class:"leftImgList"},Vb={class:"leftImgUl"},Yb=(0,s.Lk)("p",null,"Partical Image",-1),qb=["src","onDblclick"],Jb={class:"leftImgUl"},Qb=(0,s.Lk)("p",null,"Ideal Zone",-1),zb=["src","onDblclick"],Zb={class:"leftImgUl"},ey=(0,s.Lk)("p",null,"Ideal stitch",-1),ty=["src","onDblclick"],ay=(0,s.Lk)("p",null,"Megakaryocyte",-1),ly=["src","onDblclick"];var sy=(0,s.pM)({__name:"leftImgList",props:["selectItems"],setup(e){const t=e,a=((0,r.Pj)(),window.APP_API_BASE_URL||"http://192.168.0.131:3002"),l=(0,o.KR)([]),n=(0,o.KR)([]),i=(0,o.KR)([]),u=(0,o.KR)([]),c=["02_Particle_Image","03_Cell_Ideal_Image","04_Cell_Ideal_Stitch_Image","05_Mega_Image"],d=(0,o.KR)(!1),m=(0,o.KR)(!0),v=(0,o.KR)(0);let p=null;(0,s.sV)((async()=>{await(0,s.dY)(),await f()})),(0,s.wB)((()=>t.selectItems),(async e=>{await f()}));const g=(e,l)=>{let s;switch(l){case"particle":s="02_Particle_Image";break;case"idealZone":s="03_Cell_Ideal_Image";break;case"idealStitch":s="04_Cell_Ideal_Stitch_Image";break;case"mega":s="05_Mega_Image";break;default:break}const o=t.selectItems?.slotId||"",n=""!==t.selectItems?.img_drive_root_path&&t.selectItems?.img_drive_root_path?t.selectItems?.img_drive_root_path:sessionStorage.getItem("iaRootPath"),i=`${n}/${o}/${s}`;return`${a}/folders?folderPath=${i}/${e}`},I=(e,l)=>{let s;switch(l){case"particle":s="02_Particle_Image";break;case"idealZone":s="03_Cell_Ideal_Image";break;case"idealStitch":s="04_Cell_Ideal_Stitch_Image";break;case"mega":s="05_Mega_Image";break;default:break}const o=t.selectItems?.slotId||"",n=""!==t.selectItems?.rootPath&&t.selectItems?.rootPath?t.selectItems?.rootPath:sessionStorage.getItem("iaRootPath"),i=`${n}/${o}/${s}`;return`${a}/folders/getFilesInFolderWhole?folderPath=${i}/${e}`},f=()=>{const e=t.selectItems?.slotId||"",s=""!==t.selectItems?.rootPath&&t.selectItems?.rootPath?t.selectItems?.rootPath:sessionStorage.getItem("iaRootPath");for(const t of c)z.A.get(`${a}/folders?folderPath=${s}/${e}/${t}`).then((e=>{switch(t){case"02_Particle_Image":l.value=e.data.filter((e=>"Thumb"!==e)).slice(0,7);break;case"03_Cell_Ideal_Image":n.value=e.data.filter((e=>"Thumb"!==e)).slice(0,14);break;case"04_Cell_Ideal_Stitch_Image":i.value=e.data.filter((e=>"Thumb"!==e));break;case"05_Mega_Image":u.value=e.data.filter((e=>"Thumb"!==e));break}})).catch((e=>{console.error("Error:",e)}))},b=e=>{p&&p.destroy(),p=bp()({id:"viewerSmall",element:document.getElementById("viewerSmall"),tileSources:{type:"image",url:e},defaultZoomLevel:.2,navigator:!1,showZoomControl:!1,showHomeControl:!1,showFullScreenControl:!1,showRotationControl:!1,showFullPageControl:!1}),d.value=!0,p.addHandler("open",(function(){const e=p.source.dimensions.x,t=p.source.dimensions.y,a=document.getElementById("viewerSmall"),l=a.clientWidth,s=t/e,o=l*s;a.style.position="fixed",a.style.height=`${o}px`,a.style.width="100%",a.style.left="0",a.style.background="#00000061"}))},y=()=>{if(p){p.destroy();const e=document.getElementById("viewerSmall");e&&(e.innerHTML="",e.style.background="none",e.style.height="0",e.style.width="0",e.removeEventListener("click",y)),p=null,d.value=!1}},C=()=>{v.value++,v.value===l.value.length&&(m.value=!1)},h=()=>{v.value++,v.value===l.value.length&&(m.value=!1),console.log("Failed to load Image")};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[d.value?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"closeViewer",onClick:y},"x")):(0,s.Q3)("",!0),Hb,(0,s.Lk)("div",jb,[(0,s.Lk)("ul",Vb,[Yb,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t,class:"leftImgLi"},[(0,s.Lk)("img",{src:I(e,"particle"),alt:"Partical Image",onDblclick:t=>b(g(e,"particle")),onLoad:C,onError:h},null,40,qb)])))),128))]),(0,s.Lk)("ul",Jb,[Qb,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t,class:"leftImgLi",style:{width:"100px"}},[(0,s.Lk)("img",{src:I(e,"idealZone"),onDblclick:t=>b(g(e,"idealZone"))},null,40,zb)])))),128))]),(0,s.Lk)("ul",Zb,[(0,s.Lk)("div",null,[ey,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t,class:"leftImgLi"},[(0,s.Lk)("img",{src:I(e,"idealStitch"),onDblclick:t=>b(g(e,"idealStitch"))},null,40,ty)])))),128))]),(0,s.Lk)("div",null,[ay,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t,class:"leftImgLi"},[(0,s.Lk)("img",{src:I(e,"mega"),onDblclick:t=>b(g(e,"mega"))},null,40,ly)])))),128))])])]),(0,s.bF)(Gb,{isLoading:m.value},null,8,["isLoading"])],64))}});const oy=sy;var ny=oy;const iy=["src"],uy={class:"tilingViewerContainer",style:{height:"100%"},id:"tiling-container"};var ry=(0,s.pM)({__name:"tilingViewer",props:["selectItems"],setup(e){const t=e,a=(0,r.Pj)(),l=((0,s.EW)((()=>a.state.commonModule.iaRootPath)),(0,s.EW)((()=>a.state.commonModule.viewerCheck))),n="viewer"===l.value?window.MAIN_API_IP:window.APP_API_BASE_URL,i=(0,o.KR)(null),u=(0,o.KR)(null),c=(0,o.KR)(""),d=(0,o.KR)(""),m=(0,o.KR)("");let v=null;(0,s.sV)((async()=>{await p(!0)})),(0,s.wB)((()=>t.selectItems),(async e=>{await(0,s.dY)(),await p(!1)}));const p=async e=>{const a=u.value,l=t.selectItems?.slotId||"",s=""!==t.selectItems?.img_drive_root_path&&t.selectItems?.img_drive_root_path?t.selectItems?.img_drive_root_path:sessionStorage.getItem("iaRootPath"),o=`${s}/${l}/01_Stitching_Image`,i=`${n}/folders?folderPath=${o}/PMC_Result.jpg`;if(m.value=i,a&&a.complete){const t=a.naturalHeight,l=a.naturalWidth;0!==t&&(c.value=t,d.value=l,await g(t,e))}},g=async(e,a)=>{v&&v.destroy();const l=t.selectItems?.slotId||"",s=""!==t.selectItems?.img_drive_root_path&&t.selectItems?.img_drive_root_path?t.selectItems?.img_drive_root_path:sessionStorage.getItem("iaRootPath"),o=`${s}/${l}/01_Stitching_Image`,i=`${n}/folders?folderPath=${o}/PMC_Result.jpg`;m.value=i;try{const e=await I(o);v=bp()({id:"tiling-viewer",animationTime:.4,navigatorSizeRatio:.25,showNavigator:!0,sequenceMode:!0,defaultZoomLevel:1,prefixUrl:`${n}/folders?folderPath=D:/UIMD_Data/Res/uimdFe/images/`,tileSources:e,gestureSettingsMouse:{clickToZoom:!1}}),v.addHandler("open",(function(){v.source.dimensions.x,v.source.dimensions.y;const e=document.getElementById("tiling-viewer"),t=e.clientWidth;e.style.width=`${t}px`,e.style.position="absolute",e.style.left="50%",e.style.top="50%",e.style.transform="translate(-50%, -50%)"})),v.addHandler("zoom",(function(){const e=document.getElementById("tiling-viewer");a&&e&&(e.style.height="80vh")}))}catch(u){console.error("Error:",u)}},I=async e=>{const t=`${n}/folders?folderPath=${e}`,a=await fetch(t);if(!a.ok)throw new Error("Network response was not ok");const l=await a.json(),s=[];for(const o of l)o.endsWith("_files")&&s.push({Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2009",Url:`${n}/folders?folderPath=${e}/${o}/`,Format:"jpg",Overlap:"1",TileSize:"1024",Size:{Width:d.value,Height:c.value}}});return s};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("img",{src:m.value,ref_key:"hideImageRef",ref:u,style:{display:"none"},onLoad:t[0]||(t[0]=e=>p(!0))},null,40,iy),(0,s.Lk)("div",uy,[(0,s.Lk)("div",{ref_key:"tilingViewerLayer",ref:i,id:"tiling-viewer"},null,512)])],64))}});const cy=ry;var dy=cy;const my={class:"imgContent"},vy={class:"wrap-whole"},py={class:"leftWhole"};var gy=(0,s.pM)({__name:"index",setup(e){const t=(0,r.Pj)(),a=(0,s.EW)((()=>t.state.commonModule.selectedSampleId)),l=(0,o.KR)(null),n=(0,o.KR)(!1),i=(0,o.KR)(null),u=(0,o.KR)(null);(0,s.KC)((async()=>{await c()})),(0,s.sV)((async()=>{i.value=document.querySelector(".img")}));const c=async()=>{try{n.value=!0;const e=await or(String(a.value));l.value=e.data,n.value=!1}catch(e){console.log(e),l.value=null,n.value=!1}},d=async e=>{l.value=e};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(kg,{onRefreshClass:d}),(0,s.Lk)("div",my,[(0,s.Lk)("div",vy,[(0,s.Lk)("div",{ref_key:"imageContainer",ref:u,class:"image-container"},[n.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(dy,{key:0,selectItems:l.value},null,8,["selectItems"]))],512),(0,s.Lk)("div",py,[n.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(ny,{key:0,selectItems:l.value},null,8,["selectItems"]))])])])],64))}});const Iy=gy;var fy=Iy;const by=(0,u.aE)({history:(0,u.LA)(),routes:[{path:"/analysis",name:"AnalysisView",component:ms},{path:"/user/join",name:"join",component:Ms},{path:"/user/login",name:"login",component:zs},{path:"/setting",name:"setting",component:Zu},{path:"/database",name:"database",component:dv},{path:"/databaseDetail",name:"databaseDetail",component:Ob},{path:"/databaseWhole",name:"databaseWhole",component:fy},{path:"/databaseRbc",name:"databaseRbc",component:Wg},{path:"/report",name:"report",component:Mf}]});by.beforeEach(((e,t,a)=>{const l=sessionStorage.getItem("user"),s=JSON.parse(l||"{}"),o=(0,r.Pj)(),n=o.state.userModule;"login"===e.name||"join"===e.name||s.userId||n.userId?"database"===e.name?(o.dispatch("commonModule/setCommonInfo",{dataBasePageReset:!0}),a()):a():a("/user/login")}));var yy=by;const Cy=Z(),hy=async()=>Cy.httpGet(ee.browser.exit),ky={class:"header"},Sy={class:"borderLine"},Ny=(0,s.Lk)("img",{src:i,class:"headerLogo"},null,-1),_y={class:"logoProjectTitle"},Ey=(0,s.Lk)("span",{class:"icoText"},"Setting",-1),Ly=(0,s.Lk)("span",{class:"icoText"},"Analysis",-1),Ry=(0,s.Lk)("span",{class:"icoText"},"Database",-1),wy={class:"small-icon-menu"},Ty={class:"lastMenu"},Py={class:"lastLiM"},Ay={class:"iconHeaderMenu"},Dy={class:"alarm"},My=["title"],xy=["title"],Ky=(0,s.Lk)("h2",null,"Immersion Oil",-1),Oy={class:"immersionOilContainer"},By=(0,s.Lk)("h5",{class:"modalTitle"},"Immersion Oil count Reset",-1),Uy=(0,s.Lk)("span",{class:"colorGray"},"Reset Immersion Oil count after changing Oil pack",-1),Wy={class:"smallTitle"},Xy=(0,s.Lk)("span",null,"Estimated number of slides left",-1),Fy={class:"border ml-5",style:{width:"80px"}},$y={class:"flexColumnAlignEnd"},Gy={class:"mt2"},Hy=(0,s.Lk)("h5",{class:"modalTitle"},"Prime Immersion Oil",-1),jy=(0,s.Lk)("span",{class:"colorGray"},"Prime oil to remove air from the oil hose",-1),Vy={class:"flexColumnAlignEnd"},Yy=(0,s.Lk)("div",{class:"statusBarWrapper"},null,-1);var qy=(0,s.pM)({__name:"AppHeader",setup(e){const t=(0,u.lq)(),a=(0,o.KR)(!1),l=(0,r.Pj)(),i=sessionStorage.getItem("user"),c=JSON.parse(i||"{}"),d=(0,o.KR)(!1),m=(0,s.EW)((()=>l.state.commonModule.viewerCheck)),v=(0,o.KR)(!1);let p=null;const g=(0,s.nI)(),I=(0,o.KR)(!1),f=(0,o.KR)(""),b=(0,o.KR)(""),y=(0,s.EW)((()=>l.state.embeddedStatusModule)),C=(0,o.KR)(0),h=(0,o.KR)(""),k=(0,o.KR)(0),S=(0,o.KR)(""),N=(0,s.EW)((()=>l.state.commonModule)),_=(0,s.EW)((()=>l.state.commonModule)),E=(0,o.KR)({icon:["fas","person"],class:""}),L=(0,o.KR)(""),R=(0,o.KR)(""),w=(0,o.KR)(!1),T=(0,o.KR)(!1),P=(0,o.KR)(1e3),A=(0,o.KR)(null),D=(0,o.KR)(null),M=(0,o.KR)(""),x=(0,s.EW)((()=>l.state.userModule)),K=(0,o.KR)(""),O=(0,o.KR)(0),B=(0,o.KR)(!1),U=(0,o.KR)(""),W=(0,o.KR)("");let X=null;const F=(0,o.KR)(!1),G=(0,o.KR)(""),H=(0,o.KR)(""),j=(0,o.KR)(!1),V=(0,o.KR)(""),Y=(0,s.EW)((()=>U.value)),q=(0,s.EW)((()=>W.value)),J=()=>{const e=new Date;U.value=e.toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"}),W.value=e.toLocaleTimeString("en-US")},z=async()=>{I.value=!1,"exit"===V.value?"main"===m.value?Je.publish("childEmitSocketData",Q().embedStatus.exit):await hy():(sessionStorage.clear(),await yy.push("user/login"),document.fullscreenElement&&await document.exitFullscreen())},Z=()=>{I.value=!1};(0,s.sV)((async()=>{j.value="bm"===window.PROJECT_TYPE,J();const e=setInterval(J,1e3);(0,s.xo)((()=>{clearInterval(e)})),""===M.value&&await l.dispatch("userModule/setUserAction",c)})),(0,s.wB)(x.value,((e,t)=>{fe(),M.value=e.id})),(0,s.wB)([y.value],(async e=>{await(0,s.dY)(),C.value=Number(e[0].sysInfo.oilCount),h.value=e[0].sysInfo.isDoorOpen,k.value=Number(e[0].sysInfo.storagePercent),S.value=e[0].sysInfo.eqStatCd,E.value=ce(e[0].sysInfo.eqStatCd),L.value=ue(),R.value=re()})),(0,s.wB)([_.value],(async e=>{const t=JSON.parse(JSON.stringify(e));t[0].isRunningState?B.value=!0:B.value=!1})),(0,s.wB)([N.value],(async e=>{w.value=e[0].isAlarm,e[0].isAlarm&&(X=setTimeout((()=>{l.dispatch("commonModule/setCommonInfo",{isAlarm:!1})}),O.value))}));const ee=e=>{F.value=!0,G.value="success",H.value=e},te=e=>{F.value=!0,G.value="error",H.value=e},ae=()=>{F.value=!1},se=e=>t.path===e,oe=()=>{d.value=!d.value},ne=()=>{V.value="logout",b.value=$.Logout,I.value=!0,localStorage.removeItem("user")},ie=async()=>{V.value="exit",b.value=$.exit,I.value=!0},ue=()=>C.value>=0&&C.value<=100?"10%":C.value>100&&C.value<=250?"25%":C.value>250&&C.value<=500?"50%":C.value>500&&C.value<=750?"75%":"100%",re=()=>k.value>=0&&k.value<=30?"30%":k.value>30&&k.value<=60?"60%":k.value>60&&k.value<=90?"90%":"100%",ce=e=>"01"===e?{icon:["fas","person"],class:""}:"02"===e?{icon:["fas","person-walking"],class:""}:"03"===e?{icon:["fas","person-running"],class:"runRed"}:"04"===e||"05"===e?{icon:["fas","person-running"],class:"runBlue"}:{icon:["fas","person"],class:""},de=()=>{"viewer"!==m.value?T.value=!0:te("Access is only available from the main PC.")},me=e=>{T.value=e},ve=()=>{pe();const e=Q().embedStatus.settings;e.reqUserId=M,Object.assign(e,{oilCount:C,isOilReset:"Y",userId:"",isNsNbIntegration:K.value}),g?.appContext.config.globalProperties.$socket.emit("message",{type:"SEND_DATA",payload:e}),ee($.IDS_MSG_SUCCESS)},pe=()=>{if(!A.value||!D.value)return;const e=Math.round(C.value/P.value*100),t=e/100*A.value.offsetWidth+"px";D.value.style.width=t},ge=()=>{null!==p&&clearTimeout(p),v.value=!0,Q().embedStatus.oilPrime.reqUserId=M,Je.publish("childEmitSocketData",Q().embedStatus.oilPrime),p=setTimeout((()=>{v.value=!1,p=null}),1500)},Ie=()=>{pe()},fe=async()=>{try{const e=await le();if(e&&e?.data){const t=e.data;K.value=t.isNsNbIntegration?"Y":"N",O.value=t?.isAlarm?1e3*Number(t.alarmCount):5e3,await l.dispatch("dataBaseSetDataModule/setDataBaseSetData",{isNsNbIntegration:t?.isNsNbIntegration?"Y":"N"}),sessionStorage.setItem("isNsNbIntegration",K.value),sessionStorage.setItem("wbcPositionMargin",t?.diffWbcPositionMargin),sessionStorage.setItem("rbcPositionMargin",t?.diffRbcPositionMargin),sessionStorage.setItem("pltPositionMargin",t?.diffPltPositionMargin),sessionStorage.setItem("iaRootPath",t?.iaRootPath),await l.dispatch("commonModule/setCommonInfo",{iaRootPath:String(t?.iaRootPath)})}}catch(e){console.log(e)}};return(e,l)=>{const i=(0,s.g2)("font-awesome-icon"),u=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("header",ky,[(0,s.Lk)("nav",null,[a.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,n.C4)(["appHeaderLeft",{bmComponent:j.value}])},[(0,s.Lk)("div",Sy,[Ny,(0,s.Lk)("p",_y,(0,n.v_)(j.value?"BM":"PB"),1)]),(0,s.bF)(u,{to:B.value?"#":"/setting",class:(0,n.C4)({leftActive:se("/setting"),disabledLink:B.value})},{default:(0,s.k6)((()=>[(0,s.bF)(i,{icon:["fas","gear"],style:{"font-size":"1rem"}}),Ey])),_:1},8,["to","class"]),"main"===m.value?((0,s.uX)(),(0,s.Wv)(u,{key:0,to:"/",class:(0,n.C4)({leftActive:se("/analysis")||"/"===(0,o.R1)(t).path})},{default:(0,s.k6)((()=>[(0,s.bF)(i,{icon:["fas","chart-pie"],style:{"font-size":"1rem"}}),Ly])),_:1},8,["class"])):(0,s.Q3)("",!0),(0,s.bF)(u,{to:"/dataBase",class:(0,n.C4)({leftActive:se("/dataBase")||se("/databaseDetail")||se("/databaseRbc")||se("/report")})},{default:(0,s.k6)((()=>[(0,s.bF)(i,{icon:["fas","server"],style:{"font-size":"1rem"}}),Ry])),_:1},8,["class"]),(0,s.Lk)("div",wy,[(0,s.Lk)("div",Ty,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,(0,n.v_)(Y.value)+" "+(0,n.v_)(q.value),1),(0,s.Lk)("li",Py,[(0,s.Lk)("div",{onClick:oe},[(0,s.bF)(i,{icon:["fas","circle-user"]}),(0,s.eW)(" "+(0,n.v_)(x.value.userId),1)]),(0,s.Lk)("div",{class:"logOutBox",onClick:ne}," LOGOUT "),(0,s.Lk)("div",{class:"logOutBox",onClick:ie}," EXIT ")])])]),(0,s.Lk)("div",Ay,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",Dy,[(0,s.bF)(i,{icon:["fas","bell"],class:(0,n.C4)({blinking:w.value})},null,8,["class"])]),(0,s.Lk)("li",null,["Y"!==h.value?((0,s.uX)(),(0,s.Wv)(i,{key:0,icon:["fas","door-closed"]})):((0,s.uX)(),(0,s.Wv)(i,{key:1,icon:["fas","door-open"]}))]),(0,s.Lk)("li",null,[(0,s.bF)(i,{icon:E.value.icon,class:(0,n.C4)(E.value.class)},null,8,["icon","class"])]),(0,s.Lk)("li",{class:"oliCount",onClick:de,title:"oilCount: "+(L.value||0)},[(0,s.bF)(i,{icon:["fas","droplet"]})],8,My),(0,s.Lk)("li",{class:"storage",title:"storage: "+(R.value||0)},[(0,s.bF)(i,{icon:["fas","database"]})],8,xy)])])])],2))])]),T.value?((0,s.uX)(),(0,s.Wv)(ci,{key:0,"onUpdate:closeLayer":me,onAfterOpen:Ie},{header:(0,s.k6)((()=>[Ky])),content:(0,s.k6)((()=>[(0,s.Lk)("div",Oy,[By,Uy,(0,s.Lk)("div",Wy,[Xy,(0,s.Lk)("div",Fy,(0,n.v_)(C.value),1)]),(0,s.Lk)("div",$y,[(0,s.Lk)("div",{ref_key:"statusBarWrapper",ref:A,class:"statusBarWrapper"},[(0,s.Lk)("div",{ref_key:"statusBar",ref:D,class:"statusBar"},null,512)],512),(0,s.Lk)("div",null,[(0,s.Lk)("button",{onClick:ve,class:"alertButton"},"Reset")])])]),(0,s.Lk)("div",Gy,[Hy,jy,(0,s.Lk)("div",Vy,[Yy,(0,s.Lk)("button",{type:"button",onClick:ge,class:(0,n.C4)({alertButton:!0,blinkGripper:v.value})},"Prime ",2)])])])),_:1})):(0,s.Q3)("",!0),F.value?((0,s.uX)(),(0,s.Wv)(et,{key:1,"is-visible":F.value,type:G.value,message:H.value,onHide:ae,"onUpdate:hideAlert":ae},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0),I.value?((0,s.uX)(),(0,s.Wv)(wt,{key:2,"is-visible":I.value,type:f.value,message:b.value,onHide:Z,onOkConfirm:z},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const Jy=qy;var Qy=Jy;const zy={namespaced:!0,state:()=>({id:0,userId:"",password:"",name:"",employeeNo:"",userType:"",subscriptionDate:"",latestDate:""}),mutations:{setUserMutation(e,t){Object.assign(e,t)}},actions:{setUserAction({commit:e},t){e("setUserMutation",t)}}},Zy={namespaced:!0,state:()=>({analysisType:"",wbcDiffVal:"100",stitchCount:""}),mutations:{analysisTypeSet(e,t){e.analysisType=t},wbcDiffValSet(e,t){e.analysisType=t},stitchCountSet(e,t){e.analysisType=t}},actions:{setAnalysisType({commit:e},t){e("analysisTypeSet",t)},setWbcDiffValSet({commit:e},t){e("wbcDiffValSet",t)},setStitchCountSet({commit:e},t){e("stitchCountSet",t)}}},eC={namespaced:!0,state:()=>({equipmentStatusCode:"",wbcCount:"",slideTime:"",time:"",slotInfo:{input:[],output:[]}}),mutations:{setEquipmentStatusCode(e,t){e.equipmentStatusCode=t},setWbcCount(e,t){e.wbcCount=t},setSlideTime(e,t){e.slideTime=t},setTime(e,t){e.time=t},setSlotInfo(e,t){e.slotInfo=t}},actions:{setWorkingViewInfo({commit:e},t){e("setEquipmentStatusCode",t.equipmentStatusCode),e("setWbcCount",t.wbcCount),e("setSlideTime",t.slideTime),e("setTime",t.time),e("setSlotInfo",t.slotInfo)}}},tC={namespaced:!0,state:()=>({embeddedStatusJobCmd:"",userStop:!1,isRecoveryRun:!1,isPause:!1,sysInfo:{eqStatCd:"",iCasStat:"",oCasStat:"",jobCmd:"",isDoorOpen:"",oilCount:"",storageSize:""},isInit:""}),mutations:{setEmbeddedStatusJobCmd(e,t){e.embeddedStatusJobCmd=t},setUserStop(e,t){e.userStop=t},setIsRecoveryRun(e,t){e.isRecoveryRun=t},setIsPause(e,t){e.isPause=t},setSysInfo(e,t){e.sysInfo=t},setIsInit(e,t){e.isInit=t}},actions:{setEmbeddedStatusInfo({commit:e},t){Object.keys(t).forEach((a=>{"embeddedStatusJobCmd"===a?e("setEmbeddedStatusJobCmd",t[a]):"userStop"===a?e("setUserStop",t[a]):"isRecoveryRun"===a?e("setIsRecoveryRun",t[a]):"isPause"===a?e("setIsPause",t[a]):"sysInfo"===a?e("setSysInfo",t[a]):"isInit"===a&&e("setIsInit",t[a])}))}}},aC={namespaced:!0,state:()=>({slotInfo:[]}),mutations:{setSlotInfo(e,t){e.slotInfo=t}},actions:{setSlotInfo({commit:e},t){e("setSlotInfo",t)}}},lC={namespaced:!0,state:()=>({runningInfo:null,changeSlideState:null,slideBooleanState:null}),mutations:{setRunningInfo(e,t){t&&(e.runningInfo=t)},setChangeSlide(e,t){e.changeSlideState?e.changeSlideState.changeSlide=t:e.changeSlideState={changeSlide:t}},setSlideBoolean(e,t){e.slideBooleanState?e.slideBooleanState.slideIs=t:e.slideBooleanState={slideIs:t}}},actions:{setRunningInfo({commit:e},t){e("setRunningInfo",t)},updateRunningInfo({commit:e},t){t&&t.key&&void 0!==t.value&&e(`set${t.key.charAt(0).toUpperCase()+t.key.slice(1)}`,t.value)},setChangeSlide({commit:e},t){e("setChangeSlide",t)},setSlideBoolean({commit:e},t){e("setSlideBoolean",t)}}},sC={namespaced:!0,state:()=>({startEmbedded:!1,eqStatCd:0,isRunningState:!1,totalCount:"",embeddedNumber:"",isAlarm:!1,bfSelectFiles:[],slideProceeding:"",totalSlideTime:"00:00:00",iaRootPath:"",runningSlotId:"",isRequestInProgress:!1,startInfoBoolen:!1,runningInfoBoolen:!1,runningInfoStop:!1,reqArr:[],resFlag:!0,firstLoading:!1,slotIndex:0,viewerCheck:"",runningArr:[],classArr:[{},{},{},{},{},{},{},{},{},{},{},{}],rbcArr:[{},{},{},{},{},{},{},{},{},{},{},{}],processInfo:[{},{},{},{},{},{},{},{},{},{},{},{}],orderList:[{},{},{},{},{},{},{},{},{},{},{},{}],loginSetData:"",siteCd:"",deviceSerialNm:"",clonedWbcInfo:[],clonedRbcInfo:[],moveImgIsBool:!1,classInfoSort:[],chatRunningData:[],cbcLayer:!1,inhaTestCode:"",rbcReData:!1,rbcReDataClass:!1,rbcInfoAfterData:[],resetRbcArr:!1,selectedSampleId:"",classInfoArr:[],rbcReDataCheck:!1,appAlertOpen:!1,dataBasePageReset:!1}),mutations:{setStartEmbedded(e,t){e.startEmbedded=t},setEqStatCd(e,t){e.eqStatCd=t},setIsRunningState(e,t){e.isRunningState=t},setTotalCount(e,t){e.totalCount=t},setEmbeddedNumber(e,t){e.embeddedNumber=t},setIsAlarm(e,t){e.isAlarm=t},setBfSelectFiles(e,t){e.bfSelectFiles=t},setSlideProceeding(e,t){e.slideProceeding=t},setTotalSlideTime(e,t){e.totalSlideTime=t},setIaRootPath(e,t){e.iaRootPath=t},setRunningSlotId(e,t){e.runningSlotId=t},setIsRequestInProgress(e,t){e.isRequestInProgress=t},setStartInfoBoolen(e,t){e.startInfoBoolen=t},setRunningInfoBoolen(e,t){e.runningInfoBoolen=t},setRunningInfoStop(e,t){e.runningInfoStop=t},setReqArr(e,t){e.reqArr||(e.reqArr=[]),e.reqArr.push(t)},shiftReqArr(e){e.reqArr.shift()},setReqArrPaste(e,t){e.reqArr=t},setResFlag(e,t){e.resFlag=t},setFirstLoading(e,t){e.firstLoading=t},setSlotIndex(e,t){e.slotIndex=t},setViewerCheck(e,t){e.viewerCheck=t},setRunningArr(e,t){e.runningArr=t},setClassArr(e,t){e.classArr=t},setRbcArr(e,t){e.rbcArr=t},setProcessInfo(e,t){e.processInfo=t},setOrderList(e,t){e.orderList=t},setLoginSetData(e,t){e.loginSetData=t},setDeviceSerialNm(e,t){e.deviceSerialNm=t},setSiteCd(e,t){e.siteCd=t},setClonedWbcInfo(e,t){e.clonedWbcInfo=t},setClonedRbcInfo(e,t){e.clonedRbcInfo=t},setMoveImgIsBool(e,t){e.moveImgIsBool=t},setClassInfoSort(e,t){e.classInfoSort=t},setChatRunningData(e,t){e.chatRunningData=t},setSelectedSampleId(e,t){e.selectedSampleId=t},setCbcLayer(e,t){e.cbcLayer=t},setInhaTestCode(e,t){e.inhaTestCode=t},setRbcReData(e,t){e.rbcReData=t},setRbcReDataClass(e,t){e.rbcReDataClass=t},setResetRbcArr(e,t){e.resetRbcArr=t},setRbcInfoAfterData(e,t){e.rbcInfoAfterData=t},setClassInfoArr(e,t){e.classInfoArr=t},setRbcReDataCheck(e,t){e.rbcReDataCheck=t},setAppAlertOpen(e,t){e.appAlertOpen=t},setDataBasePageReset(e,t){e.dataBasePageReset=t}},actions:{setCommonInfo({commit:e},t){t.hasOwnProperty("startEmbedded")&&e("setStartEmbedded",t.startEmbedded),t.hasOwnProperty("eqStatCd")&&e("setEqStatCd",t.eqStatCd),t.hasOwnProperty("isRunningState")&&e("setIsRunningState",t.isRunningState),t.hasOwnProperty("totalCount")&&e("setTotalCount",t.totalCount),t.hasOwnProperty("embeddedNumber")&&e("setEmbeddedNumber",t.embeddedNumber),t.hasOwnProperty("isAlarm")&&e("setIsAlarm",t.isAlarm),t.hasOwnProperty("bfSelectFiles")&&e("setBfSelectFiles",t.bfSelectFiles),t.hasOwnProperty("slideProceeding")&&e("setSlideProceeding",t.slideProceeding),t.hasOwnProperty("totalSlideTime")&&e("setTotalSlideTime",t.totalSlideTime),t.hasOwnProperty("iaRootPath")&&e("setIaRootPath",t.iaRootPath),t.hasOwnProperty("runningSlotId")&&e("setRunningSlotId",t.runningSlotId),t.hasOwnProperty("isRequestInProgress")&&e("setIsRequestInProgress",t.isRequestInProgress),t.hasOwnProperty("startInfoBoolen")&&e("setStartInfoBoolen",t.startInfoBoolen),t.hasOwnProperty("runningInfoBoolen")&&e("setRunningInfoBoolen",t.runningInfoBoolen),t.hasOwnProperty("runningInfoStop")&&e("setRunningInfoStop",t.runningInfoStop),t.hasOwnProperty("reqArr")&&e("setReqArr",t.reqArr),t.hasOwnProperty("shiftReqArr")&&e("shiftReqArr"),t.hasOwnProperty("reqArrPaste")&&e("setReqArrPaste",t.reqArr),t.hasOwnProperty("resFlag")&&e("setResFlag",t.resFlag),t.hasOwnProperty("firstLoading")&&e("setFirstLoading",t.firstLoading),t.hasOwnProperty("slotIndex")&&e("setSlotIndex",t.slotIndex),t.hasOwnProperty("viewerCheck")&&e("setViewerCheck",t.viewerCheck),t.hasOwnProperty("runningArr")&&e("setRunningArr",t.runningArr),t.hasOwnProperty("classArr")&&e("setClassArr",t.classArr),t.hasOwnProperty("rbcArr")&&e("setRbcArr",t.rbcArr),t.hasOwnProperty("processInfo")&&e("setProcessInfo",t.processInfo),t.hasOwnProperty("orderList")&&e("setOrderList",t.orderList),t.hasOwnProperty("loginSetData")&&e("setLoginSetData",t.loginSetData),t.hasOwnProperty("siteCd")&&e("setSiteCd",t.siteCd),t.hasOwnProperty("deviceSerialNm")&&e("setDeviceSerialNm",t.deviceSerialNm),t.hasOwnProperty("clonedWbcInfo")&&e("setClonedWbcInfo",t.clonedWbcInfo),t.hasOwnProperty("clonedRbcInfo")&&e("setClonedRbcInfo",t.clonedRbcInfo),t.hasOwnProperty("moveImgIsBool")&&e("setMoveImgIsBool",t.moveImgIsBool),t.hasOwnProperty("classInfoSort")&&e("setClassInfoSort",t.classInfoSort),t.hasOwnProperty("chatRunningData")&&e("setChatRunningData",t.chatRunningData),t.hasOwnProperty("selectedSampleId")&&e("setSelectedSampleId",t.selectedSampleId),t.hasOwnProperty("cbcLayer")&&e("setCbcLayer",t.cbcLayer),t.hasOwnProperty("inhaTestCode")&&e("setInhaTestCode",t.inhaTestCode),t.hasOwnProperty("rbcReData")&&e("setRbcReData",t.rbcReData),t.hasOwnProperty("rbcReDataClass")&&e("setRbcReDataClass",t.rbcReDataClass),t.hasOwnProperty("rbcInfoAfterData")&&e("setRbcInfoAfterData",t.rbcInfoAfterData),t.hasOwnProperty("resetRbcArr")&&e("setResetRbcArr",t.resetRbcArr),t.hasOwnProperty("classInfoArr")&&e("setClassInfoArr",t.classInfoArr),t.hasOwnProperty("rbcReDataCheck")&&e("setRbcReDataCheck",t.rbcReDataCheck),t.hasOwnProperty("appAlertOpen")&&e("setAppAlertOpen",t.appAlertOpen),t.hasOwnProperty("dataBasePageReset")&&e("setDataBasePageReset",t.dataBasePageReset)}}},oC={namespaced:!0,state:()=>({dataBaseSetData:null}),mutations:{setDataBaseSetData(e,t){t&&(e.dataBaseSetData={...e.dataBaseSetData,changeSlide:t.changeSlide??e.dataBaseSetData?.changeSlide,resultCode:t.resultCode??e.dataBaseSetData?.resultCode,resultMsg:t.resultMsg??e.dataBaseSetData?.resultMsg,errorLevel:t.errorLevel??e.dataBaseSetData?.errorLevel,jobCmd:t.jobCmd??e.dataBaseSetData?.jobCmd,processingCode:t.processingCode??e.dataBaseSetData?.processingCode,iCasStat:t.iCasStat??e.dataBaseSetData?.iCasStat,oCasStat:t.oCasStat??e.dataBaseSetData?.oCasStat,cassetId:t.cassetId??e.dataBaseSetData?.cassetId,isRunningState:t.isRunningState??e.dataBaseSetData?.isRunningState,slotInfo:t.slotInfo?t.slotInfo.map((t=>{const a=e.dataBaseSetData?.slotInfo?.find((e=>e?.slotId===t?.slotId));return a?{...a,...t}:t})):e.dataBaseSetData?.slotInfo??[]})}},actions:{setDataBaseSetData({commit:e},t){e("setDataBaseSetData",t)}}},nC={namespaced:!0,state:()=>({totalSlideTime:"00:00:00",slideTime:"00:00:00"}),mutations:{setTotalSlideTime(e,t){e.totalSlideTime=t},setSlideTime(e,t){e.slideTime=t}},actions:{setTimeInfo({commit:e},t){t.hasOwnProperty("totalSlideTime")&&e("setTotalSlideTime",t.totalSlideTime),t.hasOwnProperty("slideTime")&&e("setSlideTime",t.slideTime)}}},iC=(0,r.y$)({modules:{userModule:zy,executeModule:Zy,workingViewModule:eC,embeddedStatusModule:tC,orderListModule:aC,runningInfoModule:lC,commonModule:sC,dataBaseSetDataModule:oC,timeModule:nC}});var uC=iC;const rC=async e=>{if("00000"===e?.resultCd){const t={embeddedStatusJobCmd:"",userStop:"Y"===e.isRecovery,isRecoveryRun:"N"===e.isRecovery&&!1,isPause:"PAUSE"===e.jobCmd,sysInfo:e,isInit:e?e.isInit:void 0},a={siteCd:e.siteCd,deviceSerialNm:e.deviceBarcode};return await uC.dispatch("commonModule/setCommonInfo",a),await uC.dispatch("embeddedStatusModule/setEmbeddedStatusInfo",t),null}return await uC.dispatch("commonModule/setCommonInfo",{appAlertOpen:!0}),e?.resultMsg},cC=async e=>{await uC.dispatch("runningInfoModule/setRunningInfo",e)},dC=(e,t)=>{let a=0,l=0;const s={isNormal:"Y",class:[]};return e&&(e.forEach((e=>{-1===["NR","AR","GP","PA","MC","MA"].indexOf(e.title)&&(a+=Number(e.count)),["NE","NS","NB"].includes(e.title)&&(l+=Number(e.count))})),e.forEach((e=>{t.forEach((t=>{if("01"===t.classId){let o=0;["01","71"].includes(e.id)&&(o=l/a*100,o<t.min||o>t.max?(console.log(`SET [NE] Abnormal : ${e.title}`),s.isNormal="N",s.class.push(`[NE] : [${o.toFixed(2)}]%`)):console.log(`SET [NE] NORMAL : ${e.title}`))}else if(e.id===t.classId)if("Count"===t.unit)(Number(e.count)<t.min||Number(e.count)>t.max)&&(s.isNormal="N",s.class.push(`${e.title} : [${e.count}]Count`));else{let l=0;l=Number(e.count)/a*100,l<t.min||l>t.max?(console.log(`SET Abnormal : ${e.title}`),s.isNormal="N",s.class.push(`${e.title} : [${l.toFixed(2)}]%`)):console.log(`SET NORMAL : ${e.title}`)}}))}))),s},mC=[{id:"01",title:"NE",name:"Neutrophil",count:0,percent:0,key:"",order:1},{id:"71",title:"NS",name:"Neutrophil-Segmented",count:0,percent:0,key:"",order:2},{id:"72",title:"NB",name:"Neutrophil-Band",count:0,percent:0,key:"",order:3},{id:"02",title:"ME",name:"Metamyelocyte",count:0,percent:0,key:"",order:4},{id:"03",title:"MY",name:"Myelocyte",count:0,percent:0,key:"",order:5},{id:"04",title:"PR",name:"Promyelocyte",count:0,percent:0,key:"",order:6},{id:"05",title:"LY",name:"Lymphocyte",count:0,percent:0,key:"",order:7},{id:"61",title:"LR",name:"Reactive lymphocyte",count:0,percent:0,key:"",order:8},{id:"62",title:"LA",name:"Abnormal lymphocyte",count:0,percent:0,key:"",order:9},{id:"07",title:"MO",name:"Monocyte",count:0,percent:0,key:"",order:10},{id:"08",title:"EO",name:"Eosinophil",count:0,percent:0,key:"",order:11},{id:"09",title:"BA",name:"Basophil",count:0,percent:0,key:"",order:12},{id:"10",title:"BL",name:"Blast",count:0,percent:0,key:"",order:13},{id:"11",title:"PC",name:"Plasma cell",count:0,percent:0,key:"",order:14},{id:"12",title:"NR",name:"nRBC",count:0,percent:0,key:"",order:15},{id:"13",title:"GP",name:"Giant platelet",count:0,percent:0,key:"",order:16},{id:"14",title:"PA",name:"Platelet aggregation",count:0,percent:0,key:"",order:17},{id:"16",title:"MA",name:"Malaria",count:0,percent:0,key:"",order:18},{id:"15",title:"AR",name:"Artifact",count:0,percent:0,key:"",order:19},{id:"17",title:"SM",name:"Smudge",count:0,percent:0,key:"",order:20}],vC=[{id:"01",title:"NE",name:"Neutrophil",count:0,percent:0,order:1},{id:"71",title:"NS",name:"Neutrophil-Segmented",count:0,percent:0,key:"",order:2},{id:"72",title:"NB",name:"Neutrophil-Band",count:0,percent:0,key:"",order:3},{id:"02",title:"ME",name:"Metamyelocyte",count:0,percent:0,order:4},{id:"03",title:"MY",name:"Myelocyte",count:0,percent:0,order:5},{id:"04",title:"PR",name:"Promyelocyte",count:0,percent:0,order:6},{id:"05",title:"LY",name:"Lymphocyte",count:0,percent:0,order:7},{id:"06",title:"LA",name:"Abnormal lymphocyte",count:0,percent:0,order:8},{id:"07",title:"MO",name:"Monocyte",count:0,percent:0,order:9},{id:"08",title:"EO",name:"Eosinophil",count:0,percent:0,order:10},{id:"09",title:"BA",name:"Basophil",count:0,percent:0,order:11},{id:"10",title:"BL",name:"Blast",count:0,percent:0,order:12},{id:"11",title:"PC",name:"Plasma cell",count:0,percent:0,order:13},{id:"12",title:"ON",name:"Orthochromic Normoblast",count:0,percent:0,order:14},{id:"13",title:"PN",name:"Polychromic Normoblast",count:0,percent:0,order:15},{id:"14",title:"BN",name:"Basophilic Normoblast",count:0,percent:0,order:16},{id:"15",title:"PE",name:"Proerythroblast",count:0,percent:0,order:17},{id:"16",title:"HC",name:"Histiocyte",count:0,percent:0,order:18},{id:"17",title:"OT",name:"Others",count:0,percent:0,order:19}];var pC=(0,s.pM)({__name:"App",setup(e){const t=(0,u.rd)(),a=(0,o.KR)(!1),l=(0,o.KR)(""),i=(0,o.KR)(""),c=(0,r.Pj)(),d=(0,s.EW)((()=>c.state.commonModule)),m=(0,s.nI)(),v=(0,o.KR)(""),p=sessionStorage.getItem("user"),g=JSON.parse(p||"{}"),I=(0,o.KR)([]),f=(0,s.EW)((()=>c.state.userModule)),b=(0,s.EW)((()=>c.state.commonModule)),y=(0,o.KR)(!1);let C=null,h=null;const k=(0,o.KR)(""),S=(0,s.EW)((()=>c.state.commonModule.iaRootPath)),N=(0,s.EW)((()=>c.state.commonModule.slotIndex)),_=(0,o.KR)([]),E=(0,o.KR)([]),L=(0,o.KR)([]),R=(0,o.KR)(""),w=(0,o.KR)(!1),T=(0,o.KR)({}),P=(0,o.KR)(!1),A=(0,o.KR)(""),D=(0,o.KR)(""),M=(0,o.KR)(!1);let x;m?.appContext.config.globalProperties.$socket.on("viewerCheck",(async e=>{await O(e)}));const K=(0,o.KR)(!1),O=async e=>{try{const e=await Dt();e.data,R.value=e.data}catch(t){console.log(t)}};(0,s.wB)(b.value,(async(e,t)=>{if(!e.reqArr)return;const a=F(e.reqArr),l=a.filter((e=>!["SYSINFO","RUNNING_INFO"].includes(e.jobCmd)));if(M.value)return M.value=!1,void await c.dispatch("commonModule/setCommonInfo",{reqArrPaste:[]});0!==a.length&&(l.length>0?await q(l[0]):await q(a[0]),await c.dispatch("commonModule/setCommonInfo",{reqArrPaste:[]}))})),(0,s.wB)(f.value,((e,t)=>{""!==e.id&&(J(e.id),v.value=e.id)})),(0,s.KC)((()=>{m?.appContext.config.globalProperties.$socket.emit("viewerCheck",{type:"SEND_DATA",payload:window.APP_API_BASE_URL})})),window.addEventListener("beforeunload",(function(e){c.dispatch("commonModule/setCommonInfo",{firstLoading:!1})}));const B=e=>{e.preventDefault()};(0,s.sV)((async()=>{await(0,s.dY)(),await J(),K.value=!1,window.addEventListener("beforeunload",B),w.value="bm"===window.PROJECT_TYPE,w.value||(A.value=window.PB_VERSION),""===v.value&&(await c.dispatch("userModule/setUserAction",g),v.value=f.value.id),d.value.isRunningState||(v.value&&""!==v.value&&await Y(),d.value.firstLoading||(C=setInterval((async()=>{await G()}),400),h=setInterval((async()=>{d.value.runningInfoStop||await H()}),500),await c.dispatch("commonModule/setCommonInfo",{firstLoading:!0})),k.value=sessionStorage.getItem("isNsNbIntegration")||""),Je.subscribe("childEmitSocketData",j)})),(0,s.xo)((()=>{window.removeEventListener("beforeunload",B),h&&(clearInterval(h),h=null),C&&(clearInterval(h),h=null)})),m?.appContext.config.globalProperties.$socket.on("chat",(async e=>{if("main"===d.value.viewerCheck){M.value=!1;try{if("string"===typeof e)return m?.appContext.config.globalProperties.$socket.emit("message",{type:"SEND_DATA",payload:{jobCmd:"clientExit",reqUserId:"",reqDttm:""}}),void await z($.TCP_DiSCONNECTED);ee();const a=new TextDecoder("utf-8"),l=a.decode(e),s=JSON.parse(l),o=s;switch(o.jobCmd){case"RBC_RE_CLASSIFICATION":await c.dispatch("commonModule/setCommonInfo",{rbcReDataClass:!0}),await c.dispatch("commonModule/setCommonInfo",{rbcReData:!0}),await c.dispatch("commonModule/setCommonInfo",{rbcReDataCheck:!1});break;case"SYSINFO":const b=await rC(o);null!==b&&Z(b);const C={siteCd:o.siteCd,deviceSerialNm:o.deviceSerialNm};K.value||await p(C);break;case"INIT":V();break;case"START":await i();break;case"RUNNING_INFO":T.value=o,y.value=!0,await cC(o),await u(o);break;case"STOP":console.log("stop!=--------------------------"),await c.dispatch("commonModule/setCommonInfo",{isRunningState:!1}),await c.dispatch("timeModule/setTimeInfo",{totalSlideTime:"00:00:00"}),await c.dispatch("timeModule/setTimeInfo",{slideTime:"00:00:00"}),await c.dispatch("commonModule/setCommonInfo",{runningSlotId:""}),await c.dispatch("commonModule/setCommonInfo",{slotIndex:0}),await c.dispatch("commonModule/setCommonInfo",{runningArr:[]}),await c.dispatch("runningInfoModule/setSlideBoolean",{key:"slideBoolean",value:!1}),P.value=!1,y.value=!1;break;case"RUNNING_COMP":await n();break;case"PAUSE":await c.dispatch("embeddedStatusModule/setEmbeddedStatusInfo",{isPause:!0}),await c.dispatch("commonModule/setCommonInfo",{runningSlotId:""}),await c.dispatch("commonModule/setCommonInfo",{slotIndex:0}),await c.dispatch("commonModule/setCommonInfo",{runningArr:[]}),await c.dispatch("runningInfoModule/setSlideBoolean",{key:"slideBoolean",value:!1}),P.value=!1,y.value=!1;break;case"RESTART":await cC(o),await u(o),await c.dispatch("embeddedStatusModule/setEmbeddedStatusInfo",{isPause:!1}),await c.dispatch("timeModule/setTimeInfo",{totalSlideTime:"00:00:00"}),await c.dispatch("timeModule/setTimeInfo",{slideTime:"00:00:00"}),y.value=!0,P.value=!0,await c.dispatch("commonModule/setCommonInfo",{runningSlotId:""}),await c.dispatch("commonModule/setCommonInfo",{slotIndex:0}),await c.dispatch("commonModule/setCommonInfo",{runningArr:[]}),E.value=[],L.value=[];break;case"RECOVERY":await c.dispatch("embeddedStatusModule/setEmbeddedStatusInfo",{userStop:!1}),await c.dispatch("commonModule/setCommonInfo",{runningSlotId:""}),await c.dispatch("commonModule/setCommonInfo",{slotIndex:0}),await c.dispatch("commonModule/setCommonInfo",{runningArr:[]});break;case"ERROR_CLEAR":console.log("err"),await z($.IDS_MSG_FAILED);break}async function n(){await c.dispatch("commonModule/setCommonInfo",{runningInfoStop:!0}),await c.dispatch("commonModule/setCommonInfo",{embeddedNumber:String(e?.iCasStat)}),await c.dispatch("commonModule/setCommonInfo",{startEmbedded:!1}),await c.dispatch("commonModule/setCommonInfo",{isRunningState:!1}),await c.dispatch("commonModule/setCommonInfo",{isAlarm:!0}),await c.dispatch("commonModule/setCommonInfo",{runningSlotId:""}),await c.dispatch("commonModule/setCommonInfo",{slotIndex:0}),await c.dispatch("commonModule/setCommonInfo",{runningArr:[]}),await c.dispatch("runningInfoModule/setChangeSlide",{key:"changeSlide",value:"stop"}),await c.dispatch("runningInfoModule/setSlideBoolean",{key:"slideBoolean",value:!1}),y.value=!1,P.value=!1}async function i(){await c.dispatch("commonModule/setCommonInfo",{isRunningState:!0}),await c.dispatch("runningInfoModule/setChangeSlide",{key:"changeSlide",value:"start"}),await c.dispatch("commonModule/setCommonInfo",{startEmbedded:"start"}),await c.dispatch("timeModule/setTimeInfo",{totalSlideTime:"00:00:00"}),await c.dispatch("timeModule/setTimeInfo",{slideTime:"00:00:00"}),await c.dispatch("commonModule/setCommonInfo",{runningInfoStop:!1}),await c.dispatch("commonModule/setCommonInfo",{slotIndex:0}),await c.dispatch("commonModule/setCommonInfo",{runningSlotId:""}),await c.dispatch("commonModule/setCommonInfo",{runningArr:[]}),P.value=!0,E.value=[],L.value=[],y.value=!0}async function u(e){const t=/[1,2,9]/g;if("999999999999"!==String(e?.iCasStat)){const a=String(e?.iCasStat),l=e?.slotInfo,s=e?.iCasStat,o=[...s],n=-1===o.lastIndexOf("3")?0:o.lastIndexOf("3")+1;if(0===o.lastIndexOf("2")&&await c.dispatch("runningInfoModule/setSlideBoolean",{key:"slideBoolean",value:!0}),-1!==e?.iCasStat.indexOf("2")&&await c.dispatch("commonModule/setCommonInfo",{slideProceeding:e?.iCasStat.indexOf("2")}),"100a"===A.value&&(D.value="1"===e?.iCasChange?"reset":""),a.search(t)<0||"111111111111"===e?.oCasStat&&!d.value.runningInfoStop)return Q().embedStatus.runIngComp.reqUserId=f.value.userId,("100a"!==A.value||"Y"===e?.workingDone)&&(await c.dispatch("commonModule/setCommonInfo",{reqArr:Q().embedStatus.runIngComp}),await c.dispatch("commonModule/setCommonInfo",{runningInfoStop:!0})),void await r(e,e?.slotInfo?.slotNo);await c.dispatch("runningInfoModule/setChangeSlide",{key:"changeSlide",value:"start"}),"Y"===l?.isLowPowerScan&&"03"===l?.testType?(Q().embedStatus.pause.reqUserId=v.value,await c.dispatch("commonModule/setCommonInfo",{reqArr:Q().embedStatus.pause}),Q().embedStatus.pause.reqUserId=v.value,await c.dispatch("commonModule/setCommonInfo",{isRunningState:!1})):n!==N.value&&(await c.dispatch("runningInfoModule/setChangeSlide",{key:"changeSlide",value:"afterChange"}),await c.dispatch("runningInfoModule/setSlideBoolean",{key:"slideBoolean",value:!0}),await r(_.value,_.value?.slotInfo?.slotNo),await c.dispatch("commonModule/setCommonInfo",{runningSlotId:l?.slotId}),await c.dispatch("commonModule/setCommonInfo",{slotIndex:n})),-1!==o.lastIndexOf("2")&&(_.value=e)}}async function r(e,t,a,l){const s=e.slotInfo;if(s){s.userId=v.value,s.cassetId=e.cassetId,s.isNormal="Y","01"===s.analysisType&&(s.isNormal=dC(s.wbcInfo,I.value).isNormal);const o=sessionStorage.getItem("isNsNbIntegration"),n=E.value.filter((e=>e?.slotId===s.slotId)),i=L.value.filter((e=>e?.slotId===s.slotId)),u=n[0],r={wbcInfo:u?.wbcInfo,nonRbcClassList:u?.nonRbcClassList,totalCount:u?.totalCount,maxWbcCount:u?.maxWbcCount},c={slotNo:s.slotNo,lock_status:!1,traySlot:"1-"+t,barcodeNo:s.barcodeNo,patientId:s.patientId,patientNm:s.patientNm,gender:s.gender,birthDay:s.birthDay,wbcCount:s.wbcCount,slotId:s.slotId,orderDttm:s.orderDttm,testType:s.testType,analyzedDttm:Q().embedStatus.settings.reqDttm,tactTime:s.tactTime,maxWbcCount:s.maxWbcCount,bf_lowPowerPath:s.bf_lowPowerPath,wbcInfo:0===Object.keys(r).length?w.value?{wbcInfo:[vC]}:{wbcInfo:[mC]}:r,wbcInfoAfter:0===Object.keys(r).length?w.value?[vC]:[mC]:r?.wbcInfo[0],rbcInfo:w.value?[]:{pltCount:s.pltCount,malariaCount:s.malariaCount,maxRbcCount:s.maxRbcCount,rbcClass:i[0].rbcInfo},rbcInfoAfter:w.value?[]:i[0].rbcInfo,bminfo:s.bminfo,cassetId:s.cassetId,isNormal:s.isNormal,submitState:"",submitOfDate:"",submitUserId:"",isNsNbIntegration:o,wbcMemo:"",rbcMemo:""};await g(c,a,l)}}async function p(e){try{const t=await At();0!==t.data.length&&t.data||await Pt({deviceItem:e}),K.value=!0}catch(t){console.error("Error handling device information",t),K.value=!0}}async function g(e,t,a){try{let a;a=await tr({userId:Number(v.value),runingInfoDtoItems:e}),a&&(t&&console.log("save successful"),U("SEND_DATA","refreshDb",300))}catch(l){console.error(l)}}}catch(t){console.error(t)}}}));const U=(e,t,a)=>{void 0!==x&&clearTimeout(x),x=window.setTimeout((()=>{m?.appContext.config.globalProperties.$socket.emit("state",{type:"SEND_DATA",payload:"refreshDb"})}),a)},W=e=>{L.value[e.iCasStatArr]=e.rbc},X=e=>{E.value[e.iCasStatArr]=e.classInfo},F=e=>{const t=new Set,a=[];return e.forEach((e=>{t.has(e.jobCmd)||(t.add(e.jobCmd),a.push(e))})),a},G=async()=>{Q().embedStatus.sysInfo.reqUserId=v.value;const e=Q().embedStatus.sysInfo;await c.dispatch("commonModule/setCommonInfo",{reqArr:e})},H=async()=>{if(!y.value)return;Q().embedStatus.runningInfo.reqUserId=v.value;const e=Q().embedStatus.runningInfo;await c.dispatch("commonModule/setCommonInfo",{reqArr:e})},j=async e=>{console.log(e),await c.dispatch("commonModule/setCommonInfo",{reqArr:e}),await c.dispatch("commonModule/setCommonInfo",{rbcReDataCheck:!0})},V=()=>{const e=sessionStorage.getItem("isNsNbIntegration"),t={jobCmd:"SETTINGS",reqUserId:"",reqDttm:Q().embedStatus.settings.reqDttm,pbiaRootDir:S.value||"",oilCount:"1000",isOilReset:"N",deviceType:"01",isNsNbIntegration:e||"N"};c.dispatch("commonModule/setCommonInfo",{reqArr:t})},Y=async()=>{try{const e=await ye();if(e&&e?.data){const t=e.data;I.value=t}}catch(e){console.log(e)}},q=async e=>{const t=async()=>{m?.appContext.config.globalProperties.$socket.emit("message",{type:"SEND_DATA",payload:e})};await t(),M.value=!0},J=async e=>{try{const e=await le();if(e&&e?.data){const t=e.data;sessionStorage.setItem("iaRootPath",t?.iaRootPath),await c.dispatch("commonModule/setCommonInfo",{iaRootPath:String(t?.iaRootPath)}),await c.dispatch("dataBaseSetDataModule/setDataBaseSetData",{isNsNbIntegration:t?.isNsNbIntegration?"Y":"N"}),sessionStorage.setItem("isNsNbIntegration",k.value),sessionStorage.setItem("wbcPositionMargin",t?.diffWbcPositionMargin),sessionStorage.setItem("rbcPositionMargin",t?.diffRbcPositionMargin),sessionStorage.setItem("pltPositionMargin",t?.diffPltPositionMargin),sessionStorage.setItem("keepPage",String(t?.keepPage))}}catch(t){console.log(t)}},z=async e=>{a.value=!0,l.value="success",i.value=e},Z=e=>{a.value=!0,l.value="error",i.value=e},ee=()=>{a.value=!1};return(e,u)=>{const r=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",null,["/user/login"!==(0,o.R1)(t).currentRoute.value.path&&"/user/join"!==(0,o.R1)(t).currentRoute.value.path?((0,s.uX)(),(0,s.Wv)(Qy,{key:0})):(0,s.Q3)("",!0),(0,s.Lk)("main",{class:(0,n.C4)(["content",{bmComponent:w.value}])},[(0,s.bF)(r),(0,s.bF)(rs,{onClassAppUpdateLast:X,onRbcAppUpdate:W,parsedData:T.value,isClass:"/"===(0,o.R1)(t).currentRoute.value.path,startStatus:P.value,pb100aCassette:D.value},null,8,["parsedData","isClass","startStatus","pb100aCassette"])],2),a.value?((0,s.uX)(),(0,s.Wv)(et,{key:1,"is-visible":a.value,type:l.value,message:i.value,onHide:ee,"onUpdate:hideAlert":ee},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)])}}});const gC=pC;var IC=gC,fC=a(7107),bC=a(6188),yC=a(1273),CC=a(327);const hC=window.MAIN_API_IP||"http://192.168.0.131:3002",kC={install:e=>{const t=(0,CC.io)(`${hC}`,{transports:["websocket"],withCredentials:!0});e.config.globalProperties.$socket=t}};var SC=kC;const NC={prefix:"fac",iconName:"half-circle-up",icon:[512,512,[],"e002","M256 0c141.385 0 256 114.615 256 256H0C0 114.615 114.615 0 256 0z"]},_C={prefix:"fac",iconName:"half-circle-down",icon:[512,512,[],"e003","M256 512c-141.385 0-256-114.615-256-256h512c0 141.385-114.615 256-256 256z"]};fC.Yv.add(bC.X7I),fC.Yv.add(bC.GEE),fC.Yv.add(NC),fC.Yv.add(_C);const EC=(0,l.Ef)(IC);EC.use(yy),EC.use(uC),EC.use(SC),EC.component("font-awesome-icon",yC.gc),EC.mount("#app")}},t={};function a(l){var s=t[l];if(void 0!==s)return s.exports;var o=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){var e=[];a.O=function(t,l,s,o){if(!l){var n=1/0;for(c=0;c<e.length;c++){l=e[c][0],s=e[c][1],o=e[c][2];for(var i=!0,u=0;u<l.length;u++)(!1&o||n>=o)&&Object.keys(a.O).every((function(e){return a.O[e](l[u])}))?l.splice(u--,1):(i=!1,o<n&&(n=o));if(i){e.splice(c--,1);var r=s();void 0!==r&&(t=r)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[l,s,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var s,o,n=l[0],i=l[1],u=l[2],r=0;if(n.some((function(t){return 0!==e[t]}))){for(s in i)a.o(i,s)&&(a.m[s]=i[s]);if(u)var c=u(a)}for(t&&t(l);r<n.length;r++)o=n[r],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},l=self["webpackChunkuimdCell"]=self["webpackChunkuimdCell"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],(function(){return a(9595)}));l=a.O(l)})();
//# sourceMappingURL=app.50efcd1b.js.map