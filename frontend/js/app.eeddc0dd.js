(function(){var e={5358:function(e,t,a){var l={"./af":5177,"./af.js":5177,"./ar":1509,"./ar-dz":1488,"./ar-dz.js":1488,"./ar-kw":8676,"./ar-kw.js":8676,"./ar-ly":2353,"./ar-ly.js":2353,"./ar-ma":4496,"./ar-ma.js":4496,"./ar-ps":6947,"./ar-ps.js":6947,"./ar-sa":2682,"./ar-sa.js":2682,"./ar-tn":9756,"./ar-tn.js":9756,"./ar.js":1509,"./az":5533,"./az.js":5533,"./be":8959,"./be.js":8959,"./bg":7777,"./bg.js":7777,"./bm":4903,"./bm.js":4903,"./bn":1290,"./bn-bd":7357,"./bn-bd.js":7357,"./bn.js":1290,"./bo":1545,"./bo.js":1545,"./br":1470,"./br.js":1470,"./bs":4429,"./bs.js":4429,"./ca":7306,"./ca.js":7306,"./cs":6464,"./cs.js":6464,"./cv":3635,"./cv.js":3635,"./cy":4226,"./cy.js":4226,"./da":3601,"./da.js":3601,"./de":7853,"./de-at":6111,"./de-at.js":6111,"./de-ch":4697,"./de-ch.js":4697,"./de.js":7853,"./dv":708,"./dv.js":708,"./el":4691,"./el.js":4691,"./en-au":3872,"./en-au.js":3872,"./en-ca":8298,"./en-ca.js":8298,"./en-gb":6195,"./en-gb.js":6195,"./en-ie":6584,"./en-ie.js":6584,"./en-il":5543,"./en-il.js":5543,"./en-in":9033,"./en-in.js":9033,"./en-nz":9402,"./en-nz.js":9402,"./en-sg":3004,"./en-sg.js":3004,"./eo":2934,"./eo.js":2934,"./es":7650,"./es-do":838,"./es-do.js":838,"./es-mx":7730,"./es-mx.js":7730,"./es-us":6575,"./es-us.js":6575,"./es.js":7650,"./et":3035,"./et.js":3035,"./eu":3508,"./eu.js":3508,"./fa":119,"./fa.js":119,"./fi":527,"./fi.js":527,"./fil":5995,"./fil.js":5995,"./fo":2477,"./fo.js":2477,"./fr":5498,"./fr-ca":6435,"./fr-ca.js":6435,"./fr-ch":7892,"./fr-ch.js":7892,"./fr.js":5498,"./fy":7071,"./fy.js":7071,"./ga":1734,"./ga.js":1734,"./gd":217,"./gd.js":217,"./gl":7329,"./gl.js":7329,"./gom-deva":2124,"./gom-deva.js":2124,"./gom-latn":3383,"./gom-latn.js":3383,"./gu":5050,"./gu.js":5050,"./he":1713,"./he.js":1713,"./hi":3861,"./hi.js":3861,"./hr":6308,"./hr.js":6308,"./hu":609,"./hu.js":609,"./hy-am":7160,"./hy-am.js":7160,"./id":4063,"./id.js":4063,"./is":9374,"./is.js":9374,"./it":8383,"./it-ch":1827,"./it-ch.js":1827,"./it.js":8383,"./ja":3827,"./ja.js":3827,"./jv":9722,"./jv.js":9722,"./ka":1794,"./ka.js":1794,"./kk":7088,"./kk.js":7088,"./km":6870,"./km.js":6870,"./kn":4451,"./kn.js":4451,"./ko":3164,"./ko.js":3164,"./ku":8174,"./ku-kmr":6181,"./ku-kmr.js":6181,"./ku.js":8174,"./ky":8474,"./ky.js":8474,"./lb":9680,"./lb.js":9680,"./lo":5867,"./lo.js":5867,"./lt":5766,"./lt.js":5766,"./lv":9532,"./lv.js":9532,"./me":8076,"./me.js":8076,"./mi":1848,"./mi.js":1848,"./mk":306,"./mk.js":306,"./ml":3739,"./ml.js":3739,"./mn":9053,"./mn.js":9053,"./mr":6169,"./mr.js":6169,"./ms":3386,"./ms-my":2297,"./ms-my.js":2297,"./ms.js":3386,"./mt":7075,"./mt.js":7075,"./my":2264,"./my.js":2264,"./nb":2274,"./nb.js":2274,"./ne":8235,"./ne.js":8235,"./nl":2572,"./nl-be":3784,"./nl-be.js":3784,"./nl.js":2572,"./nn":4566,"./nn.js":4566,"./oc-lnc":9330,"./oc-lnc.js":9330,"./pa-in":9849,"./pa-in.js":9849,"./pl":4418,"./pl.js":4418,"./pt":9834,"./pt-br":8303,"./pt-br.js":8303,"./pt.js":9834,"./ro":4457,"./ro.js":4457,"./ru":2271,"./ru.js":2271,"./sd":1221,"./sd.js":1221,"./se":3478,"./se.js":3478,"./si":7538,"./si.js":7538,"./sk":5784,"./sk.js":5784,"./sl":6637,"./sl.js":6637,"./sq":6794,"./sq.js":6794,"./sr":5719,"./sr-cyrl":3322,"./sr-cyrl.js":3322,"./sr.js":5719,"./ss":6e3,"./ss.js":6e3,"./sv":1011,"./sv.js":1011,"./sw":748,"./sw.js":748,"./ta":1025,"./ta.js":1025,"./te":1885,"./te.js":1885,"./tet":8861,"./tet.js":8861,"./tg":6571,"./tg.js":6571,"./th":5802,"./th.js":5802,"./tk":9527,"./tk.js":9527,"./tl-ph":9231,"./tl-ph.js":9231,"./tlh":1052,"./tlh.js":1052,"./tr":5096,"./tr.js":5096,"./tzl":9846,"./tzl.js":9846,"./tzm":1765,"./tzm-latn":7711,"./tzm-latn.js":7711,"./tzm.js":1765,"./ug-cn":8414,"./ug-cn.js":8414,"./uk":6618,"./uk.js":6618,"./ur":158,"./ur.js":158,"./uz":7609,"./uz-latn":2475,"./uz-latn.js":2475,"./uz.js":7609,"./vi":1135,"./vi.js":1135,"./x-pseudo":4051,"./x-pseudo.js":4051,"./yo":2218,"./yo.js":2218,"./zh-cn":2648,"./zh-cn.js":2648,"./zh-hk":1632,"./zh-hk.js":1632,"./zh-mo":1541,"./zh-mo.js":1541,"./zh-tw":304,"./zh-tw.js":304};function s(e){var t=o(e);return a(t)}function o(e){if(!a.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}s.keys=function(){return Object.keys(l)},s.resolve=o,e.exports=s,s.id=5358},6912:function(e,t,a){"use strict";var l=a(3751),s=(a(4114),a(641)),o=a(953),n=a(33),i=a.p+"img/celli.2d8862ab.png",u=a(5220),c=a(6278);const r=[{grpCd:"00",grpNm:"User position",cd:"00",cdNm:"Position"},{grpCd:"00",grpNm:"User position",cd:"01",cdNm:"Executive advisor"},{grpCd:"00",grpNm:"User position",cd:"02",cdNm:"General manager"},{grpCd:"00",grpNm:"User position",cd:"03",cdNm:"Chief"},{grpCd:"00",grpNm:"User position",cd:"04",cdNm:"Assistant manager"},{grpCd:"00",grpNm:"User position",cd:"05",cdNm:"Staff"},{grpCd:"01",grpNm:"User authorization",cd:"01",cdNm:"Normal"},{grpCd:"01",grpNm:"User authorization",cd:"02",cdNm:"Admin"},{grpCd:"01",grpNm:"User authorization",cd:"03",cdNm:"Developer"},{grpCd:"02",grpNm:"Cassete state",cd:"0",cdNm:"Empty"},{grpCd:"02",grpNm:"Cassete state",cd:"1",cdNm:"Ready"},{grpCd:"02",grpNm:"Cassete state",cd:"2",cdNm:"Analyzing"},{grpCd:"02",grpNm:"Cassete state",cd:"3",cdNm:"Complete"},{grpCd:"02",grpNm:"Cassete state",cd:"4",cdNm:"Error"},{grpCd:"02",grpNm:"Cassete state",cd:"9",cdNm:"Scan"},{grpCd:"03",grpNm:"Processing code",cd:"01",cdNm:"Cassette Loaded."},{grpCd:"03",grpNm:"Processing code",cd:"02",cdNm:"PB/BM Sequence Start."},{grpCd:"03",grpNm:"Processing code",cd:"03",cdNm:"Cassette Scanning......"},{grpCd:"03",grpNm:"Processing code",cd:"04",cdNm:"Cassette Scanned."},{grpCd:"03",grpNm:"Processing code",cd:"05",cdNm:"Loading Slide #"},{grpCd:"03",grpNm:"Processing code",cd:"06",cdNm:"Barcode Scanned : "},{grpCd:"03",grpNm:"Processing code",cd:"07",cdNm:"Low Power Slide Scanning......"},{grpCd:"03",grpNm:"Processing code",cd:"08",cdNm:"Low Power Slide Scan Complete."},{grpCd:"03",grpNm:"Processing code",cd:"09",cdNm:"Dispensing Immersion Oil......"},{grpCd:"03",grpNm:"Processing code",cd:"10",cdNm:"High Power Slide Scanning......"},{grpCd:"03",grpNm:"Processing code",cd:"11",cdNm:"RBC Classification Processing......"},{grpCd:"03",grpNm:"Processing code",cd:"11",cdNm:"WBC Classification Processing......"},{grpCd:"03",grpNm:"Processing code",cd:"12",cdNm:"Unloading Slide #"},{grpCd:"03",grpNm:"Processing code",cd:"13",cdNm:"Cassette Complete"},{grpCd:"04",grpNm:"Analysis type",cd:"01",cdNm:"PB smear"},{grpCd:"04",grpNm:"Analysis type",cd:"02",cdNm:"BM smear"},{grpCd:"04",grpNm:"Analysis type",cd:"03",cdNm:"Touch print"},{grpCd:"04",grpNm:"Analysis type",cd:"04",cdNm:"BM biopsy"},{grpCd:"04",grpNm:"Analysis type",cd:"05",cdNm:"Clot section"},{grpCd:"05",grpNm:"Cell count",cd:"01",cdNm:"100 count"},{grpCd:"05",grpNm:"Cell count",cd:"02",cdNm:"200 count"},{grpCd:"05",grpNm:"Cell count",cd:"03",cdNm:"300 count"},{grpCd:"05",grpNm:"Cell count",cd:"04",cdNm:"400 count"},{grpCd:"05",grpNm:"Cell count",cd:"05",cdNm:"500 count"},{grpCd:"06",grpNm:"General stain",cd:"01",cdNm:"Wright stain"},{grpCd:"06",grpNm:"General stain",cd:"02",cdNm:"Giemsa stain"},{grpCd:"06",grpNm:"General stain",cd:"03",cdNm:"Wright & Giemsa stain"},{grpCd:"07",grpNm:"Special stain",cd:"04",cdNm:"Iron stain"},{grpCd:"07",grpNm:"Special stain",cd:"05",cdNm:"Trichrome stain"},{grpCd:"07",grpNm:"Special stain",cd:"06",cdNm:"Myeloperoxidase stain"},{grpCd:"07",grpNm:"Special stain",cd:"07",cdNm:"NSE stain"},{grpCd:"07",grpNm:"Special stain",cd:"08",cdNm:"NSE stain after NaFinhibition"},{grpCd:"07",grpNm:"Special stain",cd:"09",cdNm:"Reticulin stain"},{grpCd:"07",grpNm:"Special stain",cd:"10",cdNm:"PAS stain"},{grpCd:"08",grpNm:"Immuno stain",cd:"11",cdNm:"CD 3"},{grpCd:"08",grpNm:"Immuno stain",cd:"12",cdNm:"CD 5"},{grpCd:"08",grpNm:"Immuno stain",cd:"13",cdNm:"CD 20"},{grpCd:"08",grpNm:"Immuno stain",cd:"14",cdNm:"CD 79a"},{grpCd:"09",grpNm:"Sampling stain",cd:"01",cdNm:"Single"},{grpCd:"09",grpNm:"Sampling stain",cd:"02",cdNm:"Both"},{grpCd:"10",grpNm:"Gender",cd:"01",cdNm:"Male"},{grpCd:"10",grpNm:"Gender",cd:"02",cdNm:"Female"},{grpCd:"11",grpNm:"Test Type",cd:"01",cdNm:"PB"},{grpCd:"11",grpNm:"Test Type",cd:"02",cdNm:"BF(Default)"},{grpCd:"11",grpNm:"Test Type",cd:"03",cdNm:"BF(Select)"},{grpCd:"11",grpNm:"Test Type",cd:"04",cdNm:"Premium"},{grpCd:"12",grpNm:"Signed state",cd:"01",cdNm:"Signed"},{grpCd:"12",grpNm:"Signed state",cd:"02",cdNm:"Ready"},{grpCd:"13",grpNm:"Log type",cd:"00",cdNm:"User log"},{grpCd:"13",grpNm:"Log type",cd:"01",cdNm:"System log"},{grpCd:"14",grpNm:"Slot state",cd:"00",cdNm:"Empty"},{grpCd:"14",grpNm:"Slot state",cd:"01",cdNm:"Ready"},{grpCd:"14",grpNm:"Slot state",cd:"02",cdNm:"Scan"},{grpCd:"14",grpNm:"Slot state",cd:"03",cdNm:"Analyzing"},{grpCd:"14",grpNm:"Slot state",cd:"04",cdNm:"Complete"},{grpCd:"14",grpNm:"Slot state",cd:"05",cdNm:"Error"}],d=[{value:"01",text:"Diff"},{value:"04",text:"Premium"},{value:"02",text:"Body fluid default"},{value:"03",text:"Body fluid select"}],m=[{value:"02",text:"BM smear"},{value:"03",text:"Touch print"},{value:"04",text:"BM biopsy"},{value:"05",text:"Clot section"}],v=(e,t)=>{const a=r.find((a=>a.grpCd===e&&a.cd===t));return a?.cdNm};function p(e){if(!e)return"";const[t,a,l,s,o,n]=[e.substring(0,4),e.substring(4,6),e.substring(6,8),e.substring(8,10),e.substring(10,12),e.substring(12,14)];return`${t}-${a}-${l} ${s}:${o}:${n}`}const g=e=>{const t=d.find((t=>t.value===e));return t?t.text:""},I=e=>{const t=m.find((t=>t.value===e));return t?t.text:""},b=(e,t,a,l)=>{const s=window.APP_API_BASE_URL||"http://192.168.0.131:3002";return`${s}/images/getImageRealTime?folder=${t+"/"+a+"/"+l+"/"}&imageName=${e}`},f=(0,s.Lk)("h3",{class:"titleText"},[(0,s.Lk)("span",{class:"greenColor"},"P"),(0,s.eW)("rocessing "),(0,s.Lk)("span",{class:"greenColor"},"I"),(0,s.eW)("nformation ")],-1),y={class:"processInfoUl"},C=(0,s.Lk)("span",{class:"proSpan"},"Cassette No",-1),k={class:"proVal"},h=(0,s.Lk)("span",{class:"proSpan"},"Barcode ID",-1),S={class:"proVal"},_=(0,s.Lk)("span",{class:"proSpan"},"Patient ID",-1),E={class:"proVal"},N=(0,s.Lk)("span",{class:"proSpan"},"Patient Name",-1),L={class:"proVal"},R={class:"proSpan"},T={class:"proVal"},w={class:"proSpan"},P={class:"proVal"},A=(0,s.Lk)("span",{class:"proSpan"},"Oil Count",-1),D={class:"proVal"};var M=(0,s.pM)({__name:"processInfo",props:["parsedData"],setup(e){const t=e,a=(0,c.Pj)(),l=(0,s.EW)((()=>a.state.embeddedStatusModule)),i=(0,s.EW)((()=>a.state.commonModule.siteCd)),u=(0,o.KR)({}),r=(0,o.KR)(null),d=((0,s.nI)(),(0,o.KR)(!1));(0,s.wB)([l.value],(async e=>{if(e.length>0){const t=e[0].sysInfo;t.oilCount!==r.value&&(u.value.oilCount=t.oilCount,r.value=t.oilCount)}})),(0,s.sV)((()=>{r.value=l.value[0]?.sysInfo.oilCount,d.value="bm"===window.PROJECT_TYPE})),(0,s.wB)((()=>t.parsedData),((e,t)=>{m(e)}),{deep:!0});const m=async e=>{const t=e;if("RUNNING_INFO"===t.jobCmd){const e=t?.slotInfo;e&&(u.value={cassetteNo:"",barcodeId:e.barcodeNo,patientId:e.patientId,patientName:e.patientNm,orderDate:p(e.orderDttm),analyzedDttm:p(e.analyzedDttm)})}};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[f,(0,s.Lk)("ul",y,[(0,s.Lk)("li",null,[C,(0,s.eW)(),(0,s.Lk)("span",k,(0,n.v_)(u.value?.cassetteNo),1)]),(0,s.Lk)("li",null,[h,(0,s.eW)(),(0,s.Lk)("span",S,(0,n.v_)(u.value?.barcodeId),1)]),(0,s.Lk)("li",null,[_,(0,s.eW)(),(0,s.Lk)("span",E,(0,n.v_)(u.value?.patientId),1)]),(0,s.Lk)("li",null,[N,(0,s.eW)(),(0,s.Lk)("span",L,(0,n.v_)(u.value?.patientName),1)]),(0,s.Lk)("li",null,[(0,s.Lk)("span",R,(0,n.v_)(d.value?"BM CELL Count ":"WBC Count "),1),(0,s.Lk)("span",T,(0,n.v_)(u.value?.wbcCount),1)]),(0,s.Lk)("li",null,[(0,s.Lk)("span",w,(0,n.v_)("0019"===i.value?"Order Date":"Analyzed Date"),1),(0,s.Lk)("span",P,(0,n.v_)("0019"===i.value?u.value?.analyzedDttm:u.value?.orderDate),1)]),(0,s.Lk)("li",null,[A,(0,s.Lk)("span",D,(0,n.v_)(r.value),1)])])]))}});const x=M;var O=x;const B=[{value:"01",text:"WBC Diff (Standard)"},{value:"04",text:"PBS (Premium)"}],K=[{value:"100",text:"100 WBC"},{value:"150",text:"150 WBC"},{value:"200",text:"200 WBC"},{value:"250",text:"250 WBC"},{value:"300",text:"300 WBC"},{value:"350",text:"350 WBC"},{value:"400",text:"400 WBC"},{value:"450",text:"450 WBC"},{value:"500",text:"500 WBC"}],U=[{value:"500",text:"500"},{value:"600",text:"600"},{value:"700",text:"700"},{value:"800",text:"800"},{value:"900",text:"900"},{value:"1000",text:"1000"},{value:"1100",text:"1100"},{value:"1200",text:"1200"},{value:"1300",text:"1300"},{value:"1400",text:"1400"},{value:"1500",text:"1500"}],X=[{value:"1",text:"1 stitch"},{value:"2",text:"2 stitch"},{value:"3",text:"3 stitch"},{value:"4",text:"4 stitch"},{value:"5",text:"5 stitch"}],F={input:[{slotNo:1,slotState:"0"},{slotNo:2,slotState:"0"},{slotNo:3,slotState:"0"},{slotNo:4,slotState:"0"},{slotNo:5,slotState:"0"},{slotNo:6,slotState:"0"},{slotNo:7,slotState:"0"},{slotNo:8,slotState:"0"},{slotNo:9,slotState:"0"},{slotNo:10,slotState:"0"},{slotNo:11,slotState:"0"},{slotNo:12,slotState:"0"}],output:[{slotNo:1,slotState:"0"},{slotNo:2,slotState:"0"},{slotNo:3,slotState:"0"},{slotNo:4,slotState:"0"},{slotNo:5,slotState:"0"},{slotNo:6,slotState:"0"},{slotNo:7,slotState:"0"},{slotNo:8,slotState:"0"},{slotNo:9,slotState:"0"},{slotNo:10,slotState:"0"},{slotNo:11,slotState:"0"},{slotNo:12,slotState:"0"}]},W={input:[{slotNo:1,slotState:"0"},{slotNo:2,slotState:"0"},{slotNo:3,slotState:"0"},{slotNo:4,slotState:"0"},{slotNo:5,slotState:"0"},{slotNo:6,slotState:"0"},{slotNo:7,slotState:"0"},{slotNo:8,slotState:"0"},{slotNo:9,slotState:"0"},{slotNo:10,slotState:"0"}],output:[{slotNo:1,slotState:"0"},{slotNo:2,slotState:"0"},{slotNo:3,slotState:"0"},{slotNo:4,slotState:"0"},{slotNo:5,slotState:"0"},{slotNo:6,slotState:"0"},{slotNo:7,slotState:"0"},{slotNo:8,slotState:"0"},{slotNo:9,slotState:"0"},{slotNo:10,slotState:"0"}]},$={Logout:"Would you like to log out?",GET_POSITION_LIST:"getPositionList",GET_LOGIN_HISTORY:"getLoginHistory",SET_USER:"setUser",IS_REGIST_USER:"isRegistUser",UPDATE_LOGIN_DTTM:"updateLoginDttm",UPDATE_USER_AVAILABLE:"updateUserAvailable",GET_WBC_CLASS_LIST:"getWbcClassList",GET_WBC_CLASS_LIST_ALL:"getWbcClassListAll",GET_WBC_TOTAL_COUNT:"getWbcTotalCount",UPDATE_WBC_COUNT:"updateWbcCount",GET_WBC_COUNT:"getWbcCount",GET_TEST_TYPE:"getTestType",GET_MODIFIED_TEST_TYPE:"getModifiedTestType",GET_STITCH_COUNT:"getStitchCount",GET_RBC_COUNT:"getRbcCount",GET_RBC_COUNT_HIST:"getRbcCountHist",GET_RBC_COUNT_SKMC:"getRbcCountSkmc",UPDATE_DEGREE:"updateDegree",INIT_WBC_COUNT:"initWbcCount",INIT_RBC_DEGREE:"initRbcDegree",GET_WBC_INFO:"getWbcInfo",SET_WBC_IMAGE_HIST:"setWbcImageHist",GET_WBC_IMAGE_HIST:"getWbcImageHist",INIT_WBC_IMAGE_HIST:"initWbcImageHist",INSERT_WBC_CLASSIFICATION:"insertWbcClassification",SET_WBC_CUSTOM_LIST:"setWbcClassList",UPDATE_HOT_KEYS:"updateHotKeys",UPDATE_BF_HOT_KEYS:"updateBfHotKeys",UPDATE_ORDER:"updateOrder",UPDATE_ORDER_BF:"updateOrderBf",UPDATE_IMAGE_HIST:"updateImageHist",SET_CURRENT_WBC_RESULTS:"setCurrentWbcResults",GET_CURRENT_WBC_RESULTS:"getCurrentWbcResults",SET_BEFORE_WBC_RESULTS:"setBeforeWbcResults",GET_BEFORE_WBC_RESULTS:"getBeforeWbcResults",GET_WBC_MODIFY_LIST:"getWbcModifyList",GET_WBC_MODIFY_LIST_ALL:"getWbcModifyListAll",GET_BF_MODIFY_LIST:"getBfModifyList",GET_RBC_CLASS_LIST:"getRbcClassList",GET_MALARIA_COUNT:"getMalariaCount",UPDATE_MALARIA_COUNT:"updateMalariaCount",SET_CURRENT_RBC_RESULTS:"setCurrentRbcResults",GET_CURRENT_RBC_RESULTS:"getCurrentRbcResults",SET_CLASSIFICATION:"setClassification",GET_CLASSIFICATION_ITEM:"getClassificationItem",SET_CLASSIFICATION_ITEM:"setClassificationItem",UPDATE_RBC_CLASSIFICATION:"updateRbcClassificatin",UPDATE_RBC_CLASSIFICATION_SKMC:"updateRbcClassificatinSkmc",INSERT_WBC_SUCCESS:"insertWbcSuccess",SELECT_RBC_DEGREE:"selectRbcDegree",UPDATE_RBC_DEGREE:"updateRbcDegree",SET_TEST_LIST:"setTestList",GET_TEST_LIST:"getTestList",GET_TEST_RESULT:"getTestResult",GET_RBC_FIELDS:"getRbcFields",GET_WBC_FIELDS:"getWbcFields",GET_RBC_ITEMS:"getRbcItems",GET_WBC_ITEMS:"getWbcItems",INIT_OIL_COUNT:"initOilCount",UPDATE_RESULT:"updateResult",UPDATE_RUNNING_STATE:"updateRunningState",GET_ORDER_LIST:"getOrderList",SET_ORDER_LIST:"setOrderList",UPDATE_ORDER_LIST:"updateOrderList",INIT_ORDER_LIST:"initOrderList",GET_TEST_RESULT_ALL:"getTestResultAll",GET_SEARCH_OPTIONS:"getSearchOptions",UPDATE_SEARCH_OPTIONS:"updateSearchOption",SET_TEST_HISTORY:"setTestHistory",GET_TEST_HISTORY_LIST:"getTestHistoryList",ALL_TEST_HISTORY_LIST:"allTestHistoryList",SEARCH_TEST_HISTORY_LIST:"searchTestHistoryList",UPDATE_TEST_HISTORY:"updateTestHistory",GET_TEST_HISTORY:"getTestHistory",DELETE_TEST_HISTORY:"deleteTestHistory",UPDATE_SIGNED_STATE:"updatesubmitState",UPDATE_TEST_HISTORY_WBC_INFO:"updateTestHistoryWbcInfo",GET_RBC_COMMENT:"getRbcComment",GET_WBC_COMMENT:"getWbcComment",GET_RUNNING_INTERVAL_ID:"getRunningIntervalId",SET_RUNNING_INTERVAL_ID:"setRuningIntervalId",UPDATE_TIMER:"updateWorkingTimer",GET_TIMER:"getWorkingTimer",SET_TIMER:"setWorkingTimer",SET_WORKING_INTERVAL_ID:"setWorkingIntervalId",GET_WORKING_INTERVAL_ID:"getWorkingIntervalId",GET_RUNNING_STATE:"getRunningState",SET_SLIDE_TIMER:"setSlideTimer",UPDATE_SLIDE_TIMER:"updateSlideTimer",GET_SLIDE_TIME_COUNT:"getSlideTimeCount",SET_USER_STOP:"setUserStop",GET_USER_STOP:"getUserStop",SET_WBC_CELL_POSITION:"setWbcCellPosition",GET_WBC_CELL_POSITION:"getWbcCellPosition",GET_TEST_HISTORY_PREV:"getTestHistoryPrev",GET_TEST_HISTORY_NEXT:"getTestHistoryNext",SET_IS_RECOVERY_RUN:"setIsRecoveryRun",GET_IS_RECOVERY_RUN:"getIsRecoveryRun",SET_WORK_LIST:"setWorkList",GET_WORK_LIST:"getWorkList",INIT_WORK_LIST:"initWorkList",DELETE_WORK_LIST:"deleteWorkList",UPDATE_WORK_LIST:"updateWorkList",UPDATE_WORK_LIST_BM:"updateWorkListBm",UPDATE_SIGNED_WORK_LIST:"updateSignedWorkList",UPDATE_RBC_COMMENT:"updateRbcComment",UPDATE_WBC_COMMENT:"updateWbcComment",UPDATE_BM_COMMENT:"updateBmComment",UPDATE_SELECT_ORDER_ID:"updateSelectOrderId",GET_SELECT_ORDER_ID:"getSelectOrderId",ADD_WORK_LIST:"addWorkList",GET_TEST_BARCODES:"getTestBarcodes",ADD_DSP_LIST:"addDspList",GET_DSP_LIST:"getDspList",SET_LIS_HOT_KEY:"setLisHotKey",UPDATE_NEW_TEST_SET:"updateNewTestSet",UPDATE_EXEC_TEST_TYPE:"updateExecTestType",INITIALIZE_MOUNT_CNT:"initializeMountCnt",UPDATE_MOUNT_CNT:"updateMountCnt",GET_CURRENT_USER:"getCurrentUser",GET_SETTINGS:"getSettings",UPDATE_RUNNING_PATH:"updateRunningPath",UPDATE_RESULT_PATH_WBC:"updateResultPathWbc",UPDATE_RESULT_PATH_RBC:"updateResultPathRbc",UPDATE_BARCODE_PATH:"updateBarcodePath",GET_SYSTEM_TIME_ID:"getSystemTimeId",SET_SYSTEM_TIME_ID:"setSystemTimeId",GET_USER:"getUser",UPDATE_REMEMBER_STATE:"updateRememberState",SET_CURRENT_USER:"setCurrentUser",UPDATE_ROOT_PATH:"updateRootPath",GET_FILE_FILTER:"getFileFilter",GET_USER_LIST:"getUserList",UPDATE_ANALYSIS_TYPE:"updateAnalysisType",UPDATE_TEST_TYPE:"updateTestType",UPDATE_RUNNING_MODE:"updateRunningMode",UPDATE_USER:"updateUser",DELETE_USER:"deleteUser",UPDATE_MARKER_STATE:"updateMarkerState",GET_MARKER_STATE:"getMarkerState",SET_PAUSE_STATE:"setPauseState",GET_PAUSE_STATE:"getPauseState",GET_BF_WHOLE_SLIDE_PATH:"getBfWholeSlidePath",GET_BF_WBC_CLASS_LIST:"getBfWbcClassList",GET_SIZE_SLIDE_VALUE:"getSizeSlideValue",UPDATE_LIS_CODE:"updateLisCode",SELECT_LIS_CODE:"selectLisCode",SELECT_LIS_CODE_RBC:"selectLisCodeRbc",UPDATE_CBC_CODE:"updateCbcCode",SELECT_CBC_CODE:"selectCbcCode",UPDATE_LIS_CONN_PATH:"updateLisConnPath",SELECT_LIS_CONN_PATH:"selectLisConnPath",GET_BACKUP_LIST:"getBackupList",RESTORE_BACKUP_DATA:"restoreBackupData",DELETE_BACKUP_DATA:"deleteBackupData",RESET_RBC_DEGREE:"resetRbcDegree",GET_DEFAULT_RBC_DEGREE:"getDefaultRbcDegree",UPDATE_CHECKED_CELL:"updateCheckedCell",SET_LOCK_SLIDE:"setLockSlide",SET_HOST_IP:"setHostIp",GET_HOST_IP:"getHostIp",GET_NORMAL_RANGE:"getNormalRange",UPDATE_NORMAL_RANGE:"updateNormalRange",GET_LOCK_STATE:"getLockState",GET_KUMC_CBC_PATH:"getKumcCbcPath",SET_WBC_NORMAL_RANGE:"setWbcNormalRange",GET_WBC_NORMAL_RANGE:"getWbcNormalRange",GET_SKMC_RESULT_CD:"getSkmcResultCd",SET_SKMC_RESULT_CD:"setSkmcResultCd",REMOVE_SKMC_RESULT_CD:"removeSkmcResultCd",GET_SKMC_REMARK:"getSkmcRemark",SET_SKMC_REMARK:"setSkmcRemark",REMOVE_SKMC_REMARK:"removeSkmcRemark",SET_SKMC_FAVORITE:"setSkmcFavorite",GET_SKMC_FAVORITE:"getSkmcFavorite",GET_SKMC_LIS_RESULTS:"getSkmcLisResults",SET_SKMC_LIS_RESULTS:"setSkmcLisResults",SET_ALARM_COUNT:"setAlarmCount",SET_SORT_TYPE:"setSortType",GET_SORT_TYPE:"getSortType",SET_CUSTOM_CLASS:"setCustomClass",GET_CUSTOM_CLASS:"getCustomClass",SET_SYS_INFO:"setSysInfo",GET_SYS_INFO:"getSysInfo",SET_BACKEND_DATA:"setBackendData",GET_BACKEND_DATA:"getBackendData",SELECT_CBC_CODE_INHA:"selectCbcCodeInha",SELECT_LIS_CODE_INHA:"selectLisCodeInha",SELECT_LIS_CODE_RBC_INHA:"selectLisCodeRbcInha",SELECT_LIS_CONN_PATH_INHA:"selectLisConnPathInha",GET_RBC_COUNT_INHA:"getRbcCountInha",SELECT_WBC_RUNNING_COUNT:"selectWbcRunningCount",GET_BRIGHTNESS_SLIDE_VALUE:"getBrightnessSlideValue",GET_RED_VALUE:"getRedValue",GET_GREEN_VALUE:"getGreenValue",GET_BLUE_VALUE:"getBlueValue",GET_RGB_VALUE:"getRgbValue",SET_SIZE_SLIDE_VALUE:"setSizeSlideValue",SET_BRIGHTNESS_SLIDE_VALUE:"setBrightnessSlideValue",SET_RED_VALUE:"setRedValue",SET_GREEN_VALUE:"setGreenValue",SET_BLUE_VALUE:"setBlueValue",SET_RGB_VALUE:"setRgbValue",SET_ROLLBACK_LIST:"setRollbackList",GET_ROLLBACK_LIST:"getRollbackList",GET_IMAGE_ROLLBACK_LIST:"getImageRollbackList",SET_CLONED_WBC_INFO:"setClonedWbcInfo",GET_RBC_BRIGHTNESS_SLIDE_VALUE:"getRbcBrightnessSlideValue",GET_RBC_RED_VALUE:"getRbcRedValue",GET_RBC_GREEN_VALUE:"getRbcGreenValue",GET_RBC_BLUE_VALUE:"getRbcBlueValue",SET_RBC_BRIGHTNESS_SLIDE_VALUE:"setRbcBrightnessSlideValue",SET_RBC_RED_VALUE:"setRbcRedValue",SET_RBC_GREEN_VALUE:"setRbcGreenValue",SET_RBC_BLUE_VALUE:"setRbcBlueValue",SET_CLONED_RBC_INFO:"setClonedRbcInfo",UPDATE_OIL_COUNT:"updateOilCount",SET_RESULT_LIST:"setResultList",CLEAR_RESULT_LIST:"clearResultList",GET_RESULT_LIST:"getResultList",SET_WBC_REPORT_PRINT:"setWbcReportPrint",GET_WBC_REPORT_PRINT:"getWbcReportPrint",SET_RBC_REPORT_PRINT:"setRbcReportPrint",GET_RBC_REPORT_PRINT:"getRbcReportPrint",SET_RBC_SIZE:"setRbcSize",GET_RBC_SIZE:"getRbcSize",SET_RBC_CHROMIA:"setRbcChromia",GET_RBC_CHROMIA:"getRbcChromia",SET_RBC_SHAPE:"setRbcShape",GET_RBC_SHAPE:"getRbcShape",PUSH_RBC_SHAPE:"pushRbcShape",POP_RBC_SHAPE:"popRbcShape",SET_RBC_PLATELET:"setRbcPlatelet",GET_RBC_PLATELET:"getRbcPlatelet",PUSH_RBC_PLATELET:"pushRbcPlatelet",POP_RBC_PLATELET:"popRbcPlatelet",SET_RBC_INCLUSION:"setRbcInclusion",GET_RBC_INCLUSION:"getRbcInclusion",POP_RBC_INCLUSION:"popRbcInclusion",PUSH_RBC_INCLUSION:"pushRbcInclusion",SET_IS_SHOW_MODAL_BARCODE:"setIsShowModalBarcode",GET_IS_SHOW_MODAL_BARCODE:"getIsShowModalBarcode",SET_IS_NS_NB_INTEGRATION:"setIsNsNbIntegration",GET_IS_NS_NB_INTEGRATION:"getIsNsNbIntegration",SET_IS_ALARM:"setIsAlarm",GET_IS_ALARM:"getIsAlarm",SET_IS_CBC_SHOW:"setIsCbcShow",GET_IS_CBC_SHOW:"getIsCbcShow",SET_SITE_CD:"setSiteCd",GET_SITE_CD:"getSiteCd",SET_DEVICE_SERIALNUM:"setDeviceSerialNm",GET_DEVICE_SERIALNUM:"getDeviceSerialNm",SELECT_BF_HOT_KEY:"selectBfHotKey",SELECT_WBC_HOT_KEY:"selectWbcHotKey",SELECT_WBC_CUSTOM_CLASS:"selectWbcCustomClass",SELECT_EMP_NO:"selectEmpNo",INSERT_WBC_MODIFY_HIST:"insetWbcModifyHist",GET_WBC_MODIFY_HIST:"getWbcModifyHist",UPDATE_WBC_HIST_LIST:"updateWbcHistList",GET_WBC_HIST_LIST:"getWbcHistList",GET_COMMON_CODE_LIST:"getCommonCodeList",GET_COMMON_CODE:"getCommonCode",GET_CODE_LIST_USER_POSITION:"00",GET_CODE_LIST_USER_AUTHORIZATION:"01",GET_CODE_LIST_USER_CASSETE_STATE:"02",GET_CODE_LIST_PROCESSING_STATE:"03",GET_CODE_LIST_ANALYSIS_TYPE:"04",GET_CODE_LIST_CELL_COUNT:"05",GET_CODE_LIST_GENERAL_STAIN:"06",GET_CODE_LIST_SPECIAL_STAIN:"07",GET_CODE_LIST_IMMUNO_STAIN:"08",GET_CODE_LIST_SAMPLING_STAIN:"09",GET_CODE_LIST_GENDER:"10",GET_CODE_LIST_TEST_TYPE:"11",GET_CODE_SIGNED_STATE:"12",GET_CODE_LOG_TYPE:"13",GET_CODE_SLOT_STATE:"14",EVENT_TYPE_USER:"00",EVENT_TYPE_SYSTEM:"01",SET_EVENT_LOG:"setEventLog",GET_EVENT_LOG:"getEventLog",REMOVE_EVENT_LOG:"removeEventLog",REMEMBER_PWD_KEY:"uimdia190$^!00000000000000000000",REMEMBER_PWD_IV:"0000000000000000",RECEIVE_DATA_BROADCAST_CHAN:"RECEIVE_DATA_BROADCAST_CHAN",GET_PB_CLASSIFICATIONS:"getPbClassifications",GET_CLASSIFICATION_IMAGES:"getClassificationImages",GET_MARKER_POSITION:"getMarkerPosition",GET_PB_HOT_KEYS:"getPbHotKeys",UPDATE_CLASSIFICATION:"updateClassification",PB_IA_MOVE_IMAGE:"PbIaMoveImage",SET_WBC_IMAGE_LIST:"setWbcImageList",GET_PB_WBC_IMAGES:"getPbWbcImages",SET_SELECTED_ITEM:"setSelectedItem",GET_SELECTED_ITEM:"getSelectedItem",IA_SET_CUSTOM_CLASS:"iaSetCustomClass",IA_GET_CUSTOM_CLASS:"iaGetCustomClass",IDS_MSG_SUCCESS:"Success",IDS_MSG_FAILED:"Failed",IDS_MSG_OIL_REMAIN_COUNTER:"Reset Immersion oil counter after final test or changing the Oil",IDS_MSG_POWEROFF:"Shutdown the system.",IDS_MSG_INITALIZE:"Please execute after initialization.",IDS_MSG_SIGNING_COMPLETE:"Signing is complete.",IDS_MSG_DELETE_THE_SELECTED_ITEMS:"Delete the selected items?",IDS_MSG_ACCOUNT_CHANGED:"Account conversion is complete.",IDS_MSG_DELETE_ACCOUNT:"Are you sure you want to delete your account?",IDS_MSG_LOGOUT:"Are you sure you want to logout now?",IDS_MSG_DUPLICATE_KEY:"The %s key is a duplicate key.",IDS_MSG_HOTKEY_IN_ENGLISH:"Please recheck the key",IDS_ERROR_CHECK_ID:"The ID must be 5-20 letters or numbers starting with the alphabet.",IDS_ERROR_CHECK_PASSWORD:"The password is a combination of 6-30 digits in English, numbers.",IDS_ERROR_NOT_MATCHED_PASSWORD:"Passwords do not match.",IDS_ERROR_SIGINUP:"Please check the input field.",IDS_ERROR_SIGINUP_ALREADY_ID:"ID already registered.",IDS_ERROR_LOGIN_ERROR:"Please check your ID and password.",IDS_ERROR_LOGIN_ID:"Please check your Login ID.",IDS_ERROR_ALREADY_RUNNING:"Process is already running.",IDS_ERROR_STOP_PROCESS:"Process is terminating.",IDS_ERROR_INIT_ERROR:"Please initialize.",IDS_ERROR_CHECK_REQUIRED_FIELDS:"Please check required fields",IDS_ERROR_CHECK_SLOT_NO:"Please check the slot number.",IDS_ERROR_FAVORITE_MAX_REGIST:"Up to 5 favorites can be registered.",IDS_ERROR_FAVORITE_MAX_REGIST2:"Up to 12 favorites can be registered.",IDS_ERROR_ENTER_YOUR_ORDER_DETAILS:"Please enter your order details.",IDS_ERROR_SELECT_A_TARGET_ITEM:"Please select items",IDS_ERROR_PLEASE_SELECT_AN_IMAGE:"Please select an image.",IDS_ERROR_ALREADY_ADDED:"This item has already been added.",IDS_ERROR_ADD_A_WORKLIST:"Please add a worklist",IDS_ERROR_NO_TEST_RESULTS:"There are no test results.",IDS_ERROR_FILE_CLISSIFICATION:"File classification error",IDS_ERROR_ENTER_CLASS_INFO:"Please enter class information",IDS_ERROR_PLEASE_CONFIRM_YOUR_USER_ID:"Please confirm your user ID.",IDS_DOWNLOAD_COMPLETE:"Download Complete",IDS_SELECT_SLIDE:"Please select a slide.",IDS_SIGNED_ITEMS_CANNOT_BE_MODIFIED:"Signed items cannot be modified.",IDS_RECOVER_GRIPPER_CONDITION:"Would you like to recover the gripper condition?",IDS_PLEASE_ENTER_END_DATE:"Please enter the end date.",IDS_PLEASE_ENTER_START_DATE:"Please enter the start date.",IDS_THE_MAXIMUM_INQUIRY_DATE_IS_31_DAYS:"The maximum inquiry date is 31 days.",IDS_START_DATE_IS_NOT_GREATER_THEN_END_DATE:"Start date is not greater than end date.",IDS_RESTART_SYSTEM:"A new version has been downloaded. Please restart the application to apply the update.",IDS_PLEASE_ENTER_YOUR_BARCODE_NUMBER:"Please enter your barcode number",IDS_BARCODE_REGISTRATION_SUCCESSFUL:"Barcode registration successful",IDS_THIS_IS_A_DUPLICATION_ABBREVIATION:"This is a duplicate abbreviation.",IDS_THIS_CARD_HAS_ALREADY_BEEN_USED:"This card has already been used.",IDS_MSG_UPLOAD_LIS:"Upload current results to LIS",IDS_MSG_SUBMIT_SLIDE:"Submit slide",IDS_MSG_CONFIRM_SLIDE:"Confirm slide",IDS_PLEASE_SELECT_A_CLASS:"Please select a class",IDS_PLEASE_SELECT_A_BACKUP_DATE:"Please select a backup date.",IDS_PLEASE_SELECT_A_BACKUP_PATH:"Please select a backup path.",IDS_PLEASE_SELECT_A_BACKUP_FILE:"Please select a backup file.",IDS_NO_DATA_FOUND:"No data found.",IDS_MSG_DATA_BACKUP:"Data from that period will be deleted. Would you like to proceed?",IDS_MSG_DATA_RESTORE:"Do you want to recover your data?",IDS_MSG_SIZE_CHROMIA_LINKED_LIS:"Size and Chromia categories are linked with LIS data.",UPDATE_SUCCESSFULLY:"Update Successfully",TCP_DiSCONNECTED:"The TCP connection was disconnected.",alreadyInitialized:"It has already been initialized."};var G=a(5093),H=a.n(G);a(4743);function V(){const e=H()(),t=e.format("YYYYMMDDHHmmssSSS");return t}const j=e=>{if(!e)return null;const t=H()(e,"YYYYMMDDHHmmssSSSSS");return t.format("YYYY-MM-DD HH:mm:ss")},Y=e=>{const t=Math.floor(e/3600),a=Math.floor(e%3600/60),l=Math.floor(e%3600%60);return`${q(t,2)}:${q(a,2)}:${q(l,2)}`},q=(e,t)=>String(e).padStart(t,"0"),J=e=>{const t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),l=e.getDate().toString().padStart(2,"0");return`${t}-${a}-${l}`},z=()=>{const e=V();return{embedStatus:{start:{jobCmd:"START",reqUserId:"",testType:"",wbcCount:"",reqDttm:e},startAction:{jobCmd:"START",reqUserId:"",testType:"01",wbcCount:"",stitchCount:"",runningMode:"00",positionMargin:"0",wbcPositionMargin:"0",pltPositionMargin:"0",reqDttm:e},init:{jobCmd:"INIT",reqUserId:"",reqDttm:e},restart:{jobCmd:"RESTART",reqUserId:"",reqDttm:e,bfSelectFiles:[]},stop:{jobCmd:"STOP",reqUserId:"",reqDttm:e,isEmergency:"N",isUserStop:"Y"},end:{jobCmd:"END",reqUserId:"",testType:"",wbcCount:"",reqDttm:e},runningInfo:{jobCmd:"RUNNING_INFO",reqUserId:"",reqDttm:e},sysInfo:{jobCmd:"SYSINFO",reqUserId:"",reqDttm:e},pause:{jobCmd:"PAUSE",reqUserId:"",reqDttm:e},runIngComp:{jobCmd:"RUNNING_COMP",reqUserId:"",reqDttm:e},recovery:{jobCmd:"RECOVERY",reqUserId:"",reqDttm:e},settings:{jobCmd:"SETTINGS",reqUserId:"",reqDttm:e,pbiaRootDir:"D:/IA_Proc",oilCount:"",isOilReset:"",deviceType:"01",isNsNbIntegration:""},oilPrime:{jobCmd:"OIL_PRIME",reqUserId:"",reqDttm:e},gripperOpen:{jobCmd:"GRIPPER_OPEN",reqUserId:"",reqDttm:e},cameraReset:{jobCmd:"CAMERA_RESET",reqUserId:"",reqDttm:e}}}};var Q=a(1250);function Z(){const e=window.APP_API_BASE_URL||"http://192.168.0.131:3002",t=async(e,t,l)=>a(e.endpoint,t,l),a=async(t,a,l)=>{const s={headers:{"Content-Type":"application/json","Cache-Control":"public, max-age=3600"}};Q.A.defaults.withCredentials=!0;const o=a?l?"?":"/":"";a=a||"";try{const l=await Q.A.get(`${e}/${t}${o}${a}`,s);return Promise.resolve(l.data||{code:500,data:void 0,success:!1})}catch(n){return Promise.reject(n)}},l=async(e,t,a,l=!1)=>s(e.endpoint,t,a,l),s=async(t,a,l,s=!1)=>{const o={headers:{"Content-Type":"application/json"}};"blob"===l&&(o.responseType="blob"),"text/plain"===l&&(o.headers={"Content-Type":"text/plain"}),s&&(o.headers={"Content-Type":"multipart/form-data"}),Q.A.defaults.withCredentials=!0;try{const l=await Q.A.post(`${e}/${t}`,a,o);return Promise.resolve(l.data||{code:500,data:void 0,success:!1})}catch(n){return Promise.reject(n)}},o=async(e,t,a,l)=>n(e.endpoint,t,a,l),n=async(t,a,l,s)=>{const o={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}};Q.A.defaults.withCredentials=!0;const n=l?s?"?":"/":"";l=l||"";try{const s=await Q.A.put(`${e}/${t}${n}${l}`,a,o);return Promise.resolve(s.data||{code:500,data:void 0,success:!1})}catch(i){return Promise.reject(i)}},i=async(e,t,a)=>u(e.endpoint,t,a),u=async(t,a,l)=>{const s={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}};Q.A.defaults.withCredentials=!0;const o=l?"?":"/";try{const l=await Q.A.delete(`${e}/${t}${o}`,{...s,data:a});return Promise.resolve(l.data||{code:500,data:void 0,success:!1})}catch(n){return Promise.reject(n)}};return{httpGet:t,httpGetAct:a,httpPost:l,httpPostAct:s,httpPut:o,httpPutAct:n,httpDelete:i,httpDeleteAct:u}}const ee={auth:{refresh:{endpoint:"/auth/refresh",requiresToken:!1}},processInfo:{list:{endpoint:"proinfo/getAllProcessInfo",requiresToken:!1}},rbcclassification:{list:{endpoint:"rbc/getAllRbc",requiresToken:!1}},wbcclassification:{list:{endpoint:"wbc/getAllWbc",requiresToken:!1}},user:{register:{endpoint:"user/register",requiresToken:!1},login:{endpoint:"user/login",requiresToken:!1},userCheck:{endpoint:"user",requiresToken:!1},getUsers:{endpoint:"user/getUsers",requiresToken:!1},userDataPut:{endpoint:"user/update",requiresToken:!1}},settings:{cellImgAnalyzedPost:{cellImgAdd:{endpoint:"cellImgAnalyzed/cellImgAdd",requiresToken:!1},cellImgGet:{endpoint:"cellImgAnalyzed",requiresToken:!1},cellImgPut:{endpoint:"cellImgAnalyzed/update",requiresToken:!1}},rbcDegree:{rbcDegreeAdd:{endpoint:"rbcDegree/rbcDegreeAdd",requiresToken:!1},rbcDegree:{endpoint:"rbcDegree",requiresToken:!1}},wbcCustomClass:{create:{endpoint:"wbcCustomClass/create",requiresToken:!1},update:{endpoint:"wbcCustomClass/update",requiresToken:!1},get:{endpoint:"wbcCustomClass/get",requiresToken:!1}},wbcHotKeys:{create:{endpoint:"wbcHotKeys/create",requiresToken:!1},update:{endpoint:"wbcHotKeys/update",requiresToken:!1},get:{endpoint:"wbcHotKeys/get",requiresToken:!1}},bfHotKeys:{create:{endpoint:"bfHotKeys/create",requiresToken:!1},update:{endpoint:"bfHotKeys/update",requiresToken:!1},get:{endpoint:"bfHotKeys/get",requiresToken:!1}},normalRange:{create:{endpoint:"normalRange/create",requiresToken:!1},update:{endpoint:"normalRange/update",requiresToken:!1},get:{endpoint:"normalRange/get",requiresToken:!1}},imagePrint:{create:{endpoint:"imagePrint/create",requiresToken:!1},update:{endpoint:"imagePrint/update",requiresToken:!1},get:{endpoint:"imagePrint/get",requiresToken:!1}},lisCode:{create:{endpoint:"lisCode/create",requiresToken:!1},update:{endpoint:"lisCode/update",requiresToken:!1},get:{endpoint:"lisCode/get",requiresToken:!1}},lisCodeRbc:{create:{endpoint:"lisCodeRbc/create",requiresToken:!1},update:{endpoint:"lisCodeRbc/update",requiresToken:!1},get:{endpoint:"lisCodeRbc/get",requiresToken:!1}},cbcCode:{create:{endpoint:"cbcCode/create",requiresToken:!1},update:{endpoint:"cbcCode/update",requiresToken:!1},get:{endpoint:"cbcCode/get",requiresToken:!1}},filePathSet:{create:{endpoint:"filePathSet/create",requiresToken:!1},update:{endpoint:"filePathSet/update",requiresToken:!1},get:{endpoint:"filePathSet/get",requiresToken:!1}},runCount:{create:{endpoint:"runCount/create",requiresToken:!1},update:{endpoint:"runCount/update",requiresToken:!1},get:{endpoint:"runCount/get",requiresToken:!1}},minCount:{create:{endpoint:"minCount/create",requiresToken:!1},update:{endpoint:"minCount/update",requiresToken:!1},get:{endpoint:"minCount/get",requiresToken:!1}},runningInfo:{create:{endpoint:"runningInfo/create",requiresToken:!1},update:{endpoint:"runningInfo/update",requiresToken:!1},get:{endpoint:"runningInfo/getAll",requiresToken:!1},delete:{endpoint:"runningInfo/delete",requiresToken:!1},detail:{endpoint:"runningInfo/detail",requiresToken:!1},pageUpDown:{endpoint:"runningInfo/pageUpDown",requiresToken:!1},updatePcIpState:{endpoint:"runningInfo/updatePcIpState",requiresToken:!1},clearPcIpState:{endpoint:"runningInfo/clearPcIpState",requiresToken:!1}},folder:{get:{endpoint:"folder/drives",requiresToken:!1}},folders:{get:{endpoint:"folders",requiresToken:!1}},classOrder:{create:{endpoint:"classOrders/create",requiresToken:!1},update:{endpoint:"classOrders/update",requiresToken:!1},get:{endpoint:"classOrders/get",requiresToken:!1}}},images:{move:{endpoint:"images/move",requiresToken:!1},moveClassImage:{endpoint:"images/moveClassImage",requiresToken:!1}},jsonReader:{get:{endpoint:"jsonReader/send",requiresToken:!1},jsonCreate:{endpoint:"jsonReader/upload",requiresToken:!1}},pdf:{post:{endpoint:"pdf/generate",requiresToken:!1}},filesystem:{post:{endpoint:"filesystem/create-folder",requiresToken:!1},delete:{endpoint:"filesystem/delete-folder",requiresToken:!1},readGet:{endpoint:"file/read",requiresToken:!1},createDirectory:{endpoint:"file/create-directory",requiresToken:!1},fileCreate:{endpoint:"file/createFile",requiresToken:!1}},fileTxtRead:{get:{endpoint:"file/read",requiresToken:!1}},H7Read:{post:{endpoint:"hl7/parse",requiresToken:!1}},H7Message:{post:{endpoint:"hl7/message",requiresToken:!1}},Hl7Create:{post:{endpoint:"hl7/hl7Create",requiresToken:!1}},device:{getDeviceInfo:{create:{endpoint:"device/create",requiresToken:!1},get:{endpoint:"device/get",requiresToken:!1},ip:{endpoint:"ip",requiresToken:!1}}},backUp:{backUpDate:{endpoint:"backup/post",requiresToken:!1}}},te=Z(),ae=async e=>te.httpPost(ee.settings.cellImgAnalyzedPost.cellImgAdd,e),le=async()=>te.httpGet(ee.settings.cellImgAnalyzedPost.cellImgGet),se=async(e,t)=>te.httpPut(ee.settings.cellImgAnalyzedPost.cellImgPut,e,t),oe=async e=>te.httpPost(ee.settings.rbcDegree.rbcDegreeAdd,e),ne=async e=>te.httpPut(ee.settings.rbcDegree.rbcDegree,e),ie=async()=>te.httpGet(ee.settings.rbcDegree.rbcDegree),ue=async e=>te.httpPost(ee.settings.wbcCustomClass.create,e),ce=async e=>te.httpPut(ee.settings.wbcCustomClass.update,e),re=async()=>te.httpGet(ee.settings.wbcCustomClass.get),de=async e=>te.httpPost(ee.settings.wbcHotKeys.create,e),me=async e=>te.httpPut(ee.settings.wbcHotKeys.update,e),ve=async()=>te.httpGet(ee.settings.wbcHotKeys.get),pe=async e=>te.httpPost(ee.settings.bfHotKeys.create,e),ge=async e=>te.httpPut(ee.settings.bfHotKeys.update,e),Ie=async()=>te.httpGet(ee.settings.bfHotKeys.get),be=async e=>te.httpPost(ee.settings.normalRange.create,e),fe=async e=>te.httpPut(ee.settings.normalRange.update,e),ye=async()=>te.httpGet(ee.settings.normalRange.get),Ce=async e=>te.httpPost(ee.settings.imagePrint.create,e),ke=async e=>te.httpPut(ee.settings.imagePrint.update,e),he=async()=>te.httpGet(ee.settings.imagePrint.get),Se=async e=>te.httpPost(ee.settings.lisCode.create,e),_e=async e=>te.httpPut(ee.settings.lisCode.update,e),Ee=async()=>te.httpGet(ee.settings.lisCode.get),Ne=async e=>te.httpPost(ee.settings.lisCodeRbc.create,e),Le=async e=>te.httpPut(ee.settings.lisCodeRbc.update,e),Re=async()=>te.httpGet(ee.settings.lisCodeRbc.get),Te=async e=>te.httpPost(ee.settings.cbcCode.create,e),we=async e=>te.httpPut(ee.settings.cbcCode.update,e),Pe=async()=>te.httpGet(ee.settings.cbcCode.get),Ae=async e=>te.httpPost(ee.settings.filePathSet.create,e),De=async e=>te.httpPut(ee.settings.filePathSet.update,e),Me=async()=>te.httpGet(ee.settings.filePathSet.get),xe=async e=>te.httpPost(ee.settings.runCount.create,e),Oe=async e=>te.httpPut(ee.settings.runCount.update,e),Be=async()=>te.httpGet(ee.settings.runCount.get),Ke=async e=>te.httpPost(ee.settings.minCount.create,e),Ue=async e=>te.httpPut(ee.settings.minCount.update,e),Xe=async()=>te.httpGet(ee.settings.minCount.get),Fe=async()=>te.httpGet(ee.settings.lisCode.get),We=async()=>te.httpGet(ee.settings.folder.get),$e=async e=>te.httpPost(ee.settings.classOrder.create,e),Ge=async()=>te.httpGet(ee.settings.classOrder.get),He=async e=>te.httpPut(ee.settings.classOrder.update,e);var Ve=a(3772);class je{constructor(){(0,Ve.A)(this,"events",{})}subscribe(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}publish(e,...t){const a=this.events[e];a&&a.forEach((e=>e(...t)))}unsubscribe(e,t){const a=this.events[e];a&&(this.events[e]=a.filter((e=>e!==t)))}}var Ye=new je;const qe={class:"mb1 alertMessage"};var Je={__name:"Alert",props:["isVisible","type","message"],emits:["update:hideAlert"],setup(e,{emit:t}){const a=e,l=(0,s.EW)((()=>`alert-${a.type}`)),o=t,i=()=>{o("hide")};return(t,a)=>e.isVisible?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,n.C4)(["alert",l.value])},[(0,s.Lk)("p",qe,(0,n.v_)(e.message),1),(0,s.Lk)("button",{class:"alertButton",onClick:i},"Close")],2)):(0,s.Q3)("",!0)}};const ze=Je;var Qe=ze;const Ze=[{value:"01",text:"PB standard"},{value:"04",text:"PB premium"}],et=[{value:"02",text:"BM wedge"},{value:"03",text:"Touch print"},{value:"04",text:"BM biopsy"},{value:"05",text:"Clot section"},{value:"06",text:"BM squash"}],tt=[{value:"100",text:"100"},{value:"150",text:"150"},{value:"200",text:"200"},{value:"250",text:"250"},{value:"300",text:"300"},{value:"350",text:"350"},{value:"400",text:"400"},{value:"450",text:"450"},{value:"500",text:"500"}],at=[{value:"500",text:"500"},{value:"600",text:"600"},{value:"700",text:"700"},{value:"800",text:"800"},{value:"900",text:"900"},{value:"1000",text:"1000"},{value:"1100",text:"1100"},{value:"1200",text:"1200"},{value:"1300",text:"1300"},{value:"1400",text:"1400"},{value:"1500",text:"1500"}],lt=[{value:"50",text:"50"},{value:"100",text:"100"},{value:"150",text:"150"},{value:"200",text:"200"},{value:"250",text:"250"},{value:"300",text:"300"},{value:"350",text:"350"},{value:"400",text:"400"},{value:"450",text:"450"},{value:"500",text:"500"}],st=[{value:"1",text:"1"},{value:"2",text:"2"},{value:"3",text:"3"},{value:"4",text:"4"},{value:"5",text:"5"}],ot=[{value:"0",text:"0"},{value:"1",text:"1"},{value:"2",text:"2"},{value:"3",text:"3"},{value:"4",text:"4"},{value:"5",text:"5"}],nt=[{value:"0",text:"0"},{value:"1",text:"1"},{value:"2",text:"2"},{value:"3",text:"3"},{value:"4",text:"4"},{value:"5",text:"5"}],it=[{cd:"01",classCd:"",fullNm:"WBC Diff. Count",isSelected:!0},{cd:"02",classCd:"",fullNm:"Seg.-neutrophils",isSelected:!0},{cd:"03",classCd:"",fullNm:"Band-neutrophils",isSelected:!0},{cd:"04",classCd:"",fullNm:"Lymphocytes",isSelected:!0},{cd:"05",classCd:"",fullNm:"Monocytes",isSelected:!0},{cd:"06",classCd:"",fullNm:"Eosinophils",isSelected:!0},{cd:"07",classCd:"",fullNm:"Basophils",isSelected:!0},{cd:"08",classCd:"",fullNm:"Metamyelocytes",isSelected:!0},{cd:"09",classCd:"",fullNm:"Myelocytes",isSelected:!0},{cd:"10",classCd:"",fullNm:"Promyelocytes",isSelected:!0},{cd:"11",classCd:"",fullNm:"Blasts",isSelected:!0},{cd:"12",classCd:"",fullNm:"Immature cells",isSelected:!0},{cd:"13",classCd:"",fullNm:"Atypical cells",isSelected:!0},{cd:"14",classCd:"",fullNm:"Atypical lymphocyte",isSelected:!0},{cd:"15",classCd:"",fullNm:"Activated lymphocyte",isSelected:!0},{cd:"16",classCd:"",fullNm:"Prolymphocytes",isSelected:!0},{cd:"17",classCd:"",fullNm:"Promonocytes",isSelected:!0},{cd:"18",classCd:"",fullNm:"Plasma cells",isSelected:!0},{cd:"19",classCd:"",fullNm:"Nucleated RBC",isSelected:!0},{cd:"20",classCd:"",fullNm:"Others",isSelected:!0},{cd:"21",classCd:"",fullNm:"Atypical Lymphoid cells",isSelected:!0},{cd:"22",classCd:"",fullNm:"Leukemic cells",isSelected:!0},{cd:"23",classCd:"",fullNm:"Abnormal lymphocyte",isSelected:!0},{cd:"24",classCd:"",fullNm:"Reactive lymphocyte",isSelected:!0},{cd:"25",classCd:"",fullNm:"Plasmacytoid lymphocyte",isSelected:!0},{cd:"26",classCd:"",fullNm:"ANC calc",isSelected:!0},{cd:"27",classCd:"",fullNm:"WBC",isSelected:!0},{cd:"28",classCd:"",fullNm:"RBC",isSelected:!0},{cd:"29",classCd:"",fullNm:"HGB",isSelected:!0},{cd:"30",classCd:"",fullNm:"HCT",isSelected:!0},{cd:"31",classCd:"",fullNm:"MCV",isSelected:!0},{cd:"32",classCd:"",fullNm:"MCH",isSelected:!0},{cd:"33",classCd:"",fullNm:"MCHC",isSelected:!0},{cd:"34",classCd:"",fullNm:"RDW",isSelected:!0},{cd:"35",classCd:"",fullNm:"Platelet",isSelected:!0},{cd:"36",classCd:"",fullNm:"PCT",isSelected:!0},{cd:"37",classCd:"",fullNm:"MPV",isSelected:!0},{cd:"38",classCd:"",fullNm:"PDW",isSelected:!0},{cd:"39",classCd:"",fullNm:"ESR",isSelected:!0}],ut={rbcClassList:[{categoryId:"01",categoryNm:"Size",classInfo:[{classId:"01",classNm:"Normal",degree:"0"},{classId:"02",classNm:"Macrocyte",degree:"0"},{classId:"03",classNm:"Microcyte",degree:"0"},{classId:"04",classNm:"Anisocytosis",degree:"0"}]},{categoryId:"02",categoryNm:"Chromia",classInfo:[{classId:"01",classNm:"Normal",degree:"0"},{classId:"02",classNm:"Hyperchromic",degree:"0"},{classId:"03",classNm:"Hypochromic",degree:"0"},{classId:"04",classNm:"Polychromia",degree:"0"}]},{categoryId:"03",categoryNm:"Shape",classInfo:[{classId:"01",classNm:"Normal",degree:"0"},{classId:"02",classNm:"Poikilocytosis",degree:"0"},{classId:"03",classNm:"Target Cell",degree:"0"},{classId:"04",classNm:"Burr Cell",degree:"0"},{classId:"05",classNm:"Acanthocyte",degree:"0"},{classId:"06",classNm:"Ovalocyte",degree:"0"},{classId:"07",classNm:"Schistocyte",degree:"0"},{classId:"08",classNm:"Sickle Cell",degree:"0"},{classId:"09",classNm:"Stomatocyte",degree:"0"},{classId:"10",classNm:"Tear Drop Cell",degree:"0"},{classId:"11",classNm:"Spherocyte",degree:"0"}]},{categoryId:"05",categoryNm:"Inclusion Body",classInfo:[{classId:"01",classNm:"Howell-Jolly Body",degree:"0"},{classId:"02",classNm:"Basophilic Stippling",degree:"0"}]}],malariaCount:0,currentRbcResults:null},ct=[{categoryId:"01",classId:"02",degree1:"5",degree2:"10",degree3:"20"},{categoryId:"01",classId:"03",degree1:"5",degree2:"10",degree3:"20"},{categoryId:"01",classId:"04",degree1:"5",degree2:"10",degree3:"20"},{categoryId:"02",classId:"02",degree1:"5",degree2:"10",degree3:"20"},{categoryId:"02",classId:"03",degree1:"5",degree2:"10",degree3:"20"},{categoryId:"02",classId:"04",degree1:"5",degree2:"10",degree3:"20"},{categoryId:"03",classId:"03",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"03",classId:"04",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"03",classId:"05",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"03",classId:"06",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"03",classId:"07",degree1:"0.5",degree2:"1",degree3:"2"},{categoryId:"03",classId:"08",degree1:"0.5",degree2:"1",degree3:"2"},{categoryId:"03",classId:"09",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"03",classId:"10",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"03",classId:"11",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"05",classId:"01",degree1:"1",degree2:"2",degree3:"3"},{categoryId:"05",classId:"02",degree1:"2.5",degree2:"5",degree3:"20"}],rt=[{id:"01",abbreviation:"NE",fullNm:"Neutrophil",key:"",orderIdx:1},{id:"02",abbreviation:"ME",fullNm:"Metamyelocyte",key:"",orderIdx:4},{id:"03",abbreviation:"MY",fullNm:"Myelocyte",key:"",orderIdx:5},{id:"04",abbreviation:"PR",fullNm:"Promyelocyte",key:"",orderIdx:6},{id:"05",abbreviation:"LY",fullNm:"Lymphocyte",key:"",orderIdx:7},{id:"07",abbreviation:"MO",fullNm:"Monocyte",key:"",orderIdx:10},{id:"08",abbreviation:"EO",fullNm:"Eosinophil",key:"",orderIdx:11},{id:"09",abbreviation:"BA",fullNm:"Basophil",key:"",orderIdx:12},{id:"10",abbreviation:"BL",fullNm:"Blast",key:"",orderIdx:13},{id:"11",abbreviation:"PC",fullNm:"Plasma cell",key:"",orderIdx:14},{id:"12",abbreviation:"NR",fullNm:"nRBC",key:"",orderIdx:15},{id:"13",abbreviation:"GP",fullNm:"Giant platelet",key:"",orderIdx:16},{id:"14",abbreviation:"PA",fullNm:"Platelet aggregation",key:"",orderIdx:17},{id:"15",abbreviation:"AR",fullNm:"Artifact(Smudge)",key:"",orderIdx:19},{id:"16",abbreviation:"MA",fullNm:"Malaria",key:"",orderIdx:18},{id:"61",abbreviation:"LR",fullNm:"Reactive lymphocyte",key:"",orderIdx:8},{id:"62",abbreviation:"LA",fullNm:"Abnormal lymphocyte",key:"",orderIdx:9},{id:"71",abbreviation:"NS",fullNm:"Neutrophil-Segmented",key:"",orderIdx:2},{id:"72",abbreviation:"NB",fullNm:"Neutrophil-Band",key:"",orderIdx:3}],dt=[{id:"01",abbreviation:"NE",fullNm:"Neutrophil",key:"",orderIdx:1},{id:"71",abbreviation:"NS",fullNm:"Neutrophil-Segmented",key:"",orderIdx:2},{id:"72",abbreviation:"NB",fullNm:"Neutrophil-Band",key:"",orderIdx:3},{id:"02",abbreviation:"ME",fullNm:"Metamyelocyte",key:"",orderIdx:4},{id:"03",abbreviation:"MY",fullNm:"Myelocyte",key:"",orderIdx:5},{id:"04",abbreviation:"PR",fullNm:"Promyelocyte",key:"",orderIdx:6},{id:"05",abbreviation:"LY",fullNm:"Lymphocyte",key:"",orderIdx:7},{id:"06",abbreviation:"LA",fullNm:"Abnormal lymphocyte",key:"",orderIdx:8},{id:"07",abbreviation:"MO",fullNm:"Monocyte",key:"",orderIdx:9},{id:"08",abbreviation:"EO",fullNm:"Eosinophil",key:"",orderIdx:10},{id:"09",abbreviation:"BA",fullNm:"Basophil",key:"",orderIdx:11},{id:"10",abbreviation:"BL",fullNm:"Blast",key:"",orderIdx:12},{id:"11",abbreviation:"PC",fullNm:"Plasma cell",key:"",orderIdx:13},{id:"12",abbreviation:"ON",fullNm:"Orthochromic Normoblast",key:"",orderIdx:14},{id:"13",abbreviation:"PN",fullNm:"Polychromic Normoblast",key:"",orderIdx:15},{id:"14",abbreviation:"BN",fullNm:"Basophilic Normoblast",key:"",orderIdx:16},{id:"15",abbreviation:"PE",fullNm:"Proerythroblast",key:"",orderIdx:17},{id:"16",abbreviation:"HC",fullNm:"Histiocyte",key:"",orderIdx:18},{id:"17",abbreviation:"OT",fullNm:"Others",key:"",orderIdx:19}],mt=[{id:"01",abbreviation:"NE",fullNm:"Neutrophil",key:"",orderIdx:1},{id:"02",abbreviation:"LY",fullNm:"Lymphocyte",key:"",orderIdx:2},{id:"03",abbreviation:"MO",fullNm:"Monocyte",key:"",orderIdx:3},{id:"04",abbreviation:"EO",fullNm:"Eosinophil",key:"",orderIdx:4},{id:"05",abbreviation:"BA",fullNm:"Basophil",key:"",orderIdx:5},{id:"06",abbreviation:"BL",fullNm:"Blast",key:"",orderIdx:6},{id:"07",abbreviation:"PC",fullNm:"Plasma cell",key:"",orderIdx:7},{id:"08",abbreviation:"NR",fullNm:"NRBC",key:"",orderIdx:8},{id:"09",abbreviation:"AR",fullNm:"Artifact(Smudge)",key:"",orderIdx:9},{id:"10",abbreviation:"MC",fullNm:"Malignant cell",key:"",orderIdx:10},{id:"11",abbreviation:"MT",fullNm:"Mesothelial cell",key:"",orderIdx:11}],vt=[{abbreviation:"NE",fullNm:"Neutrophil",classId:"01",min:42,max:85,unit:"%"},{abbreviation:"ME",fullNm:"Metamyelocyte",classId:"02",min:0,max:100,unit:"%"},{abbreviation:"MY",fullNm:"Myelocyte",classId:"03",min:0,max:100,unit:"%"},{abbreviation:"PR",fullNm:"Promyelocyte",classId:"04",min:0,max:100,unit:"%"},{abbreviation:"LY",fullNm:"Lymphocyte",classId:"05",min:11,max:49,unit:"%"},{abbreviation:"MO",fullNm:"Monocyte",classId:"07",min:0,max:9,unit:"%"},{abbreviation:"EO",fullNm:"Eosinophil",classId:"08",min:0,max:6,unit:"%"},{abbreviation:"BA",fullNm:"Basophil",classId:"09",min:0,max:2,unit:"%"},{abbreviation:"BL",fullNm:"Blast",classId:"10",min:0,max:100,unit:"%"},{abbreviation:"PC",fullNm:"Plasma cell",classId:"11",min:0,max:100,unit:"%"},{abbreviation:"NR",fullNm:"nRBC",classId:"12",min:0,max:100,unit:"Count"},{abbreviation:"GP",fullNm:"Giant platelet",classId:"13",min:0,max:100,unit:"Count"},{abbreviation:"PA",fullNm:"Platelet aggregation",classId:"14",min:0,max:100,unit:"Count"},{abbreviation:"AR",fullNm:"Artifact(Smudge)",classId:"15",min:0,max:100,unit:"Count"},{abbreviation:"MA",fullNm:"Malaria",classId:"16",min:0,max:100,unit:"Count"},{abbreviation:"LR",fullNm:"Reactive lymphocyte",classId:"61",min:0,max:100,unit:"%"},{abbreviation:"LA",fullNm:"Abnormal lymphocyte",classId:"62",min:0,max:100,unit:"%"}],pt=[{fullNm:"Neutrophil",classId:"01",checked:!1},{fullNm:"Neutrophil-Segmented",classId:"71",checked:!1},{fullNm:"Neutrophil-Band",classId:"72",checked:!1},{fullNm:"Metamyelocyte",classId:"02",checked:!1},{fullNm:"Myelocyte",classId:"03",checked:!1},{fullNm:"Promyelocyte",classId:"04",checked:!1},{fullNm:"Lymphocyte",classId:"05",checked:!1},{fullNm:"Reactive lymphocyte",classId:"61",checked:!1},{fullNm:"Abnormal lymphocyte",classId:"62",checked:!1},{fullNm:"Monocyte",classId:"07",checked:!1},{fullNm:"Eosinophil",classId:"08",checked:!1},{fullNm:"Basophil",classId:"09",checked:!1},{fullNm:"Blast",classId:"10",checked:!1},{fullNm:"Plasma cell",classId:"11",checked:!1},{fullNm:"nRBC",classId:"12",checked:!1},{fullNm:"Giant platelet",classId:"13",checked:!1},{fullNm:"Platelet aggregation",classId:"14",checked:!1},{fullNm:"Malaria",classId:"16",checked:!1},{fullNm:"Artifact(Smudge)",classId:"15",checked:!1},{fullNm:"rbcPrintModel",classId:"99999",checked:!1}],gt=[{fullNm:"Neutrophil",classId:"01",checked:!1},{fullNm:"Neutrophil-Segmented",classId:"71",checked:!1},{fullNm:"Neutrophil-Band",classId:"72",checked:!1},{fullNm:"Metamyelocyte",classId:"02",checked:!1},{fullNm:"Myelocyte",classId:"03",checked:!1},{fullNm:"Promyelocyte",classId:"04",checked:!1},{fullNm:"Lymphocyte",classId:"05",checked:!1},{fullNm:"Abnormal lymphocyte",classId:"06",checked:!1},{fullNm:"Monocyte",classId:"07",checked:!1},{fullNm:"Eosinophil",classId:"08",checked:!1},{fullNm:"Basophil",classId:"09",checked:!1},{fullNm:"Blast",classId:"10",checked:!1},{fullNm:"Plasma cell",classId:"11",checked:!1},{fullNm:"Orthochromic Normoblast",classId:"12",checked:!1},{fullNm:"Polychromic Normoblast",classId:"13",checked:!1},{fullNm:"Basophilic Normoblast",classId:"14",checked:!1},{fullNm:"Proerythroblast",classId:"15",checked:!1},{fullNm:"Histiocyte",classId:"16",checked:!1},{fullNm:"Others",classId:"17",checked:!1}],It=[{fullNm:"Neutrophil",classId:"01",key:""},{fullNm:"Neutrophil-Segmented",classId:"71",key:""},{fullNm:"Neutrophil-Band",classId:"72",key:""},{fullNm:"Metamyelocyte",classId:"02",key:""},{fullNm:"Myelocyte",classId:"03",key:""},{fullNm:"Promyelocyte",classId:"04",key:""},{fullNm:"Lymphocyte",classId:"05",key:""},{fullNm:"Reactive lymphocyte",classId:"61",key:""},{fullNm:"Abnormal lymphocyte",classId:"62",key:""},{fullNm:"Monocyte",classId:"07",key:""},{fullNm:"Eosinophil",classId:"08",key:""},{fullNm:"Basophil",classId:"09",key:""},{fullNm:"Blast",classId:"10",key:""},{fullNm:"Plasma cell",classId:"11",key:""},{fullNm:"nRBC",classId:"12",key:""},{fullNm:"Giant platelet",classId:"13",key:""},{fullNm:"Platelet aggregation",classId:"14",key:""},{fullNm:"Malaria",classId:"16",key:""},{fullNm:"Artifact(Smudge)",classId:"15",key:""},{fullNm:"rbcPrintModel",classId:"99999",key:""}],bt=[{categoryId:"01",categoryNm:"Size",classId:"01",fullNm:"Normal",key:"0"},{categoryId:"01",categoryNm:"Size",classId:"02",fullNm:"Macrocyte",key:"0"},{categoryId:"01",categoryNm:"Size",classId:"03",fullNm:"Microcyte",key:"0"},{categoryId:"01",categoryNm:"Size",classId:"04",fullNm:"Anisocytosis",key:"0"},{categoryId:"02",categoryNm:"Chromia",classId:"01",fullNm:"Normal",key:"0"},{categoryId:"02",categoryNm:"Chromia",classId:"02",fullNm:"Hyperchromic",key:"0"},{categoryId:"02",categoryNm:"Chromia",classId:"03",fullNm:"Hypochromic",key:"0"},{categoryId:"02",categoryNm:"Chromia",classId:"04",fullNm:"Polychromia",key:"0"},{categoryId:"03",categoryNm:"Shape",classId:"01",fullNm:"Normal",key:"0"},{categoryId:"03",categoryNm:"Shape",classId:"02",fullNm:"Poikilocytosis",key:"0"},{categoryId:"03",categoryNm:"Shape",classId:"03",fullNm:"Target Cell",key:"0"},{categoryId:"03",categoryNm:"Shape",classId:"04",fullNm:"Burr Cell",key:"0"},{categoryId:"03",categoryNm:"Shape",classId:"05",fullNm:"Acanthocyte",key:"0"},{categoryId:"03",categoryNm:"Shape",classId:"06",fullNm:"Ovalocyte",key:"0"},{categoryId:"03",categoryNm:"Shape",classId:"07",fullNm:"Schistocyte",key:"0"},{categoryId:"03",categoryNm:"Shape",classId:"08",fullNm:"Sickle Cell",key:"0"},{categoryId:"03",categoryNm:"Shape",classId:"09",fullNm:"Stomatocyte",key:"0"},{categoryId:"03",categoryNm:"Shape",classId:"10",fullNm:"Tear Drop Cell",key:"0"},{categoryId:"03",categoryNm:"Shape",classId:"11",fullNm:"Spherocyte",key:"0"},{categoryId:"05",categoryNm:"Inclusion Body",classId:"01",fullNm:"Howell-Jolly Body",key:"0"},{categoryId:"05",categoryNm:"Inclusion Body",classId:"02",fullNm:"Basophilic Stippling",key:"0"}],ft=[{minGPCount:0,minPACount:0}],yt=[{min:0,max:700,wbcConditionCount:50},{min:701,max:1e3,wbcConditionCount:100},{min:1001,max:2e3,wbcConditionCount:150},{min:2001,max:3e3,wbcConditionCount:250}],Ct=[{lisHotKey:"",lisFilePath:"",cbcFilePath:""}],kt={barcodeDirName:"00_Barcode_Image"},ht={howellJollyDirName:"19_Howell_jolly",malariaDirName:"43_InclusionBody_Malaria",noMalariaDirName:"44_InclusionBody_NoMalaria",rbcClassDirName:"03_RBC_Classification",rbcImageDirName:"02_RBC_Image",barcodeDirName:"00_Barcode_Image",wbcClassDirName:"01_WBC_Classification",bfDirName:"02_LowPower_Image",bfHighDirName:"03_HighPower_Image",bfClassDirName:"05_BF_Classification",iaRootPath:"D:/ia_proc"},St={class:"execute"},_t={class:"startDiv"},Et=["disabled"],Nt=["value"],Lt={key:0,class:"startStopP"},Rt={key:1,class:"startStopP"},Tt={class:"stopDiv"},wt=["disabled"],Pt=["value"],At=["disabled"],Dt=["value"],Mt=(0,s.Lk)("span",null," INITIALIZING ",-1);var xt=(0,s.pM)({__name:"execute",setup(e,{emit:t}){const a=(0,c.Pj)(),i=(0,s.EW)((()=>a.state.embeddedStatusModule)),u=(0,s.EW)((()=>a.state.userModule)),r=(0,o.KR)("pb"),d=(0,o.KR)([]),m=(0,s.EW)((()=>a.state.commonModule)),v=(0,s.EW)((()=>a.state.executeModule)),p=(0,o.KR)(m.value?.isPause),g=(0,o.KR)(v.value?.isRunningState),I=(0,o.KR)(i.value?.userStop),b=(0,o.KR)(i.value?.isRecoveryRun),f=(0,o.KR)(i.value?.isInit),y=(0,o.KR)(""),C=(0,o.KR)(),k=(0,o.KR)(),h=(0,o.KR)(),S=(0,o.KR)([]),_=(0,s.EW)((()=>a.state.commonModule)),E=(0,o.KR)(!1),N=(0,o.KR)(""),L=(0,o.KR)(!1),R=(0,o.KR)(""),T=(0,o.KR)(""),w=(0,o.KR)([]),P=t;(0,s.wB)(u.value,(async(e,t)=>{""!==e.id&&(y.value=e.id,await A())})),(0,s.sV)((async()=>{await A()}));const A=async()=>{r.value="bm"===window.PROJECT_TYPE?"bm":"pb",w.value="bm"===window.PROJECT_TYPE?et:B,d.value="bm"===window.PROJECT_TYPE?U:K,await(0,s.dY)(),await G(),W(),g.value?(N.value="isRunning",E.value=!1):(N.value="start",E.value=!0)};(0,s.wB)(_.value,(e=>{""===e.loginSetData&&(A(),a.dispatch("commonModule/setCommonInfo",{loginSetData:"nn"}))})),(0,s.wB)([m.value],(async e=>{await(0,s.dY)();const[t]=e,{isRunningState:a,bfSelectFiles:l}=t||{};g.value=a,S.value=l,g.value?(N.value="isRunning",E.value=!1):E.value=!0})),(0,s.wB)([i.value,v.value],(async e=>{const[t,a]=e;await(0,s.dY)();const{isPause:l,userStop:o,isRecoveryRun:n,isInit:i}=t||{};p.value=l,I.value=o,b.value=n,f.value=i,p.value?N.value="isPause":I.value&&!b.value?N.value="onRecover":"N"===f.value||""===f.value?N.value="isInit":N.value="start"}));const D=async(e,t)=>{Ye.publish("executeAction",t)},M=e=>{if("start"===e){if(p.value)return z().embedStatus.restart.bfSelectFiles=S.value,z().embedStatus.restart.reqUserId=y.value,void D("SEND_DATA",z().embedStatus.restart);if(g.value)return void x($.IDS_ERROR_ALREADY_RUNNING);if(I.value)return void(!0===confirm($.IDS_RECOVER_GRIPPER_CONDITION)&&(z().embedStatus.recovery.reqUserId=y.value,D("SEND_DATA",z().embedStatus.recovery)));const e=sessionStorage.getItem("rbcPositionMargin"),t=sessionStorage.getItem("wbcPositionMargin"),l=sessionStorage.getItem("pltPositionMargin");let s=z().embedStatus.startAction;if(Object.assign(s,{testType:C.value,wbcCount:k.value,stitchCount:h.value,reqUserId:y.value,rbcPositionMargin:e||"0",wbcPositionMargin:t||"0",pltPositionMargin:l||"0"}),console.log(s),"bm"===window.PROJECT_TYPE&&(s={jobCmd:"START",reqUserId:y.value,reqDttm:z().embedStatus.startAction.reqDttm,orderInfo:[{orderId:"1",cassetNo:"",slotNo:"1",bmNo:"1",patientId:"",patientNm:"",age:"1",gender:"01",testType:"02",stainType:"01",userInputStainType:"",analysisType:C.value,bmSamplingSide:"01",cellCount:k.value,department:"s",stitchCount:h.value}],runningMode:"00",positionMargin:"0"}),"Y"===f.value){D("SEND_DATA",s);const e={startEmbedded:!0};a.dispatch("commonModule/setCommonInfo",e)}}else{if(!g.value)return void x($.IDS_ERROR_STOP_PROCESS);a.dispatch("embeddedStatusModule/setEmbeddedStatusInfo",{userStop:!0}),z().embedStatus.stop.reqUserId=y.value,D("SEND_DATA",z().embedStatus.stop)}},x=e=>{L.value=!0,R.value="success",T.value=e},O=()=>{L.value=!1},F=()=>{"Y"===f.value||"isRunning"===N.value||g.value?x($.alreadyInitialized):(z().embedStatus.init.reqUserId=y.value,D("SEND_DATA",z().embedStatus.init),P("initDataChangeText",!0))},W=()=>{const e={...i.value},t={...m.value};f.value=e.isInit,p.value=e.isPause,I.value=e.userStop,b.value=e.isRecoveryRun,g.value=t.isRunningState,E.value=("N"===f.value||""===f.value)&&!g.value},G=async()=>{try{const e=await le();if(e&&e?.data){const t=e.data;if(C.value=t.analysisType,"bm"===window.PROJECT_TYPE)k.value=t.diffCellAnalyzingCount;else switch(C.value){case"01":k.value=t.diffCellAnalyzingCount;break;case"04":k.value=t.pbsCellAnalyzingCount;break;default:k.value=t.bfCellAnalyzingCount}h.value=t.stitchCount}}catch(e){console.log(e)}};return(e,t)=>{const a=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",St,[(0,s.Lk)("div",_t,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>C.value=e),disabled:g.value},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(w.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,Nt)))),128))],8,Et),[[l.u1,C.value]]),E.value?((0,s.uX)(),(0,s.CE)("p",Lt,[(0,s.bF)(a,{icon:["fas","circle-play"],class:(0,n.C4)({startBtn:!0,[N.value]:!0}),onClick:t[1]||(t[1]=e=>"Y"===f.value&&M("start"))},null,8,["class"])])):((0,s.uX)(),(0,s.CE)("p",Rt,[(0,s.bF)(a,{icon:["fas","circle-stop"],class:"stopBtn",onClick:t[2]||(t[2]=e=>M("stop"))})]))]),(0,s.Lk)("div",Tt,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>k.value=e),disabled:g.value},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,Pt)))),128))],8,wt),[[l.u1,k.value]]),(0,s.bo)((0,s.Lk)("select",{class:"stopDivSelect","onUpdate:modelValue":t[4]||(t[4]=e=>h.value=e),disabled:g.value},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(X),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,Dt)))),128))],8,At),[[l.u1,h.value]]),(0,s.Lk)("div",{class:(0,n.C4)(["initBtn",{isInitDisabled:"Y"===f.value}]),onClick:F},[(0,s.bF)(a,{icon:["fas","rotate-right"],style:{"font-size":"0.9rem"},class:(0,n.C4)({disabled:"N"!==f.value})},null,8,["class"]),Mt],2)])]),L.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":L.value,type:R.value,message:T.value,onHide:O,"onUpdate:hideAlert":O},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const Ot=xt;var Bt=Ot;const Kt=(0,s.Lk)("h3",{class:"titleText"},[(0,s.Lk)("span",{class:"greenColor"},"W"),(0,s.eW)("orking "),(0,s.Lk)("span",{class:"greenColor"},"V"),(0,s.eW)("iew ")],-1),Ut={class:"circular-progress-bar mt2"},Xt={class:"progress-ring",width:"120",height:"120"},Ft=["cx","cy","r","stroke-width"],Wt=["cx","cy","r","stroke-width","stroke","stroke-dasharray","stroke-dashoffset"],$t={class:"slideTime"},Gt=(0,s.Lk)("p",{class:"slideTime1 mt2"},"Number of WBCs",-1),Ht={class:"slideCardWrap"},Vt={class:"slideContent"},jt=(0,s.Lk)("p",{class:"mt1"},"INPUT",-1),Yt={class:"slideContent"},qt=(0,s.Lk)("p",{class:"mt1"},"OUTPUT",-1);var Jt=(0,s.pM)({__name:"workingView",props:["parsedData","initValData"],setup(e){const t=(0,c.Pj)(),a=(0,s.EW)((()=>t.state.runningInfoModule)),l=(0,s.EW)((()=>t.state.commonModule)),i=(0,s.EW)((()=>t.state.timeModule)),u=e,r=(0,o.KR)(0),d=(0,o.KR)(120),m=(0,o.KR)(6),v=(0,o.KR)("#00c2ff"),p=(0,o.KR)(d.value/2),g=(0,o.KR)(2*Math.PI*(p.value-m.value/2)),I=(0,o.KR)(g.value),b=(0,o.KR)(0),f=(0,o.KR)(0),y=(0,o.KR)(""),C=(0,o.KR)(""),k=(0,o.KR)("");let h=null,S=null;const _=(0,o.KR)(F);let E=(0,o.KR)(0),N=(0,o.KR)(0);const L=(0,o.KR)(!1);let R=(0,o.KR)(null);(0,s.wB)((()=>t.state.embeddedStatusModule),(e=>{const t=e.sysInfo;y.value=e.sysInfo.eqStatCd,l.value.isRunningState?(T(t.iCasStat,_.value.input),T(t.oCasStat,_.value.output)):(D(),A());const a=/[1,2,9]/g,s=String(t?.iCasStat);"999999999999"!==String(t?.iCasStat)&&(s.search(a)<0||"111111111111"===t?.oCasStat)&&(T(t.iCasStat,_.value.input),T(t.oCasStat,_.value.output))}),{deep:!0}),(0,s.wB)([l.value],(async e=>{const t=JSON.parse(JSON.stringify(e));t[0].startEmbedded?""===t[0].runningSlotId&&t[0].startEmbedded&&P():A(),t[0].isRunningState||(D(),A())})),(0,s.wB)([a.value],(e=>{const t=JSON.parse(JSON.stringify(e));if("start"===t[0].changeSlideState?.changeSlide.value&&!0===t[0].slideBooleanState?.slideIs.value?w():"stop"===t[0].changeSlideState?.changeSlide.value&&null!==h&&(clearInterval(h),h=null),"afterChange"===t[0].changeSlideState?.changeSlide.value&&(A(),w()),t[0].runningInfo){const e=t[0].runningInfo.slotInfo;if(e&&"03"===e?.stateCd){b.value=Number(e.wbcCount),f.value=Number(e.maxWbcCount),b.value>f.value&&(b.value=f.value);const t=b.value/f.value*100;I.value=g.value*(1-t/100)}}})),(0,s.wB)((()=>y.value),(e=>{"05"===e?R.value=setInterval((()=>{L.value=!L.value}),1e3):(L.value=!1,clearInterval(R.value))})),(0,s.wB)((()=>u.initValData),(e=>{e&&(y.value="05")})),(0,s.sV)((()=>{y.value="01",_.value.input.forEach((e=>{e.slotState="0"})),_.value.output.forEach((e=>{e.slotState="0"}))}));const T=(e,t)=>{t.forEach(((t,a)=>{t.slotState=e.charAt(a)}))},w=()=>{h||(h=setInterval((()=>{l.value.isRunningState&&(N.value+=1,r.value=N.value%60,sessionStorage.setItem("elapsedTimeCount",String(N.value)),t.dispatch("timeModule/setTimeInfo",{slideTime:Y(N.value)}))}),1e3)),(0,s.xo)((()=>{h&&(clearInterval(h),h=null)}))},P=()=>{S||(S=setInterval((()=>{l.value.isRunningState&&(E.value+=1,sessionStorage.setItem("totalElapsedTimeCount",String(E.value)),t.dispatch("timeModule/setTimeInfo",{totalSlideTime:Y(E.value)}))}),1e3)),(0,s.xo)((()=>{S&&(clearInterval(S),S=null)}))},A=()=>{clearInterval(h),h=null,N.value=0,C.value=Y(0),sessionStorage.removeItem("elapsedTimeCount"),t.dispatch("timeModule/setTimeInfo",{slideTime:"00:00:00"})},D=()=>{clearInterval(S),S=null,E.value=0,k.value=Y(0),sessionStorage.removeItem("totalElapsedTimeCount"),t.dispatch("timeModule/setTimeInfo",{totalSlideTime:"00:00:00"})},M=()=>{switch(y.value){case"01":return"IDLE";case"02":return"READY";case"03":return"ERROR";case"04":return"RUNNING";case"05":return"INITIALIZATION";default:return"UNKNOWN"}},x=(e,t)=>{if("input"===t)switch(e){case"0":return"class-for-state-0";case"1":return"class-for-state-1";case"2":return"class-for-state-2";case"3":return"class-for-state-3";case"4":return"class-for-state-4";default:return""}else switch(e){case"0":return"out-for-state-0";case"1":return"out-for-state-1";default:return"outClassDefault"}};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[Kt,(0,s.Lk)("div",null,[(0,s.Lk)("p",{class:(0,n.C4)({blinkColor:L.value})},(0,n.v_)(M()),3),(0,s.Lk)("p",null,(0,n.v_)(b.value),1),(0,s.Lk)("div",Ut,[((0,s.uX)(),(0,s.CE)("svg",Xt,[(0,s.Lk)("circle",{cx:p.value,cy:p.value,r:p.value-m.value/2,"stroke-width":m.value,stroke:"#ccc",fill:"none"},null,8,Ft),(0,s.Lk)("circle",{cx:p.value,cy:p.value,r:p.value-m.value/2,"stroke-width":m.value,stroke:v.value,fill:"none","stroke-dasharray":g.value,"stroke-dashoffset":I.value},null,8,Wt)])),(0,s.Lk)("p",$t,(0,n.v_)(i.value.slideTime),1)]),Gt,(0,s.Lk)("p",null,(0,n.v_)(i.value.totalSlideTime),1)]),(0,s.Lk)("div",Ht,[(0,s.Lk)("ul",Vt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(_.value.input,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.slotNo,class:(0,n.C4)(x(e.slotState,"input"))},null,2)))),128)),jt]),(0,s.Lk)("ul",Yt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(_.value.output,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.slotNo,class:(0,n.C4)(x(e.slotState,"output"))},null,2)))),128)),qt])])]))}});const zt=Jt;var Qt=zt;const Zt={class:"orderListTableContainer"},ea=(0,s.Lk)("h3",{class:"titleText"},[(0,s.Lk)("span",{class:"greenColor"},"O"),(0,s.eW)("rder "),(0,s.Lk)("span",{class:"greenColor"},"L"),(0,s.eW)("ist")],-1),ta={class:"orderListTable"},aa=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Barcode ID"),(0,s.Lk)("th",null,"Patient Name"),(0,s.Lk)("th",null,"Order Date"),(0,s.Lk)("th",null,"State")])],-1),la={key:0},sa={key:1},oa=(0,s.Lk)("tr",null,[(0,s.Lk)("td",{colspan:"4"},"Data is empty.")],-1),na=[oa];var ia=(0,s.pM)({__name:"orderList",props:["parsedData","startStatus","pb100aCassette"],setup(e){const t=e,a=(0,o.KR)([]);(0,s.wB)((()=>t.parsedData),(e=>{l(e)}),{deep:!0}),(0,s.wB)((()=>t.pb100aCassette),(e=>{"reset"===e&&(a.value=[],console.log("pb100aCassette ",a.value))}),{deep:!0}),(0,s.wB)((()=>t.startStatus),(e=>{!0===e&&(a.value=[])}),{deep:!0});const l=async e=>{const t=e;if("RUNNING_INFO"===t.jobCmd){const e=t?.slotInfo;if(e){const t=e.barcodeNo,l=a.value.findIndex((e=>e.barcodeId===t));-1===l&&""!==t?a.value.push({barcodeId:t,patientName:e.patientNm,orderDate:p(e.orderDttm),analyzedDttm:p(e.analyzedDttm),state:e.stateCd}):a.value[l]={barcodeId:t,patientName:e.patientNm,orderDate:p(e.orderDttm),analyzedDttm:p(e.analyzedDttm),state:e.stateCd}}}};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",Zt,[ea,(0,s.Lk)("table",ta,[aa,a.value.length>0?((0,s.uX)(),(0,s.CE)("tbody",la,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,((e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:t},[(0,s.Lk)("td",null,(0,n.v_)(e?.barcodeId),1),(0,s.Lk)("td",null,(0,n.v_)(e?.patientName),1),(0,s.Lk)("td",null,(0,n.v_)(e?.analyzedDttm?(0,o.R1)(j)(e?.analyzedDttm):(0,o.R1)(j)(e?.orderDate)),1),(0,s.Lk)("td",null,(0,n.v_)((0,o.R1)(v)("14",e?.state)),1)])))),128))])):((0,s.uX)(),(0,s.CE)("tbody",sa,na))])]))}});const ua=ia;var ca=ua;const ra=[{id:"01",abbreviation:"NE",fullNm:"Neutrophil",key:"",orderIdx:1},{id:"71",abbreviation:"NS",fullNm:"Neutrophil-Segmented",key:"",orderIdx:2},{id:"72",abbreviation:"NB",fullNm:"Neutrophil-Band",key:"",orderIdx:3},{id:"02",abbreviation:"ME",fullNm:"Metamyelocyte",key:"",orderIdx:4},{id:"03",abbreviation:"MY",fullNm:"Myelocyte",key:"",orderIdx:5},{id:"04",abbreviation:"PR",fullNm:"Promyelocyte",key:"",orderIdx:6},{id:"05",abbreviation:"LY",fullNm:"Lymphocyte",key:"",orderIdx:7},{id:"61",abbreviation:"LR",fullNm:"Reactive lymphocyte",key:"",orderIdx:8},{id:"62",abbreviation:"LA",fullNm:"Abnormal lymphocyte",key:"",orderIdx:9},{id:"07",abbreviation:"MO",fullNm:"Monocyte",key:"",orderIdx:10},{id:"08",abbreviation:"EO",fullNm:"Eosinophil",key:"",orderIdx:11},{id:"09",abbreviation:"BA",fullNm:"Basophil",key:"",orderIdx:12},{id:"10",abbreviation:"BL",fullNm:"Blast",key:"",orderIdx:13},{id:"11",abbreviation:"PC",fullNm:"Plasma cell",key:"",orderIdx:14},{id:"12",abbreviation:"NR",fullNm:"nRBC",key:"",orderIdx:15},{id:"13",abbreviation:"GP",fullNm:"Giant platelet",key:"",orderIdx:16},{id:"14",abbreviation:"PA",fullNm:"Platelet aggregation",key:"",orderIdx:17},{id:"16",abbreviation:"MA",fullNm:"Malaria",key:"",orderIdx:18},{id:"15",abbreviation:"AR",fullNm:"Artifact",key:"",orderIdx:19},{id:"17",abbreviation:"SM",fullNm:"Smudge",key:"",orderIdx:20}],da=[{id:"01",abbreviation:"NE",fullNm:"Neutrophil",key:"",orderIdx:1},{id:"71",abbreviation:"NS",fullNm:"Neutrophil-Segmented",key:"",orderIdx:2},{id:"72",abbreviation:"NB",fullNm:"Neutrophil-Band",key:"",orderIdx:3},{id:"02",abbreviation:"ME",fullNm:"Metamyelocyte",key:"",orderIdx:4},{id:"03",abbreviation:"MY",fullNm:"Myelocyte",key:"",orderIdx:5},{id:"04",abbreviation:"PR",fullNm:"Promyelocyte",key:"",orderIdx:6},{id:"05",abbreviation:"LY",fullNm:"Lymphocyte",orderIdx:7},{id:"06",abbreviation:"LA",fullNm:"Abnormal lymphocyte",orderIdx:8},{id:"07",abbreviation:"MO",fullNm:"Monocyte",orderIdx:9},{id:"08",abbreviation:"EO",fullNm:"Eosinophil",orderIdx:10},{id:"09",abbreviation:"BA",fullNm:"Basophil",orderIdx:11},{id:"10",abbreviation:"BL",fullNm:"Blast",orderIdx:12},{id:"11",abbreviation:"PC",fullNm:"Plasma cell",orderIdx:13},{id:"12",abbreviation:"ON",fullNm:"Orthochromic Normoblast",orderIdx:14},{id:"13",abbreviation:"PN",fullNm:"Polychromic Normoblast",orderIdx:15},{id:"14",abbreviation:"BN",fullNm:"Basophilic Normoblast",orderIdx:16},{id:"15",abbreviation:"PE",fullNm:"Proerythroblast",orderIdx:17},{id:"16",abbreviation:"HC",fullNm:"Histiocyte",orderIdx:18},{id:"17",abbreviation:"OT",fullNm:"Others",orderIdx:19}],ma=[{id:"01",abbreviation:"NE",fullNm:"Neutrophil",orderIdx:1},{id:"71",abbreviation:"NS",fullNm:"Neutrophil-Segmented",orderIdx:2},{id:"72",abbreviation:"NB",fullNm:"Neutrophil-Band",orderIdx:3},{id:"02",abbreviation:"ME",fullNm:"Metamyelocyte",orderIdx:4},{id:"03",abbreviation:"MY",fullNm:"Myelocyte",orderIdx:5},{id:"04",abbreviation:"PR",fullNm:"Promyelocyte",orderIdx:6},{id:"05",abbreviation:"LY",fullNm:"Lymphocyte",orderIdx:7},{id:"61",abbreviation:"LR",fullNm:"Reactive lymphocyte",orderIdx:8},{id:"62",abbreviation:"LA",fullNm:"Abnormal lymphocyte",orderIdx:9},{id:"07",abbreviation:"MO",fullNm:"Monocyte",orderIdx:10},{id:"08",abbreviation:"EO",fullNm:"Eosinophil",orderIdx:11},{id:"09",abbreviation:"BA",fullNm:"Basophil",orderIdx:12},{id:"10",abbreviation:"BL",fullNm:"Blast",orderIdx:13},{id:"11",abbreviation:"PC",fullNm:"Plasma cell",orderIdx:14},{id:"12",abbreviation:"NR",fullNm:"nRBC",orderIdx:15},{id:"13",abbreviation:"GP",fullNm:"Giant platelet",orderIdx:16},{id:"14",abbreviation:"PA",fullNm:"Platelet aggregation",orderIdx:17},{id:"16",abbreviation:"MA",fullNm:"Malaria",orderIdx:18},{id:"15",abbreviation:"AR",fullNm:"Artifact",orderIdx:19},{id:"17",abbreviation:"SM",fullNm:"Smudge",orderIdx:20}],va=[{id:"01",abbreviation:"NE",fullNm:"Neutrophil",orderIdx:1},{id:"71",abbreviation:"NS",fullNm:"Neutrophil-Segmented",orderIdx:2},{id:"72",abbreviation:"NB",fullNm:"Neutrophil-Band",orderIdx:3},{id:"02",abbreviation:"ME",fullNm:"Metamyelocyte",orderIdx:4},{id:"03",abbreviation:"MY",fullNm:"Myelocyte",orderIdx:5},{id:"04",abbreviation:"PR",fullNm:"Promyelocyte",orderIdx:6},{id:"05",abbreviation:"LY",fullNm:"Lymphocyte",orderIdx:7},{id:"06",abbreviation:"LA",fullNm:"Abnormal lymphocyte",orderIdx:8},{id:"07",abbreviation:"MO",fullNm:"Monocyte",orderIdx:9},{id:"08",abbreviation:"EO",fullNm:"Eosinophil",orderIdx:10},{id:"09",abbreviation:"BA",fullNm:"Basophil",orderIdx:11},{id:"10",abbreviation:"BL",fullNm:"Blast",orderIdx:12},{id:"11",abbreviation:"PC",fullNm:"Plasma cell",orderIdx:13},{id:"12",abbreviation:"ON",fullNm:"Orthochromic Normoblast",orderIdx:14},{id:"13",abbreviation:"PN",fullNm:"Polychromic Normoblast",orderIdx:15},{id:"14",abbreviation:"BN",fullNm:"Basophilic Normoblast",orderIdx:16},{id:"15",abbreviation:"PE",fullNm:"Proerythroblast",orderIdx:17},{id:"16",abbreviation:"HC",fullNm:"Histiocyte",orderIdx:18},{id:"17",abbreviation:"OT",fullNm:"Others",orderIdx:19}],pa=[{id:"01",title:"NE",name:"Neutrophil",count:0,percent:0,key:"",order:1},{id:"71",title:"NS",name:"Neutrophil-Segmented",count:0,percent:0,key:"",order:2},{id:"72",title:"NB",name:"Neutrophil-Band",count:0,percent:0,key:"",order:3},{id:"02",title:"ME",name:"Metamyelocyte",count:0,percent:0,key:"",order:4},{id:"03",title:"MY",name:"Myelocyte",count:0,percent:0,key:"",order:5},{id:"04",title:"PR",name:"Promyelocyte",count:0,percent:0,key:"",order:6},{id:"05",title:"LY",name:"Lymphocyte",count:0,percent:0,key:"",order:7},{id:"61",title:"LR",name:"Reactive lymphocyte",count:0,percent:0,key:"",order:8},{id:"62",title:"LA",name:"Abnormal lymphocyte",count:0,percent:0,key:"",order:9},{id:"07",title:"MO",name:"Monocyte",count:0,percent:0,key:"",order:10},{id:"08",title:"EO",name:"Eosinophil",count:0,percent:0,key:"",order:11},{id:"09",title:"BA",name:"Basophil",count:0,percent:0,key:"",order:12},{id:"10",title:"BL",name:"Blast",count:0,percent:0,key:"",order:13},{id:"11",title:"PC",name:"Plasma cell",count:0,percent:0,key:"",order:14},{id:"12",title:"NR",name:"nRBC",count:0,percent:0,key:"",order:15},{id:"13",title:"GP",name:"Giant platelet",count:0,percent:0,key:"",order:16},{id:"14",title:"PA",name:"Platelet aggregation",count:0,percent:0,key:"",order:17},{id:"16",title:"MA",name:"Malaria",count:0,percent:0,key:"",order:18},{id:"15",title:"AR",name:"Artifact",count:0,percent:0,key:"",order:19},{id:"17",title:"SM",name:"Smudge",count:0,percent:0,key:"",order:20}],ga=[{id:"01",title:"NE",name:"Neutrophil",count:0,percent:0,order:1},{id:"71",title:"NS",name:"Neutrophil-Segmented",count:0,percent:0,key:"",order:2},{id:"72",title:"NB",name:"Neutrophil-Band",count:0,percent:0,key:"",order:3},{id:"02",title:"ME",name:"Metamyelocyte",count:0,percent:0,order:4},{id:"03",title:"MY",name:"Myelocyte",count:0,percent:0,order:5},{id:"04",title:"PR",name:"Promyelocyte",count:0,percent:0,order:6},{id:"05",title:"LY",name:"Lymphocyte",count:0,percent:0,order:7},{id:"06",title:"LA",name:"Abnormal lymphocyte",count:0,percent:0,order:8},{id:"07",title:"MO",name:"Monocyte",count:0,percent:0,order:9},{id:"08",title:"EO",name:"Eosinophil",count:0,percent:0,order:10},{id:"09",title:"BA",name:"Basophil",count:0,percent:0,order:11},{id:"10",title:"BL",name:"Blast",count:0,percent:0,order:12},{id:"11",title:"PC",name:"Plasma cell",count:0,percent:0,order:13},{id:"12",title:"ON",name:"Orthochromic Normoblast",count:0,percent:0,order:14},{id:"13",title:"PN",name:"Polychromic Normoblast",count:0,percent:0,order:15},{id:"14",title:"BN",name:"Basophilic Normoblast",count:0,percent:0,order:16},{id:"15",title:"PE",name:"Proerythroblast",count:0,percent:0,order:17},{id:"16",title:"HC",name:"Histiocyte",count:0,percent:0,order:18},{id:"17",title:"OT",name:"Others",count:0,percent:0,order:19}],Ia={class:"titleText"},ba=(0,s.Lk)("span",{class:"greenColor"},"BM",-1),fa=(0,s.Lk)("span",{class:"greenColor"},"C",-1),ya=(0,s.Lk)("span",{class:"greenColor"},"WBC",-1),Ca=(0,s.Lk)("span",{class:"greenColor"},"C",-1),ka={class:"analysisWbc"},ha={key:0,class:"categories"},Sa={class:"categoryNm"},_a={key:0,class:"mb1 liTitle"},Ea={class:"classNm"},Na={key:0,class:"mb1 liTitle"},La={style:{"text-align":"center"}},Ra={class:"degree"},Ta={key:0,class:"mb1 liTitle"},wa={class:"categories"},Pa=(0,s.Lk)("ul",{class:"categoryNm"},[(0,s.Lk)("li",null," Total ")],-1),Aa={class:"classNm"},Da=(0,s.Lk)("ul",{class:"degree"},[(0,s.Lk)("li",null," 100.00 ")],-1),Ma={key:0,class:"categories mt1"},xa={class:"categoryNm"},Oa={key:0,class:"mb1 liTitle"},Ba={class:"classNm"},Ka={key:0,class:"mb1 liTitle"},Ua={style:{"text-align":"center"}},Xa={class:"degree"},Fa={key:0,class:"mb1 liTitle"},Wa={class:"mt1"},$a={class:"categoryNm"},Ga={key:0,class:"mb1 liTitle"},Ha={class:"classNm"},Va={key:0,class:"mb1 liTitle"},ja={key:0},Ya={class:"degree"},qa={key:0,class:"mb1 liTitle"},Ja=(0,s.Lk)("li",null,"-",-1);var za=(0,s.pM)({__name:"classInfoification",props:["bmIsBoolen","parsedData"],setup(e,{emit:t}){const a=e,l=(0,c.Pj)(),i=(0,s.EW)((()=>l.state.commonModule.siteCd)),u=(0,o.KR)([]),r=(0,o.KR)([]),d=(0,o.KR)([]),m=(0,o.KR)(""),v=(0,o.KR)("0"),p=(0,o.KR)(""),g=t;(0,s.sV)((()=>{b(da,null,!0)})),(0,s.wB)((()=>a.parsedData),((e,t)=>{I(e)}),{deep:!0});const I=async e=>{const t=e;"RUNNING_INFO"===t.jobCmd&&await b({wbcInfo:t.slotInfo},t)},b=async(e,t,l)=>{const s=JSON.parse(JSON.stringify(e));if(s.wbcInfo){m.value=s?.wbcInfo?.testType;const e=a.bmIsBoolen?[s.wbcInfo.bmInfo]:[s.wbcInfo.wbcInfo],t=e,l=a.bmIsBoolen?[ga]:[pa];u.value=t[0].length>0?t:l;const o=e=>e.every((e=>e.every((e=>"0"===e.count)))),n=o(u.value);n&&(v.value="0"),r.value=u.value.flat();const i=t.flat().filter((e=>["NR","AR","GP","PA","MC","MA","GP","PA","SM"].includes(e?.title)));d.value=i}else{const e=a.bmIsBoolen?[ga]:[pa];u.value=e,r.value=u.value.flat()}if(s&&s.wbcInfo){const e=s.wbcInfo;if(e&&"03"===e?.stateCd){if("00"===e.wbcCount)return;await C(e),p.value=e.maxWbcCount}}const o=t?.iCasStat??"",n=[...o];if(-1!==n.lastIndexOf("2")){const e={classInfo:{wbcInfo:u.value,totalCount:v.value,maxWbcCount:p.value,slotId:t.slotInfo.slotId},iCasStatArr:n.lastIndexOf("2")};g("classInfoUpdate",e)}},f=(e,t)=>{e&&""!==e||(e="0000",t="01");const a={"0006":{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","SM","NE","GP","PA","OT"]}},l=a[e]||{includesStr:["AR","NR","GP","PA","MC","SM","MA","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","NE","SM","GP","PA","OT"]};return"01"===t||"04"===t?l.includesStr:l.includesStr2},y=(e,t)=>{const a=f(i.value,m.value);let l=0;for(let s of e)a.includes(s.title)||(l+=Number(s.count));return l},C=async e=>{const t=a.bmIsBoolen?e.bmInfo:e.wbcInfo,l=t;let s="0";s="01"===m.value||"04"===m.value?y(u.value.flat(),l).toFixed(0):y(r.value,l).toFixed(0),v.value=s,await S()},k=e=>{const t=h(i.value,m.value);return!t.includes(e.title)},h=(e,t)=>{const a={"0006":{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","SM","NE","GP","PA","OT"]}},l=a[e]||{includesStr:["AR","NR","GP","PA","MC","SM","MA","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","NE","SM","GP","PA","OT"]};return"01"===t||"04"===t?l.includesStr:l.includesStr2},S=async()=>{const e=u.value.map((e=>e.map((e=>{const t=v.value&&"0"!==v.value?(Number(e.count)/Number(v.value)*100).toFixed(1):"0",a=Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t;return{...e,percent:a}}))));u.value=e},_=e=>e?.name;return(t,a)=>((0,s.uX)(),(0,s.CE)("div",{class:(0,n.C4)([e.bmIsBoolen?"bmclass":""])},[(0,s.Lk)("h3",Ia,[e.bmIsBoolen?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[ba,(0,s.eW)(),fa,(0,s.eW)("lassification ")],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[ya,(0,s.eW)(),Ca,(0,s.eW)("lassification")],64))]),(0,s.Lk)("div",ka,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:a},[k(e)?((0,s.uX)(),(0,s.CE)("div",ha,[(0,s.Lk)("ul",Sa,[0===a&&0===t?((0,s.uX)(),(0,s.CE)("li",_a,"Class")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(_(e)),1)]),(0,s.Lk)("ul",Ea,[0===a&&0===t?((0,s.uX)(),(0,s.CE)("li",Na,"Count")):(0,s.Q3)("",!0),(0,s.Lk)("li",La,(0,n.v_)(e?.count),1)]),(0,s.Lk)("ul",Ra,[0===a&&0===t?((0,s.uX)(),(0,s.CE)("li",Ta,"%")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(v.value&&"0"!==v.value?(Number(e?.count)/Number(v.value)*100).toFixed(Number(e?.count)/Number(v.value)===0?0:1):"0"),1)])])):(0,s.Q3)("",!0)],64)))),128))],64)))),128)),(0,s.Lk)("div",wa,[Pa,(0,s.Lk)("ul",Aa,[(0,s.Lk)("li",null,(0,n.v_)(v.value||0),1)]),Da]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:a},["OT"===e.title?((0,s.uX)(),(0,s.CE)("div",Ma,[(0,s.Lk)("ul",xa,[0===a&&0===t?((0,s.uX)(),(0,s.CE)("li",Oa,"Class")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(_(e)),1)]),(0,s.Lk)("ul",Ba,[0===a&&0===t?((0,s.uX)(),(0,s.CE)("li",Ka,"Count")):(0,s.Q3)("",!0),(0,s.Lk)("li",Ua,(0,n.v_)(e?.count),1)]),(0,s.Lk)("ul",Xa,[0===a&&0===t?((0,s.uX)(),(0,s.CE)("li",Fa,"%")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(v.value&&"0"!==v.value?(Number(e?.count)/Number(v.value)*100).toFixed(0):"0"),1)])])):(0,s.Q3)("",!0)],64)))),128))],64)))),128)),(0,s.Lk)("div",Wa,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"categories"},[(0,s.Lk)("ul",$a,[0===t?((0,s.uX)(),(0,s.CE)("li",Ga,"non-WBC")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(_(e)),1)]),(0,s.Lk)("ul",Ha,[0===t?((0,s.uX)(),(0,s.CE)("li",Va)):(0,s.Q3)("",!0),(0,s.Lk)("li",null,[(0,s.eW)((0,n.v_)(e?.count)+" ",1),"NR"===e.title||"GP"===e.title?((0,s.uX)(),(0,s.CE)("span",ja," / "+(0,n.v_)(p.value)+" WBC",1)):(0,s.Q3)("",!0)])]),(0,s.Lk)("ul",Ya,[0===t?((0,s.uX)(),(0,s.CE)("li",qa)):(0,s.Q3)("",!0),Ja])])))),128))])])],2))}});const Qa=za;var Za=Qa;const el=[{categoryId:"01",categoryNm:"Size",classInfo:[{classId:"01",classNm:"Normal",degree:"0"},{classId:"02",classNm:"Macrocyte",degree:"0"},{classId:"03",classNm:"Microcyte",degree:"0"},{classId:"04",classNm:"Anisocytosis",degree:"0"}]},{categoryId:"02",categoryNm:"Chromia",classInfo:[{classId:"01",classNm:"Normal",degree:"0"},{classId:"02",classNm:"Hyperchromic",degree:"0"},{classId:"03",classNm:"Hypochromic",degree:"0"},{classId:"04",classNm:"Polychromia",degree:"0"}]},{categoryId:"03",categoryNm:"Shape",classInfo:[{classId:"01",classNm:"Normal",degree:"0"},{classId:"02",classNm:"Poikilocytosis",degree:"0"},{classId:"03",classNm:"Target Cell",degree:"0"},{classId:"04",classNm:"Burr Cell",degree:"0"},{classId:"05",classNm:"Acanthocyte",degree:"0"},{classId:"06",classNm:"Ovalocyte",degree:"0"},{classId:"07",classNm:"Schistocyte",degree:"0"},{classId:"08",classNm:"Sickle Cell",degree:"0"},{classId:"09",classNm:"Stomatocyte",degree:"0"},{classId:"10",classNm:"Tear Drop Cell",degree:"0"},{classId:"11",classNm:"Spherocyte",degree:"0"}]},{categoryId:"05",categoryNm:"Inclusion Body",classInfo:[{classId:"01",classNm:"Howell-Jolly Body",degree:"0"},{classId:"02",classNm:"Basophilic Stippling",degree:"0"}]}],tl={key:0},al=(0,s.Lk)("h3",{class:"titleText"},[(0,s.Lk)("span",{class:"greenColor"},"Whole"),(0,s.eW)(" Slide Image ")],-1),ll={class:"row"},sl=["src","id","onClick"],ol={key:0,class:"mt-3 row"},nl=(0,s.Lk)("div",{class:"col"},[(0,s.Lk)("div",{style:{color:"#2798DC"}},"Select Interest Area")],-1),il={class:"col"},ul={key:1},cl=(0,s.Lk)("h3",{class:"titleText"},[(0,s.Lk)("span",{class:"greenColor"},"RBC"),(0,s.eW)(),(0,s.Lk)("span",{class:"greenColor"},"C"),(0,s.eW)("lassification ")],-1),rl={class:"categoryNm"},dl={key:0,class:"mb1 liTitle"},ml={class:"classNmRbc"},vl={key:0,class:"mb1 liTitle"},pl={class:"degree analysis"},gl={key:0,class:"mb1 liTitle"},Il={key:0},bl={key:1},fl={key:0},yl={key:1},Cl={class:"categories"},kl=(0,s.Lk)("ul",{class:"categoryNm"},[(0,s.Lk)("li",null,"Others")],-1),hl=(0,s.Lk)("ul",{class:"classNmRbc"},[(0,s.Lk)("li",null,"Platelets"),(0,s.Lk)("li",null,"Malaria")],-1),Sl={class:"degree analysis"},_l={style:{"font-size":"0.7rem"}},El={style:{"font-size":"0.7rem"}};var Nl=(0,s.pM)({__name:"rbcclassification",props:["bmIsBoolen","parsedData"],setup(e,{emit:t}){const a=e,l=(0,o.KR)([]),i=(0,o.KR)(""),u=(0,o.KR)(""),c=(0,o.KR)(""),r=(0,o.KR)("01"),d=(0,o.KR)([]),m=(0,o.KR)([]),v=t;(0,s.sV)((async()=>{await C(),await I({rbcInfo:a.parsedData.slotInfo},"")})),(0,s.wB)((()=>a.parsedData),((e,t)=>{p(e)}),{deep:!0});const p=async e=>{const t=e;if("RUNNING_INFO"===t.jobCmd){const a=e?.slotInfo;a&&"03"===a?.stateCd&&(i.value=a.malariaCount,u.value=a.maxRbcCount,c.value=a.pltCount),await I({rbcInfo:t.slotInfo},t)}},g=(0,o.KR)([]),I=async(e,t)=>{const a=JSON.parse(JSON.stringify(e));if(Array.isArray(a.rbcInfo)){if(r.value=a.rbcInfo[0].testType,!a.rbcInfo[0])return;const e=[a.rbcInfo[0].rbcInfo],l=e[0].length>0?e:[el];b(l[0],t),a.rbcInfo[0].lowPowerPath?g.value=a.rbcInfo[0].lowPowerPath.sort((function(e,t){return e.seqNo-t.seqNo})):g.value=[]}else b([el][0],t)},b=(e,t)=>{let a=0,s=0,o=0;const n=0!==t.length&&t?JSON.parse(JSON.stringify(t?.slotInfo?.rbcInfo)):JSON.parse(JSON.stringify(e)),i=0!==t.length&&t?JSON.parse(JSON.stringify(t?.slotInfo?.rbcInfo)):JSON.parse(JSON.stringify(e));i.forEach((e=>{e.classInfo.forEach((t=>{"01"===e.categoryId?"04"!==t.classId&&(s+=Number(t.degree)):"02"===e.categoryId?"04"!==t.classId&&(o+=Number(t.degree)):a+=Number(t.degree)}))})),i.forEach(((e,t)=>{e.classInfo.forEach(((l,i)=>{m.value&&m.value.forEach((u=>{if(l.originalDegree=n[t].classInfo[i].degree,u.categoryId===e.categoryId&&u.classId===l.classId){const e=Number(l.degree);let t=0;t="01"===u.categoryId?Number((e/s*100).toFixed(2)):"02"===u.categoryId?Number((e/o*100).toFixed(2)):Number((e/a*100).toFixed(2)),isNaN(t)&&(t=0);const n=e=>l.degree=e;t<Number(u.degree1)?n("0"):t<Number(u.degree2)?n("1"):t<Number(u.degree3)?n("2"):n("3")}}))}))})),i.forEach((e=>{e.classInfo.forEach((t=>{if("01"===e.categoryId&&("01"===t.classId&&(e.classInfo[0].degree="1"),["02","03"].includes(t.classId)&&Number(t.degree)>0&&(e.classInfo[0].degree="0")),"02"===e.categoryId&&("01"===t.classId&&(e.classInfo[0].degree="1"),["02","03"].includes(t.classId)&&Number(t.degree)>0&&(e.classInfo[0].degree="0")),"03"===e.categoryId&&("01"===t.classId&&(e.classInfo[0].degree="1",e.classInfo[1].degree="0"),"01"!==t.classId&&"02"!==t.classId)){var a=Number(e.classInfo[1].degree);Number(t.degree)>a&&(e.classInfo[0].degree="0",e.classInfo[1].degree=t.degree)}}))})),l.value[0]=i;const u=t?.iCasStat??"",c=[...u];if(-1!==c.lastIndexOf("2")){const e={rbc:{rbcInfo:i,slotId:t.slotInfo.slotId},iCasStatArr:c.lastIndexOf("2")};v("rbcUpdate",e)}},f=e=>e?.categoryNm,y=(e,t)=>{if("03"===r.value){const e=d.value.findIndex((e=>e.seqNo===t.seqNo));-1!==e?d.value.splice(e,1):d.value.push(t)}},C=async()=>{try{const e=await ie(),t=e.data;m.value=t}catch(e){console.log(e)}};return(e,t)=>{const a=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)("div",null,["01"!==r.value&&"04"!==r.value?((0,s.uX)(),(0,s.CE)("div",tl,[al,(0,s.Lk)("div",null,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)([0,6,12,18,24,30],((e,t)=>(0,s.Lk)("div",{key:t,class:"pl-2"},[(0,s.Lk)("div",ll,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(g.value.slice(e,e+6),((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"col-2 p-1"},[(0,s.Lk)("img",{src:e.path,id:e.seqNo,ref_for:!0,ref:"wholeSlideImg",class:"wholeSlideImg",onClick:t=>y(t,e),style:{width:"75px"}},null,8,sl)])))),128))])]))),64)),"03"===r.value?((0,s.uX)(),(0,s.CE)("div",ol,[nl,(0,s.Lk)("div",il,[(0,s.Lk)("div",null,(0,n.v_)(d.value.length),1)])])):(0,s.Q3)("",!0)])])):((0,s.uX)(),(0,s.CE)("div",ul,[cl,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"categories"},[(0,s.Lk)("ul",rl,[0===t?((0,s.uX)(),(0,s.CE)("li",dl,"Category")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(f(e)),1)]),(0,s.Lk)("ul",ml,[0===t?((0,s.uX)(),(0,s.CE)("li",vl,"Class")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},(0,n.v_)(e?.classNm),1)))),128))]),(0,s.Lk)("ul",pl,[0===t?((0,s.uX)(),(0,s.CE)("li",gl,"Degree")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((t,l)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:l},["01"!==t.classId||"05"===e.categoryId?((0,s.uX)(),(0,s.CE)("li",Il,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(4,(e=>(0,s.bF)(a,{icon:["fas","circle"],key:e,class:(0,n.C4)({degreeActive:e<Number(t?.degree)+2||0,"degree0-img":e>=Number(t?.degree)+1||0})},null,8,["class"]))),64))])):((0,s.uX)(),(0,s.CE)("li",bl,["0"===t.degree?((0,s.uX)(),(0,s.CE)("div",fl,[(0,s.bF)(a,{icon:["fas","circle"]})])):((0,s.uX)(),(0,s.CE)("div",yl,[(0,s.bF)(a,{icon:["fas","circle"],class:"degreeActive"})]))]))],64)))),128))])])))),128))],64)))),128))])),(0,s.Lk)("div",null,[(0,s.Lk)("div",Cl,[kl,hl,(0,s.Lk)("ul",Sl,[(0,s.Lk)("li",_l,(0,n.v_)(c.value||0)+" PLT / 1000 RBC",1),(0,s.Lk)("li",El,(0,n.v_)(i.value||0)+" / "+(0,n.v_)(u.value||0)+" RBC",1)])])])])}}});const Ll=Nl;var Rl=Ll;const Tl={class:"mt1"},wl={key:0,class:"slider"},Pl=["src"];var Al=(0,s.pM)({__name:"foundingCells",props:["parsedData"],setup(e){const t=window.APP_API_BASE_URL||"http://192.168.0.131:3002",a=e,n=(0,o.KR)([]);function i(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function u(e){if(!e||0===e.length)return[];const a=[],l=e?.path.match(/^(.*\\)\d+_Real_Time\\/)?.[0],s=e?.path.match(/[^\\]*$/)[0],o=`${t}/images/getImageRealTime?folder=${l}&imageName=${s}`;return o&&a.unshift(o),a}return(0,s.wB)((()=>a.parsedData),((e,t)=>{const a=e?.slotInfo;if(a){let e={};if("03"===a.stateCd&&a.runningPath&&a.runningPath.length>0){const t=a.runningPath.map((e=>({...e,path:e.path,id:i()})));e=t}if(e.length>0){let t=!1;for(const a of e){if(n.value.find((e=>e.path===a.path))){t=!0;break}n.value.unshift(a)}}}}),{deep:!0}),(e,t)=>((0,s.uX)(),(0,s.CE)("div",Tl,[(0,s.bF)(l.eB,{name:"fade",mode:"out-in"},{default:(0,s.k6)((()=>[n.value.length>0?((0,s.uX)(),(0,s.CE)("div",wl,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.value,(e=>((0,s.uX)(),(0,s.CE)(s.FK,{key:e.id},[u(e)?((0,s.uX)(),(0,s.CE)("img",{key:0,src:u(e),alt:"Slide"},null,8,Pl)):(0,s.Q3)("",!0)],64)))),128))])):(0,s.Q3)("",!0)])),_:1})]))}}),Dl=a(6262);const Ml=(0,Dl.A)(Al,[["__scopeId","data-v-e5e792d0"]]);var xl=Ml;const Ol=(0,s.Lk)("h3",{class:"titleText"},[(0,s.Lk)("span",{class:"greenColor"},"W"),(0,s.eW)("orking "),(0,s.Lk)("span",{class:"greenColor"},"V"),(0,s.eW)("iew ")],-1),Bl={class:"circular-progress-bar mt2"},Kl={class:"progress-ring",width:"120",height:"120"},Ul=["cx","cy","r","stroke-width"],Xl=["cx","cy","r","stroke-width","stroke","stroke-dasharray","stroke-dashoffset"],Fl={class:"slideTime"},Wl=(0,s.Lk)("p",{class:"slideTime1 mt2"},"Number of WBCs",-1),$l={class:"slideCardWrap"},Gl={class:"slideContent pb100a"},Hl={class:"mt1"};var Vl=(0,s.pM)({__name:"workingView100A",props:["parsedData","pb100aCassette"],setup(e){const t=(0,c.Pj)(),a=(0,s.EW)((()=>t.state.runningInfoModule)),l=(0,s.EW)((()=>t.state.commonModule)),i=(0,s.EW)((()=>t.state.timeModule)),u=e,r=(0,o.KR)(0),d=(0,o.KR)(120),m=(0,o.KR)(6),v=(0,o.KR)("#00c2ff"),p=(0,o.KR)(d.value/2),g=(0,o.KR)(2*Math.PI*(p.value-m.value/2)),I=(0,o.KR)(g.value),b=(0,o.KR)(0),f=(0,o.KR)(0),y=(0,o.KR)(""),C=(0,o.KR)(""),k=(0,o.KR)("");let h=null,S=null;const _=(0,o.KR)(W);let E=(0,o.KR)(0),N=(0,o.KR)(0);const L=(0,o.KR)(!1);let R=(0,o.KR)(null);const T=(0,o.KR)("0"),w=(0,o.KR)("0");(0,s.wB)((()=>u.pb100aCassette),(e=>{"reset"===e&&(O(),M(),x())}),{deep:!0}),(0,s.wB)((()=>t.state.embeddedStatusModule),(e=>{const t=e.sysInfo;y.value=e.sysInfo.eqStatCd,l.value.isRunningState?(A(t.iCasStat,_.value.input),A(t.oCasStat,_.value.output)):(O(),x());const a=/[1,2,9]/g,s=String(t?.iCasStat);"999999999999"!==String(t?.iCasStat)&&(s.search(a)<0||"111111111111"===t?.oCasStat)&&(A(t.iCasStat,_.value.input),A(t.oCasStat,_.value.output))}),{deep:!0}),(0,s.wB)([l.value],(async e=>{const t=JSON.parse(JSON.stringify(e));t[0].startEmbedded?""===t[0].runningSlotId&&t[0].startEmbedded&&M():x(),t[0].isRunningState||(O(),x())})),(0,s.wB)([a.value],(e=>{const t=JSON.parse(JSON.stringify(e));if(T.value=t[0]?.runningInfo?.iCasExist,w.value=t[0]?.runningInfo?.oCasExist,"start"===t[0].changeSlideState?.changeSlide.value&&!0===t[0].slideBooleanState?.slideIs.value?D():"stop"===t[0].changeSlideState?.changeSlide.value&&null!==h&&(clearInterval(h),h=null),"afterChange"===t[0].changeSlideState?.changeSlide.value&&(x(),D()),t[0].runningInfo){const e=t[0].runningInfo.slotInfo;if(e&&"03"===e?.stateCd){b.value=Number(e.wbcCount),f.value=Number(e.maxWbcCount),b.value>f.value&&(b.value=f.value);const t=b.value/f.value*100;I.value=g.value*(1-t/100)}}}));const P=e=>{switch(e){case"0":return"EMPTY";case"1":return"EXIST";case"2":return"FULL"}};(0,s.wB)((()=>y.value),(e=>{"05"===e?R.value=setInterval((()=>{L.value=!L.value}),1e3):(L.value=!1,clearInterval(R.value))})),(0,s.sV)((()=>{y.value="01",_.value.input.forEach((e=>{e.slotState="0"})),_.value.output.forEach((e=>{e.slotState="0"}))}));const A=(e,t)=>{t.forEach(((t,a)=>{t.slotState=e.charAt(a)}))},D=()=>{h||(h=setInterval((()=>{l.value.isRunningState&&(N.value+=1,r.value=N.value%60,sessionStorage.setItem("elapsedTimeCount",String(N.value)),t.dispatch("timeModule/setTimeInfo",{slideTime:Y(N.value)}))}),1e3)),(0,s.xo)((()=>{h&&(clearInterval(h),h=null)}))},M=()=>{S||(S=setInterval((()=>{l.value.isRunningState&&(E.value+=1,sessionStorage.setItem("totalElapsedTimeCount",String(E.value)),t.dispatch("timeModule/setTimeInfo",{totalSlideTime:Y(E.value)}))}),1e3)),(0,s.xo)((()=>{S&&(clearInterval(S),S=null)}))},x=()=>{clearInterval(h),h=null,N.value=0,C.value=Y(0),sessionStorage.removeItem("elapsedTimeCount"),t.dispatch("timeModule/setTimeInfo",{slideTime:"00:00:00"})},O=()=>{clearInterval(S),S=null,E.value=0,k.value=Y(0),sessionStorage.removeItem("totalElapsedTimeCount"),t.dispatch("timeModule/setTimeInfo",{totalSlideTime:"00:00:00"})},B=()=>{switch(y.value){case"01":return"IDLE";case"02":return"READY";case"03":return"ERROR";case"04":return"RUNNING";case"05":return"INITIALIZATION";default:return"UNKNOWN"}},K=(e,t)=>{if("input"===t)switch(e){case"0":return"class-for-state-0";case"1":return"class-for-state-1";case"2":return"class-for-state-2";case"3":return"class-for-state-3";case"4":return"class-for-state-4";default:return""}else switch(e){case"0":return"out-for-state-0";case"1":return"out-for-state-1";default:return"outClassDefault"}};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[Ol,(0,s.Lk)("div",null,[(0,s.Lk)("p",{class:(0,n.C4)({blinkColor:L.value})},(0,n.v_)(B()),3),(0,s.Lk)("p",null,(0,n.v_)(b.value),1),(0,s.Lk)("div",Bl,[((0,s.uX)(),(0,s.CE)("svg",Kl,[(0,s.Lk)("circle",{cx:p.value,cy:p.value,r:p.value-m.value/2,"stroke-width":m.value,stroke:"#ccc",fill:"none"},null,8,Ul),(0,s.Lk)("circle",{cx:p.value,cy:p.value,r:p.value-m.value/2,"stroke-width":m.value,stroke:v.value,fill:"none","stroke-dasharray":g.value,"stroke-dashoffset":I.value},null,8,Xl)])),(0,s.Lk)("p",Fl,(0,n.v_)(i.value.slideTime),1)]),Wl,(0,s.Lk)("p",null,(0,n.v_)(i.value.totalSlideTime),1)]),(0,s.Lk)("div",$l,[(0,s.Lk)("ul",Gl,[(0,s.Lk)("p",null,"INPUT : "+(0,n.v_)(P(T.value)),1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(_.value.input,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.slotNo,class:(0,n.C4)(K(e.slotState,"input"))},null,2)))),128)),(0,s.Lk)("p",Hl,"OUTPUT : "+(0,n.v_)(P(w.value)),1)])])]))}});const jl=Vl;var Yl=jl;const ql={class:"contentLeft"},Jl={class:"contentRight"},zl={class:"contentBottom"};var Ql=(0,s.pM)({__name:"index",props:["parsedData","isClass","startStatus","pb100aCassette"],setup(e,{emit:t}){const a=t,n=(0,o.KR)(!1),i=e,u=(0,o.KR)(""),c=(0,o.KR)(!1);(0,s.sV)((async()=>{"bm"===window.PROJECT_TYPE?n.value=!0:u.value=window.PB_VERSION}));const r=e=>{a("rbcAppUpdate",e)},d=e=>{a("classAppUpdateLast",e)},m=e=>{c.value=e};return(t,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bo)((0,s.Lk)("div",ql,[(0,s.bF)(Bt,{onInitDataChangeText:m}),(0,s.bF)(O,{parsedData:i.parsedData,pb100aCassette:e.pb100aCassette},null,8,["parsedData","pb100aCassette"]),(0,s.bF)(ca,{parsedData:i.parsedData,startStatus:i.startStatus,pb100aCassette:e.pb100aCassette},null,8,["parsedData","startStatus","pb100aCassette"])],512),[[l.aG,i.isClass]]),(0,s.bo)((0,s.Lk)("div",Jl,["100a"!==u.value?((0,s.uX)(),(0,s.Wv)(Qt,{key:0,initValData:c.value,parsedData:i.parsedData,class:"contentRightChild"},null,8,["initValData","parsedData"])):((0,s.uX)(),(0,s.Wv)(Yl,{key:1,initValData:c.value,parsedData:i.parsedData,pb100aCassette:e.pb100aCassette,class:"contentRightChild"},null,8,["initValData","parsedData","pb100aCassette"])),n.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(Rl,{key:2,onRbcUpdate:r,parsedData:i.parsedData,class:"contentRightChild"},null,8,["parsedData"])),(0,s.bF)(Za,{onClassInfoUpdate:d,parsedData:i.parsedData,bmIsBoolen:n.value,class:"contentRightChild"},null,8,["parsedData","bmIsBoolen"]),(0,s.Lk)("div",zl,[(0,s.bF)(xl,{parsedData:i.parsedData},null,8,["parsedData"])])],512),[[l.aG,i.isClass]])],64))}});const Zl=(0,Dl.A)(Ql,[["__scopeId","data-v-045b817f"]]);var es=Zl,ts=(0,s.pM)({__name:"HomeView",setup(e){return(e,t)=>{const a=(0,s.g2)("Fragment");return(0,s.uX)(),(0,s.Wv)(a,null,{default:(0,s.k6)((()=>[(0,s.bF)(es)])),_:1})}}});const as=ts;var ls=as;const ss=Z(),os=async e=>ss.httpPost(ee.user.register,e),ns=async e=>ss.httpPost(ee.user.login,e),is=async e=>ss.httpGet(ee.user.getUsers,e),us={class:"joinContent"},cs=(0,s.Lk)("p",{class:"mt2 mb4"},"CREATE ACCOUNT",-1),rs={class:"joinWrapper"},ds=(0,s.Lk)("span",{class:"loginTitle"},"ID",-1),ms=(0,s.Lk)("span",{class:"loginTitle"},"password",-1),vs=(0,s.Lk)("span",{class:"loginTitle"},"Repeat password",-1),ps=(0,s.Lk)("span",{class:"loginTitle"},"name",-1),gs=(0,s.Lk)("span",{class:"loginTitle"},"Employee No",-1),Is=(0,s.Lk)("span",{class:"loginTitle"},"user Type",-1),bs=(0,s.Lk)("option",{value:"admin"},"Admin",-1),fs=(0,s.Lk)("option",{value:"normal"},"Normal",-1),ys=[bs,fs];var Cs=(0,s.pM)({__name:"index",setup(e){const t=(0,o.KR)(""),a=(0,o.KR)(""),n=(0,o.KR)(""),i=(0,o.KR)(""),u=(0,o.KR)(""),c=(0,o.KR)("admin"),r=(0,o.KR)(!1),d=(0,o.KR)(""),m=(0,o.KR)(""),v=()=>{ZI.push("/user/login")},p=async()=>{const e=new Date,l={userId:a.value,password:u.value,name:n.value,employeeNo:t.value,userType:c.value,subscriptionDate:e};try{const e=await os(l);e&&(await g("registration successful"),await ZI.push("/user/login"))}catch(s){console.log(s)}},g=async e=>{r.value=!0,d.value="success",m.value=e},I=()=>{r.value=!1};return(e,o)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",us,[cs,(0,s.Lk)("div",null,[(0,s.Lk)("ul",rs,[(0,s.Lk)("li",null,[ds,(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e)},null,512),[[l.Jo,a.value]])]),(0,s.Lk)("li",null,[ms,(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"text","onUpdate:modelValue":o[1]||(o[1]=e=>u.value=e)},null,512),[[l.Jo,u.value]])]),(0,s.Lk)("li",null,[vs,(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"text","onUpdate:modelValue":o[2]||(o[2]=e=>i.value=e)},null,512),[[l.Jo,i.value]])]),(0,s.Lk)("li",null,[ps,(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"text","onUpdate:modelValue":o[3]||(o[3]=e=>n.value=e)},null,512),[[l.Jo,n.value]])]),(0,s.Lk)("li",null,[gs,(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"text","onUpdate:modelValue":o[4]||(o[4]=e=>t.value=e)},null,512),[[l.Jo,t.value]])]),(0,s.Lk)("li",null,[Is,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":o[5]||(o[5]=e=>c.value=e)},ys,512),[[l.u1,c.value]])])]),(0,s.Lk)("div",{class:"joinBtn"},[(0,s.Lk)("button",{class:"defaultBtn",type:"button",onClick:p},"Create Account"),(0,s.Lk)("button",{class:"defaultBtn",type:"button",onClick:v},"Back")])])]),r.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":r.value,type:d.value,message:m.value,onHide:I,"onUpdate:hideAlert":I},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const ks=Cs;var hs=ks;const Ss=Z(),_s=async e=>Ss.httpPost(ee.device.getDeviceInfo.create,e),Es=async()=>Ss.httpGet(ee.device.getDeviceInfo.get),Ns=async()=>Ss.httpGet(ee.device.getDeviceInfo.ip),Ls=(0,o.KR)(""),Rs=((0,o.KR)(""),(0,o.KR)("")),Ts=(0,o.KR)(vt),ws=(0,o.Kh)({value:[]}),Ps="bm"===window.PROJECT_TYPE,As={testTypeCd:Ps?"02":"01",diffCellAnalyzingCount:Ps?"500":"100",wbcPositionMargin:"0",rbcPositionMargin:"0",pltPositionMargin:"0",pbsCellAnalyzingCount:"100",stitchCount:"1",bfCellAnalyzingCount:"100",iaRootPath:Ps?"D:\\BMIA_proc":"D:\\PBIA_proc",isNsNbIntegration:!1,isAlarm:!1,alarmCount:"5",keepPage:!1,backupPath:"",backupStartDate:new Date,backupEndDate:new Date,userId:""},Ds=async()=>{let e;const t=await le();t&&t.data&&(e=t.data),Ls.value=e?"put":"post";const a={analysisType:As.testTypeCd,diffCellAnalyzingCount:As.diffCellAnalyzingCount,wbcPositionMargin:As.wbcPositionMargin,rbcPositionMargin:As.rbcPositionMargin,pltPositionMargin:As.pltPositionMargin,pbsCellAnalyzingCount:As.pbsCellAnalyzingCount,stitchCount:As.stitchCount,bfCellAnalyzingCount:As.bfCellAnalyzingCount,iaRootPath:As.iaRootPath,isNsNbIntegration:As.isNsNbIntegration,isAlarm:As.isAlarm,alarmCount:As.alarmCount,keepPage:As.keepPage,backupPath:As.backupPath,backupStartDate:As.backupStartDate.toISOString().split("T")[0],backupEndDate:As.backupEndDate.toISOString().split("T")[0]};if("post"===Ls.value)try{const e=await ae(a);e&&(sessionStorage.setItem("isNsNbIntegration",As?.isNsNbIntegration?"Y":"N"),sessionStorage.setItem("wbcPositionMargin",String(As?.wbcPositionMargin)),sessionStorage.setItem("rbcPositionMargin",String(As?.rbcPositionMargin)),sessionStorage.setItem("pltPositionMargin",String(As?.pltPositionMargin)),sessionStorage.setItem("iaRootPath",String(As?.iaRootPath)),sessionStorage.setItem("keepPage",String(As?.keepPage)))}catch(l){console.log(l)}},Ms=async()=>{const e="bm"===window.PROJECT_TYPE?va:ma;for(const l in e)e[l].orderIdx=l;const t=await Ge();t&&(0===t?.data.length?Rs.value="post":Rs.value="put");try{"post"===Rs.value&&await $e(e)}catch(a){console.log(a)}},xs=async()=>{try{const e=await ye();e&&(!e?.data||e?.data instanceof Array&&0===e?.data.length)&&await be({normalRangeItems:Ts.value})}catch(e){console.log(e)}},Os=async()=>{await Bs();const e=[];ws.value.forEach((t=>{t.classInfo.forEach((a=>{e.push({categoryId:t.categoryId,categoryNm:t.categoryNm,classId:a.classId,classNm:a.classNm,degree1:a.degree1,degree2:a.degree2,degree3:a.degree3})}))}));try{const t=await ie();(t.data&&0===t.data.length||!t.data)&&await oe(e)}catch(t){console.error(t)}},Bs=async()=>{ws.value=ut.rbcClassList.map((e=>({...e,classInfo:e.classInfo.map((t=>{const a=ct.find((a=>a.categoryId===e.categoryId&&a.classId===t.classId));return{...t,degree1:a?.degree1||0,degree2:a?.degree2||0,degree3:a?.degree3||0}}))})))},Ks={class:"uimdLogin"},Us={class:"loginContent"},Xs=(0,s.Lk)("p",{class:"loginTitle"},[(0,s.Lk)("span",{class:"loginColorSpan"},"U"),(0,s.eW)("IMD")],-1),Fs=(0,s.Lk)("p",{class:"loginP mt2"},"Unique Idea Medical Device",-1),Ws={class:"mt3 loginDiv"},$s={class:"loginUl"};var Gs=(0,s.pM)({__name:"index",setup(e){const t=(0,c.Pj)(),a=(0,o.KR)(""),n=(0,o.KR)(""),i=((0,s.nI)(),(0,o.KR)(!1)),u=(0,o.KR)(""),r=(0,o.KR)(""),d=(0,o.KR)(!1);(0,s.sV)((()=>{m()}));const m=()=>{const e=JSON.parse(localStorage.getItem("user")||"{}");e.userId&&e.password&&(n.value=e.userId,a.value=e.password,p())},v=()=>{ZI.push("/user/join")},p=async()=>{const e={userId:n.value,password:a.value};if(""!==e.userId&&""!==e.password)try{const a=await ns(e);a?.data?.user?(await Ds(),await Ms(),await xs(),await Os(),await t.dispatch("userModule/setUserAction",a.data?.user),sessionStorage.setItem("user",JSON.stringify(a.data.user)),d.value&&localStorage.setItem("user",JSON.stringify(a.data.user)),await g(a?.data?.user.userId)):b("Login failed.")}catch(l){b("server Err."),console.log(l)}else b("Login failed.")},g=async e=>{try{const e=await Ns();"1"===e.data||window.APP_API_BASE_URL&&window.APP_API_BASE_URL.includes(e.data)?(await t.dispatch("commonModule/setCommonInfo",{viewerCheck:"main"}),await I("main"),sessionStorage.setItem("pcIp",JSON.stringify(e.data))):(await t.dispatch("commonModule/setCommonInfo",{viewerCheck:"viewer"}),await I("viewer"),sessionStorage.setItem("pcIp",JSON.stringify(e.data)))}catch(a){console.log(a)}},I=async e=>{b("login successful."),"main"===e?(await ZI.push("/"),await document.documentElement.requestFullscreen()):(await ZI.push("/dataBase"),await document.documentElement.requestFullscreen()),await t.dispatch("commonModule/setCommonInfo",{loginSetData:""}),await t.dispatch("commonModule/setCommonInfo",{resFlag:!1})},b=e=>{i.value=!0,u.value="success",r.value=e},f=()=>{i.value=!1};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Ks,[(0,s.Lk)("div",Us,[Xs,Fs,(0,s.Lk)("div",Ws,[(0,s.Lk)("ul",$s,[(0,s.Lk)("li",null,[(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),placeholder:"ID"},null,512),[[l.Jo,n.value]])]),(0,s.Lk)("li",null,[(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>a.value=e),placeholder:"password"},null,512),[[l.Jo,a.value]])])]),(0,s.Lk)("div",{class:"loginBtn"},[(0,s.Lk)("button",{type:"button",onClick:p},"Login"),(0,s.Lk)("button",{type:"button",onClick:v},"Add User")])])])]),i.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":i.value,type:u.value,message:r.value,onHide:f,"onUpdate:hideAlert":f},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Hs=Gs;var Vs=Hs,js=a(2903);const Ys=Z(),qs=async e=>Ys.httpPost(ee.backUp.backUpDate,e),Js={class:"settingTable"},zs=(0,s.Lk)("th",null,"Analysis Type",-1),Qs={colspan:"2"},Zs=["value"],eo={key:0,rowspan:"4"},to={key:1},ao=(0,s.Lk)("th",null,"Cell Analyzing Count",-1),lo=["value"],so={key:0},oo=(0,s.Lk)("th",null,"Wbc Position Margin",-1),no=["value"],io={key:1},uo=(0,s.Lk)("th",null,"Rbc Position Margin",-1),co=["value"],ro={key:2},mo=(0,s.Lk)("th",null,"Plt Position Margin",-1),vo=["value"],po={key:3},go=(0,s.Lk)("th",{rowspan:"2"},"PBS Analysis Values",-1),Io=(0,s.Lk)("th",null," Cell Analyzing Count ",-1),bo=["value"],fo={key:0},yo=(0,s.Lk)("th",null,"Stitch Count",-1),Co=["value"],ko={key:4},ho=(0,s.Lk)("th",null,"BF Analysis Values",-1),So=(0,s.Lk)("th",null,"Cell Analyzing Count",-1),_o=["value"],Eo=(0,s.Lk)("th",null,"IA Root Path",-1),No={colspan:"2"},Lo=["value"],Ro=(0,s.Lk)("th",null,"NS/NB Integration",-1),To=(0,s.Lk)("th",null,"Alarm Timer (sec)",-1),wo={key:5},Po=(0,s.Lk)("th",null,"Keep WBC Page",-1),Ao={class:"backupDiv"},Do={class:"backupDivChild"},Mo=(0,s.Lk)("h5",{class:"mb1"},"Backup and Restore",-1),xo={class:"settingDatePickers"},Oo=["value"];var Bo=(0,s.pM)({__name:"cellImageAnalyzed",setup(e){const t=(0,o.KR)(!1),a=(0,o.KR)(""),i=(0,o.KR)(""),u=(0,o.KR)([]),r=(0,o.KR)("01"),d=(0,o.KR)("100"),m=(0,o.KR)("0"),v=(0,o.KR)("0"),p=(0,o.KR)("0"),g=(0,o.KR)("100"),I=(0,o.KR)("1"),b=(0,o.KR)("100"),f=(0,o.KR)("bm"===window.PROJECT_TYPE?"D:\\BMIA_proc":"D:\\PBIA_proc"),y=(0,o.KR)("bm"===window.PROJECT_TYPE?"D:\\BM_backup":"D:\\PB_backup"),C=(0,o.KR)(!1),k=(0,o.KR)(!1),h=(0,o.KR)("5"),S=(0,o.KR)(!1),_=(0,o.KR)(H()().local().toDate()),E=(0,o.KR)(H()().local().toDate()),N=(0,o.KR)(""),L=(0,o.KR)([]),R=(0,o.KR)([]),T=(0,o.KR)(""),w=(0,o.KR)("pb"),P=(0,o.KR)([]),A=(0,c.Pj)(),D=async()=>{const e={startDate:H()(_.value).add(1,"day").local().toDate().toISOString().split("T")[0],endDate:H()(E.value).add(1,"day").local().toDate().toISOString().split("T")[0],backupPath:y.value,sourceFolderPath:`${f.value}`};await qs(e)};(0,s.sV)((async()=>{await(0,s.dY)(),r.value="bm"===window.PROJECT_TYPE?"02":"01",w.value="bm"===window.PROJECT_TYPE?"bm":"pb",P.value="bm"===window.PROJECT_TYPE?et:Ze,u.value="bm"===window.PROJECT_TYPE?at:tt,await x(),await M()}));const M=async()=>{try{const e=await We();if(e)if(e?.data){const t=e.data,a=JSON.parse(JSON.stringify(t)),l=JSON.parse(JSON.stringify(t)),s="bm"===window.PROJECT_TYPE?"BMIA_proc":"PBIA_proc",o="bm"===window.PROJECT_TYPE?"BM_backup":"PB_backup";for(const e in t)a[e]=a[e]+`\\${s}`,l[e]=l[e]+`\\${o}`;L.value=a,R.value=l}else;}catch(e){console.log(e)}},x=async()=>{try{const e=await le();if(e)if(e?.data){N.value="put";const t=e.data;T.value=String(t.id),r.value=t.analysisType,d.value=t.diffCellAnalyzingCount,m.value=t.wbcPositionMargin,v.value=t.rbcPositionMargin,p.value=t.pltPositionMargin,g.value=t.pbsCellAnalyzingCount,I.value=t.stitchCount,b.value=t.bfCellAnalyzingCount,f.value=t.iaRootPath,y.value=t.backupPath,C.value=t.isNsNbIntegration,k.value=t.isAlarm,h.value=t.alarmCount,S.value=t.keepPage,_.value=H()(t.backupStartDate).local().toDate(),E.value=H()(t.backupEndDate).local().toDate()}else N.value="post"}catch(e){console.log(e)}},O=async()=>{const e={analysisType:r.value,diffCellAnalyzingCount:d.value,wbcPositionMargin:m.value,rbcPositionMargin:v.value,pltPositionMargin:p.value,pbsCellAnalyzingCount:g.value,stitchCount:I.value,bfCellAnalyzingCount:b.value,iaRootPath:f.value,isNsNbIntegration:C.value,isAlarm:k.value,alarmCount:h.value,keepPage:S.value,backupPath:y.value,backupStartDate:H()(_.value).add(1,"day").local().toDate().toISOString().split("T")[0],backupEndDate:H()(E.value).add(1,"day").local().toDate().toISOString().split("T")[0]};try{let t={};if(t="post"===N.value?await ae(e):await se(e,T.value),t){const e="post"===N.value?"save successful":$.UPDATE_SUCCESSFULLY;X(e);const a=t?.data;await A.dispatch("dataBaseSetDataModule/setDataBaseSetData",{isNsNbIntegration:a?.isNsNbIntegration?"Y":"N"}),sessionStorage.setItem("isNsNbIntegration",a.isNsNbIntegration?"Y":"N"),sessionStorage.setItem("wbcPositionMargin",a?.wbcPositionMargin),sessionStorage.setItem("rbcPositionMargin",a?.rbcPositionMargin),sessionStorage.setItem("pltPositionMargin",a?.pltPositionMargin),sessionStorage.setItem("iaRootPath",a?.iaRootPath),sessionStorage.setItem("keepPage",String(a?.keepPage))}}catch(t){console.log(t)}},B=()=>{C.value=!C.value},K=()=>{k.value=!k.value},U=()=>{S.value=!S.value},X=e=>{t.value=!0,a.value="success",i.value=e},F=()=>{t.value=!1};return(e,c)=>{const N=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("table",Js,[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[zs,(0,s.Lk)("td",Qs,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":c[0]||(c[0]=e=>r.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(P.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,Zs)))),128))],512),[[l.u1,r.value]])])]),(0,s.Lk)("tr",null,["pb"===w.value?((0,s.uX)(),(0,s.CE)("th",eo,"WBC Diff Analysis Values")):(0,s.Q3)("",!0),"bm"===w.value?((0,s.uX)(),(0,s.CE)("th",to,"BM Diff Analysis Values")):(0,s.Q3)("",!0),ao,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":c[1]||(c[1]=e=>d.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,lo)))),128))],512),[[l.u1,d.value]])])]),"pb"===w.value?((0,s.uX)(),(0,s.CE)("tr",so,[oo,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":c[2]||(c[2]=e=>m.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(nt),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,no)))),128))],512),[[l.u1,m.value]])])])):(0,s.Q3)("",!0),"pb"===w.value?((0,s.uX)(),(0,s.CE)("tr",io,[uo,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":c[3]||(c[3]=e=>v.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(ot),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,co)))),128))],512),[[l.u1,v.value]])])])):(0,s.Q3)("",!0),"pb"===w.value?((0,s.uX)(),(0,s.CE)("tr",ro,[mo,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":c[4]||(c[4]=e=>p.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(ot),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,vo)))),128))],512),[[l.u1,p.value]])])])):(0,s.Q3)("",!0),"pb"===w.value?((0,s.uX)(),(0,s.CE)("tr",po,[go,Io,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":c[5]||(c[5]=e=>g.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(tt),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,bo)))),128))],512),[[l.u1,g.value]])])])):(0,s.Q3)("",!0),(0,s.Lk)("tr",null,["bm"===w.value?((0,s.uX)(),(0,s.CE)("th",fo)):(0,s.Q3)("",!0),yo,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":c[6]||(c[6]=e=>I.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(st),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,Co)))),128))],512),[[l.u1,I.value]])])]),"pb"===w.value?((0,s.uX)(),(0,s.CE)("tr",ko,[ho,So,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":c[7]||(c[7]=e=>b.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(tt),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,_o)))),128))],512),[[l.u1,b.value]])])])):(0,s.Q3)("",!0),(0,s.Lk)("tr",null,[Eo,(0,s.Lk)("td",No,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":c[8]||(c[8]=e=>f.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(L.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,n.v_)(e),9,Lo)))),128))],512),[[l.u1,f.value]])])]),(0,s.Lk)("tr",null,[Ro,(0,s.Lk)("td",null,[(0,s.bF)(N,{icon:C.value?["fas","toggle-on"]:["fas","toggle-off"],class:"iconSize",onClick:B},null,8,["icon"])])]),(0,s.Lk)("tr",null,[To,(0,s.Lk)("td",null,[(0,s.bF)(N,{icon:k.value?["fas","toggle-on"]:["fas","toggle-off"],class:"iconSize",onClick:K},null,8,["icon"])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":c[9]||(c[9]=e=>h.value=e),class:"alarmInput"},null,512),[[l.Jo,h.value]])])]),"pb"===w.value?((0,s.uX)(),(0,s.CE)("tr",wo,[Po,(0,s.Lk)("td",null,[(0,s.bF)(N,{icon:S.value?["fas","toggle-on"]:["fas","toggle-off"],class:"iconSize",onClick:U},null,8,["icon"])])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",Ao,[(0,s.Lk)("div",Do,[Mo,(0,s.Lk)("div",xo,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":c[10]||(c[10]=e=>y.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(R.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,n.v_)(e),9,Oo)))),128))],512),[[l.u1,y.value]]),(0,s.bF)((0,o.R1)(js.A),{modelValue:_.value,"onUpdate:modelValue":c[11]||(c[11]=e=>_.value=e)},null,8,["modelValue"]),(0,s.bF)((0,o.R1)(js.A),{modelValue:E.value,"onUpdate:modelValue":c[12]||(c[12]=e=>E.value=e)},null,8,["modelValue"]),(0,s.Lk)("button",{class:"backupBtn",onClick:D},"backup")])])]),(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:c[13]||(c[13]=e=>O())},"Save Cell Image Analyzed")]),t.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":t.value,type:a.value,message:i.value,onHide:F,"onUpdate:hideAlert":F},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const Ko=Bo;var Uo=Ko;const Xo={id:"collapse-4"},Fo={class:"rbcDegreeCategoryNm"},Wo={class:"mb1"},$o={class:"degreeInput mb1"},Go=["onUpdate:modelValue"],Ho=["onUpdate:modelValue"],Vo=["onUpdate:modelValue"];var jo=(0,s.pM)({__name:"rbcDegree",setup(e){const t=(0,o.Kh)({value:[]}),a=(0,o.KR)("post"),i=(0,o.KR)(!1),u=(0,o.KR)(""),c=(0,o.KR)("");(0,s.sV)((async()=>{await v()}));const r=async()=>{t.value=ut.rbcClassList.map((e=>({...e,classInfo:e.classInfo.map((t=>{const a=ct.find((a=>a.categoryId===e.categoryId&&a.classId===t.classId));return{...t,degree1:a?.degree1||0,degree2:a?.degree2||0,degree3:a?.degree3||0}}))})))},d=()=>{r()},m=async()=>{const e=[];t.value.forEach((t=>{t.classInfo.forEach((a=>{e.push({categoryId:t.categoryId,categoryNm:t.categoryNm,classId:a.classId,classNm:a.classNm,degree1:a.degree1,degree2:a.degree2,degree3:a.degree3})}))}));try{let t={};t="post"===a.value?await oe(e):await ne(e),t&&(g("Save successful"),a.value="put")}catch(l){I(l),console.error(l)}},v=async()=>{try{const e=await ie();a.value="put";const t=e.data;p(t)}catch(e){a.value="post",await r()}},p=e=>{const a=new Map;e.forEach((e=>{const t=e.categoryId,l=e.classId;if(a.has(t)){const s=a.get(t),o=s.classInfo.findIndex((e=>e.classId===l));-1===o?s.classInfo.push({classId:l,classNm:e.classNm,degree1:e.degree1,degree2:e.degree2,degree3:e.degree3}):s.classInfo[o].degree=e.degree}else{const s={categoryId:t,categoryNm:e.categoryNm,classInfo:[{classId:l,classNm:e.classNm,degree1:e.degree1,degree2:e.degree2,degree3:e.degree3}]};a.set(t,s)}})),t.value=Array.from(a.values())},g=e=>{i.value=!0,u.value="success",c.value=e},I=e=>{i.value=!0,u.value="error",c.value=e},b=()=>{i.value=!1};return(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("div",Xo,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"mt2 rbcClassListArr",key:"rbc"+t},[(0,s.Lk)("div",Fo,(0,n.v_)(e?.categoryNm),1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.classInfo,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t},[(0,s.Lk)("div",null,(0,n.v_)(e.classNm),1),(0,s.Lk)("div",Wo," [ "+(0,n.v_)(`${e.degree1} , ${e.degree2} , ${e.degree3}`)+" ] ",1),(0,s.Lk)("div",null,[(0,s.Lk)("div",$o,[(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.degree1=t},null,8,Go),[[l.Jo,e.degree1]]),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.degree2=t},null,8,Ho),[[l.Jo,e.degree2]]),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.degree3=t},null,8,Vo),[[l.Jo,e.degree3]])])])])))),128))])))),128))]),(0,s.Lk)("div",{class:"mt-2 degreeDiv"},[(0,s.Lk)("button",{onClick:d},"Reset"),(0,s.Lk)("button",{type:"button",onClick:m},"Save")])]),i.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":i.value,type:u.value,message:c.value,onHide:b,"onUpdate:hideAlert":b},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Yo=jo;var qo=Yo;const Jo=(0,s.nI)(),zo=((0,c.Pj)(),e=>{z().embedStatus.gripperOpen.reqUserId=e,Zo(z().embedStatus.gripperOpen)}),Qo=e=>{z().embedStatus.cameraReset.reqUserId=e,Zo(z().embedStatus.cameraReset)},Zo=e=>{Jo?.appContext.config.globalProperties.$socket.emit("message",{type:"SEND_DATA",payload:e})},en=(0,s.Lk)("p",{class:"mb1"},"Gripper Open",-1),tn=(0,s.Lk)("p",{class:"mb1"},"Camera Reset",-1),an=(0,s.Lk)("li",{class:"mt2"},[(0,s.Lk)("p",{class:"mb1"},"Charge Remaining Count"),(0,s.Lk)("button",{type:"button",class:"defaultBtn"},"Scan")],-1);var ln=(0,s.pM)({__name:"deviceControls",setup(e){const t=(0,o.KR)(!1),a=(0,o.KR)(""),l=(0,o.KR)(""),n=(0,c.Pj)(),i=(0,o.KR)(""),u=(0,s.EW)((()=>n.state.userModule)),r=(0,s.EW)((()=>n.state.commonModule)),d=(0,o.KR)(!1);(0,s.sV)((async()=>{const e=JSON.parse(JSON.stringify(u.value));i.value=e.userId})),(0,s.wB)([r.value],(async e=>{await(0,s.dY)();const[t]=e,{isRunningState:a}=t||{};d.value=a}));const m=()=>{d.value?p($.IDS_ERROR_ALREADY_RUNNING):zo(i.value)},v=()=>{d.value?p($.IDS_ERROR_ALREADY_RUNNING):Qo(i.value)},p=e=>{t.value=!0,a.value="success",l.value=e},g=()=>{t.value=!1};return(e,o)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",{class:"customSettingContainer"},[(0,s.Lk)("li",null,[en,(0,s.Lk)("button",{onClick:m,type:"button",class:"defaultBtn"},"OK")]),(0,s.Lk)("li",{class:"mt2"},[tn,(0,s.Lk)("button",{type:"button",class:"defaultBtn",onClick:v},"OK")]),an])]),t.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":t.value,type:a.value,message:l.value,onHide:g,"onUpdate:hideAlert":g},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const sn=ln;var on=sn;const nn={class:"customClass customSettingContainer"},un=["onUpdate:modelValue"],cn=["onUpdate:modelValue"];var rn=(0,s.pM)({__name:"customClass",setup(e){const t=(0,o.KR)(""),a=[{customNum:90,abbreviation:"",fullNm:""},{customNum:91,abbreviation:"",fullNm:""},{customNum:92,abbreviation:"",fullNm:""},{customNum:93,abbreviation:"",fullNm:""},{customNum:94,abbreviation:"",fullNm:""}],i=(0,o.KR)([]),u=(0,o.KR)(!1),c=(0,o.KR)(""),r=(0,o.KR)("");(0,s.sV)((async()=>{await m()}));const d=async()=>{try{let e;if("post"!==t.value){const e=await ce({classArr:i.value});return void(e.data?(v($.UPDATE_SUCCESSFULLY),await m()):p("update failed"))}e=await ue({classArr:i.value}),e&&(v("save successful"),t.value="put",await m())}catch(e){console.log(e)}},m=async()=>{try{const e=await re();if(e)if(!e?.data||e?.data instanceof Array&&0===e?.data.length)t.value="post",i.value=a;else{t.value="put";const a=e.data;i.value=a}}catch(e){console.log(e)}},v=e=>{u.value=!0,c.value="success",r.value=e},p=e=>{u.value=!0,c.value="error",r.value=e},g=()=>{u.value=!1};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",nn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id},[(0,s.Lk)("span",null,"ID: "+(0,n.v_)(e.customNum),1),(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.abbreviation=t,type:"text",maxlength:"3",placeholder:"abbreviation"},null,8,un),[[l.Jo,e.abbreviation]])]),(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.fullNm=t,type:"text",maxlength:"25",placeholder:"class name"},null,8,cn),[[l.Jo,e.fullNm]])])])))),128))]),(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:d},"Save")]),u.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":u.value,type:c.value,message:r.value,onHide:g,"onUpdate:hideAlert":g},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const dn=rn;var mn=dn;const vn={class:"wbcHotKeysItems"},pn=["onUpdate:modelValue"];var gn=(0,s.pM)({__name:"wbcHotKeys",setup(e){const t=(0,o.KR)(""),a=(0,o.KR)([]),i=(0,o.KR)(!1),u=(0,o.KR)(""),c=(0,o.KR)(""),r=(0,o.KR)("pb");(0,s.sV)((async()=>{r.value="bm"===window.PROJECT_TYPE?"bm":"pb",await m()}));const d=async()=>{try{let e;if("post"!==t.value){const e=await me({wbcHotKeysItems:a.value});return void(e.data?(v($.UPDATE_SUCCESSFULLY),await m()):p("update failed"))}e=await de({wbcHotKeysItems:a.value}),e&&(v("save successful"),t.value="put",await m())}catch(e){console.log(e)}},m=async()=>{try{const e=await ve();e&&(!e?.data||e?.data instanceof Array&&0===e?.data.length?(t.value="post",a.value="bm"===r.value?dt:rt):(t.value="put",a.value=e.data))}catch(e){console.log(e)}},v=e=>{i.value=!0,u.value="success",c.value=e},p=e=>{i.value=!0,u.value="error",c.value=e},g=()=>{i.value=!1};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",vn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id},[(0,s.Lk)("span",null,(0,n.v_)(e.abbreviation),1),(0,s.Lk)("span",null,(0,n.v_)(e.fullNm),1),(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.key=t,type:"text",maxlength:"25",placeholder:"class name"},null,8,pn),[[l.Jo,e.key]])])])))),128))]),(0,s.Lk)("button",{onClick:d,class:"saveBtn",type:"button"},"Save")]),i.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":i.value,type:u.value,message:c.value,onHide:g,"onUpdate:hideAlert":g},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const In=gn;var bn=In;const fn={class:"wbcHotKeysItems"},yn=["onUpdate:modelValue"];var Cn=(0,s.pM)({__name:"bfHotKeys",setup(e){const t=(0,o.KR)(""),a=(0,o.KR)([]),i=(0,o.KR)(!1),u=(0,o.KR)(""),c=(0,o.KR)("");(0,s.sV)((async()=>{await d()}));const r=async()=>{try{let e;if("post"!==t.value){const e=await ge({bfHotKeysItems:a.value});return void(e.data?(m($.UPDATE_SUCCESSFULLY),await d()):v("update failed"))}e=await pe({bfHotKeysItems:a.value}),e&&(m("save successful"),t.value="put",await d())}catch(e){console.log(e)}},d=async()=>{try{const e=await Ie();e&&(!e?.data||e?.data instanceof Array&&0===e?.data.length?(t.value="post",a.value=mt):(t.value="put",a.value=e.data))}catch(e){console.log(e)}},m=e=>{i.value=!0,u.value="success",c.value=e},v=e=>{i.value=!0,u.value="error",c.value=e},p=()=>{i.value=!1};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",fn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id},[(0,s.Lk)("span",null,(0,n.v_)(e.abbreviation),1),(0,s.Lk)("span",null,(0,n.v_)(e.fullNm),1),(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.key=t,type:"text",maxlength:"25",placeholder:"class name"},null,8,yn),[[l.Jo,e.key]])])])))),128))]),(0,s.Lk)("button",{onClick:r,class:"saveBtn",type:"button"},"Save")]),i.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":i.value,type:u.value,message:c.value,onHide:p,"onUpdate:hideAlert":p},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const kn=Cn;var hn=kn;const Sn={class:"normalItems"},_n={class:"mt1"},En=["onUpdate:modelValue"],Nn=["onUpdate:modelValue"];var Ln=(0,s.pM)({__name:"normalRange",setup(e){const t=(0,o.KR)(""),a=(0,o.KR)([]),i=(0,o.KR)(!1),u=(0,o.KR)(""),c=(0,o.KR)("");(0,s.sV)((async()=>{await d()}));const r=async()=>{try{let e;if("post"!==t.value){const e=await fe({normalRangeItems:a.value});return void(e.data?(m($.UPDATE_SUCCESSFULLY),await d()):v("update failed"))}e=await be({normalRangeItems:a.value}),e&&(m("save successful"),t.value="put",await d())}catch(e){console.log(e)}},d=async()=>{try{const e=await ye();e&&(!e?.data||e?.data instanceof Array&&0===e?.data.length?(t.value="post",a.value=vt):(t.value="put",a.value=e.data))}catch(e){console.log(e)}},m=e=>{i.value=!0,u.value="success",c.value=e},v=e=>{i.value=!0,u.value="error",c.value=e},p=()=>{i.value=!1};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",Sn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id},[(0,s.Lk)("div",null,(0,n.v_)(e.abbreviation)+" - "+(0,n.v_)(e.fullNm),1),(0,s.Lk)("div",_n,[(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.min=t,type:"text",maxlength:"25",placeholder:"class name"},null,8,En),[[l.Jo,e.min]])]),(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.max=t,type:"text",maxlength:"25",placeholder:"class name"},null,8,Nn),[[l.Jo,e.max]])]),(0,s.Lk)("span",null,(0,n.v_)(e.unit),1)])])))),128))]),(0,s.Lk)("button",{onClick:r,class:"saveBtn",type:"button"},"Save")]),i.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":i.value,type:u.value,message:c.value,onHide:p,"onUpdate:hideAlert":p},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Rn=Ln;var Tn=Rn;const wn={class:"wbcClassScroll"},Pn=(0,s.Lk)("h1",{class:"classTitle"},"Class",-1),An=["onDragstart","onDrop"],Dn={class:"nth1ChildOrder"};var Mn=(0,s.pM)({__name:"classOrder",setup(e){const t=(0,o.KR)([]),a=(0,o.KR)(-1),i=(0,o.KR)(0),u=(0,o.KR)(""),c=(0,o.KR)(!1),r=(0,o.KR)(""),d=(0,o.KR)("");(0,s.sV)((async()=>{t.value="bm"===window.PROJECT_TYPE?va:ma,await m()}));const m=async()=>{try{const e=await Ge();e&&(0===e?.data.length?u.value="post":(u.value="put",t.value=e.data.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx)))))}catch(e){console.log(e)}},v=async()=>{let e=t.value;for(const t in e)e[t].orderIdx=t;try{let t={};if(t="post"===u.value?await $e(e):await He(e),t){const e="post"===u.value?"save successful":$.UPDATE_SUCCESSFULLY;I(e)}}catch(a){console.log(a)}},p=(e,t)=>{a.value=e,i.value=t.clientY-t.target.getBoundingClientRect().top},g=(e,l)=>{if(l.preventDefault(),-1!==a.value){const l=t.value.splice(a.value,1)[0];t.value.splice(e,0,l),a.value=-1}},I=e=>{c.value=!0,r.value="success",d.value=e},b=()=>{c.value=!1};return(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",wn,[Pn,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"wbcClassDbDiv",draggable:"true",onDragstart:e=>p(t,e),onDragover:a[0]||(a[0]=(0,l.D$)((()=>{}),["prevent"])),onDrop:e=>g(t,e)},[(0,s.Lk)("ul",Dn,[(0,s.Lk)("li",null,(0,n.v_)(e?.fullNm),1)])],40,An)))),128))]),(0,s.Lk)("button",{onClick:v,class:"saveBtn",type:"button"},"Save"),c.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":c.value,type:r.value,message:d.value,onHide:b,"onUpdate:hideAlert":b},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const xn=Mn;var On=xn;const Bn={class:"alignDiv"},Kn={class:"defaultTable",style:{margin:"auto"}},Un=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"WBC min"),(0,s.Lk)("th",null,"WBC max"),(0,s.Lk)("th",null,"count")])],-1),Xn=["onUpdate:modelValue"],Fn=["onUpdate:modelValue"],Wn=["onUpdate:modelValue"],$n=["value"],Gn={class:"mt1"};var Hn=(0,s.pM)({__name:"wbcRunningCount",setup(e){const t=(0,o.KR)(""),a=(0,o.KR)([]),i=(0,o.KR)(!1),u=(0,o.KR)(""),c=(0,o.KR)("");(0,s.sV)((async()=>{await r()}));const r=async()=>{try{const e=await Be();if(e&&e.data){const l=e.data;!l||l instanceof Array&&0===l.length?(console.log(null),t.value="post",a.value=yt):(t.value="put",a.value=l)}}catch(e){console.error(e)}},d=async()=>{try{let e;if("post"!==t.value){const e=await Oe({wbcRunCountItems:a.value});return void(e.data?(m($.UPDATE_SUCCESSFULLY),await r()):v("update failed"))}e=await xe({wbcRunCountItems:a.value}),e&&(m("save successful"),t.value="put",await r())}catch(e){console.error(e)}},m=e=>{i.value=!0,u.value="success",c.value=e},v=e=>{i.value=!0,u.value="error",c.value=e},p=()=>{i.value=!1};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Bn,[(0,s.Lk)("table",Kn,[Un,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.min=t,class:"form-control form-control-sm"},null,8,Xn),[[l.Jo,e.min]])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.max=t,class:"form-control form-control-sm"},null,8,Fn),[[l.Jo,e.max]])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t=>e.wbcConditionCount=t,class:"form-select form-select-sm"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(lt),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:+e.value},(0,n.v_)(e.text),9,$n)))),128))],8,Wn),[[l.u1,e.wbcConditionCount]])])])))),128))])])]),(0,s.Lk)("div",Gn,[(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:t[0]||(t[0]=e=>d())},"Save")]),i.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":i.value,type:u.value,message:c.value,onHide:p,"onUpdate:hideAlert":p},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Vn=Hn;var jn=Vn;const Yn={class:"settingTabSubButtons"},qn={class:"tab-content"};var Jn=(0,s.pM)({__name:"index",setup(e){const t=(0,o.KR)("cellImageAnalyzed"),a=(0,o.KR)(""),l=e=>{t.value=e},i=(0,s.EW)((()=>{switch(t.value){case"cellImageAnalyzed":return Uo;case"rbcDegree":return qo;case"deviceControls":return on;case"wbcCustomClass":return mn;case"wbcHotKeys":return bn;case"bfHotKeys":return hn;case"normalRange":return Tn;case"wbcOrder":return On;case"wbcRunningCount":return jn;default:return null}}));return(0,s.sV)((async()=>{a.value="bm"===window.PROJECT_TYPE?"bm":"pb"})),(e,o)=>((0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",Yn,[(0,s.Lk)("button",{onClick:o[0]||(o[0]=e=>l("cellImageAnalyzed")),class:(0,n.C4)({active:"cellImageAnalyzed"===t.value})},"Cell Image Analyzed",2),"pb"===a.value?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:o[1]||(o[1]=e=>l("rbcDegree")),class:(0,n.C4)({active:"rbcDegree"===t.value})},"RBC Degree",2)):(0,s.Q3)("",!0),(0,s.Lk)("button",{onClick:o[2]||(o[2]=e=>l("deviceControls")),class:(0,n.C4)({active:"deviceControls"===t.value})},"Device Controls",2),(0,s.Lk)("button",{onClick:o[3]||(o[3]=e=>l("wbcRunningCount")),class:(0,n.C4)({active:"wbcRunningCount"===t.value})},"WBC Running Count",2),(0,s.Lk)("button",{onClick:o[4]||(o[4]=e=>l("wbcCustomClass")),class:(0,n.C4)({active:"wbcCustomClass"===t.value})},(0,n.v_)("pb"===a.value?"WBC":"BM")+" Custom Class ",3),(0,s.Lk)("button",{onClick:o[5]||(o[5]=e=>l("wbcHotKeys")),class:(0,n.C4)({active:"wbcHotKeys"===t.value})},(0,n.v_)("pb"===a.value?"WBC":"BM")+" Hot Keys ",3),"pb"===a.value?((0,s.uX)(),(0,s.CE)("button",{key:1,onClick:o[6]||(o[6]=e=>l("bfHotKeys")),class:(0,n.C4)({active:"bfHotKeys"===t.value})},"BF Hot Keys",2)):(0,s.Q3)("",!0),(0,s.Lk)("button",{onClick:o[7]||(o[7]=e=>l("normalRange")),class:(0,n.C4)({active:"normalRange"===t.value})},"Normal Range",2),(0,s.Lk)("button",{onClick:o[8]||(o[8]=e=>l("wbcOrder")),class:(0,n.C4)({active:"wbcOrder"===t.value})},(0,n.v_)("pb"===a.value?"WBC":"BM")+" Order ",3)]),(0,s.Lk)("div",qn,[((0,s.uX)(),(0,s.Wv)((0,s.$y)(i.value)))])]))}});const zn=Jn;var Qn=zn;const Zn={class:"settingContainer"},ei={class:"searchUserContainer"},ti=["value"],ai={class:"table defaultTable mt2"},li=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"No."),(0,s.Lk)("th",null,"User Type"),(0,s.Lk)("th",null,"User ID"),(0,s.Lk)("th",null,"Name"),(0,s.Lk)("th",null,"Employee"),(0,s.Lk)("th",null,"Subscription Date"),(0,s.Lk)("th",null,"Latest Date")])],-1);var si=(0,s.pM)({__name:"index",setup(e){(0,s.sV)((async()=>{i.value=a.id,await g()}));const t=sessionStorage.getItem("user"),a=JSON.parse(t||"{}"),i=(0,o.KR)(""),u=(0,o.KR)([]),c=e=>e.replace("T"," ").replace(".000Z",""),r=(0,o.KR)("userId"),d=(0,o.KR)([{value:"userId",text:"User Id"},{value:"name",text:"User Name"}]),m=(0,o.KR)(""),v=(e,t,a)=>{const l=t.toLowerCase();return e.filter((e=>{const t="userId"===a?String(e.userId):e.name;return t.toLowerCase().includes(l)}))},p=async()=>{try{const e=await is(String(i.value));if(e&&e.data){const t=e.data.users||[],a=v(t,m.value,r.value);u.value=a}}catch(e){console.error("An error occurred:",e)}},g=async()=>{try{const e=await is(String(i.value));e&&e?.data&&(u.value=e.data.users||[])}catch(e){console.log(e)}};return(e,t)=>{const a=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)("div",Zn,[(0,s.Lk)("div",ei,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),class:"searchSelect"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,ti)))),128))],512),[[l.u1,r.value]]),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>m.value=e),class:"searchInputBox"},null,512),[[l.Jo,m.value]]),(0,s.bF)(a,{icon:["fas","search"],class:"searchBtn",onClick:p})]),(0,s.Lk)("table",ai,[li,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,n.v_)(e.id),1),(0,s.Lk)("td",null,(0,n.v_)(e.userType),1),(0,s.Lk)("td",null,(0,n.v_)(e.userId),1),(0,s.Lk)("td",null,(0,n.v_)(e.name),1),(0,s.Lk)("td",null,(0,n.v_)(e.employeeNo),1),(0,s.Lk)("td",null,(0,n.v_)(c(e.subscriptionDate)),1),(0,s.Lk)("td",null,(0,n.v_)(c(e.latestDate)),1)])))),128))])])])}}});const oi=si;var ni=oi;const ii={class:"settingImagePrint"},ui=["value"],ci={class:"mt1"};var ri=(0,s.pM)({__name:"ImagePrint",setup(e){const t=(0,o.KR)([]),a=(0,o.KR)([]),i=(0,o.KR)(""),u=(0,o.KR)(!1),c=(0,o.KR)(""),r=(0,o.KR)("");(0,s.sV)((async()=>{await m()}));const d=async()=>{try{let e;if(t.value.forEach((e=>{e.checked=a.value.includes(e.classId)})),"post"!==i.value){const e=await ke({imagePrintItems:t.value});return void(e.data?(v($.UPDATE_SUCCESSFULLY),await m()):p("update failed"))}e=await Ce({imagePrintItems:t.value}),e&&(v("save successful"),i.value="put",await m())}catch(e){console.error(e)}},m=async()=>{try{const e=await he();if(e&&e.data){const l=e.data;!l||l instanceof Array&&0===l.length?(i.value="post",t.value="bm"===window.PROJECT_TYPE?gt:pt):(i.value="put",t.value=l,a.value=l.filter((e=>e.checked)).map((e=>e.classId)))}}catch(e){console.error(e)}},v=e=>{u.value=!0,c.value="success",r.value=e},p=e=>{u.value=!0,c.value="error",r.value=e},g=()=>{u.value=!1};return(e,o)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",ii,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,(e=>((0,s.uX)(),(0,s.CE)("label",{key:e.id},[(0,s.Lk)("div",null,(0,n.v_)(e.fullNm),1),(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:e.classId,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e)},null,8,ui),[[l.lH,a.value]])])])))),128))]),(0,s.Lk)("div",ci,[(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:o[1]||(o[1]=e=>d())},"Save")]),u.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":u.value,type:c.value,message:r.value,onHide:g,"onUpdate:hideAlert":g},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const di=ri;var mi=di;const vi={class:"alignDiv"},pi=(0,s.Lk)("p",{class:"mb4"}," [ WBC ] ",-1),gi={class:"mb1"},Ii=["onUpdate:modelValue"],bi={class:"alignDiv"},fi=(0,s.Lk)("p",{class:"mt2 mb4"}," [ RBC ] ",-1),yi={class:"mb1"},Ci=["onUpdate:modelValue"],ki={class:"alignDiv"},hi=(0,s.Lk)("p",{class:"mb2"}," [ Min Count ] ",-1),Si={key:0},_i=(0,s.Lk)("p",{class:"mb1 mt1"},"Giant Platelet",-1),Ei={key:1},Ni=(0,s.Lk)("p",{class:"mb1 mt1"},"Platelet Aggregation",-1),Li={class:"mt1"};var Ri=(0,s.pM)({__name:"lisCode",setup(e){const t=(0,o.KR)([]),a=(0,o.KR)([]),i=(0,o.KR)([]),u=(0,o.KR)(""),c=(0,o.KR)(!1),r=(0,o.KR)(""),d=(0,o.KR)("");(0,s.sV)((async()=>{await v()}));const m=async()=>{try{let e,l,s;if("post"!==u.value){const e=await _e({lisCodeItems:t.value}),l=await Le({lisCodeItems:a.value}),s=await Ue({minCountItems:i.value});return void(e.data&&l.data&&s.data?(p($.UPDATE_SUCCESSFULLY),await v()):g("update failed"))}e=await Se({lisCodeItems:t.value}),l=await Ne({lisCodeItems:a.value}),s=await Ke({minCountItems:i.value}),e&&l&&s&&(p("save successful"),u.value="put",await v())}catch(e){console.error(e)}},v=async()=>{try{const e=await Ee(),l=await Re(),s=await Xe();if(e&&e.data&&l&&l.data&&s&&s.data){const o=e.data,n=l.data,c=s.data;!o||o instanceof Array&&0===o.length?(u.value="post",t.value=It):(u.value="put",t.value=o),!n||n instanceof Array&&0===n.length?(u.value="post",a.value=bt):(u.value="put",a.value=n),!c||c instanceof Array&&0===c.length?(u.value="post",i.value=ft):(u.value="put",i.value=c)}}catch(e){console.error(e)}},p=e=>{c.value=!0,r.value="success",d.value=e},g=e=>{c.value=!0,r.value="error",d.value=e},I=()=>{c.value=!1};return(e,o)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",vi,[pi,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,(e=>((0,s.uX)(),(0,s.CE)("label",{key:e.classId},[(0,s.Lk)("p",gi,(0,n.v_)(e.fullNm),1),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.key=t},null,8,Ii),[[l.Jo,e.key]])])))),128))]),(0,s.Lk)("div",bi,[fi,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("label",{key:e.fullNm},[(0,s.Lk)("p",yi,(0,n.v_)(e.categoryNm)+" - "+(0,n.v_)(e.fullNm),1),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.key=t},null,8,Ci),[[l.Jo,e.key]])])))),128))]),(0,s.Lk)("div",ki,[hi,(0,s.Lk)("ul",null,[i.value.length>0?((0,s.uX)(),(0,s.CE)("li",Si,[_i,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>i.value[0].minGPCount=e),class:"form-control form-control-sm"},null,512),[[l.Jo,i.value[0].minGPCount]])])):(0,s.Q3)("",!0),i.value.length>0?((0,s.uX)(),(0,s.CE)("li",Ei,[Ni,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=e=>i.value[0].minPACount=e),class:"form-control form-control-sm"},null,512),[[l.Jo,i.value[0].minPACount]])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",Li,[(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:o[2]||(o[2]=e=>m())},"Save")]),c.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":c.value,type:r.value,message:d.value,onHide:I,"onUpdate:hideAlert":I},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Ti=Ri;var wi=Ti;const Pi={class:"alignDiv"},Ai={class:"mb1"},Di=["onUpdate:modelValue"],Mi={class:"mt1"};var xi=(0,s.pM)({__name:"cbcCode",setup(e){const t=(0,o.KR)([]),a=(0,o.KR)(""),i=(0,o.KR)(!1),u=(0,o.KR)(""),c=(0,o.KR)("");(0,s.sV)((async()=>{await d()}));const r=async()=>{try{let e;if("post"!==a.value){const e=await we({cbcCodeItems:t.value});return void(e.data?(m($.UPDATE_SUCCESSFULLY),await d()):v("update failed"))}e=await Te({cbcCodeItems:t.value}),e&&(m("save successful"),a.value="put",await d())}catch(e){console.error(e)}},d=async()=>{try{const e=await Pe();if(e&&e.data){const l=e.data;!l||l instanceof Array&&0===l.length?(a.value="post",t.value=it):(a.value="put",t.value=l)}}catch(e){console.error(e)}},m=e=>{i.value=!0,u.value="success",c.value=e},v=e=>{i.value=!0,u.value="error",c.value=e},p=()=>{i.value=!1};return(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Pi,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,(e=>((0,s.uX)(),(0,s.CE)("label",{key:e.cd},[(0,s.Lk)("p",Ai,(0,n.v_)(e.fullNm),1),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.classCd=t},null,8,Di),[[l.Jo,e.classCd]])])))),128))]),(0,s.Lk)("div",Mi,[(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:a[0]||(a[0]=e=>r())},"Save")]),i.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":i.value,type:u.value,message:c.value,onHide:p,"onUpdate:hideAlert":p},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Oi=xi;var Bi=Oi;const Ki={class:"alignDiv",style:{"text-align":"center"}},Ui=(0,s.Lk)("p",{class:"mb2"},"LIS Hot Key",-1),Xi=["value"],Fi=(0,s.Lk)("p",{class:"mb2 mt2"},"Lis File Path",-1),Wi=["value"],$i=(0,s.Lk)("p",{class:"mb2 mt2"},"Cbc File Path",-1),Gi=["value"],Hi={class:"mt1"};var Vi=(0,s.pM)({__name:"filePathSet",setup(e){const t=(0,o.KR)([]),a=(0,o.KR)(""),l=(0,o.KR)(!1),n=(0,o.KR)(""),i=(0,o.KR)("");(0,s.sV)((async()=>{await c()}));const u=async()=>{try{let e;if("post"!==a.value){const e=await De({filePathSetItems:t.value});return void(e.data?(v($.UPDATE_SUCCESSFULLY),await c()):p("update failed"))}e=await Ae({filePathSetItems:t.value}),e&&(v("save successful"),a.value="put",await c())}catch(e){console.error(e)}},c=async()=>{try{const e=await Me();if(e&&e.data){const l=e.data;!l||l instanceof Array&&0===l.length?(a.value="post",t.value=Ct):(a.value="put",t.value=l)}}catch(e){console.error(e)}},r=(e,a)=>{t.value[a].lisHotKey=e.target.value},d=(e,a)=>{t.value[a].lisFilePath=e.target.value},m=(e,a)=>{t.value[a].cbcFilePath=e.target.value},v=e=>{l.value=!0,n.value="success",i.value=e},p=e=>{l.value=!0,n.value="error",i.value=e},g=()=>{l.value=!1};return(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Ki,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,[Ui,(0,s.Lk)("input",{type:"text",value:t.value[0]?t.value[0].lisHotKey:"",onInput:a[0]||(a[0]=e=>r(e,0))},null,40,Xi)]),(0,s.Lk)("li",null,[Fi,(0,s.Lk)("input",{type:"text",value:t.value[0]?t.value[0].lisFilePath:"",onInput:a[1]||(a[1]=e=>d(e,0))},null,40,Wi)]),(0,s.Lk)("li",null,[$i,(0,s.Lk)("input",{type:"text",value:t.value[0]?t.value[0].cbcFilePath:"",onInput:a[2]||(a[2]=e=>m(e,0))},null,40,Gi)])])]),(0,s.Lk)("div",Hi,[(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:a[3]||(a[3]=e=>u())},"Save")]),l.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":l.value,type:n.value,message:i.value,onHide:g,"onUpdate:hideAlert":g},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const ji=Vi;var Yi=ji;const qi={class:"settingTabSubButtons"},Ji={key:0},zi={class:"tab-content"};var Qi=(0,s.pM)({__name:"index",setup(e){const t=(0,o.KR)(!1);let a=(0,o.KR)("ImagePrint");const l=e=>{a.value=e},i=(0,s.EW)((()=>{switch(a.value){case"ImagePrint":return mi;case"LisCode":return wi;case"CbcCode":return Bi;case"filePathSet":return Yi;default:return null}}));return(0,s.sV)((()=>{t.value="bm"===window.PROJECT_TYPE})),(e,u)=>((0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",qi,[(0,s.Lk)("button",{onClick:u[0]||(u[0]=e=>l("ImagePrint")),class:(0,n.C4)({active:"ImagePrint"===(0,o.R1)(a)})},"Image Print",2),t.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Ji,[(0,s.Lk)("button",{onClick:u[1]||(u[1]=e=>l("LisCode")),class:(0,n.C4)({active:"LisCode"===(0,o.R1)(a)})},"Lis Code",2),(0,s.Lk)("button",{onClick:u[2]||(u[2]=e=>l("CbcCode")),class:(0,n.C4)({active:"CbcCode"===(0,o.R1)(a)})},"CBC Code",2),(0,s.Lk)("button",{onClick:u[3]||(u[3]=e=>l("filePathSet")),class:(0,n.C4)({active:"filePathSet"===(0,o.R1)(a)})},"Lis(CBC) Hot Key & File Path",2)]))]),(0,s.Lk)("div",zi,[((0,s.uX)(),(0,s.Wv)((0,s.$y)(i.value)))])]))}});const Zi=Qi;var eu=Zi;function tu(e,t){return(0,s.uX)(),(0,s.CE)("div")}const au={},lu=(0,Dl.A)(au,[["render",tu]]);var su=lu;const ou={class:"versionContainer"};var nu=(0,s.pM)({__name:"index",setup(e){const t=(0,o.KR)();return(0,s.sV)((()=>{t.value=[{key:"AI Version",name:window.AI_VERSION},{key:"Web Frontend Version",name:window.WEB_FRONTEND_VERSION},{key:"Web Backend Version",name:window.WEB_BACKEND_VERSION},{key:"PB Version",name:window.PB_VERSION}]})),(e,a)=>((0,s.uX)(),(0,s.CE)("div",ou,[(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},[(0,s.Lk)("span",null,(0,n.v_)(e.key),1),(0,s.Lk)("span",null,(0,n.v_)(e.name),1)])))),128))])]))}});const iu=nu;var uu=iu;const cu={class:"settingWrapDiv"},ru={class:"settingTabBtn"},du=["onClick"];var mu=(0,s.pM)({__name:"index",setup(e){const t=["Login/Account","Analysis/Database","Report","Quality Check","Version"],a=(0,o.KR)(t[0]),l=e=>{a.value=e,sessionStorage.setItem("selectedTab",e)},i={"Login/Account":ni,"Analysis/Database":Qn,Report:eu,"Quality Check":su,Version:uu},u=sessionStorage.getItem("selectedTab");u&&t.includes(u)&&(a.value=u);const c=(0,s.EW)((()=>i[a.value]));return(e,o)=>((0,s.uX)(),(0,s.CE)("div",cu,[(0,s.Lk)("ul",ru,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(t,(e=>(0,s.Lk)("li",{key:e,class:(0,n.C4)({activeTab:a.value===e}),onClick:t=>l(e)},(0,n.v_)(e),11,du))),64))]),((0,s.uX)(),(0,s.Wv)((0,s.$y)(c.value),{class:"settingWrap"}))]))}});const vu=mu;var pu=vu;const gu={class:"layer"},Iu={class:"layer-content"},bu={class:"layer-header"},fu={class:"layer-body"};var yu={__name:"modal",emits:["update:closeLayer"],setup(e,{emit:t}){const a=(0,o.KR)(!1),l=t,n=()=>{a.value=!1,l("update:closeLayer",!1)};return(0,s.sV)((()=>{l("afterOpen")})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",gu,[(0,s.Lk)("div",Iu,[(0,s.Lk)("div",bu,[(0,s.RG)(e.$slots,"header"),(0,s.Lk)("button",{onClick:n,class:"alertButton"},"Close")]),(0,s.Lk)("div",fu,[(0,s.RG)(e.$slots,"content")])])]))}};const Cu=yu;var ku=Cu;const hu=Z(),Su=async e=>hu.httpPost(ee.settings.runningInfo.create,e),_u=async e=>hu.httpPut(ee.settings.runningInfo.update,e,"",!0),Eu=async e=>{const t=Object.entries(e).filter((([e,t])=>void 0!==t)).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(String(t))}`)).join("&");return hu.httpGet(ee.settings.runningInfo.get,`${t}`,!0)},Nu=async e=>hu.httpDelete(ee.settings.runningInfo.delete,e,!0),Lu=async e=>hu.httpGet(ee.settings.runningInfo.detail,`${e}`,!1),Ru=async e=>hu.httpGet(ee.settings.runningInfo.pageUpDown,`${e}`,!0),Tu=async e=>hu.httpGet(ee.settings.runningInfo.updatePcIpState,`${e}`,!0),wu=async e=>hu.httpGet(ee.settings.runningInfo.clearPcIpState,`${e}`,!0);a(4603),a(7566),a(8721);var Pu=a(3075);const Au={style:{width:"900px",height:"90%","overflow-y":"auto",background:"#fff",color:"#000",position:"absolute",top:"10%",left:"33%","box-sizing":"border-box",padding:"3rem 7rem",border:"2px solid #ccc","border-radius":"10px"}},Du=(0,s.Lk)("div",null,[(0,s.Lk)("h3",{style:{margin:"40px 0","font-size":"1.2rem","font-weight":"600","text-align":"center"}},"Analysis Report from UIMD PB system")],-1),Mu={style:{display:"flex","flex-direction":"column","justify-content":"space-between"}},xu={style:{width:"100%"}},Ou=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{style:{width:"30%"}}),(0,s.Lk)("col",{style:{width:"70%"}})],-1),Bu={style:{"padding-bottom":"5px"}},Ku=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Slot ID",-1),Uu={style:{"text-align":"left",padding:"5px 0"}},Xu={style:{"padding-bottom":"5px"}},Fu=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Ordered date",-1),Wu={style:{"text-align":"left",padding:"5px 0"}},$u={style:{"padding-bottom":"5px"}},Gu=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Signed by ID",-1),Hu={style:{"text-align":"left",padding:"5px 0"}},Vu={style:{"padding-bottom":"5px"}},ju=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Signed date",-1),Yu={style:{"text-align":"left",padding:"5px 0"}},qu={style:{"padding-bottom":"5px"}},Ju=(0,s.Lk)("th",{style:{"text-align":"left"}},"Ordered Classification",-1),zu={style:{"text-align":"left",padding:"5px 0"}},Qu={style:{"padding-bottom":"5px"}},Zu=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Name",-1),ec={style:{"text-align":"left",padding:"5px 0"}},tc={style:{"padding-bottom":"5px"}},ac=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Birth",-1),lc={style:{"text-align":"left",padding:"5px 0"}},sc={style:{"padding-bottom":"5px"}},oc=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Gender",-1),nc={style:{"text-align":"left",padding:"5px 0"}},ic={style:{"margin-top":"20px","border-top":"2px dotted #696969"}},uc={key:0,style:{"margin-top":"20px"}},cc=(0,s.Lk)("h3",{style:{margin:"40px 0","font-size":"1.2rem","font-weight":"600","text-align":"center"}},"RBC classification result",-1),rc={style:{width:"100%"}},dc=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{style:{width:"30%"}}),(0,s.Lk)("col",{style:{width:"45%"}}),(0,s.Lk)("col",{style:{width:"25%"}})],-1),mc=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{style:{"text-align":"left"}},"Category"),(0,s.Lk)("th",{style:{"text-align":"left"}},"Class"),(0,s.Lk)("th",{style:{"text-align":"left"}},"Degree")])],-1),vc={style:{"text-align":"left",padding:"5px 0"}},pc={style:{"text-align":"left",padding:"5px 0"}},gc={style:{"text-align":"left",padding:"5px 0"}},Ic={key:0},bc={style:{"padding-bottom":"5px"}},fc=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Others",-1),yc=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Platelets",-1),Cc={style:{"text-align":"left",padding:"5px 0"}},kc={style:{"padding-bottom":"5px"}},hc=(0,s.Lk)("th",null,null,-1),Sc=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Malaria",-1),_c={style:{"text-align":"left",padding:"5px 0"}},Ec={style:{"padding-bottom":"5px"}},Nc=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Comment",-1),Lc={style:{"text-align":"left",padding:"5px 0"}},Rc={style:{"margin-top":"20px"}},Tc=(0,s.Lk)("h3",{style:{margin:"40px 0","font-size":"1.2rem","font-weight":"600","text-align":"center"}},"WBC classification result",-1),wc={style:{width:"100%"}},Pc=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{style:{width:"30%"}}),(0,s.Lk)("col",{style:{width:"45%"}}),(0,s.Lk)("col",{style:{width:"25%"}})],-1),Ac=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{style:{"text-align":"left"}},"Class"),(0,s.Lk)("th",{style:{"text-align":"left"}},"Count"),(0,s.Lk)("th",{style:{"text-align":"left"}},"Percent")])],-1),Dc={style:{"text-align":"left",padding:"5px 0"}},Mc={style:{"text-align":"left",padding:"5px 0"}},xc={style:{"text-align":"left",padding:"5px 0"}},Oc={style:{"padding-bottom":"5px"}},Bc=(0,s.Lk)("th",{style:{"text-align":"left","font-weight":"bold",padding:"5px 0"}},"Total count",-1),Kc={style:{"text-align":"left",padding:"5px 0"}},Uc=(0,s.Lk)("td",{style:{"text-align":"left",padding:"5px 0"}},"100.00%",-1),Xc={style:{"padding-bottom":"5px"}},Fc=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Comment",-1),Wc={colspan:"2",style:{"text-align":"left",padding:"5px 0"}},$c={class:"print",style:{"list-style":"none","padding-left":"0","margin-top":"20px"}},Gc={style:{"font-weight":"bold"}},Hc={style:{position:"relative"}},Vc=["src","width","height"];var jc=(0,s.pM)({__name:"print",props:["selectItems","printOnOff","selectItemWbc"],emits:["printClose"],setup(e,{emit:t}){const a=e,l=window.APP_API_BASE_URL||"http://192.168.0.131:3002",i=(0,c.Pj)(),u=(0,o.KR)(null),r=(0,o.KR)([]),d=((0,o.KR)([]),(0,s.EW)((()=>i.state.commonModule))),m=(0,o.KR)(sessionStorage.getItem("selectItems")),v=(0,o.KR)(m.value?JSON.parse(m.value):null),p=d.value.iaRootPath,I=((0,s.EW)((()=>i.state.userModule)),(0,o.KR)([])),b=t,f=["12","13","14","15","16"];(0,s.sV)((async()=>{r.value="object"===typeof a.selectItemWbc?a.selectItemWbc:JSON.parse(a.selectItemWbc),await h(),await k()}));const y=(0,s.EW)((()=>r.value.filter((e=>!f.includes(e.id)&&e.count>0))));function C(e,t,s){if(!r.value||0===r.value.length)return"";const o=""!==a.selectItems?.img_drive_root_path&&a.selectItems?.img_drive_root_path?a.selectItems?.img_drive_root_path:p,n=a.selectItems.slotId||"",i="bm"===window.PROJECT_TYPE?`${o}/${n}/04_BM_Classification/${t}_${s}`:`${o}/${n}/01_WBC_Classification/${t}_${s}`;return`${l}/images?folder=${i}&imageName=${e}`}const k=async()=>{try{const e=u.value;if(!e)throw new Error("    .");const t=Pu.Ay.gzip(e.innerHTML,{level:9}),a=await fetch(`${l}/pdf/convert`,{method:"POST",headers:{"Content-Type":"application/octet-stream","Content-Encoding":"gzip"},body:t});if(!a.ok)throw new Error("HTML PDF  .");const s=await a.blob(),o=window.URL.createObjectURL(s);window.open(o,"_blank","width=800,height=500,noopener,noreferrer"),window.URL.revokeObjectURL(o)}catch(e){console.error("Error:",e)}},h=async()=>{try{const e=await he();if(e&&e.data){const t=e.data;!t||t instanceof Array&&0===t.length?console.log(null):(I.value=t.filter((e=>e.checked)).map((e=>e.classId)),r.value=r.value.filter((e=>I.value.includes(e.id))))}}catch(e){console.error(e)}},S=()=>{b("printClose")};return(t,a)=>((0,s.uX)(),(0,s.CE)("div",Au,[(0,s.Lk)("button",{style:{position:"absolute",right:"8px",background:"none",border:"1px solid #000","border-radius":"5px",padding:"7px 25px",top:"5px",cursor:"pointer"},onClick:S},"Close"),(0,s.Lk)("div",{ref_key:"printContent",ref:u,style:{"margin-top":"20px"}},[Du,(0,s.Lk)("div",Mu,[(0,s.Lk)("table",xu,[Ou,(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",Bu,[Ku,(0,s.Lk)("td",Uu,(0,n.v_)(e.selectItems?.slotId),1)]),(0,s.Lk)("tr",Xu,[Fu,(0,s.Lk)("td",Wu,(0,n.v_)((0,o.R1)(j)(e.selectItems?.orderDttm)),1)]),(0,s.Lk)("tr",$u,[Gu,(0,s.Lk)("td",Hu,(0,n.v_)(e.selectItems?.submitUserId),1)]),(0,s.Lk)("tr",Vu,[ju,(0,s.Lk)("td",Yu,(0,n.v_)(e.selectItems?.submitOfDate),1)]),(0,s.Lk)("tr",qu,[Ju,(0,s.Lk)("td",zu,(0,n.v_)((0,o.R1)(g)(e.selectItems?.testType)),1)]),(0,s.Lk)("tr",Qu,[Zu,(0,s.Lk)("td",ec,(0,n.v_)(e.selectItems?.patientName),1)]),(0,s.Lk)("tr",tc,[ac,(0,s.Lk)("td",lc,(0,n.v_)(e.selectItems?.birthDay),1)]),(0,s.Lk)("tr",sc,[oc,(0,s.Lk)("td",nc,(0,n.v_)("01"===e.selectItems?.gender?"Male":"Female"),1)])])]),(0,s.Lk)("div",ic,[["01","04"].includes(e.selectItems?.testType)?((0,s.uX)(),(0,s.CE)("div",uc,[cc,(0,s.Lk)("table",rc,[dc,mc,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)([e.selectItems?.rbcInfo],((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:t,style:{"padding-bottom":"5px"}},[(0,s.Lk)("td",vc,(0,n.v_)(e.categoryNm),1),(0,s.Lk)("td",pc,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t},(0,n.v_)(e?.classNm),1)))),128))]),(0,s.Lk)("td",gc,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((t,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:a},["01"!==t.classId||"05"===e.categoryId?((0,s.uX)(),(0,s.CE)("div",Ic,(0,n.v_)(t?.degree),1)):(0,s.Q3)("",!0)],64)))),128))])])))),128))],64)))),128)),(0,s.Lk)("tr",bc,[fc,yc,(0,s.Lk)("th",Cc,(0,n.v_)(e.selectItems?.rbcInfo.pltCount)+" PLT / 1000 RBC",1)]),(0,s.Lk)("tr",kc,[hc,Sc,(0,s.Lk)("th",_c,(0,n.v_)(e.selectItems?.rbcInfo?.malariaCount)+" / "+(0,n.v_)(e.selectItems.maxRbcCount)+" RBC",1)]),(0,s.Lk)("tr",Ec,[Nc,(0,s.Lk)("th",Lc,(0,n.v_)(v.value.rbcMemo),1)])])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Rc,[Tc,(0,s.Lk)("table",wc,[Pc,Ac,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(y.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id,style:{"padding-bottom":"5px"}},[(0,s.Lk)("th",Dc,(0,n.v_)(e?.name),1),(0,s.Lk)("td",Mc,(0,n.v_)(e?.count),1),(0,s.Lk)("td",xc,(0,n.v_)(e?.percent)+" %",1)])))),128)),(0,s.Lk)("tr",Oc,[Bc,(0,s.Lk)("td",Kc,(0,n.v_)(e.selectItems?.wbcInfo?.totalCount),1),Uc]),(0,s.Lk)("tr",Xc,[Fc,(0,s.Lk)("td",Wc,(0,n.v_)(v.value?.wbcMemo),1)])])]),(0,s.Lk)("ul",$c,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id},[(0,s.Lk)("div",Gc,(0,n.v_)(e?.title)+" ("+(0,n.v_)(e?.count)+")",1),(0,s.Lk)("ul",{class:(0,n.C4)("wbcImgWrap "+e?.title),style:{"list-style":"none","padding-left":"0","margin-top":"10px"}},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.images,(t=>((0,s.uX)(),(0,s.CE)("li",{key:t.fileName,style:{display:"inline-block","margin-right":"10px"}},[(0,s.Lk)("div",Hc,[(0,s.Lk)("img",{src:C(t.fileName,e.id,e.title),width:t.width?t.width:"150px",height:t.height?t.height:"150px",style:(0,n.Tr)({filter:t.filter}),class:"cellImg",ref_for:!0,ref:"cellRef"},null,12,Vc),(0,s.Lk)("div",{class:"center-point",style:(0,n.Tr)(t.coordinates)},null,4)])])))),128))],2)])))),128))])])])])],512)]))}});const Yc=jc;var qc=Yc;const Jc=[{id:"01",title:"NE",name:"Neutrophil",count:0,percent:0,key:"",order:1},{id:"71",title:"NS",name:"Neutrophil-Segmented",count:0,percent:0,key:"",order:2},{id:"72",title:"NB",name:"Neutrophil-Band",count:0,percent:0,key:"",order:3},{id:"02",title:"ME",name:"Metamyelocyte",count:0,percent:0,key:"",order:4},{id:"03",title:"MY",name:"Myelocyte",count:0,percent:0,key:"",order:5},{id:"04",title:"PR",name:"Promyelocyte",count:0,percent:0,key:"",order:6},{id:"05",title:"LY",name:"Lymphocyte",count:0,percent:0,key:"",order:7},{id:"61",title:"LR",name:"Reactive lymphocyte",count:0,percent:0,key:"",order:8},{id:"62",title:"LA",name:"Abnormal lymphocyte",count:0,percent:0,key:"",order:9},{id:"07",title:"MO",name:"Monocyte",count:0,percent:0,key:"",order:10},{id:"08",title:"EO",name:"Eosinophil",count:0,percent:0,key:"",order:11},{id:"09",title:"BA",name:"Basophil",count:0,percent:0,key:"",order:12},{id:"10",title:"BL",name:"Blast",count:0,percent:0,key:"",order:13},{id:"11",title:"PC",name:"Plasma cell",count:0,percent:0,key:"",order:14},{id:"12",title:"NR",name:"nRBC",count:0,percent:0,key:"",order:15},{id:"13",title:"GP",name:"Giant platelet",count:0,percent:0,key:"",order:16},{id:"14",title:"PA",name:"Platelet aggregation",count:0,percent:0,key:"",order:17},{id:"16",title:"MA",name:"Malaria",count:0,percent:0,key:"",order:18},{id:"15",title:"AR",name:"Artifact",count:0,percent:0,key:"",order:19},{id:"17",title:"SM",name:"Smudge",count:0,percent:0,key:"",order:20}],zc=[{id:"01",title:"NE",name:"Neutrophil",count:0,percent:0,order:1},{id:"71",title:"NS",name:"Neutrophil-Segmented",count:0,percent:0,key:"",order:2},{id:"72",title:"NB",name:"Neutrophil-Band",count:0,percent:0,key:"",order:3},{id:"02",title:"ME",name:"Metamyelocyte",count:0,percent:0,order:4},{id:"03",title:"MY",name:"Myelocyte",count:0,percent:0,order:5},{id:"04",title:"PR",name:"Promyelocyte",count:0,percent:0,order:6},{id:"05",title:"LY",name:"Lymphocyte",count:0,percent:0,order:7},{id:"06",title:"LA",name:"Abnormal lymphocyte",count:0,percent:0,order:8},{id:"07",title:"MO",name:"Monocyte",count:0,percent:0,order:9},{id:"08",title:"EO",name:"Eosinophil",count:0,percent:0,order:10},{id:"09",title:"BA",name:"Basophil",count:0,percent:0,order:11},{id:"10",title:"BL",name:"Blast",count:0,percent:0,order:12},{id:"11",title:"PC",name:"Plasma cell",count:0,percent:0,order:13},{id:"12",title:"ON",name:"Orthochromic Normoblast",count:0,percent:0,order:14},{id:"13",title:"PN",name:"Polychromic Normoblast",count:0,percent:0,order:15},{id:"14",title:"BN",name:"Basophilic Normoblast",count:0,percent:0,order:16},{id:"15",title:"PE",name:"Proerythroblast",count:0,percent:0,order:17},{id:"16",title:"HC",name:"Histiocyte",count:0,percent:0,order:18},{id:"17",title:"OT",name:"Others",count:0,percent:0,order:19}],Qc={class:"defaultTable mt2 dbDataTable"},Zc=(0,s.Lk)("th",null,"NO",-1),er=(0,s.Lk)("th",null,"Type",-1),tr=(0,s.Lk)("th",null,"State",-1),ar=(0,s.Lk)("th",null,"Tray Slot",-1),lr=(0,s.Lk)("th",null,"Barcode NO",-1),sr=(0,s.Lk)("th",null,"Patient ID",-1),or=(0,s.Lk)("th",null,"Patient Name",-1),nr=(0,s.Lk)("th",null,"Analyzed Date",-1),ir=(0,s.Lk)("th",null,"Tact Time(S)",-1),ur=(0,s.Lk)("th",null,"Submit",-1),cr=(0,s.Lk)("th",null,"Submit Date",-1),rr=(0,s.Lk)("th",null,"Edit",-1),dr=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"15%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"15%"}),(0,s.Lk)("col",{width:"3%"})],-1),mr={key:0},vr=["onClick","onDblclick","data-row-id","onContextmenu"],pr=["onUpdate:modelValue","onChange","checked"],gr={key:1},Ir=(0,s.Lk)("tr",{class:"text-center"},[(0,s.Lk)("td",{colspan:"13"}," NO Data")],-1),br=[Ir],fr=(0,s.Lk)("li",null,"export XLSX",-1),yr=(0,s.Lk)("h2",null,"Edit order data",-1),Cr={class:"editOrder"},kr=(0,s.Lk)("span",null,"PB/BF",-1),hr=(0,s.Lk)("span",null,"Tray Slot",-1),Sr=(0,s.Lk)("span",null,"BARCODE ID",-1),_r=(0,s.Lk)("span",null,"PATIENT ID",-1),Er=(0,s.Lk)("span",null,"PATIENT NAME",-1),Nr=(0,s.Lk)("span",null,"Analyzed date",-1),Lr=(0,s.Lk)("span",null,"Signed state",-1),Rr=(0,s.Lk)("p",null,"Barcode Image",-1),Tr=["src"];var wr={__name:"listTable",props:["dbData"],setup(e,{emit:t}){const a=e,i=(0,o.KR)(null),u=t,r=(0,o.KR)(""),d=(0,o.KR)(!1),m=(0,o.KR)({}),v=(0,c.Pj)(),p=(0,s.EW)((()=>v.state.userModule)),f=(0,o.KR)(""),y=(0,o.KR)(!1),C=(0,o.KR)(""),k=(0,o.KR)(""),h=(0,o.KR)(""),S=e=>{const t=H()(e,"YYYYMMDDHHmmssSSSSS");return t.format("YYYY-MM-DD HH:mm:ss")},_=(0,o.KR)({visible:!1,x:0,y:0}),E=(0,o.KR)([]),N=sessionStorage.getItem("user"),L=JSON.parse(N||"{}"),R=(0,o.KR)(""),T=(0,o.KR)({}),w=(0,o.KR)(!1),P=(0,o.KR)(null),A=(0,o.KR)([]),D=(0,o.KR)(!1),M=(0,s.nI)(),x=((0,s.EW)((()=>v.state.commonModule.siteCd)),(0,o.KR)("")),O=(0,s.EW)((()=>v.state.commonModule.iaRootPath));(0,s.sV)((async()=>{h.value=JSON.parse(sessionStorage.getItem("pcIp")),f.value=window.PROJECT_TYPE;try{R.value=L.id,await ee()}catch(e){console.log(e)}document.addEventListener("click",G)})),(0,s.hi)((()=>{document.removeEventListener("click",G)})),(0,s.nT)((async()=>{if(a.dbData.length>0){await(0,s.dY)();const e=sessionStorage.getItem("dbBaseTrClickId")||0,t=a.dbData.filter((t=>t.id===Number(e)));z(t[0]);const l=new IntersectionObserver(Y,{root:null,rootMargin:"0px",threshold:.5});i.value&&l.observe(i.value)}}));const B=()=>{w.value=!1},K=()=>{w.value=!0,W()},U=()=>{se(T.value),W()},X=()=>{Z(T.value),W()},F=()=>{a.dbData.forEach((e=>{e.checked=D.value}))},W=()=>{_.value.x=0,_.value.y=0,_.value.visible=!1},G=e=>{const t=document.querySelector(".context-menu");t&&!t.contains(e.target)&&W()},V=(e,t)=>{if(0!==a.dbData.filter((e=>e.checked)).length){if(T.value=e,0!==Object.keys(e?.wbcInfo).length){const t=e?.wbcInfo?.wbcInfo[0],a=t.sort(((e,t)=>e.id-t.id));A.value=a}t&&(_.value.x=t.clientX,_.value.y=t.clientY,_.value.visible=!0)}else q($.IDS_ERROR_SELECT_A_TARGET_ITEM)},j=e=>{e.hasOwnProperty("checked")||(e.checked=!1)},Y=(e,t)=>{e.forEach((e=>{e.isIntersecting&&1!==e.intersectionRatio&&u("loadMoreData")}))},q=e=>{y.value=!0,C.value="error",k.value=e},J=()=>{y.value=!1},z=e=>{if(!e)return;u("selectItem",e),r.value=e.id,sessionStorage.setItem("dbBaseTrClickId",e.id);const t=document.querySelector(`[data-row-id="${e.id}"]`);t&&t.scrollIntoView({behavior:"smooth",block:"center"})},Q=async e=>{try{const t=await Ns(),a=t.data,l=`oldPcIp=${a}&newEntityId=${e.id}&newPcIp=${a}`;await Tu(l).then((e=>{M?.appContext.config.globalProperties.$socket.emit("state",{type:"SEND_DATA",payload:"refreshDb"})})).catch((e=>{console.log(e)}))}catch(t){console.log(t)}},Z=async e=>{if(e.lock_status)return;let t=[];0===Object.keys(e?.wbcInfo).length?(t="bm"!==f.value?Jc:zc,e.wbcInfo="bm"!==f.value?{wbcInfo:[Jc]}:{wbcInfo:[zc]}):t=e?.wbcInfo?.wbcInfo[0];const a=t.sort(((e,t)=>e.id-t.id));sessionStorage.setItem("selectItemRbc",JSON.stringify(e?.rbcInfo)),sessionStorage.setItem("selectItemWbc",JSON.stringify(a)),sessionStorage.setItem("selectItems",JSON.stringify(e)),await v.dispatch("commonModule/setCommonInfo",{clonedWbcInfo:e.wbcInfoAfter}),await v.dispatch("commonModule/setCommonInfo",{clonedRbcInfo:e.rbcInfo.rbcClass}),await Q(e),await ZI.push("/databaseDetail")},ee=async()=>{try{const e=await ie(),t=e.data;E.value=t}catch(e){}},te=e=>{d.value=e},ae=()=>{},le=async()=>{try{const e={id:m.value.id,barcodeNo:m.value.barcodeNo,patientId:m.value.patientId,patientNm:m.value.patientNm},t=[...a.dbData],l=t.findIndex((e=>e.id===m.value.id));-1!==l&&(t[l]={...t[l],...e});const s=await _u({userId:Number(p.value.id),runingInfoDtoItems:[t[l]]});s?(q("success"),u("initData"),te()):console.error("   ")}catch(e){console.error("Error:",e)}},se=async e=>{oe(),m.value=JSON.parse(JSON.stringify(e)),m.value.submitState=["","Ready","checkFirst"].includes(m.value.submitState)?"":m.value.submitState,m.value.testType="bm"!==f.value?g(e?.testType):I(e?.testType);const t=""!==e?.img_drive_root_path&&e?.img_drive_root_path?e?.img_drive_root_path:O.value;x.value=b("barcode_image.jpg",t,e.slotId,kt.barcodeDirName)},oe=()=>{d.value=!0},ne=async()=>{try{const e=a.dbData.filter((e=>e.checked));if(0===e.length)return void q($.IDS_ERROR_SELECT_A_TARGET_ITEM);const t=e.map((e=>e.id)),l=""!==e?.img_drive_root_path&&e?.img_drive_root_path?e?.img_drive_root_path:sessionStorage.getItem("iaRootPath"),s=e.map((e=>`${l}/${e.slotId}`)),o={ids:t,img_drive_root_path:s},n=await Nu(o);n.success?(q("Items deleted successfully"),u("refresh"),W()):console.error("Failed to delete items")}catch(e){console.error("Error:",e)}},ue=(e,t)=>{switch(e){case"Ready":return"Ready";case"Submit":return`Submit (${t})`;default:return"Ready"}};return(t,a)=>{const u=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("table",Qc,[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[Zc,(0,s.Lk)("th",null,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=e=>D.value=e),onChange:F},null,544),[[l.lH,D.value]])]),er,tr,ar,lr,sr,or,nr,ir,ur,cr,rr])]),dr,0!==e.dbData.length?((0,s.uX)(),(0,s.CE)("tbody",mr,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.dbData,((e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id,class:(0,n.C4)({selectedTr:r.value===e.id,submittedTr:"Submit"===e.submitState,rock:e.lock_status&&e.pcIp!==h.value,checkFirst:"checkFirst"===e.submitState}),onClick:t=>z(e),onDblclick:t=>Z(e),ref_for:!0,ref:"firstRow",style:{height:"49px"},"data-row-id":e.id,onContextmenu:(0,l.D$)((t=>V(e,t)),["prevent"])},[(0,s.Lk)("td",null,(0,n.v_)(t+1),1),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t=>e.checked=t,onChange:t=>j(e),checked:e.checked},null,40,pr),[[l.lH,e.checked]])]),(0,s.Lk)("td",null,(0,n.v_)("bm"!==f.value?(0,o.R1)(g)(e?.testType):(0,o.R1)(I)(e?.testType)),1),(0,s.Lk)("td",null,[(0,s.bF)(u,{icon:["fas",""+(e?.lock_status?"lock":"lock-open")]},null,8,["icon"])]),(0,s.Lk)("td",null,(0,n.v_)(e?.traySlot),1),(0,s.Lk)("td",null,(0,n.v_)(e?.barcodeNo),1),(0,s.Lk)("td",null,(0,n.v_)(e?.patientId),1),(0,s.Lk)("td",null,(0,n.v_)(e?.patientNm),1),(0,s.Lk)("td",null,(0,n.v_)(""===e?.analyzedDttm?"":S(e?.analyzedDttm)),1),(0,s.Lk)("td",null,(0,n.v_)(e?.tactTime),1),(0,s.Lk)("td",null,(0,n.v_)(ue(e?.submitState,e?.submitUserId)),1),(0,s.Lk)("td",null,(0,n.v_)(""!==e?.submitOfDate&&e?.submitOfDate?S(e?.submitOfDate):""),1),(0,s.Lk)("td",null,["checkFirst"===e?.submitState||""===e?.submitState?((0,s.uX)(),(0,s.Wv)(u,{key:0,icon:["fas","pen-to-square"],onClick:t=>se(e)},null,8,["onClick"])):(0,s.Q3)("",!0)])],42,vr)))),128)),(0,s.Lk)("tr",null,[(0,s.Lk)("div",{ref_key:"loadMoreRef",ref:i,style:{height:"10px"}},null,512)])])):((0,s.uX)(),(0,s.CE)("tbody",gr,br))]),_.value.visible?((0,s.uX)(),(0,s.CE)("div",{key:0,style:(0,n.Tr)({top:_.value.y-60+"px",left:_.value.x+"px"}),class:"context-menu"},[(0,s.Lk)("ul",null,[(0,s.Lk)("li",{onClick:K},"Print"),(0,s.Lk)("li",{onClick:X},"Classification"),(0,s.Lk)("li",{onClick:U},"Edit order data"),(0,s.Lk)("li",{onClick:ne},"Delete"),fr])],4)):(0,s.Q3)("",!0),d.value?((0,s.uX)(),(0,s.Wv)(ku,{key:1,"onUpdate:closeLayer":te,onAfterOpen:ae},{header:(0,s.k6)((()=>[yr])),content:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.Lk)("ul",Cr,[(0,s.Lk)("li",null,[kr,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>m.value.testType=e)},null,512),[[l.Jo,m.value.testType]])]),(0,s.Lk)("li",null,[hr,(0,s.bo)((0,s.Lk)("input",{type:"text",readonly:"","onUpdate:modelValue":a[2]||(a[2]=e=>m.value.traySlot=e)},null,512),[[l.Jo,m.value.traySlot]])]),(0,s.Lk)("li",null,[Sr,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>m.value.barcodeNo=e),placeholder:"BARCODE ID"},null,512),[[l.Jo,m.value.barcodeNo]])]),(0,s.Lk)("li",null,[_r,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[4]||(a[4]=e=>m.value.patientId=e),placeholder:"PATIENT ID"},null,512),[[l.Jo,m.value.patientId]])]),(0,s.Lk)("li",null,[Er,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=e=>m.value.patientNm=e),placeholder:"PATIENT NAME"},null,512),[[l.Jo,m.value.patientNm]])]),(0,s.Lk)("li",null,[Nr,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=e=>m.value.analyzedDttm=e),readonly:""},null,512),[[l.Jo,m.value.analyzedDttm]])]),(0,s.Lk)("li",null,[Lr,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=e=>m.value.submitState=e),readonly:""},null,512),[[l.Jo,m.value.submitState]])]),(0,s.Lk)("li",null,[Rr,(0,s.Lk)("img",{class:"mt1",src:x.value},null,8,Tr)])])]),(0,s.Lk)("div",{class:"modalBottom"},[(0,s.Lk)("button",{onClick:le},"Ok")])])),_:1})):(0,s.Q3)("",!0),w.value?((0,s.uX)(),(0,s.Wv)(qc,{key:2,selectItems:T.value,ref_key:"printContent",ref:P,printOnOff:w.value,selectItemWbc:A.value,onPrintClose:B},null,8,["selectItems","printOnOff","selectItemWbc"])):(0,s.Q3)("",!0),y.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:3,"is-visible":y.value,type:C.value,message:k.value,onHide:J,"onUpdate:hideAlert":J},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}};const Pr=wr;var Ar=Pr;const Dr={key:0},Mr=(0,s.Lk)("h3",{class:"orderTitle hh3title"},"Order Information",-1),xr={class:"orderListUi"},Or=(0,s.Lk)("li",null,[(0,s.eW)("LIS status "),(0,s.Lk)("span",null,"No data sent or received from LIS")],-1),Br=(0,s.Lk)("span",null,"No data sent or received from LIS",-1),Kr={key:0},Ur={key:1},Xr=["src"],Fr=(0,s.Lk)("h3",{class:"mt2 mb1 hh3title"},"Result Information",-1),Wr={key:0},$r={key:0};var Gr={__name:"listInfo",props:["selectedItem"],setup(e){const t=e,a=(0,o.KR)(""),l=(0,o.KR)("");(0,s.sV)((()=>{a.value=sessionStorage.getItem("iaRootPath"),a.value&&(l.value=r("barcode_image.jpg"))})),(0,s.wB)((()=>t.selectedItem),(e=>{a.value&&(l.value=r("barcode_image.jpg",e))}));const i=e=>{const t=H()(e,"YYYYMMDDHHmmssSSSSS");return t.format("YYYY-MM-DD HH:mm:ss")},u=e=>e&&e.length>0&&!["12_NR","13_GP","14_PA","15_AR","16_MA","17_SM"].includes(result.dirName),c=window.APP_API_BASE_URL||"http://192.168.0.131:3002";function r(e){const l=""!==t.selectedItem?.img_drive_root_path&&t.selectedItem?.img_drive_root_path?t.selectedItem?.img_drive_root_path:a.value;return`${c}/images?folder=${l+"/"+t.selectedItem.slotId+"/"+kt.barcodeDirName+"/"}&imageName=${e}`}return(t,a)=>0!==Object.keys(e.selectedItem).length?((0,s.uX)(),(0,s.CE)("div",Dr,[(0,s.Lk)("div",null,[Mr,(0,s.Lk)("ul",xr,[(0,s.Lk)("li",null,[(0,s.eW)("Order ID "),(0,s.Lk)("span",null,(0,n.v_)(e.selectedItem?.slotId),1)]),Or,(0,s.Lk)("li",null,[(0,s.eW)("Type of order "),Br,"01"===e.selectedItem?.testType||"04"===e.selectedItem?.testType?((0,s.uX)(),(0,s.CE)("span",Kr,"WBC + RBC")):((0,s.uX)(),(0,s.CE)("span",Ur,(0,n.v_)(e.selectedItem?.testType),1))]),(0,s.Lk)("li",null,[(0,s.eW)("NS, NB Integration "),(0,s.Lk)("span",null,(0,n.v_)(e.selectedItem?.isNsNbIntegration),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Patient ID "),(0,s.Lk)("span",null,(0,n.v_)(e.selectedItem?.patientId),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Patient Name "),(0,s.Lk)("span",null,(0,n.v_)(e.selectedItem?.patientNm),1)]),(0,s.Lk)("li",null,[(0,s.Lk)("img",{src:l.value,style:{width:"235px"}},null,8,Xr)])])]),(0,s.Lk)("div",null,[Fr,(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,[(0,s.eW)("Analyzed Date "),(0,s.Lk)("span",null,(0,n.v_)(i(e.selectedItem?.analyzedDttm)),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Signed State "),(0,s.Lk)("span",null,(0,n.v_)(e.selectedItem?.submitState),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Signed of Date "),(0,s.Lk)("span",null,(0,n.v_)(e.selectedItem?.submitOfDate),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Signed User ID "),(0,s.Lk)("span",null,(0,n.v_)(e.selectedItem?.submitUserId),1)]),"01"===e.selectedItem?.testType||"04"===e.selectedItem?.testType?((0,s.uX)(),(0,s.CE)("li",Wr,[u(e.selectedItem?.classificationResult)?((0,s.uX)(),(0,s.CE)("div",$r,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.selectedItem.classificationResult,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.title},[(0,s.Lk)("p",null,(0,n.v_)(e.title),1),(0,s.Lk)("p",null,(0,n.v_)(e.count),1),(0,s.Lk)("p",null,(0,n.v_)(e.percent),1)])))),128))])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])])])):(0,s.Q3)("",!0)}};const Hr=Gr;var Vr=Hr;const jr=e=>((0,s.Qi)("data-v-4e8f47d4"),e=e(),(0,s.jt)(),e),Yr={class:"mt3"},qr=jr((()=>(0,s.Lk)("h3",{class:"mb1 hh3title infoImageTitle"},"WBC Images",-1))),Jr={key:0,class:"dbWbcImageContainer"},zr=["src","onError","onClick"],Qr={key:1};var Zr=(0,s.pM)({__name:"listWbcImg",props:["dbData","selectedItem"],setup(e){const t=e,a=sessionStorage.getItem("iaRootPath"),i=window.APP_API_BASE_URL||"http://192.168.0.131:3002",u=(0,o.KR)([]),c=(0,o.KR)({}),r=(0,o.KR)("");(0,s.sV)((()=>{u.value=[],v()})),(0,s.wB)((()=>t.selectedItem),(()=>{u.value=[],v()}),{deep:!0});const d=e=>{r.value===e?r.value="":r.value=e},m=e=>r.value===e;function v(){t.selectedItem?.wbcInfo&&0!==Object.keys(t.selectedItem?.wbcInfo).length&&(u.value=t.selectedItem?.wbcInfo?.wbcInfo[0]?.reduce(((e,t)=>(t.images&&t.images.length>0&&e.push({id:t.id,images:t.images,title:t.title}),e)),[])||[])}function p(e,l,s){const{selectedItem:o}=t;if(!o?.wbcInfo?.wbcInfo||0===o?.wbcInfo?.wbcInfo.length)return"";const n=o.slotId||"",u=""!==o?.img_drive_root_path&&o?.img_drive_root_path?o?.img_drive_root_path:a,c=`${u}/${n}/01_WBC_Classification/${l}_${s}`;return`${i}/images/getImageRealTime?folder=${c}&imageName=${e}`}function g(e,t){c.value[`${e}-${t}`]=!0}return(e,t)=>((0,s.uX)(),(0,s.CE)("div",Yr,[qr,u.value.length>0?((0,s.uX)(),(0,s.CE)("div",Jr,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,(e=>((0,s.uX)(),(0,s.CE)(s.FK,{key:e.id},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.images,(t=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("img",{key:t.fileName,class:(0,n.C4)(["dbRightImages",["dbRightImages",{"selected-image":m(`${e.id}-${t.fileName}`)}]]),src:p(t.fileName,e.id,e.title),onError:a=>g(e.id,t.fileName),onClick:a=>d(`${e.id}-${t.fileName}`)},null,42,zr)),[[l.aG,!c.value[`${e.id}-${t.fileName}`]]]))),128))],64)))),128))])):((0,s.uX)(),(0,s.CE)("div",Qr,"No images available"))]))}});const ed=(0,Dl.A)(Zr,[["__scopeId","data-v-4e8f47d4"]]);var td=ed;const ad={class:"mt3"},ld=(0,s.Lk)("h3",{class:"mb1 hh3title infoImageTitle"},"BM Images",-1),sd={key:0,class:"dbBmImageContainer"},od=["src","onError"],nd={key:1};var id=(0,s.pM)({__name:"listBmImg",props:["dbData","selectedItem"],setup(e){const t=e,a=(0,c.Pj)(),n=(0,s.EW)((()=>a.state.commonModule.iaRootPath)),i=window.APP_API_BASE_URL||"http://192.168.0.131:3002",u=(0,o.KR)([]),r=(0,o.KR)({});function d(){t.selectedItem?.wbcInfo&&0!==Object.keys(t.selectedItem?.wbcInfo).length&&(u.value=t.selectedItem?.wbcInfo?.wbcInfo[0]?.reduce(((e,t)=>(t.images&&t.images.length>0&&e.push({id:t.id,images:t.images,title:t.title}),e)),[])||[])}function m(e,a,l){const{selectedItem:s}=t;if(!s?.wbcInfo?.wbcInfo||0===s?.wbcInfo?.wbcInfo.length)return"";const o=s.slotId||"",u=""!==s?.rootPath&&s?.rootPath?s?.rootPath:n.value,c=`${u}/${o}/04_BM_Classification/${a}_${l}`;return`${i}/images?folder=${c}&imageName=${e}`}function v(e,t){r.value[`${e}-${t}`]=!0}return(0,s.sV)((()=>{d()})),(0,s.wB)((()=>t.selectedItem),(()=>{d()})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",ad,[ld,u.value.length>0?((0,s.uX)(),(0,s.CE)("div",sd,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,(e=>((0,s.uX)(),(0,s.CE)(s.FK,{key:e.id},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.images,(t=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("img",{key:t.fileName,class:"dbRightImages",src:m(t.fileName,e.id,e.title),onError:a=>v(e.id,t.fileName)},null,40,od)),[[l.aG,!r.value[`${e.id}-${t.fileName}`]]]))),128))],64)))),128))])):((0,s.uX)(),(0,s.CE)("div",nd,"No images available"))]))}});const ud=id;var cd=ud;const rd={class:"titleH3"},dd={class:"listBoxTable"},md={class:"filterListDiv"},vd=(0,s.Lk)("option",{value:"barcodeNo"},"Barcode No",-1),pd=(0,s.Lk)("option",{value:"patientId"},"Patient ID",-1),gd=(0,s.Lk)("option",{value:"patientNm"},"Patient Name",-1),Id=[vd,pd,gd],bd={class:"settingDatePickers"},fd={key:0,class:"filterDivBox"},yd={key:0,class:"nrCount"},Cd=(0,s.Lk)("span",null,"NR count",-1),kd={class:"wbcTotal"},hd=(0,s.Lk)("span",null,"WBC Total",-1),Sd=(0,s.Lk)("option",{value:"all"},"Do Not Select",-1),_d=(0,s.Lk)("option",null,"DESC",-1),Ed=(0,s.Lk)("option",null,"ASC",-1),Nd=[Sd,_d,Ed],Ld={key:1,class:"wbcInfoFilter"},Rd=(0,s.Lk)("span",null,"WBC Info Filter",-1),Td={class:"wbcInfoFilter"},wd=["id","onUpdate:modelValue"],Pd=["for"],Ad={class:"lastTestType"},Dd=(0,s.Lk)("span",null,"Test Type",-1),Md=["checked"],xd=(0,s.Lk)("span",null,"ALL",-1),Od=["checked"],Bd=(0,s.Lk)("span",null,"Diff",-1),Kd=["checked"],Ud=(0,s.Lk)("span",null,"PBS",-1),Xd={class:"listBox"};var Fd=(0,s.pM)({__name:"index",setup(e){const t=(0,o.KR)([]),a=(0,o.KR)(!1),i=(0,o.KR)(""),u=new Date,c=new Date(u);c.setDate(u.getDate()-30);const r=(0,o.KR)(c),d=(0,o.KR)(new Date),m=(0,o.KR)(""),v=(0,o.KR)("barcodeNo"),p=(0,o.KR)(1),g=(0,o.KR)({}),I=(0,o.KR)([]),b=(0,o.KR)([]),f=(0,o.KR)(0),y=(0,o.KR)(""),C=(0,o.KR)(""),k=(0,o.KR)(!1),h=(0,o.KR)(!1),S=(0,s.nI)();S?.appContext.config.globalProperties.$socket.on("stateVal",(async e=>{await L()})),(0,s.sV)((async()=>{await L(),h.value="bm"===window.PROJECT_TYPE}));const _=()=>{k.value=!k.value},E=e=>{y.value=y.value===e?"":e},N=()=>{const e=I.value?.filter((e=>e.checked)).map((e=>e.title));b.value=e},L=async()=>{I.value=[];const e=w();if(0!==Object.keys(e).length){v.value=e.searchType||"barcodeNo",m.value=e.searchText||"",r.value=new Date(e.startDate)||new Date,d.value=new Date(e.endDate)||new Date,p.value=e.page||1;const t=Number(e.page)||1;for(let e=1;e<=t;e++)await P("mounted",e)}else await P("mounted",1)},R=e=>{g.value=e},T=()=>{const e={page:p.value,searchType:v.value,searchText:m.value,startDate:J(r.value),endDate:J(d.value)};sessionStorage.setItem("lastSearchParams",JSON.stringify(e))},w=()=>{const e=sessionStorage.getItem("lastSearchParams");return e?JSON.parse(e):{}},P=async(e,a)=>{"search"===e&&(p.value=1);const l={page:"mounted"!==e?p.value:Number(a),pageSize:20,startDay:J(r.value),endDay:J(d.value),barcodeNo:"barcodeNo"===v.value?m.value:void 0,patientId:"patientId"===v.value?m.value:void 0,patientNm:"patientNm"===v.value?m.value:void 0,nrCount:f.value};0!==b.value.length&&(l.title=b.value),"00"!==y.value&&""!==y.value&&(l.testType=y.value),""!==C.value&&"all"!==C.value&&(l.wbcCountOrder=C.value);try{const a=await Eu(l);if(a&&a.data){const l=a.data.data;0===l.length?(1===p.value?p.value=1:p.value-=1,0===l.length&&"1"===String(a.data?.page)&&(t.value=l)):("search"===e?t.value=l:l.forEach((e=>{const a=t.value.findIndex((t=>t.id===e.id));-1!==a?t.value[a]=e:t.value.push(e)})),I.value=t.value[0]?.wbcInfo?.wbcInfo[0],""!==C.value&&"all"!==C.value||(t.value=t.value.sort(((e,t)=>{const a=H()(e.analyzedDttm,"YYYYMMDDHHmmssSSS"),l=H()(t.analyzedDttm,"YYYYMMDDHHmmssSSS");return l.diff(a)}))),T())}}catch(s){console.error(s)}},A=()=>{const e=d.value.getTime()-r.value.getTime(),t=e/864e5;t>30?x("You cannot select a period of more than 30 days."):P("search")},D=()=>{P("search")},M=async()=>{p.value+=1,await P("loadMoreData")},x=async e=>{a.value=!0,i.value=e},O=()=>{a.value=!1};return(e,u)=>{const c=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("h3",rd,[(0,s.eW)(" Classification List "),(0,s.Lk)("button",{onClick:_},[(0,s.bF)(c,{icon:["fas","list-check"]})])]),(0,s.Lk)("div",dd,[(0,s.Lk)("div",md,[(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":u[0]||(u[0]=e=>v.value=e),class:"searchSelect"},Id,512),[[l.u1,v.value]]),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":u[1]||(u[1]=e=>m.value=e),class:"searchInputBox"},null,512),[[l.Jo,m.value]]),(0,s.Lk)("div",bd,[(0,s.bF)((0,o.R1)(js.A),{modelValue:r.value,"onUpdate:modelValue":u[2]||(u[2]=e=>r.value=e)},null,8,["modelValue"]),(0,s.bF)((0,o.R1)(js.A),{modelValue:d.value,"onUpdate:modelValue":u[3]||(u[3]=e=>d.value=e)},null,8,["modelValue"])]),(0,s.Lk)("button",{class:"searchClass",onClick:A},"Search")]),k.value?((0,s.uX)(),(0,s.CE)("div",fd,[h.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",yd,[Cd,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":u[4]||(u[4]=e=>f.value=e)},null,512),[[l.Jo,f.value]])])),(0,s.Lk)("div",kd,[hd,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":u[5]||(u[5]=e=>C.value=e)},Nd,512),[[l.u1,C.value]])]),h.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Ld,[Rd,(0,s.Lk)("ul",Td,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(I.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"checkbox_"+t,"onUpdate:modelValue":t=>e.checked=t,onChange:N},null,40,wd),[[l.lH,e.checked]]),(0,s.Lk)("label",{for:"checkbox_"+t},(0,n.v_)(e.title),9,Pd)])))),128))])])),(0,s.Lk)("div",Ad,[Dd,(0,s.Lk)("div",null,[(0,s.Lk)("label",null,[(0,s.Lk)("input",{type:"checkbox",value:"00",onChange:u[6]||(u[6]=e=>E("00")),checked:"00"===y.value},null,40,Md),xd]),(0,s.Lk)("label",null,[(0,s.Lk)("input",{type:"checkbox",value:"01",onChange:u[7]||(u[7]=e=>E("01")),checked:"01"===y.value},null,40,Od),Bd]),(0,s.Lk)("label",null,[(0,s.Lk)("input",{type:"checkbox",value:"02",onChange:u[8]||(u[8]=e=>E("04")),checked:"04"===y.value},null,40,Kd),Ud])])])])):(0,s.Q3)("",!0)]),(0,s.bF)(Ar,{dbData:t.value,onLoadMoreData:M,onInitData:L,onSelectItem:R,onRefresh:D},null,8,["dbData"])]),(0,s.Lk)("div",Xd,[(0,s.bF)(Vr,{dbData:t.value,selectedItem:g.value},null,8,["dbData","selectedItem"]),h.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(td,{key:0,dbData:t.value,selectedItem:g.value},null,8,["dbData","selectedItem"])),h.value?((0,s.uX)(),(0,s.Wv)(cd,{key:1,dbData:t.value,selectedItem:g.value},null,8,["dbData","selectedItem"])):(0,s.Q3)("",!0)])]),a.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":a.value,message:i.value,onHide:O,"onUpdate:hideAlert":O},null,8,["is-visible","message"])):(0,s.Q3)("",!0)],64)}}});const Wd=Fd;var $d=Wd;const Gd={class:"mb1"};var Hd={__name:"Confirm",props:["isVisible","type","message"],emits:["okConfirm"],setup(e,{emit:t}){const a=e,l=(0,s.EW)((()=>`confirm-${a.type}`)),o=t,i=()=>{o("hide")},u=()=>{o("okConfirm")};return(t,a)=>e.isVisible?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,n.C4)(["alert",l.value])},[(0,s.Lk)("p",Gd,(0,n.v_)(e.message),1),(0,s.Lk)("button",{class:"alertButton",onClick:u},"OK"),(0,s.Lk)("button",{class:"alertButton",onClick:i},"CLOSE")],2)):(0,s.Q3)("",!0)}};const Vd=Hd;var jd=Vd;const Yd={class:"slider-container"},qd=["min","max"],Jd={class:"value"};var zd=(0,s.pM)({__name:"SliderBar",props:{min:{},max:{},modelValue:{}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,i=t,u=(0,o.KR)(a.modelValue);(0,s.wB)((()=>a.modelValue),(e=>{u.value=e}));const c=()=>{i("update:modelValue",u.value)};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",Yd,[(0,s.bo)((0,s.Lk)("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),min:e.min,max:e.max,onInput:c},null,40,qd),[[l.Jo,u.value]]),(0,s.Lk)("div",Jd,(0,n.v_)(u.value),1)]))}});const Qd=(0,Dl.A)(zd,[["__scopeId","data-v-b61087ba"]]);var Zd=Qd;const em=Z(),tm=async e=>em.httpPost(ee.jsonReader.get,e),am=async e=>em.httpGet(ee.fileTxtRead.get,`${e}`,!0),lm=async e=>em.httpPost(ee.H7Read.post,e,"text/plain"),sm=async e=>em.httpPost(ee.H7Message.post,e),om=async e=>em.httpPost(ee.H7Message.post,e),nm=e=>((0,s.Qi)("data-v-0326334b"),e=e(),(0,s.jt)(),e),im={class:"createdRbc"},um={class:"mt2"},cm=nm((()=>(0,s.Lk)("h3",{class:"wbcClassInfoLeft"},"RBC Classification",-1))),rm={class:"leftWbcInfo rbcClass"},dm={style:{position:"relative"}},mm={key:0,class:"memoModal"},vm={class:"categoryNm"},pm={key:0,class:"mb1 liTitle"},gm=["onClick"],Im={class:"classNmRbc"},bm={key:0,class:"mb1 liTitle"},fm=["value","onChange"],ym=["onClick"],Cm={class:"degree analysis"},km={key:0,class:"mb1 liTitle"},hm={key:0},Sm={key:0,class:"rbcSapn"},_m={key:1,class:"rbcSapnDown"},Em={key:1},Nm={key:0,class:"rbcSapn"},Lm={key:1,class:"rbcSapn"},Rm={key:2,class:"rbcSapnDown"},Tm={key:3,class:"rbcSapnDown"},wm={class:"rbcPercent"},Pm={key:0,class:"mb1 liTitle"},Am={class:"categories rbcClass"},Dm=nm((()=>(0,s.Lk)("ul",{class:"categoryNm"},[(0,s.Lk)("li",null,"Others")],-1))),Mm={class:"classNmRbc"},xm={class:"degree analysis"},Om={style:{"font-size":"0.8rem"}},Bm={style:{"font-size":"0.8rem"}},Km=nm((()=>(0,s.Lk)("ul",{class:"rbcPercent"},null,-1))),Um={key:0,class:"sensitivityDiv"};var Xm=(0,s.pM)({__name:"rbcClass",props:["rbcInfo","selectItems","type","allCheckClear"],setup(e,{emit:t}){const a=e=>e?.categoryNm,i=(0,o.KR)([]),r=e,d=(0,o.KR)([]),m=(0,o.KR)([]),v=(0,o.KR)(""),p=(0,o.KR)(""),g=(0,o.KR)(""),I=(0,o.KR)(50),b=(0,o.KR)(!1),f=(0,c.Pj)(),y=(0,o.KR)(!1),C=(0,o.KR)(""),k=(0,o.KR)(""),h=(0,o.KR)(!1),S=(0,o.KR)(""),_=(0,o.KR)(""),E=(0,s.EW)((()=>f.state.userModule)),N=(0,o.KR)(!1),L=(0,o.KR)([]),R=t,T=(0,o.KR)(""),w=(0,u.rd)(),P=(0,o.KR)(!1),A=(0,o.KR)([]),D=(0,o.KR)("Macrocyte"),M=(0,o.KR)(!0),x=(0,s.nI)(),O=(0,o.KR)([]),B=(0,o.KR)(0),K=(0,s.EW)((()=>f.state.commonModule.iaRootPath)),U=(0,o.KR)(!1),X=(0,s.EW)((()=>f.state.commonModule.rbcReData));(0,s.sV)((()=>{const{rbcInfo:e,rbcMemo:t}=r.selectItems,{path:a}=w.currentRoute.value;F(),v.value=e?.pltCount,p.value=e?.malariaCount,g.value=t,T.value=e?.maxRbcCount,P.value="/report"===a,A.value=[];const l=e?.rbcClass||e;if(l)for(const s of l)s.classInfo.forEach((e=>{"Normal"!==e.classNm&&A.value.push({...e,categoryId:s.categoryId})}));A.value.push({categoryId:"04",classId:"01",classNm:"Platelet"},{categoryId:"05",classId:"03",classNm:"Malaria"})})),(0,s.wB)((()=>r.rbcInfo),(e=>{Y()})),(0,s.wB)((()=>r.allCheckClear),(e=>{i.value=[],L.value=[]}),{deep:!0}),(0,s.wB)((()=>X),(e=>{e&&(U.value=!1)}),{deep:!0}),(0,s.wB)((()=>r.selectItems),(e=>{v.value=r.selectItems?.pltCount,p.value=r.selectItems?.malariaCount}));const F=async()=>{const e=""!==r.selectItems?.img_drive_root_path&&r.selectItems?.img_drive_root_path?r.selectItems?.img_drive_root_path:K.value,t=`${e}/${r.selectItems.slotId}/03_RBC_Classification/${r.selectItems.slotId}_new.json`,a=await tm({fullPath:t}),l=`${e}/${r.selectItems.slotId}/03_RBC_Classification/${r.selectItems.slotId}.json`,s=await tm({fullPath:l});if("not file"!==a.data){const e=a?.data;for(const t of s.data[0].rbcClassList)for(const a of e){const e=t.classInfo.findIndex((e=>Number(e.index)===Number(a.index)));if(-1!==e&&t.classInfo.splice(e,1),t.categoryId===a.categoryId){let e={classNm:a.classNm,classId:a.classId,posX:String(a.posX),posY:String(a.posY),width:a.width,height:a.height,index:a.index};t.classInfo.push(e)}}O.value=s.data[0].rbcClassList}else O.value=s?.data[0].rbcClassList;let o=0;for(const n of O.value)for(const e in n.classInfo)o+=1;B.value=o,console.log("rbcInfoPathAfter.value",O.value),console.log("rbcInfoBeforeVal",m.value)},W=e=>{const t=(Number(e)/Number(B.value)*100).toFixed(1);return Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t},G=()=>{const e=JSON.parse(JSON.stringify(d.value)),t=e.find((e=>e.categoryNm===D.value));if(t)I.value=t.sensitivity||50;else{for(const t of e){const e=t.classInfo.find((e=>e.classNm===D.value));if(e)return void(I.value=e.sensitivity||50)}I.value=50}},V=()=>{q(D.value),f.dispatch("commonModule/setCommonInfo",{rbcReData:!1}),x?.appContext.config.globalProperties.$socket.emit("message",{type:"SEND_DATA",payload:{jobCmd:"RBC_RE_CLASSIFICATION",sensitivity:Number(I.value),reqDttm:z().embedStatus.settings.reqDttm,reqUserId:E.value.userId||"",className:D.value,slotId:r.selectItems?.slotId}}),U.value=!0},j=(e,t,a,l)=>{if("Normal"===e)return;const s=JSON.parse(JSON.stringify(d.value));for(const o of s)for(const t of o?.classInfo)t.classNm===e&&t.classId===l&&(I.value=t.sensitivity||50);D.value=e},Y=()=>{N.value=!1,R("isBeforeUpdate",!1),m.value=r.selectItems.rbcInfo.rbcClass?r.selectItems.rbcInfo.rbcClass:r.selectItems.rbcInfo,"object"===typeof r.selectItems.rbcInfoAfter?d.value=0===Object.entries(r.selectItems.rbcInfoAfter).length?m.value:r.selectItems.rbcInfoAfter:d.value=r.selectItems.rbcInfoAfter&&1===r.selectItems.rbcInfoAfter.length?m.value:r.selectItems.rbcInfoAfter,G()},q=async e=>{let t=JSON.parse(JSON.stringify(d.value));for(const i of t)if(i.categoryNm===e)i.sensitivity=I.value;else{const t=i?.classInfo?.findIndex((t=>t.classNm===e));-1!==t&&void 0!==t&&i?.classInfo&&(i.classInfo[t].sensitivity=I.value,console.log(i.classInfo[t]))}d.value=t;const a=t,l={...r.selectItems,rbcInfoAfter:a};sessionStorage.setItem("selectItems",JSON.stringify(l));const s=await Lu(String(r.selectItems.id)),o={rbcInfoAfter:a},n={...s.data,...o};await le(n,!1)},J=(e,t)=>{let a=[];for(const l of m.value)"03"!==l.categoryId&&"04"!==l.categoryId&&"05"!==l.categoryId||l.classInfo.forEach(((e,t)=>{a.push({classNm:e.classNm,categoryId:l.categoryId,classId:e.classId})}));i.value=e?["0-2-0","0-2-1","0-2-2","0-2-3","0-2-4","0-2-5","0-2-6","0-2-7","0-2-8","0-2-9","0-2-10","0-3-0","0-3-1","9-9-1","9-9-2"]:[],a.forEach((t=>{Q(t.classNm,e,t.categoryId,t.classId)})),M.value=!M.value},Q=(e,t,a,l)=>{t?L.value.some((t=>t.classNm===e&&t.classId===l&&t.categoryId===a))||L.value.push({classNm:e,categoryId:a,classId:l}):L.value=L.value.filter((t=>!(t.classNm===e&&t.classId===l&&t.categoryId===a))),R("classInfoArrUpdate",L.value)},Z=async(e,t,a,l=!1)=>{if("report"===r.type||N.value)return;const s=JSON.parse(JSON.stringify(d.value)).map((s=>(s.categoryNm===e.categoryNm&&(s.classInfo=s.classInfo.map((e=>(e.classNm===t.classNm&&(e.degree=String(l?0===Number(e.degree)?1:0:a)),e)))),s)));d.value=s;const o={...r.selectItems,rbcInfoAfter:s};sessionStorage.setItem("selectItemRbc",JSON.stringify(s)),sessionStorage.setItem("selectItems",JSON.stringify(o));const n=await Lu(String(r.selectItems.id)),i={rbcInfoAfter:s},u={...n.data,...i};await le(u,!1)},ee=()=>{g.value=""!==g.value?g.value:r.selectItems.rbcMemo,b.value=!b.value},te=()=>{b.value=!1},ae=async()=>{const e=await Lu(String(r.selectItems.id)),t={rbcMemo:g.value},a={...e.data,...t};await le(a,!0),b.value=!1},le=async(e,t)=>{try{const a=await _u({userId:Number(E.value.id),runingInfoDtoItems:[e]});if(a){t&&se("success");const a=e;sessionStorage.setItem("selectItems",JSON.stringify(a)),g.value=a.rbcMemo}else console.error("   ")}catch(a){console.error("Error:",a)}},se=e=>{y.value=!0,C.value="success",k.value=e,window.scrollTo({top:0,behavior:"smooth"})},oe=()=>{y.value=!1},ne=()=>{h.value=!0,_.value=$.IDS_MSG_CONFIRM_SLIDE},ie=()=>{ce(),h.value=!1},ue=()=>{h.value=!1},ce=async()=>{const e=H()().local(),t=await Lu(String(r.selectItems.id)),a={submitState:"Submit",submitOfDate:e.format(),submitUserId:E.value.name},l={...t.data,...a};await le(l)};return(t,o)=>{const u=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bo)((0,s.Lk)("div",im," Creating a new RBC classification ...",512),[[l.aG,U.value]]),(0,s.Lk)("div",null,[(0,s.Lk)("div",um,[cm,(0,s.Lk)("ul",rm,[(0,s.Lk)("li",dm,[(0,s.bF)(u,{icon:["fas","comment-dots"],onClick:ee}),b.value?((0,s.uX)(),(0,s.CE)("div",mm,[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":o[0]||(o[0]=e=>g.value=e)},null,512),[[l.Jo,g.value]]),(0,s.Lk)("button",{onClick:ae},"ok"),(0,s.Lk)("button",{onClick:te},"cancel")])):(0,s.Q3)("",!0)]),(0,s.Lk)("li",{onClick:ne,class:(0,n.C4)({submitted:"Submit"===e.selectItems.submitState})},[(0,s.bF)(u,{icon:["fas","square-check"]})],2)])]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)([m.value],((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,c)=>((0,s.uX)(),(0,s.CE)("div",{key:c,class:"categories rbcClass"},[(0,s.Lk)("ul",vm,[0===c?((0,s.uX)(),(0,s.CE)("li",pm,"Category")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,[(0,s.Lk)("span",null,(0,n.v_)(a(e)),1),(0,s.bo)((0,s.Lk)("button",{class:"degreeAllCheckBtn",onClick:t=>J(M.value,e)},(0,n.v_)(M.value?"All Check":"All Uncheck"),9,gm),[[l.aG,"Shape"===a(e)]])])]),(0,s.Lk)("ul",Im,[0===c?((0,s.uX)(),(0,s.CE)("li",bm,"Class")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((a,u)=>((0,s.uX)(),(0,s.CE)("li",{key:`${t}-${c}-${u}`},[(0,s.bo)((0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:`${t}-${c}-${u}`,"onUpdate:modelValue":o[1]||(o[1]=e=>i.value=e),onChange:t=>Q(a.classNm,t.target.checked,e.categoryId,a.classId)},null,40,fm),[[l.aG,!P.value],[l.lH,i.value]])],512),[[l.aG,"Shape"===e?.categoryNm||"Inclusion Body"===e.categoryNm]]),(0,s.Lk)("span",{onClick:t=>j(a.classNm,e.categoryNm,e.categoryId,a.classId)},(0,n.v_)("TearDropCell"===a?.classNm?"TearDrop Cell":a?.classNm),9,ym)])))),128))]),(0,s.Lk)("ul",Cm,[0===c?((0,s.uX)(),(0,s.CE)("li",km,"Degree")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((a,l)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:`${t}-${c}-${l}`},["01"!==a.classId||"05"===e.categoryId||"01"!==d.value[c].classInfo[l].classId||"05"===d.value[c].categoryId?((0,s.uX)(),(0,s.CE)("li",hm,["01"!==a.classId||"05"===e.categoryId?((0,s.uX)(),(0,s.CE)("span",Sm,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(4,(e=>(0,s.bF)(u,{icon:["fac","half-circle-up"],key:e,class:(0,n.C4)({degreeActive:e<Number(a?.degree)+2||0,"degree0-img":e>=Number(a?.degree)+1||0})},null,8,["class"]))),64))])):(0,s.Q3)("",!0),"01"!==d.value[c].classInfo[l].classId||"05"===d.value[c].categoryId?((0,s.uX)(),(0,s.CE)("span",_m,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(4,(e=>(0,s.bF)(u,{icon:["fac","half-circle-down"],key:e+"-down",class:(0,n.C4)({degreeActive:e<Number(d.value[c].classInfo[l]?.degree)+2||0,"degree0-img":e>=Number(d.value[c].classInfo[l]?.degree)+1||0}),onClick:t=>Z(d.value[c],d.value[c].classInfo[l],e-1,!1)},null,8,["class","onClick"]))),64))])):(0,s.Q3)("",!0)])):((0,s.uX)(),(0,s.CE)("li",Em,["0"===a.degree?((0,s.uX)(),(0,s.CE)("span",Nm,[(0,s.bF)(u,{icon:["fac","half-circle-up"]})])):((0,s.uX)(),(0,s.CE)("span",Lm,[(0,s.bF)(u,{icon:["fac","half-circle-up"],class:"degreeActive"})])),"0"===d.value[c].classInfo[l]?.degree?((0,s.uX)(),(0,s.CE)("span",Rm,[(0,s.bF)(u,{onClick:e=>Z(d.value[c],d.value[c].classInfo[l],"0",!0),icon:["fac","half-circle-down"]},null,8,["onClick"])])):((0,s.uX)(),(0,s.CE)("span",Tm,[(0,s.bF)(u,{onClick:e=>Z(d.value[c],d.value[c].classInfo[l],"1",!0),icon:["fac","half-circle-down"],class:"degreeActive"},null,8,["onClick"])]))]))],64)))),128))]),(0,s.Lk)("ul",wm,[0===c?((0,s.uX)(),(0,s.CE)("li",Pm,"percent")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((e,a)=>((0,s.uX)(),(0,s.CE)("li",{key:`${t}-${c}-${a}`},(0,n.v_)(W(e?.originalDegree)),1)))),128))])])))),128))],64)))),128)),(0,s.Lk)("div",null,[(0,s.Lk)("div",Am,[Dm,(0,s.Lk)("ul",Mm,[(0,s.Lk)("li",null,[(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"9-9-1","onUpdate:modelValue":o[2]||(o[2]=e=>i.value=e),onChange:o[3]||(o[3]=e=>Q("Platelet",e.target.checked,"04","01"))},null,544),[[l.aG,!P.value],[l.lH,i.value]])]),(0,s.Lk)("span",{onClick:o[4]||(o[4]=e=>j("Platelet","Others","04","01"))},"Platelet")]),(0,s.Lk)("li",null,[(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"9-9-2","onUpdate:modelValue":o[5]||(o[5]=e=>i.value=e),onChange:o[6]||(o[6]=e=>Q("Malaria",e.target.checked,"05","03"))},null,544),[[l.aG,!P.value],[l.lH,i.value]])]),(0,s.Lk)("span",{onClick:o[7]||(o[7]=e=>j("Malaria","Others","05","03"))},"Malaria")])]),(0,s.Lk)("ul",xm,[(0,s.Lk)("li",Om,(0,n.v_)(v.value||0)+" PLT / 1000 RBC",1),(0,s.Lk)("li",Bm,(0,n.v_)(p.value||0)+" / "+(0,n.v_)(T.value||0)+" RBC",1)]),Km])]),"report"!==e.type?((0,s.uX)(),(0,s.CE)("div",Um,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":o[8]||(o[8]=e=>D.value=e),onChange:G},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(A.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.classNm},(0,n.v_)(e.classNm),1)))),128))],544),[[l.u1,D.value]]),(0,s.bF)(Zd,{modelValue:I.value,"onUpdate:modelValue":o[9]||(o[9]=e=>I.value=e),min:0,max:100},null,8,["modelValue"]),(0,s.Lk)("button",{class:"degreeBtn",type:"button",onClick:V},"Ok")])):(0,s.Q3)("",!0)]),y.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":y.value,type:C.value,message:k.value,onHide:oe,"onUpdate:hideAlert":oe},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0),h.value?((0,s.uX)(),(0,s.Wv)(jd,{key:1,"is-visible":h.value,type:S.value,message:_.value,onHide:ue,onOkConfirm:ie},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const Fm=(0,Dl.A)(Xm,[["__scopeId","data-v-0326334b"]]);var Wm=Fm,$m=a(4791),Gm=a.n($m);const Hm=[{id:"none",text:"None"},{id:"line",text:"Line"},{id:"cross",text:"Cross"},{id:"circle",text:"Circle"}],Vm=Z(),jm=async e=>Vm.httpGet(ee.images.move,e,!0),Ym=async e=>Vm.httpPost(ee.images.moveClassImage,e),qm={key:0},Jm=["src","onClick","onDragstart"],zm=(0,s.Lk)("div",{class:"no-malaria",style:{"text-align":"left"}},"No Malaria",-1),Qm=["src","onClick","onDragstart"],Zm={key:1},ev=(0,s.Lk)("span",null,"Malaria Images do not exist.",-1),tv=[ev];var av=(0,s.pM)({__name:"Malaria",props:["selectItems"],setup(e){const t=e,a=sessionStorage.getItem("iaRootPath")||ht.iaRootPath,i=window.APP_API_BASE_URL||"http://192.168.0.115:3002",u=(0,o.KR)([]),c=(0,o.KR)([]),r=(0,o.KR)([]);let d=(0,o.KR)(null),m=(0,o.KR)([]);const v=(0,o.KR)(!1);async function p(e,l){const s=t.selectItems.slotId||"",o=""!==t.selectItems?.img_drive_root_path&&t.selectItems?.img_drive_root_path?t.selectItems?.img_drive_root_path:a,n=`${o}/${s}/${ht.rbcClassDirName}/${e}`;try{const e=await fetch(`${i}/folders?folderPath=${n}`);if(!e.ok)throw v.value=!1,new Error("Network response was not ok");{const t=await e.json();l.value=t.map((e=>`${i}/folders?folderPath=${n}/${e}`)),v.value=!0}}catch(u){console.error(u)}}function g(e){const t=e.target;t.closest(".item-image")||(r.value=[])}function I(e,t,a,l){const s={section:e,imgName:t,index:a};if(r.value.length>0&&r.value[r.value.length-1].section!==e)r.value=[s];else if(l.shiftKey&&null!==d.value){const t=Math.min(d.value,a),l=Math.max(d.value,a);for(let a=t;a<=l;a++){const t=r.value.findIndex((e=>e.index===a));-1===t&&r.value.push({section:e,imgName:"malaria"===e?u.value[a]:c.value[a],index:a})}}else if(l.ctrlKey&&null!==d.value)r.value.push(s);else{const e=r.value.findIndex((e=>e.imgName===t));-1!==e?r.value.splice(e,1):r.value=[s]}d.value=a}function b(e,t){return r.value.some((e=>e.imgName===t))}function f(e,t,a){r.value.length>0?m.value=r.value:m.value=[{section:e,imgName:t,index:a}]}function y(e){for(const t of m.value)e!==t.section&&C(e,t.imgName)}async function C(e,l){const s=t.selectItems.slotId||"",o=""!==t.selectItems?.rootPath&&t.selectItems?.rootPath?t.selectItems?.rootPath:a,n=`${o}/${s}/${ht.rbcClassDirName}`,i="malaria"===e?`${n}/${ht.noMalariaDirName}`:`${n}/${ht.malariaDirName}`,d="malaria"===e?`${n}/${ht.malariaDirName}`:`${n}/${ht.noMalariaDirName}`,m=l.split("/"),v=m[m.length-1],p=await jm(`sourceFolder=${i}&destinationFolder=${d}&imageName=${v}`);if(p){const t="malaria"===e?c.value.findIndex((e=>e===l)):u.value.findIndex((e=>e===l));"malaria"===e?(c.value.splice(t,1),u.value.push(l)):(u.value.splice(t,1),c.value.push(l))}r.value=[]}return(0,s.sV)((async()=>{await p(ht.malariaDirName,u),await p(ht.noMalariaDirName,c),document.body.addEventListener("click",g)})),(e,t)=>v.value?((0,s.uX)(),(0,s.CE)("div",qm,[(0,s.Lk)("div",null,[(0,s.Lk)("div",{onDrop:t[0]||(t[0]=e=>y("malaria")),onDragover:t[1]||(t[1]=(0,l.D$)((()=>{}),["prevent"])),style:{"text-align":"left",overflow:"auto",height:"400px"}},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,((e,t)=>((0,s.uX)(),(0,s.CE)("img",{key:"malaria-"+t,src:e,class:(0,n.C4)(["item-image",{selected:b("malaria",e)}]),alt:"malaria-image",onClick:a=>I("malaria",e,t,a),onDragstart:a=>f("malaria",e,t)},null,42,Jm)))),128))],32)]),(0,s.Lk)("div",null,[zm,(0,s.Lk)("div",{onDrop:t[2]||(t[2]=e=>y("noMalaria")),onDragover:t[3]||(t[3]=(0,l.D$)((()=>{}),["prevent"])),style:{"text-align":"left",overflow:"auto",height:"400px"}},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.value,((e,t)=>((0,s.uX)(),(0,s.CE)("img",{key:"noMalaria-"+t,src:e,class:(0,n.C4)(["item-image",{selected:b("noMalaria",e)}]),alt:"noMalaria-image",onClick:a=>I("noMalaria",e,t,a),onDragstart:a=>f("noMalaria",e,t)},null,42,Qm)))),128))],32)])])):((0,s.uX)(),(0,s.CE)("div",Zm,tv))}});const lv=av;var sv=lv;const ov=e=>((0,s.Qi)("data-v-6b608442"),e=e(),(0,s.jt)(),e),nv=ov((()=>(0,s.Lk)("div",null,null,-1))),iv={class:"rbc-container"},uv={class:"btn-container"},cv={class:"btn-imgsetbox"},rv={key:0,class:"imgSet"},dv=ov((()=>(0,s.Lk)("span",null,"Brightness",-1))),mv=ov((()=>(0,s.Lk)("span",null,"RGB",-1))),vv=ov((()=>(0,s.Lk)("span",null,"Grid",-1))),pv=ov((()=>(0,s.Lk)("span",null,"Ruler",-1))),gv={class:"ruler-box"},Iv=["onClick"],bv=ov((()=>(0,s.Lk)("span",null,"Zoom",-1))),fv={class:"tiling-viewer-box"},yv={key:2},Cv=ov((()=>(0,s.Lk)("span",null,"Tile does not exist.",-1))),kv=[Cv],hv={class:"categoryNm"},Sv={class:"classNmRbc"},_v=["onClick"],Ev={class:"categories"},Nv=ov((()=>(0,s.Lk)("ul",{class:"categoryNm"},[(0,s.Lk)("li",null,"Others")],-1))),Lv={class:"classNmRbc"},Rv=ov((()=>(0,s.Lk)("span",null,"Platelets",-1))),Tv=[Rv],wv=ov((()=>(0,s.Lk)("span",null,"Malaria",-1))),Pv=[wv];var Av=(0,s.pM)({__name:"rbcImageList",props:["rbcInfo","selectItems","type","classInfoArr","isBefore"],setup(e,{emit:t}){const a=e,i=(0,o.KR)("lowMag"),u=window.APP_API_BASE_URL||"http://192.168.0.115:3002";let r=(0,o.KR)(null);const d=(0,o.KR)(!1),m=(0,o.KR)(100),v=(0,o.KR)([0,0,0]),p=(0,o.KR)(!1),g=(0,o.KR)(!1),I=((0,o.KR)(null),(0,o.KR)("None")),b=(0,o.KR)(!1),f=(0,o.KR)({prevPosX:0,prevPosY:0,posX:0,posY:0,left:0,top:0,width:50,height:50}),y=(0,o.KR)(5),C=(0,o.KR)(0),k=(0,o.KR)(150),h=(0,o.KR)(null),S=(0,o.KR)(!0),_=(0,c.Pj)(),E=(0,s.EW)((()=>_.state.commonModule.iaRootPath)),N=(0,o.KR)([]),L=(0,o.KR)([]),R=(0,o.KR)(null),T=(0,o.KR)([]),w=(0,o.KR)([]),P=(0,o.KR)(0),A=(0,o.KR)(0),D=t,M=(0,o.KR)([]),x=((0,o.KR)(0),(0,s.EW)((()=>_.state.commonModule.rbcReData)));(0,s.wB)((()=>x),(e=>{e&&(W(),B(),D("unChecked"))}),{deep:!0}),(0,s.sV)((()=>{G(),document.addEventListener("click",U),M.value=a.selectItems.rbcInfo.rbcClass?a.selectItems.rbcInfo.rbcClass:a.selectItems.rbcInfo})),(0,s.wB)((()=>a.isBefore),(e=>{W(),B(),D("unChecked")}),{deep:!0});const O=async(e,t,a)=>{let l=N.value.find((t=>t.categoryId===e));l||(l={categoryId:e,classInfo:[]},N.value.push(l));let s=[];for(const o of w.value)for(const l of N.value){if(o.categoryId===l.categoryId){const n=l.classInfo.findIndex((e=>Number(e.index)===o.index));-1!==n&&(s.push({categoryId:e,classNm:a,classId:t,posX:o.posX,posY:o.posY,width:o.width,height:o.height,index:o.index}),l.classInfo.splice(n,1))}l.categoryId===e&&l.classInfo.push({classNm:a,classId:t,posX:o.posX,posY:o.posY,width:o.width,height:o.height,index:o.index})}await B(),await K(s),await $(L.value)},B=async()=>{const e=document.getElementsByClassName("overlayElement"),t=Array.from(e);t.forEach((e=>{r.value.removeOverlay(e)})),b.value=!1},K=async e=>{const t=""!==a.selectItems?.img_drive_root_path&&a.selectItems?.img_drive_root_path?a.selectItems?.img_drive_root_path:E.value,l=`${t}/${a.selectItems.slotId}/03_RBC_Classification/${a.selectItems.slotId}_new.json`,s=await tm({fullPath:l});let o=[];if("not file"!==s.data){const l=`${t}/${a.selectItems.slotId}/03_RBC_Classification/${a.selectItems.slotId}_new.json`,s=await tm({fullPath:l});o=[...s.data,...e]}else o=e;const n=JSON.stringify(o),i=(new TextEncoder).encode(n),u=Pu.Ay.deflate(i),c=new Blob([u],{type:"application/octet-stream"}),r=new FormData;r.append("file",c,`${a.selectItems.slotId}_new.json`);const d=`${t}/${a.selectItems.slotId}/03_RBC_Classification/${a.selectItems.slotId}_new.json`;try{const e=window.APP_API_BASE_URL||"http://192.168.0.131:3002",t=await fetch(`${e}/jsonReader/upload?filePath=${d}`,{method:"POST",body:r});await t.json()}catch(m){console.error("Error:",m)}},U=e=>{const t=document.querySelector(".rbc-select-box");t&&!t.contains(e.target)&&(b.value=!1)};(0,s.wB)((()=>a.classInfoArr),(e=>{0===e.length&&(B(),W()),F(e)}),{deep:!0});const X=e=>{a.isBefore||0===L.value.length||(b.value=!0,e.currentTarget instanceof HTMLElement&&(P.value=e.clientX,A.value=e.clientY-300))},F=async e=>{const t=""!==a.selectItems?.img_drive_root_path&&a.selectItems?.img_drive_root_path?a.selectItems?.img_drive_root_path:E.value,l=`${t}/${a.selectItems.slotId}/03_RBC_Classification/${a.selectItems.slotId}_new.json`,s=await tm({fullPath:l}),o=`${t}/${a.selectItems.slotId}/03_RBC_Classification/${a.selectItems.slotId}.json`,n=await tm({fullPath:o});if("not file"!==s.data){const e=s?.data;for(const t of n.data[0].rbcClassList)for(const a of e){const e=t.classInfo.findIndex((e=>Number(e.index)===Number(a.index)));if(-1!==e&&t.classInfo.splice(e,1),t.categoryId===a.categoryId){let e={classNm:a.classNm,classId:a.classId,posX:String(a.posX),posY:String(a.posY),width:a.width,height:a.height,index:a.index};t.classInfo.push(e)}}N.value=n.data[0].rbcClassList}else N.value=n?.data[0].rbcClassList;console.log(N.value),L.value=e,0===e.length?W():(console.log(e),await $(e))};(0,s.wB)((()=>a.selectItems),(e=>{const t=document.getElementById("tiling-viewer");if(t){t.innerHTML="";const e='\n        <div id="tiling-viewer" ref="tilingViewerLayer"></div>\n      ';t.insertAdjacentHTML("beforeend",e),i.value="lowMag",G()}}));const W=()=>{let e=R.value.getContext("2d"),t=R.value;return e.clearRect(0,0,t.width,t.height),e.beginPath(),T.value=[],e},$=async e=>{const t={"01":"red","02":"green","03":"blue","05":"brown"},a=W();e.forEach((e=>{N.value.forEach((l=>{l.classInfo.forEach((s=>{if(s.classNm===e.classNm&&l.categoryId===e.categoryId){a.lineWidth="2",a.strokeStyle=`${t[e.categoryId]||"black"}`;let l=new Path2D,o="",n="",i="",u="";s.width?(o=s.width,n=s.height,i=s.posX,u=s.posY):(o=s.x2-s.x1,n=s.y2-s.y1,i=s.x1,u=s.y1);let c={categoryId:e.categoryId,classNm:e.classNm,classId:e.classId,posX:i,posY:u,width:o,height:n,index:s.index};l.rect(i,u,o,n),T.value.push(c),console.log(c),a.stroke(l)}}))}))}))},G=async()=>{const e=""!==a.selectItems?.img_drive_root_path&&a.selectItems?.img_drive_root_path?a.selectItems?.img_drive_root_path:E.value,t=`${e}/${a.selectItems.slotId}/${ht.rbcImageDirName}`;try{const e=await H(t);if(0!==e.length){r.value=Gm()({id:"tiling-viewer",animationTime:.4,navigatorSizeRatio:.25,showNavigator:!0,sequenceMode:!0,defaultZoomLevel:1,prefixUrl:`${u}/folders?folderPath=D:/UIMD_Data/Res/uimdFe/images/`,tileSources:e,showReferenceStrip:!1,gestureSettingsMouse:{clickToZoom:!1},maxZoomLevel:15}),new(Gm().MouseTracker)({element:r.value.element,moveHandler:function(e){if(!g.value){const e=document.getElementById("magCanvas");return void(e&&r.value.element.removeChild(e))}const{canvas:t}=r.value.drawer,a=document.createElement("canvas"),l=a.getContext("2d");if(R.value=a,l){const s=200,o=200,n=5;a.id="magCanvas",a.style.position="absolute",a.style.left=e.position.x-s/2+"px",a.style.top=e.position.y-o/2+"px",a.style.border="1px solid",a.style.borderRadius="50%",a.style.width=`${s}px`,a.style.height=`${o}px`,a.style.zIndex="0",r.value.element.appendChild(a),l.drawImage(t,e.position.x-s/8,e.position.y-o/8,s,o,0,0,s*n,o*n),a.style.visibility=e.position.y<=0||e.position.x<=0?"hidden":"visible"}}});const t=document.createElement("canvas"),a=r.value.addOverlay({element:t,location:new(Gm().Rect)(0,0,1,1)});r.value.addHandler("open",(function(e){t.width=3317,t.height=3311,t.id="myCanvas",a.canvas=t,R.value=t})),r.value.addHandler("canvas-click",(async e=>{if(e.originalEvent.shiftKey)for(const t of T.value){if("Normal"===t.classNm)return;const e=t,a=t.categoryId,l="lightgreen";w.value.push(t);const s=document.createElement("ol");s.className="overlayElement",s.id="overlayElement",s.setAttribute("data-category-id",a),s.setAttribute("data-class-nm",t.classNm),s.style.width=t.width,s.style.backgroundColor=l,s.style.height=t.height,s.style.position="absolute",s.style.opacity="0.5";const o=parseFloat(e.posX),n=parseFloat(e.posY),i=r.value.viewport.imageToViewportRectangle(o,n,t.width,t.height);r.value.addOverlay({element:s,location:i})}else{const t=r.value.viewport.pointFromPixel(e.position),a={x:t.x*r.value.source.width,y:t.y*r.value.source.height};for(const l of T.value){const t=l,s=t.width,o=t.height;if(a.x>=t.posX&&a.x<=t.posX+s&&a.y>=t.posY&&a.y<=t.posY+o){const n=l.categoryId,i="lightgreen";if(e.originalEvent.ctrlKey){w.value.push(l);const e=document.createElement("ol");e.className="overlayElement",e.id="overlayElement",e.setAttribute("data-category-id",n),e.setAttribute("data-class-nm",l.classNm),e.style.width=`${l.width}px`,e.style.backgroundColor=i,e.style.height=`${l.height}px`,e.style.position="absolute",e.style.opacity="0.5";const a=parseFloat(t.posX),s=parseFloat(t.posY),o=r.value.viewport.imageToViewportRectangle(a,s,t.width,t.height);r.value.addOverlay({element:e,location:o})}else if(a.x>=t.posX&&a.x<=t.posX+s&&a.y>=t.posY&&a.y<=t.posY+o){const e=l.categoryId,a="lightgreen",s=N.value.find((t=>t.categoryId===e))?.classInfo.find((e=>e.classNm===l.classNm));if(s){w.value=[l];const s=document.getElementById("overlayElement");s&&r.value.removeOverlay(s);const o=document.querySelector(`.overlayElement[data-category-id="${e}"][data-class-nm="${l.classNm}"]`);if(o){const e=parseFloat(t.posX),a=parseFloat(t.posY),l=r.value.viewport.imageToViewportRectangle(e,a,t.width,t.height);r.value.updateOverlay(o,l)}else{const s=document.createElement("ol");s.className="overlayElement",s.id="overlayElement",s.setAttribute("data-category-id",e),s.setAttribute("data-class-nm",l.classNm),s.style.width=`${l.width}px`,s.style.backgroundColor=a,s.style.height=`${l.height}px`,s.style.position="absolute",s.style.opacity="0.5";const o=parseFloat(t.posX),n=parseFloat(t.posY),i=r.value.viewport.imageToViewportRectangle(o,n,l.width,l.height);r.value.addOverlay({element:s,location:i})}}}break}}}}))}}catch(l){console.error("Error:",l)}},H=async e=>{const t=`${u}/folders?folderPath=${e}`,a=await fetch(t);if(a.ok){const t=await a.json(),l=[];for(const a of t)a.endsWith("_files")&&l.push({Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2009",Url:`${u}/folders?folderPath=${e}/${a}/`,Format:"jpg",Overlap:"1",TileSize:"1024",Size:{Height:"3311",Width:"3317"}}});return S.value=!0,l}throw S.value=!1,new Error("Network response was not ok")},V=e=>{switch(e){case"lowMag":i.value="lowMag";break;case"malaria":i.value="malaria",d.value=!1;break}"malaria"!==i.value&&G()},j=()=>{d.value=!d.value},Y=e=>{const t=e?.target?.value,a=v.value[0],l=v.value[1],s=v.value[2],o=document.getElementById("tiling-viewer");o&&(o.style.filter=`opacity(1) drop-shadow(0 0 0 rgb(${a}, ${l}, ${s})) brightness(${t}%)`)},q=()=>{const e=v.value[0],t=v.value[1],a=v.value[2],l=m.value,s=document.getElementById("tiling-viewer");s&&(s.style.filter=`opacity(0.88) drop-shadow(0 0 0 rgb(${e}, ${t}, ${a})) brightness(${l}%)`)},J=()=>{m.value=100,v.value=[0,0,0];const e=document.getElementById("tiling-viewer");e&&(e.style.filter="opacity(1) drop-shadow(0 0 0 rgb(0,0,0)) brightness(100%)")},z=()=>{p.value=!p.value,r.value.addHandler("zoom",Q),p.value?Q():ee()},Q=()=>{if(ee(),p.value){const e=r.value.world.getItemAt(0).getContentSize().y,t=r.value.world.getItemAt(0).getContentSize().x,a=r.value.viewport.getZoom(),l=400,s=Math.round(l/a),o=Math.min(t,e)/s;for(let n=1;n<s;n++){const a=n*o;Z(a,0,1,e,"rgba(128, 128, 128, 0.2)"),Z(0,a,t,1,"rgba(128, 128, 128, 0.2)")}}},Z=(e,t,a,l,s)=>{const o=document.createElement("div");o.className="grid-line",o.style.position="absolute",o.style.left=`${e}px`,o.style.top=`${t}px`,o.style.width=`${a}px`,o.style.height=`${l}px`,o.style.background=s,o.style.userSelect="none",o.style.pointerEvents="none",r.value.container.appendChild(o)},ee=()=>{const e=document.querySelectorAll(".grid-line");e.forEach((e=>e.remove()))},te=e=>{switch(e.text){case"None":I.value="None";break;case"Line":I.value="Line";break;case"Cross":I.value="Cross";break;case"Circle":I.value="Circle";break}ae(e)},ae=e=>{const t=document.getElementById("tiling-viewer");if(null!==t){const a=document.getElementById("rulerOverlay");null!==a&&t.removeChild(a);const l=document.createElement("div");l.id="rulerOverlay",l.style.position="absolute",l.style.width=f.value.width+"px",l.style.height=f.value.height+"px",0===f.value.left?l.style.left=r.value.canvas.clientWidth/2-f.value.width/2+"px":l.style.left=f.value.left+"px",0===f.value.top?l.style.top=r.value.canvas.clientHeight/2-f.value.height/2+"px":l.style.top=f.value.top+"px",le(l,y,e),t.appendChild(l);let s=!1;l.onmousedown=function(e){f.value.prevPosX=e.clientX,f.value.prevPosY=e.clientY,f.value.left<=30&&(f.value.left=31),f.value.top<=80&&(f.value.top=81),s=!0},l.onmouseup=function(){s=!1},l.onwheel=function(t){t.deltaY<0?y.value<20&&le(l,++y.value,e):y.value>5&&le(l,--y.value,e)};const o=document.getElementById("tilingViewer");o&&(o.onmousemove=function(e){s&&(f.value.left<=30||f.value.top<=80||(f.value.posX=f.value.prevPosX-e.clientX,f.value.posY=f.value.prevPosY-e.clientY,f.value.prevPosX=e.clientX,f.value.prevPosY=e.clientY,l.style.left=l.offsetLeft-f.value.posX+"px",l.style.top=l.offsetTop-f.value.posY+"px",f.value.left=l.offsetLeft-f.value.posX,f.value.top=l.offsetTop-f.value.posY))})}},le=(e,t,a)=>{"object"===typeof t&&(t=t.value),null!==document.getElementById("rulerTitle")&&e.removeChild(document.getElementById("rulerTitle"));let l=1;t>5&&(l+=.06*(t-5));let s=r.value.viewport.viewportToImageZoom(r.value.viewport.getZoom());s>1?s*=1.02:s>.9&&s<1?s*=1.12:s>.7&&s<=.9?s*=1.22:s>.6&&s<=.7?s*=1.32:s>.5&&s<=.6?s*=1.42:s>.4&&s<=.5?s*=1.52:s>.3&&s<=.4?s*=1.72:s>.2&&s<=.3&&(s*=1.92),C.value=s*l*60;const o=document.createElement("div");if(o.id="rulerTitle",o.style.color="black",o.style.textAlign="center",o.style.fontSize="16px",o.style.minWidth="50px",o.style.width=C.value+"px","line"===a.id){const a=k.value/2-C.value/2,l=k.value/2+C.value/2,s=k.value/2,n=s;o.innerHTML='<div style="width: 100%;">'+t+'m</div><svg viewBox="0 0 150 150" xmlns="http://www.w3.org/2000/svg"><line x1="'+a+'" y1="'+s+'" x2="'+l+'" y2="'+n+'" stroke="black" stroke-width="2"/><line x1="'+a+'" y1="'+(s-5)+'" x2="'+a+'" y2="'+(n+5)+'" stroke="black" stroke-width="2"/><line x1="'+l+'" y1="'+(n-5)+'" x2="'+l+'" y2="'+(n+5)+'" stroke="black" stroke-width="2"/></svg>',e.appendChild(o)}else if("cross"===a.id){const a=k.value/2,l=k.value/2,s=C.value/2;o.innerHTML='<div style="width: 100%;">'+t+'m</div><svg viewBox="0 0 150 150" xmlns="http://www.w3.org/2000/svg"><line x1="'+(a-s)+'" y1="'+l+'" x2="'+(a+s)+'" y2="'+l+'" stroke="black" stroke-width="2"/><line x1="'+a+'" y1="'+(l-s)+'" x2="'+a+'" y2="'+(l+s)+'" stroke="black" stroke-width="2"/></svg>',e.appendChild(o)}else if("circle"===a.id){const a=k.value/2,l=k.value/2,s=.5*C.value;o.innerHTML='<div style="width: 100%;">'+t+'m</div><svg viewBox="0 0 150 150" xmlns="http://www.w3.org/2000/svg"><circle cx="'+a+'" cy="'+l+'" r="'+s+'" stroke="black" stroke-width="2" fill="transparent" opacity="0.6" /></svg>',e.appendChild(o)}else{const e=document.getElementById("rulerOverlay");if(null!==e){const t=document.getElementById("tilingViewer");t?.removeChild(e)}}},se=()=>{g.value=!g.value};return(t,a)=>{const u=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[nv,(0,s.Lk)("div",iv,[(0,s.Lk)("div",uv,[(0,s.Lk)("div",null,[(0,s.Lk)("button",{onClick:a[0]||(a[0]=e=>V("lowMag")),class:(0,n.C4)(["tab-btn",{active:"lowMag"===i.value,inactive:"lowMag"!==i.value}])},"Low magnification ",2),(0,s.Lk)("button",{onClick:a[1]||(a[1]=e=>V("malaria")),class:(0,n.C4)(["tab-btn",{active:"malaria"===i.value,inactive:"malaria"!==i.value}])},"Malaria ",2)]),(0,s.Lk)("div",cv,[(0,s.Lk)("button",{class:"img-btn",onClick:j},"Img Setting"),d.value?((0,s.uX)(),(0,s.CE)("div",rv,[(0,s.Lk)("div",null,[(0,s.bF)(u,{icon:["fas","sun"]}),dv,(0,s.bo)((0,s.Lk)("input",{type:"range",min:"80",max:"150","onUpdate:modelValue":a[2]||(a[2]=e=>m.value=e),onInput:Y},null,544),[[l.Jo,m.value]])]),(0,s.Lk)("div",null,[(0,s.bF)(u,{icon:["fas","palette"]}),mv,(0,s.bo)((0,s.Lk)("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":a[3]||(a[3]=e=>v.value[0]=e),onInput:q},null,544),[[l.Jo,v.value[0]]]),(0,s.bo)((0,s.Lk)("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":a[4]||(a[4]=e=>v.value[1]=e),onInput:q},null,544),[[l.Jo,v.value[1]]]),(0,s.bo)((0,s.Lk)("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":a[5]||(a[5]=e=>v.value[2]=e),onInput:q},null,544),[[l.Jo,v.value[2]]]),(0,s.Lk)("button",{class:"resetBtn",onClick:J},"RGB Reset")]),(0,s.Lk)("div",null,[(0,s.bF)(u,{icon:["fas","th"]}),vv,(0,s.bF)(u,{icon:p.value?["fas","toggle-on"]:["fas","toggle-off"],onClick:z},null,8,["icon"])]),(0,s.Lk)("div",null,[(0,s.bF)(u,{icon:["fas","ruler"]}),pv,(0,s.Lk)("div",gv,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(Hm),(e=>((0,s.uX)(),(0,s.CE)("button",{class:(0,n.C4)(["tab-ruler-btn",{active:I.value===e.text,inactive:I.value!==e.text}]),onClick:t=>te(e),key:e.id},(0,n.v_)(e.text),11,Iv)))),128))])]),(0,s.Lk)("div",null,[(0,s.bF)(u,{icon:["fas","magnifying-glass"]}),bv,(0,s.bF)(u,{icon:g.value?["fas","toggle-on"]:["fas","toggle-off"],onClick:se},null,8,["icon"])])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",fv,["malaria"===i.value?((0,s.uX)(),(0,s.Wv)(sv,{key:0,selectItems:e.selectItems},null,8,["selectItems"])):"malaria"!==i.value&&S.value?((0,s.uX)(),(0,s.CE)("div",{key:1,ref_key:"tilingViewerLayer",ref:h,id:"tiling-viewer",style:{width:"100%"},onContextmenu:(0,l.D$)(X,["prevent"])},null,544)):((0,s.uX)(),(0,s.CE)("div",yv,kv))])]),b.value?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"rbc-select-box",style:(0,n.Tr)({left:`${P.value}px`,top:`${A.value}px`})},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)([M.value],((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,a)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",{key:a,class:"categories"},[(0,s.Lk)("ul",hv,[(0,s.Lk)("li",null,(0,n.v_)(e.categoryNm),1)]),(0,s.Lk)("ul",Sv,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((l,o)=>((0,s.uX)(),(0,s.CE)("li",{key:`${t}-${a}-${o}`,onClick:t=>O(e.categoryId,l.classId,l.classNm)},[(0,s.Lk)("span",null,(0,n.v_)(l?.classNm),1)],8,_v)))),128))])],512)),[[l.aG,"Shape"===e?.categoryNm||"Inclusion Body"===e.categoryNm]]))),128)),(0,s.Lk)("div",Ev,[Nv,(0,s.Lk)("ul",Lv,[(0,s.Lk)("li",{onClick:a[6]||(a[6]=e=>O("04","01","Giant Platelet"))},Tv),(0,s.Lk)("li",{onClick:a[7]||(a[7]=e=>O("05","03","Malaria"))},Pv)])])],64)))),128))],4)):(0,s.Q3)("",!0)],64)}}});const Dv=(0,Dl.A)(Av,[["__scopeId","data-v-6b608442"]]);var Mv=Dv;const xv={class:"wbcMenu"},Ov={class:"menuIco"},Bv={class:"menuIco"},Kv={class:"menuIco"},Uv=(0,s.Lk)("p",null,"REPORT",-1),Xv=(0,s.Lk)("p",null,"LIS-CBC",-1),Fv={class:"wbcMenuBottom"},Wv=["disabled"],$v=["disabled"];var Gv=(0,s.pM)({__name:"classInfoMenu",props:["isNext"],setup(e,{emit:t}){const a=t,l=(0,o.KR)(!1),i=(0,o.KR)(""),r=(0,o.KR)(""),d=(0,o.KR)("bm"),m=(0,o.KR)(sessionStorage.getItem("selectItems")),v=(0,o.KR)(m.value?JSON.parse(m.value):null),p=(0,o.KR)([]),g=((0,o.KR)([]),(0,s.nI)()),I=(0,c.Pj)(),b=((0,s.EW)((()=>I.state.userModule)),(0,u.lq)()),f=(0,o.KR)([]),y=(0,s.EW)((()=>I.state.commonModule.cbcLayer)),C=(0,o.KR)(!1);let k;const h=(0,o.KR)(!1),S=e,_=(0,o.KR)("");(0,s.wB)(S.isNext,(e=>{e&&D("down")})),(0,s.sV)((async()=>{d.value=window.PROJECT_TYPE,await P(v.value.id),h.value=!0;const e=await Ns();_.value=e.data})),(0,s.hi)((async()=>{h.value&&await N(),await I.dispatch("commonModule/setCommonInfo",{cbcLayer:!1})}));const E=()=>{l.value=!1},N=async()=>{sessionStorage.setItem("dbBaseTrClickId",String(v.value.id));const e=`oldPcIp=${_.value}`;await wu(e).then((e=>{g?.appContext.config.globalProperties.$socket.emit("state",{type:"SEND_DATA",payload:"refreshDb"})})).catch((e=>{console.log("2 err",e)}))},L=async e=>{try{const e=`oldPcIp=${_.value}&newEntityId=${p.value.id}&newPcIp=${_.value}`;await Tu(e).then((e=>{g?.appContext.config.globalProperties.$socket.emit("state",{type:"SEND_DATA",payload:"refreshDb"})})).catch((e=>{console.log("3 err",e)}))}catch(t){console.log(t)}},R=async()=>{try{const e=await Ge();e&&(0===e?.data.length?f.value=[]:f.value=e.data.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx))))}catch(e){console.log(e)}},T=e=>{ZI.push(e),h.value=!1},w=(e,t)=>{let a=JSON.parse(JSON.stringify(e));return a.sort(((e,a)=>{const l=t.findIndex((t=>(t.title||t.abbreviation)===(e.title||e.abbreviation))),s=t.findIndex((e=>(e.title||e.abbreviation)===(a.title||a.abbreviation)));return-1===l?1:-1===s?-1:l-s})),a};async function P(e){try{let t;t=await Lu(String(e)),t&&(p.value=t.data)}catch(t){console.error(t)}return p.value}async function A(e,t,a){try{const l=`id=${e}&step=${t}&type=${a}`,s=await Ru(l);s&&(p.value=s.data)}catch(l){console.log(l)}}const D=async e=>{void 0!==k&&clearTimeout(k),C.value=!0,await R(),await M(e,v.value.id),k=window.setTimeout((()=>{C.value=!1}),700)},M=async(e,t)=>{const a=await A(t,"1",e);if(p.value.lock_status)return l.value=!0,i.value="success",void(r.value="Someone else is editing.");await x(a?.id,a)},x=async(e,t)=>{v.value=p.value,sessionStorage.setItem("selectItems",JSON.stringify(p.value));const a=0===p.value?.wbcInfoAfter.length?p.value?.wbcInfo?.wbcInfo[0]:p.value?.wbcInfoAfter,l=0!==f.value.length?f.value:"bm"===window.PROJECT_TYPE?va:ma,s=w(a,l);sessionStorage.setItem("selectItemWbc",JSON.stringify(s)),sessionStorage.setItem("dbBaseTrClickId",String(e)),await I.dispatch("commonModule/setCommonInfo",{clonedWbcInfo:s}),await O(a,p.value)},O=async(e,t)=>{"pb"===d.value&&"01"===v.value?.testType&&T("/databaseDetail"),a("refreshClass",t),h.value=!0,await L(t)},B=e=>b.path===e,K=()=>{I.dispatch("commonModule/setCommonInfo",{cbcLayer:!y.value})};return(e,t)=>{const a=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",xv,[(0,s.Lk)("ul",null,[["bm","pb"].includes(d.value)?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},["pb"!==d.value||"01"!==v.value?.testType&&"pb"===d.value?((0,s.uX)(),(0,s.CE)("li",{key:0,class:(0,n.C4)({onRight:B("bm"===d.value?"/databaseWhole":"/databaseRbc")}),onClick:t[0]||(t[0]=e=>T("bm"===d.value?"/databaseWhole":"/databaseRbc"))},[(0,s.Lk)("p",Ov,[(0,s.bF)(a,{icon:["fas","virus"]})]),(0,s.Lk)("p",null,(0,n.v_)("bm"===d.value?"WHOLE":"RBC"),1)],2)):(0,s.Q3)("",!0),(0,s.Lk)("li",{class:(0,n.C4)({onRight:B("/databaseDetail")}),onClick:t[1]||(t[1]=e=>T("/databaseDetail"))},[(0,s.Lk)("p",Bv,[(0,s.bF)(a,{icon:["fas","disease"]})]),(0,s.Lk)("p",null,(0,n.v_)("bm"===d.value?"BM CELL":"WBC"),1)],2),(0,s.Lk)("li",{class:(0,n.C4)({onRight:B("/report")}),onClick:t[2]||(t[2]=e=>T("/report"))},[(0,s.Lk)("p",Kv,[(0,s.bF)(a,{icon:["fas","clipboard"]})]),Uv],2)],64)):(0,s.Q3)("",!0)]),"bm"!==d.value?((0,s.uX)(),(0,s.CE)("div",{key:0,onClick:K,class:(0,n.C4)({onRight:y.value,cbcLi:!0})},[(0,s.bF)(a,{icon:["fas","desktop"]}),Xv],2)):(0,s.Q3)("",!0),(0,s.Lk)("div",Fv,[(0,s.Lk)("button",{onClick:t[3]||(t[3]=e=>D("up")),disabled:C.value},[(0,s.bF)(a,{icon:["fas","circle-up"]})],8,Wv),(0,s.Lk)("button",{onClick:t[4]||(t[4]=e=>D("down")),disabled:C.value},[(0,s.bF)(a,{icon:["fas","circle-down"]})],8,$v)])]),l.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,"is-visible":l.value,type:i.value,message:r.value,onHide:E,"onUpdate:hideAlert":E},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const Hv=Gv;var Vv=Hv,jv=a(8990);const Yv={class:"cbcDiv"},qv=(0,s.Lk)("h1",{class:"titleCbc"},"CBC + DIFF",-1),Jv={key:0,class:"cbcDivWarp"},zv={class:"cbcTable"},Qv={key:1,class:"cbcDivWarp"},Zv={class:"cbcTable"},ep={key:0},tp={key:2,class:"cbcDivWarp"},ap={class:"cbcTable"};var lp=(0,s.pM)({__name:"lisCbc",props:["selectItems"],setup(e){const t=(0,c.Pj)(),a=e,l=(0,o.KR)([]),i=(0,o.KR)(""),u=(0,o.KR)(""),r=(0,o.KR)(""),d=(0,o.KR)(""),m=(0,o.KR)(""),v=(0,o.KR)(""),p=(0,s.EW)((()=>t.state.userModule)),g=(0,s.EW)((()=>t.state.commonModule.deviceSerialNm)),I=(0,s.EW)((()=>t.state.commonModule.siteCd)),b=(0,o.KR)([]),f=(0,o.KR)([]);(0,s.wB)(a.selectItems,(async e=>{f.value=e,await C(),await k(),await y(f.value)}),{deep:!0}),(0,s.sV)((async()=>{f.value=a.selectItems,await C(),await k(),await y(f.value)}));const y=async e=>{if("0002"===I.value){const t="http://emr012.cmcnu.or.kr/cmcnu/.live";Q.A.get(t,{params:{submit_id:"TRLII00124",business_id:"li",instcd:"012",bcno:e.barcodeNo}}).then((function(e){const t=e.data,a=JSON.parse((0,jv.xml2json)(t,{compact:!0}));l.value=a.root.spcworklist.worklist})).catch((function(e){console.log(e.message)}))}else if("0006"===I.value||"0019"===I.value||"0000"===I.value){let e;if(e="0000"===I.value?await am("path=D:\\cbc&filename=1240459652.txt"):await am(`path=C:/Users/user/Desktop/IA_MSG/CBC&filename=${a.selectItems.barcodeNo}`),e.data.success){const t=e.data.data.toString(),a=t.split("\n"),s=["SPC_NO","BLCL_DT","PT_NO","PT_NM","SEX","AGE","SCAT_WDF","SCAT_WNR","DIST_RBC","DIST_WDF(FSC)","DIST_PLT"];a.forEach((e=>{const[t,a]=e.split("\t").map((e=>e.trim()));if(s.includes(t))switch(t){case"PT_NO":i.value=a;break;case"SEX":r.value=a;break;case"AGE":d.value=a;break}else{const e=t.includes("%")?"%":"";l.value.push({classNm:t,count:a,unit:e})}}))}}else if("0007"===I.value);else if("0011"===I.value){if(v.value.includes("http")){const e={url:v.value,machine:"ADUIMD",episode:a.selectItems.barcodeNo};await Q.A.post(e.url+"/api/MifMain/Order",{machine:e.machine,episode:e.episode}).then((function(e){l.value=[];const a=e.data[0];if("0"===a?.returnCode){i.value=a?.regNo,u.value=a.name,r.value=a.sex,d.value=a.age,m.value=a.testCode,t.dispatch("commonModule/setCommonInfo",{inhaTestCode:a.testCode});const e=a.testCode.split(",");e.forEach((function(e){const t=e.split("|"),a=t[0],s=t[1],o=t[2];b.value.forEach((function(e){if(e.cd===a){const t={classNm:e.classCd,count:s,unit:o};l.value.push(t)}}))}))}})).catch((function(e){console.log(e.message+" : no CBC result")}))}}else if(v.value.includes("http")){const e={url:v.value,barcodeNo:a.selectItems.barcodeNo,userId:p.value.userId,deviceBarcode:g.value},t=e.url+"?barcodeNo="+e.barcodeNo+"&deviceBarcode="+g.value+"&userid="+e.userId;await Q.A.get(t).then((async function(e){const t=await lm(e.data);l.value=[],t.segments.forEach((function(e){"OBX"===e.name.trim()?b.value.forEach((function(t){if(t.CBC_CD===e.getField(3)){var a={classNm:t.cd,count:e?.getField(5),unit:e?.getField(6)};l.value.push(a)}})):"PID"===e.name.trim()&&(i.value=e.getField(1),u.value=e.getField(4),r.value=e.getField(6),d.value=e.getField(7))}))})).catch((function(e){console.log(e.message)}))}else{const e=await am(`path=${v.value}&filename=${a.selectItems.barcodeNo}.hl7`);if(e.data.success){const t=await lm(e.data.data);l.value=[],t?.data?.segments.forEach((function(e){"OBX"===e.name.trim()&&b.value.forEach((function(t){if(t.cd===e.getField(3)){const a={classNm:t.cd,count:e.getField(5),unit:e.getField(6)};l.value.push(a)}}))}))}else console.error(e.data.message)}f.value.cbcPatientNo=i.value,f.value.cbcPatientNm=u.value,f.value.cbcSex=r.value,f.value.cbcAge=d.value;const s={cbcPatientNo:i.value,cbcPatientNm:u.value,cbcSex:r.value,cbcAge:d.value},o=await Lu(String(a.selectItems.id)),n={...o.data,...s};sessionStorage.setItem("selectItems",JSON.stringify(n)),await h([n])},C=async()=>{try{const e=await Me();if(e&&e.data){const t=e.data;v.value=t[0].cbcFilePath}}catch(e){console.error(e)}},k=async()=>{try{const e=await Pe();e&&e.data&&(b.value=e.data)}catch(e){console.error(e)}};async function h(e){try{const t=await _u({userId:Number(p.value.id),runingInfoDtoItems:e});t?console.log(""):console.error("   ")}catch(t){console.error("Error:",t)}}return(e,t)=>((0,s.uX)(),(0,s.CE)("div",Yv,[qv,"0002"===I.value?((0,s.uX)(),(0,s.CE)("div",Jv,[(0,s.Lk)("table",zv,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,n.v_)(e?.tclsscrnnm._cdata),1),(0,s.Lk)("td",null,(0,n.v_)(e.tclsscrnnm._cdata),1),(0,s.Lk)("td",null,(0,n.v_)(e.inptrslt._cdata),1)])))),128))])])):(0,s.Q3)("",!0),"0007"===I.value?((0,s.uX)(),(0,s.CE)("div",Qv,[(0,s.Lk)("table",Zv,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,n.v_)(e.classNm),1),(0,s.Lk)("td",null,[(0,s.eW)((0,n.v_)(e.count)+" ",1),""!==e.cham?((0,s.uX)(),(0,s.CE)("span",ep," ("+(0,n.v_)(e.cham)+") ",1)):(0,s.Q3)("",!0),(0,s.eW)(" "+(0,n.v_)(e.unit),1)])])))),128))])])):((0,s.uX)(),(0,s.CE)("div",tp,[(0,s.Lk)("table",ap,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,n.v_)(e.classNm),1),(0,s.Lk)("td",null,(0,n.v_)(e.count)+" "+(0,n.v_)(e.unit),1)])))),128))])]))]))}});const sp=lp;var op=sp;const np={class:"wbcContent"},ip={class:"topClintInfo"};var up=(0,s.pM)({__name:"listDetailRbc",setup(e){const t=sessionStorage.getItem("selectItems"),a=(0,o.KR)(t?JSON.parse(t):null),l=(0,c.Pj)(),i=(0,o.KR)(null),u=(0,o.KR)([]),r=(0,o.KR)(!1),d=(0,o.KR)(!1),m=(0,s.EW)((()=>l.state.commonModule.cbcLayer));(0,s.sV)((()=>{v()}));const v=async()=>{i.value=a.value},p=e=>{d.value=e},I=async e=>{i.value=e,a.value=e,r.value=!r.value},b=e=>{u.value=e},f=()=>{r.value=!r.value};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(Vv,{onRefreshClass:I}),(0,s.Lk)("div",np,[(0,s.Lk)("div",ip,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,(0,n.v_)((0,o.R1)(g)(a.value?.testType))+" Smear",1),(0,s.Lk)("li",null,(0,n.v_)(a.value?.barcodeNo),1),(0,s.Lk)("li",null,(0,n.v_)(a.value?.patientId||"patientId No Data"),1),(0,s.Lk)("li",null,(0,n.v_)(a.value?.cbcPatientNo),1),(0,s.Lk)("li",null,(0,n.v_)(a.value?.patientName),1),(0,s.Lk)("li",null,(0,n.v_)(a.value?.cbcPatientNm)+" "+(0,n.v_)(a.value?.cbcSex)+" "+(0,n.v_)(a.value?.cbcAge),1),(0,s.Lk)("li",null,(0,n.v_)(a.value?.analyzedDttm),1)])]),m.value?((0,s.uX)(),(0,s.Wv)(op,{key:0,selectItems:a.value},null,8,["selectItems"])):(0,s.Q3)("",!0),(0,s.Lk)("div",{class:(0,n.C4)("databaseWbcRight"+(m.value?" cbcLayer":""))},[(0,s.bF)(Wm,{onIsBeforeUpdate:p,onClassInfoArrUpdate:b,rbcInfo:i.value,selectItems:a.value,type:"listTable",allCheckClear:r.value},null,8,["rbcInfo","selectItems","allCheckClear"])],2),(0,s.Lk)("div",{class:(0,n.C4)("databaseWbcLeft"+(m.value?" cbcLayer":""))},[(0,s.bF)(Mv,{onUnChecked:f,isBefore:d.value,classInfoArr:u.value,rbcInfo:i.value,selectItems:a.value,type:"listTable"},null,8,["isBefore","classInfoArr","rbcInfo","selectItems"])],2)])],64))}});const cp=up;var rp=cp;const dp="http://emr012.cmcnu.or.kr/cmcnu/.live",mp="li",vp="012",pp="H59",gp=[{id:"01",title:"NS",name:"Neutrophil-Segmented",cd:"LHR10501"},{id:"02",title:"ME",name:"Metamyelocyte",cd:"LHR10507"},{id:"03",title:"MY",name:"Myelocyte",cd:"LHR10508"},{id:"04",title:"PR",name:"Promyelocyte",cd:"LHR10509"},{id:"05",title:"LY",name:"Lymphocyte",cd:"LHR10503"},{id:"61",title:"LR",name:"Reactive lymphocyte",cd:"LHR10544"},{id:"62",title:"LA",name:"Abnormal lymphocyte",cd:"LHR10543"},{id:"07",title:"MO",name:"Monocyte",cd:"LHR10504"},{id:"08",title:"EO",name:"Eosinophil",cd:"LHR10505"},{id:"09",title:"BA",name:"Basophil",cd:"LHR10506"},{id:"10",title:"BL",name:"Blast",cd:"LHR10510"},{id:"11",title:"PC",name:"Plasma cell",cd:"LHR10517"}],Ip={submit_id:"TRLII00124",business_id:"li",instcd:"012",bcno:"H59"},bp=Z(),fp=async e=>bp.httpPost(ee.filesystem.post,e,""),yp=async e=>bp.httpDelete(ee.filesystem.delete,e,!1),Cp=async e=>bp.httpGet(ee.filesystem.createDirectory,`${e}`,!0),kp=async e=>bp.httpPost(ee.filesystem.fileCreate,e,""),hp=["src"],Sp={class:"mt2 mb2"},_p={class:"wbcClassInfoLeft"},Ep={class:"leftWbcInfo"},Np={style:{position:"relative"}},Lp={key:0,class:"memoModal"},Rp={class:"wbcClassScroll"},Tp=["onDragstart","onDrop"],wp={key:0,class:"nth1Child classAttribute"},Pp=(0,s.Lk)("li",null,"Class",-1),Ap=(0,s.Lk)("li",null,"Count",-1),Dp=(0,s.Lk)("li",null,"%",-1),Mp=[Pp,Ap,Dp],xp=["onClick"],Op={class:"categories classTotal"},Bp=(0,s.Lk)("ul",{class:"categoryNm"},[(0,s.Lk)("li",null," Total ")],-1),Kp={class:"classNm"},Up=(0,s.Lk)("ul",{class:"degree"},[(0,s.Lk)("li",null," 100.00 ")],-1),Xp={key:0},Fp=["onDragstart","onDrop"],Wp=["onClick"],$p=(0,s.Lk)("li",null," -",-1),Gp={key:1},Hp={class:"categoryNm"},Vp={key:0,class:"mb1 liTitle"},jp={class:"classNm"},Yp={key:0,class:"mb1 liTitle"},qp={key:0},Jp={class:"degree"},zp={key:0,class:"mb1 liTitle"},Qp=(0,s.Lk)("li",null,"-",-1),Zp={key:2,class:"beforeAfterBtn"};var eg=(0,s.pM)({__name:"classInfo",props:["wbcInfo","selectItems","type"],setup(e,{emit:t}){const a=e,i=(0,c.Pj)(),u=(0,s.EW)((()=>i.state.userModule)),r=t,d=sessionStorage.getItem("selectItems"),m=(0,o.KR)(d?JSON.parse(d):null),v=(0,s.EW)((()=>i.state.commonModule.iaRootPath)),p=(0,s.EW)((()=>i.state.commonModule.clonedWbcInfo)),g=(0,s.EW)((()=>i.state.commonModule.inhaTestCode)),I=(0,s.EW)((()=>i.state.commonModule.deviceSerialNm)),f=(0,s.EW)((()=>i.state.commonModule.siteCd)),y=(0,o.KR)(""),C=(0,o.KR)(""),k=(0,o.KR)(""),h=(0,o.KR)(!1),S=(0,o.KR)([]),_=(0,o.KR)([]),E=["NR","GP","PA","AR","MA","SM"],N=(0,o.KR)(!1),L=(0,o.KR)(-1),R=(0,o.KR)(0),T=(0,o.KR)(!1),w=(0,o.KR)(""),P=(0,o.KR)(""),A=(0,o.KR)(!1),D=(0,o.KR)(""),M=(0,o.KR)(""),x=(0,o.KR)([]),O=(0,o.KR)(!1),B=(0,o.KR)(!1),K=(0,o.KR)(0),U=(0,o.KR)(""),X=(0,o.KR)([]),F=(0,o.KR)([]),W=(0,o.KR)([]);(0,s.sV)((async()=>{await ye(),k.value=a.selectItems.wbcMemo,await ke(p.value);const e=""!==a.selectItems?.img_drive_root_path&&a.selectItems?.img_drive_root_path?a.selectItems?.img_drive_root_path:v.value;if(y.value=b("barcode_image.jpg",e,a.selectItems.slotId,kt.barcodeDirName),O.value="bm"===window.PROJECT_TYPE,""===a.selectItems.submitState){const e=await Lu(String(a.selectItems.id)),t={submitState:"checkFirst"},l={...e.data,...t};await be(l,!0)}await ue(),await ce()})),(0,s.wB)(u.value,(e=>{C.value=e.id})),(0,s.wB)((()=>a.wbcInfo),(e=>{k.value=a.selectItems.wbcMemo;const t=""!==a.selectItems?.img_drive_root_path&&a.selectItems?.img_drive_root_path?a.selectItems?.img_drive_root_path:v.value;y.value=b("barcode_image.jpg",t,a.selectItems.slotId,kt.barcodeDirName)})),(0,s.wB)((()=>p.value),(e=>{ke(e)}),{deep:!0});const G=()=>{A.value=!0,M.value=$.IDS_MSG_UPLOAD_LIS,U.value="lis"},j=e=>{r("scrollEvent",e)},Y=()=>O.value?"BM Classification":"WBC Classification",q=(e,t)=>{L.value=e,R.value=t.clientY-t.target.getBoundingClientRect().top},J=(e,t)=>{if(N.value&&(t.preventDefault(),-1!==L.value)){const t=S.value.splice(L.value,1)[0];S.value.splice(e,0,t),L.value=-1,Ee()}},z=()=>{N.value=!N.value},Z=()=>{A.value=!0,M.value=$.IDS_MSG_CONFIRM_SLIDE,U.value="commit"},ee=()=>{"commit"===U.value?me():te(),A.value=!1},te=()=>{if("0002"===f.value){const e=gp;Q.A.get("http://emr012.cmcnu.or.kr/cmcnu/.live",{params:Ip}).then((function(t){const l=t.data,s=JSON.parse((0,jv.xml2json)(l,{compact:!0})),o=s.root.spcworklist.worklist,n=["LHR10501","LHR10502","LHR10503","LHR10504","LHR10505","LHR10506"],i=o.filter((function(e){return"LHR100"===e.classCd._cdata}));a.selectItems.wbcInfoAfter.forEach((function(t){t.classCd="",e.forEach((function(e){t.id===e.id&&(t.classCd=e.cd)}))}));let c=[];a.selectItems.wbcInfoAfter.forEach((function(e){n.forEach((function(t){(e.classCd===t||e.count>0&&""!==e.classCd)&&c.push(e)}))}));const r=c.filter((function(e){return"LHR10501"===e.classCd}));if(r.length>0&&i.length>0){const e=(Number(i[0].inptrslt._cdata)*r[0].percent/100).toFixed(2);c.push({classCd:"LHR10599",percent:e})}re(u.value.userId).then((function(e){if("succ"===e){const e={empNo:u.value.userId,barcodeNo:a.selectItems.barcodeNo,wbcInfo:c},t=new Date,l=`${t.getFullYear()}`;let s=`${t.getMonth()+1}`;1===s.length&&(s=`0${s}`);let o=`${t.getDate()}`;1===o.length&&(o=`0${o}`);const n=encodeURIComponent(String.fromCharCode(23)),i=encodeURIComponent(String.fromCharCode(23,23)),r=encodeURIComponent(String.fromCharCode(3)),d=e.wbcInfo.filter((e=>null!==e.classCd&&""!==e.classCd)).map((e=>`${e.classCd}${n}${e.percent}${i}${l}${s}${o}${r}`)).join(""),m=`${dp}?submit_id=TXLII00101&business_id=${mp}&ex_interface=${e.empNo}|${vp}&instcd=${vp}&userid=${e.empNo}&eqmtcd=${pp}&bcno=${e.barcodeNo}&result=${d}&testcont=MANUAL DIFFERENTIAL COUNT RESULT&testcontcd=01&execdeptcd=H1`;Q.A.get(m).then((function(e){const t=e.data,a=JSON.parse((0,jv.xml2json)(t,{compact:!0})),l=a.root.ResultFlag.resultflag._text;"Y"===l?Le($.IDS_MSG_SUCCESS):Te(a.root.ResultFlag.error2._text)})).catch((function(e){Te(e.message)}))}else Te($.IDS_ERROR_PLEASE_CONFIRM_YOUR_USER_ID)}))})).catch((function(e){Te(e.message)}))}else ae()},ae=()=>{if("0019"===f.value){let e="H|^&||||||||||P||"+a.selectItems.barcodeNo+"\n",t=0;X.value.forEach((function(l){""!==l.code&&a.selectItems.wbcInfoAfter.forEach((function(a){l.IA_CD===a.id&&(Number(a.percent)>0||Number(a.count))&&(e+="R|"+ ++t+"|^^^^"+l.code+"|"+a.count+"|||||||^"+u.value.userId+"\n",e+="R|"+ ++t+"|^^^^"+l.code+"%|"+a.percent+"|%||||||^"+u.value.userId+"\n")}))})),e+="L|1|N",ne(e)}else if("0006"===f.value){const e=oe();ne(e)}else"0011"===f.value?se():le()},le=async()=>{const e=W.value,t=await Cp(e);if(t){const e={sendingApp:"PBIA",sendingFacility:"PBIA",receivingApp:"LIS",receivingFacility:"LIS",dateTime:V(),security:"",messageType:["ADT","R02"],messageControlId:a.selectItems.barcodeNo,processingId:"P",hl7VersionId:"2.5",selectedItem:{},wbcInfo:a.selectItems.wbcInfoAfter,result:X.value},t=await sm(e);if(t)if(W.value.includes("http"))ie(t);else{const e={filepath:W.value,msg:t};try{await om(e);Le($.IDS_MSG_SUCCESS)}catch(l){Te(l.response.data)}}}},se=()=>{let e="";const t=g.value.split(",");let l=[];t.forEach((function(e){if(e.length>0){var t=e.split("|"),a=t[0],s=t[1],o=(t[2],t[3],"");"L0210"===a&&(s+="5"),"H1151"===a?(o+="H9511|"+s+"|",l.push(o)):"H1152"===a?(o+="H9512|"+s+"|",l.push(o)):"H1153"===a?(o+="H9513|"+s+"|",l.push(o)):"H1154"===a?(o+="H9514|"+s+"|",l.push(o)):"H1155"===a?(o+="H9515|"+s+"|",l.push(o)):"H1165"===a?(o+="H9510|"+s+"|",l.push(o)):"H1162"===a?(o+="H9570|"+s+"|",l.push(o)):"H1101"!==a&&"H1102"!==a&&"H1103"!==a&&"H1104"!==a&&"H1105"!==a&&"H1106"!==a&&"H1121"!==a&&"H1122"!==a&&"H1123"!==a||(o+=a+"|"+s+"|",l.push(o))}})),g.value="",l.forEach((function(e){g.value+=e+","})),e+=g.value;let s="";X.value.forEach((function(t,l){a.selectItems.wbcInfoAfter.forEach((function(a){t.IA_CD===a.id&&("H9600"===t.code||"H9365"===t.code||"H9366"===t.code?Number(a.count)>0?e+=t.code+"|1|,":e+=t.code+"| |,":"13"===t.IA_CD||"14"===t.IA_CD?Number(a.count)>Number(t.MIN_COUNT)?e+=t.code+"|"+a.percent+"|,":e+=t.code+"| |,":Number(a.percent)>0?e+=t.code+"|"+a.percent+"|,":e+=t.code+"| |,")}))}));const o=["H9531","H9535","H9594","H9571","H9574","H9595"];F.value.forEach((function(t){""!==t.code&&a.selectItems.rbcInfoAfter.forEach((function(a){if(t.categoryId===a.categoryId)for(const l of a.classInfo)if(t.classId===l.classId){const a=0===Number(l.degree)?" ":o.includes(t.code)?"0":l.degree;s+=`${t.code}|${a}|,`,e+=`${t.code}|${a}|,`}}))}));const n={H9531:"H9571",H9532:"H9572",H9533:"H9573",H9535:"H9574",H9536:"H9575",H9537:"H9576",H9534:"H9577",H9538:"H9578",H9542:"H9518",H9544:"H9520",H9546:"H9517",H9548:"H9519",H9550:"H9522",H9552:"H9521",H9554:"H9525",H9556:"H9524",H9558:"H9526",H9560:"H9523",H9562:"H9528",H9564:"H9530",H9594:"H9595"};let i=s.replace(/H9531|H9532|H9533|H9535|H9536|H9537|H9534|H9538|H9542|H9544|H9546|H9548|H9550|H9552|H9554|H9556|H9558|H9560|H9562|H9564|H9594/g,(e=>n[e]));e+=s,e+=i;var u={url:W.value,machine:"ADUIMD",episode:a.selectItems.barcodeNo,result:e};Q.A.post(u.url+"/api/MifMain/File",{machine:u.machine,episode:u.episode,result:u.result}).then((function(e){const t=e.data[0];"0"===t.returnCode?Le($.IDS_MSG_SUCCESS):Le("return code : "+t.returnCode)})).catch((function(e){Le(e.message)}))},oe=()=>{let e="H|^&||||||||||P||"+a.selectItems.barcodeNo+"\n",t=0,l=0,s=0;if(a.selectItems.wbcInfoAfter.forEach((function(e){"02"!==e.id&&"03"!==e.id&&"04"!==e.id&&"10"!==e.id||(l+=Number(e.percent)),"72"===e.id&&(s=Number(e.percent))})),l>0&&s<6){const e=a.selectItems.wbcInfoAfter.filter((function(e){return"71"===e.id})),t=a.selectItems.wbcInfoAfter.filter((function(e){return"72"===e.id}));e[0].percent=Number(e[0].percent)+Number(s)+"",t[0].percent="0"}return X.value.forEach((function(l){""!==l.code&&a.selectItems.wbcInfoAfter.forEach((function(a){l.IA_CD===a.id&&("01"===a.id||"71"===a.id||"05"===a.id||"07"===a.id||"08"===a.id||"09"===a.id||Number(a.percent)>0)&&(e+="R|"+ ++t+"|^^^^"+l.code+"|"+a.count+"|||||||^"+u.value.userId+"\n",e+="R|"+ ++t+"|^^^^"+l.code+"%|"+a.percent+"|%||||||^"+u.value.userId+"\n")}))})),e+="L|1|N"},ne=async e=>{if(W.value.includes("http"))ie(e);else{const t=W.value,l=await Cp(t);if(l){const t={path:W.value,filename:`${W.value}/${a.selectItems.barcodeNo}.lst2msg`,content:e},l=await kp(t);if(l){const e=await Lu(String(a.selectItems.id)),t={submitState:"lis"},l={...e.data,...t};await be(l,!0),Le($.IDS_MSG_SUCCESS),T.value||r("nextPage")}else Te("lis file err")}}},ie=e=>{const t={url:W.value,barcodeNo:a.selectItems.barcodeNo,userId:u.value.userId,deviceBarcode:I.value,resultMsg:e};Q.A.post(t.url,{barcodeNo:t.barcodeNo,userid:t.userId,deviceBarcode:I.value,resultMsg:t.resultMsg}).then((function(e){"E000"===e.data.errorCode?Le($.IDS_MSG_SUCCESS):Te(e.data.errorMessage)})).catch((function(e){Te(e.message)}))},ue=async()=>{try{const e=await Fe(),t=await Re();if(e&&e.data&&t&&t.data){const a=e.data,l=t.data;a&&(X.value=a),l&&(F.value=l)}}catch(e){console.error(e)}},ce=async()=>{try{const e=await Me();e&&e.data&&0!==e.data.length&&(W.value=e.data[0].lisFilePath)}catch(e){console.error(e)}},re=async e=>new Promise(((t,a)=>{if("0002"===f.value){const l=`http://emr012.cmcnu.or.kr/cmcnu/.live?submit_id=TRLII00104&business_id=li&instcd=012&userid=${e}`;Q.A.get(l).then((function(e){const a=e.data,l=JSON.parse((0,jv.xml2json)(a,{compact:!0})),s=l.root.getUsernm.usernm._text;t(null===s||""===s?"fail":"succ")})).catch((function(e){console.log("checkUserAuth :"+e.message),a(new Error(e.message))}))}})),de=()=>{A.value=!1},me=async()=>{const e=H()().local(),t=await Lu(String(a.selectItems.id)),l={submitState:"Submit",submitOfDate:e.format(),submitUserId:u.value.name},s={...t.data,...l};await be(s)},ve=async()=>{const e={wbcMemo:k.value},t=await Lu(String(a.selectItems.id)),l={...t.data,...e};await be(l),h.value=!1},pe=()=>{k.value=""!==k.value?k.value:a.selectItems.wbcMemo,h.value=!h.value},ge=()=>{h.value=!1},Ie=e=>"Artifact(Smudge)"===e&&"0006"===f.value?"Artifact":e,be=async(e,t)=>{try{const a=await _u({userId:Number(u.value.id),runingInfoDtoItems:[e]});if(a){t||Le("success");const a=e;sessionStorage.setItem("selectItems",JSON.stringify(a)),k.value=a.wbcMemo}else console.error("   ")}catch(a){console.error("Error:",a)}},fe=(e,t)=>{let a=JSON.parse(JSON.stringify(e));return a.sort(((e,a)=>{const l=t.findIndex((t=>(t.title||t.abbreviation)===(e.title||e.abbreviation))),s=t.findIndex((e=>(e.title||e.abbreviation)===(a.title||a.abbreviation)));return-1===l?1:-1===s?-1:l-s})),a},ye=async()=>{try{const e=await Ge();e&&(0===e?.data.length?x.value=[]:x.value=e.data.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx))))}catch(e){console.log(e)}},Ce=async()=>{B.value=!0,r("isBefore",!0);const e=sessionStorage.getItem("selectItems");m.value=e?JSON.parse(e):null,await ye();const t=await Lu(String(m.value.id)),a=t.data.wbcInfo.wbcInfo[0];let l=0!==x.value.length?x.value:"bm"===window.PROJECT_TYPE?va:ma;const s=fe(a,l);S.value=s.filter((e=>!E.includes(e.title))),_.value=s.filter((e=>E.includes(e.title))),_e(S.value)},ke=async e=>{await ye(),r("isBefore",!1),B.value=!1;const t=await Lu(String(m.value.id)),a=0!==m.value.wbcInfoAfter.length?m.value.wbcInfoAfter:t.data.wbcInfo.wbcInfo[0],l=0===e.length?a:e;let s=0!==x.value.length?x.value:"bm"===window.PROJECT_TYPE?da:ra;const o=fe(l,s);S.value=o.filter((e=>!E.includes(e.title))),_.value=o.filter((e=>E.includes(e.title))),_e(S.value)},he=e=>{const t=Se(f.value,m.value?.testType);return!t.includes(e)},Se=(e,t)=>{e||""!==e||(e="0000",t="01");const a={"0006":{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","SM","NE","GP","PA","OT"]}},l=a[e]||{includesStr:["AR","NR","GP","PA","MC","SM","MA","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","NE","SM","GP","PA","OT"]};return"01"===t||"04"===t?l.includesStr:l.includesStr2},_e=e=>{K.value=0,e.forEach((e=>{if(O.value)"OT"!==e.title&&(K.value+=Number(e.count));else{const t=Se(f.value,m.value?.testType),a=t.includes(e.title);a||(K.value+=Number(e.count))}}))};async function Ee(){let e=JSON.parse(JSON.stringify([...S.value,..._.value])),t=0;e.forEach((e=>{e.images.forEach((e=>{if(O.value)"OT"!==e.title&&(t+=1);else{const a=Se(f.value,m.value?.testType);a.includes(e.title)||(t+=1)}}))})),e.forEach((e=>{if(e.images.forEach((e=>{delete e.width,delete e.height,delete e.filter})),O.value){if("OT"!==e.title){const a=(Number(e.count)/Number(t)*100).toFixed(1);e.percent=Number(a)===Math.floor(Number(a))?Math.floor(Number(a)).toString():a}}else{const a=Se(f.value,m.value?.testType);if(!a.includes(e.title)){const a=(Number(e.count)/Number(t)*100).toFixed(1);e.percent=Number(a)===Math.floor(Number(a))?Math.floor(Number(a)).toString():a}}})),m.value.wbcInfoAfter=e,sessionStorage.setItem("selectItems",JSON.stringify(m.value)),await i.dispatch("commonModule/setCommonInfo",{classInfoSort:[...S.value,..._.value]}),sessionStorage.setItem("selectItemWbc",JSON.stringify(e));const a=fe(x.value,S.value);a.forEach(((e,t)=>{e.orderIdx=t}));const l=await Lu(String(m.value.id));l&&(l.data.wbcInfoAfter=e),await He(a),await Ne(e,[l.data]),await i.dispatch("commonModule/setCommonInfo",{classInfoSort:[]})}async function Ne(e,t){try{const e=await _u({userId:Number(C.value),runingInfoDtoItems:t});e||console.error("   ")}catch(a){console.error("Error:",a)}}const Le=e=>{T.value=!0,w.value="success",P.value=e,window.scrollTo({top:0,behavior:"smooth"})},Te=e=>{T.value=!0,w.value="error",P.value=e},we=()=>{T.value=!1};return(t,a)=>{const o=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,["report"!==e.type?((0,s.uX)(),(0,s.CE)("img",{key:0,src:y.value},null,8,hp)):(0,s.Q3)("",!0),(0,s.Lk)("div",Sp,[(0,s.Lk)("h3",_p,(0,n.v_)(Y()),1),(0,s.Lk)("ul",Ep,[(0,s.Lk)("li",Np,[(0,s.bF)(o,{icon:["fas","comment-dots"],onClick:pe}),h.value?((0,s.uX)(),(0,s.CE)("div",Lp,[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>k.value=e)},null,512),[[l.Jo,k.value]]),(0,s.Lk)("button",{onClick:ve},"ok"),(0,s.Lk)("button",{onClick:ge},"cancel")])):(0,s.Q3)("",!0)]),(0,s.Lk)("li",{onClick:Z,class:(0,n.C4)({submitted:"Submit"===e.selectItems.submitState})},[(0,s.bF)(o,{icon:["fas","square-check"]})],2),(0,s.Lk)("li",{onClick:G},[(0,s.bF)(o,{icon:["fas","upload"]})]),(0,s.Lk)("li",null,[N.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(o,{key:0,icon:["fas","lock"],onClick:z})),N.value?((0,s.uX)(),(0,s.Wv)(o,{key:1,icon:["fas","lock-open"],onClick:z})):(0,s.Q3)("",!0)])])]),(0,s.Lk)("div",Rp,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(S.value,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"wbcClassDbDiv",draggable:"true",onDragstart:e=>q(t,e),onDragover:a[1]||(a[1]=(0,l.D$)((()=>{}),["prevent"])),onDrop:e=>J(t,e)},[0===t?((0,s.uX)(),(0,s.CE)("ul",wp,Mp)):(0,s.Q3)("",!0),he(e.title)?((0,s.uX)(),(0,s.CE)("ul",{key:1,class:"nth1Child",onClick:t=>j(e.id)},[(0,s.Lk)("li",null,(0,n.v_)(e?.name),1),(0,s.Lk)("li",null,(0,n.v_)(e?.count),1),(0,s.Lk)("li",null,(0,n.v_)(e?.percent||"-"),1)],8,xp)):(0,s.Q3)("",!0)],40,Tp)))),128)),(0,s.Lk)("div",Op,[Bp,(0,s.Lk)("ul",Kp,[(0,s.Lk)("li",null,(0,n.v_)(K.value||0),1)]),Up]),O.value?((0,s.uX)(),(0,s.CE)("div",Xp,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(S.value,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"wbcClassDbDiv mb2",draggable:"true",onDragstart:e=>q(t,e),onDragover:a[2]||(a[2]=(0,l.D$)((()=>{}),["prevent"])),onDrop:e=>J(t,e)},["OT"===e?.title?((0,s.uX)(),(0,s.CE)("ul",{key:0,class:"nth1Child",onClick:t=>j(e.id)},[(0,s.Lk)("li",null,(0,n.v_)(e?.name),1),(0,s.Lk)("li",null,(0,n.v_)(e?.count),1),$p],8,Wp)):(0,s.Q3)("",!0)],40,Fp)))),128))])):(0,s.Q3)("",!0),O.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Gp,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(_.value,((t,a)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",{key:a,class:"categories"},[(0,s.Lk)("ul",Hp,[0===a?((0,s.uX)(),(0,s.CE)("li",Vp,"non-WBC")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(Ie(t.name)),1)]),(0,s.Lk)("ul",jp,[0===a?((0,s.uX)(),(0,s.CE)("li",Yp)):(0,s.Q3)("",!0),(0,s.Lk)("li",null,[(0,s.eW)((0,n.v_)(t?.count)+" ",1),"NR"===t?.title||"GP"===t?.title?((0,s.uX)(),(0,s.CE)("span",qp," / "+(0,n.v_)(m.value?.wbcInfo?.maxWbcCount)+" WBC",1)):(0,s.Q3)("",!0)])]),(0,s.Lk)("ul",Jp,[0===a?((0,s.uX)(),(0,s.CE)("li",zp)):(0,s.Q3)("",!0),Qp])],512)),[[l.aG,"0006"!==e.selectItems.siteCd&&"SM"!==t?.title]]))),128))])),"report"!==e.type?((0,s.uX)(),(0,s.CE)("div",Zp,[(0,s.Lk)("button",{onClick:Ce,class:(0,n.C4)({isBeforeClicked:B.value})},"Before",2),(0,s.Lk)("button",{onClick:a[3]||(a[3]=e=>ke(p.value)),class:(0,n.C4)({isBeforeClicked:!B.value})},"After",2)])):(0,s.Q3)("",!0)]),T.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:1,"is-visible":T.value,type:w.value,message:P.value,onHide:we,"onUpdate:hideAlert":we},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0),A.value?((0,s.uX)(),(0,s.Wv)(jd,{key:2,"is-visible":A.value,type:D.value,message:M.value,onHide:de,onOkConfirm:ee},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const tg=eg;var ag=tg;const lg={class:"reportDiv"},sg={class:"wbcDiv"},og={key:0,class:"rbcDiv"},ng={class:"reportDetail"},ig={class:"reportTitle"},ug=(0,s.Lk)("span",null,"[Hospital]",-1),cg={class:"reportDivTop"},rg={key:0,class:"reportH3"},dg={key:1,class:"reportH3"},mg={class:"reportTable"},vg=(0,s.Lk)("th",null,"Slot ID",-1),pg=(0,s.Lk)("th",null,"Ordered date",-1),gg=(0,s.Lk)("th",null,"Signed by ID",-1),Ig=(0,s.Lk)("th",null,"Signed date",-1),bg=(0,s.Lk)("th",null,"Patient ID",-1),fg=(0,s.Lk)("th",null,"Ordered Classification",-1),yg=(0,s.Lk)("th",null,"Name",-1),Cg=(0,s.Lk)("th",null,"Birth",-1),kg=(0,s.Lk)("th",null,"Gender",-1),hg={class:"reportDivBottom"},Sg={class:"wbcLeft"},_g={class:"reportH3 mb1 pl0"},Eg={class:"tableClass"},Ng=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{width:"40%"}),(0,s.Lk)("col",{width:"20%"}),(0,s.Lk)("col",{width:"20%"})],-1),Lg=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Class"),(0,s.Lk)("th",null,"Count"),(0,s.Lk)("th",null,"%")])],-1),Rg=(0,s.Lk)("td",null,"total",-1),Tg=(0,s.Lk)("td",null,"100.00",-1),wg={key:0,class:"reportH3 mb1 pl0"},Pg={key:1,class:"tableClass"},Ag=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{width:"40%"}),(0,s.Lk)("col",{width:"20%"}),(0,s.Lk)("col",{width:"20%"})],-1),Dg={key:0},Mg=(0,s.Lk)("td",null,"-",-1),xg={key:0,class:"rbcRight"},Og=(0,s.Lk)("h3",{class:"reportH3 mb1 pl0"},"RBC classification result",-1),Bg={class:"categoryNm"},Kg={key:0,class:"mb1 liTitle"},Ug={class:"classNm"},Xg={key:0,class:"mb1 liTitle"},Fg={class:"degree"},Wg={key:0,class:"mb1 liTitle"},$g={key:0};var Gg=(0,s.pM)({__name:"report",setup(e){const t=e=>e?.name,a=(0,c.Pj)(),i=sessionStorage.getItem("selectItems"),u=(0,o.KR)(i?JSON.parse(i):null),r=(0,o.KR)(i?JSON.parse(i):null),d=(0,o.KR)(null),m=sessionStorage.getItem("selectItemWbc"),v=(0,o.KR)(!1),p=(0,o.KR)(null),I=(0,o.KR)([]),b=(sessionStorage.getItem("selectItemRbc"),(0,s.EW)((()=>a.state.userModule)),(0,s.EW)((()=>a.state.commonModule.siteCd))),f=(0,s.EW)((()=>a.state.commonModule.clonedWbcInfo)),y=(0,s.EW)((()=>a.state.commonModule.cbcLayer)),C=((0,s.nI)(),(0,o.KR)(!1)),k=(0,o.KR)([]),h=(0,o.KR)([]);(0,s.sV)((async()=>{await T(),await w(),C.value="bm"===window.PROJECT_TYPE}));const S=e=>{const t=_(b.value,u.value?.testType);return!t.includes(e)},_=(e,t)=>{e||""!==e||(e="0000",t="01");const a={"0006":{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","SM","NE","GP","PA","OT"]}},l=a[e]||{includesStr:["AR","NR","GP","PA","MC","SM","MA","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","NE","SM","GP","PA","OT"]};return"01"===t||"04"===t?l.includesStr:l.includesStr2},E=async e=>{r.value=e,await w(e)},N=()=>{v.value=!1},L=()=>C.value?"BM Classification":"WBC Classification",R=()=>{v.value=!0},T=async()=>{try{const e=await Ge();e&&(0===e?.data.length?h.value=[]:h.value=e.data.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx))))}catch(e){console.log(e)}};async function w(e){if(r.value.wbcInfoAfter&&0!==r.value.wbcInfoAfter.length){let e=0!==h.value.length?h.value:"bm"===window.PROJECT_TYPE?va:ma;const t=P(f.value,e);d.value=t,k.value=t}else{let e=0!==h.value.length?h.value:"bm"===window.PROJECT_TYPE?va:ma;const t=P(r.value.wbcInfo.wbcInfo[0],e);d.value=t,k.value=t}I.value=0!==r.value.rbcInfoAfter.length&&r.value.rbcInfoAfter?r.value.rbcInfoAfter:r.value.rbcInfo.rbcInfo}const P=(e,t)=>{let a=JSON.parse(JSON.stringify(e));return a.sort(((e,a)=>{const l=t.findIndex((t=>(t.title||t.abbreviation)===(e.title||e.abbreviation))),s=t.findIndex((e=>(e.title||e.abbreviation)===(a.title||a.abbreviation)));return-1===l?1:-1===s?-1:l-s})),a};return(e,a)=>{const i=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(Vv,{onRefreshClass:E}),(0,s.Lk)("div",{class:(0,n.C4)("reportSection"+(y.value?" cbcLayer":""))},[y.value?((0,s.uX)(),(0,s.Wv)(op,{key:0,selectItems:r.value},null,8,["selectItems"])):(0,s.Q3)("",!0),(0,s.Lk)("div",lg,[(0,s.Lk)("div",sg,[(0,s.bF)(ag,{wbcInfo:d.value,selectItems:r.value,type:"report"},null,8,["wbcInfo","selectItems"])]),C.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",og,[(0,s.bF)(Wm,{rbcInfo:I.value,selectItems:r.value,type:"report"},null,8,["rbcInfo","selectItems"])])),(0,s.Lk)("div",ng,[(0,s.Lk)("div",ig,[ug,(0,s.eW)(),(0,s.Lk)("span",null,"DM Serial Nbr : "+(0,n.v_)(r.value?.slotId),1),(0,s.bF)(i,{icon:["fas","print"],onClick:R,class:"printStart"})]),(0,s.Lk)("div",cg,[C.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("h3",rg,"Analysis Report from UIMD PB system")),C.value?((0,s.uX)(),(0,s.CE)("h3",dg,"Analysis Report from UIMD BM system")):(0,s.Q3)("",!0),(0,s.Lk)("table",mg,[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[vg,(0,s.Lk)("td",null,(0,n.v_)(r.value?.slotId),1)]),(0,s.Lk)("tr",null,[pg,(0,s.Lk)("td",null,(0,n.v_)((0,o.R1)(j)(r.value?.orderDttm)),1)]),(0,s.Lk)("tr",null,[gg,(0,s.Lk)("td",null,(0,n.v_)(r.value?.submitUserId),1)]),(0,s.Lk)("tr",null,[Ig,(0,s.Lk)("td",null,(0,n.v_)(r.value?.submitOfDate),1)]),(0,s.Lk)("tr",null,[bg,(0,s.Lk)("td",null,(0,n.v_)(r.value?.patientId),1)]),(0,s.Lk)("tr",null,[fg,(0,s.Lk)("td",null,(0,n.v_)((0,o.R1)(g)(r.value?.testType)),1)]),(0,s.Lk)("tr",null,[yg,(0,s.Lk)("td",null,(0,n.v_)(r.value?.patientName),1)]),(0,s.Lk)("tr",null,[Cg,(0,s.Lk)("td",null,(0,n.v_)(r.value?.birthDay),1)]),(0,s.Lk)("tr",null,[kg,(0,s.Lk)("td",null,(0,n.v_)("01"===r.value?.gender?"Male":"Female"),1)])])])]),(0,s.Lk)("div",hg,[(0,s.Lk)("div",Sg,[(0,s.Lk)("h3",_g,(0,n.v_)(L())+" result",1),(0,s.Lk)("table",Eg,[Ng,Lg,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(k.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id,class:"wbcClassDbDiv"},[S(e.title)?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("td",null,(0,n.v_)(e?.name),1),(0,s.Lk)("td",null,(0,n.v_)(e?.count),1),(0,s.Lk)("td",null,(0,n.v_)(e?.percent||"-"),1)],64)):(0,s.Q3)("",!0)])))),128)),(0,s.Lk)("tr",null,[Rg,(0,s.Lk)("td",null,(0,n.v_)(r.value?.wbcInfo?.totalCount||0),1),Tg])])]),r.value?.wbcInfo?.nonRbcClassList?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("h3",wg,"non-WBC")),C.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("table",Pg,[Ag,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value?.wbcInfo?.nonRbcClassList,((e,a)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("tr",{key:a},[(0,s.Lk)("td",null,(0,n.v_)(t(e)),1),(0,s.Lk)("td",null,[(0,s.eW)((0,n.v_)(e?.count)+" ",1),"NR"===e?.title||"GP"===e?.title?((0,s.uX)(),(0,s.CE)("span",Dg," /"+(0,n.v_)(r.value?.wbcInfo?.maxWbcCount)+" WBC",1)):(0,s.Q3)("",!0)]),Mg],512)),[[l.aG,"0006"!==b.value&&"SM"!==e?.title]]))),128))])]))]),C.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",xg,[Og,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)([I.value],((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"categories"},[(0,s.Lk)("ul",Bg,[0===t?((0,s.uX)(),(0,s.CE)("li",Kg,"Category")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(e?.categoryNm),1)]),(0,s.Lk)("ul",Ug,[0===t?((0,s.uX)(),(0,s.CE)("li",Xg,"Class")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},(0,n.v_)(e?.classNm),1)))),128))]),(0,s.Lk)("ul",Fg,[0===t?((0,s.uX)(),(0,s.CE)("li",Wg,"Degree")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((t,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:a},["01"!==t.classId||"05"===e.categoryId?((0,s.uX)(),(0,s.CE)("li",$g,(0,n.v_)(t?.degree),1)):(0,s.Q3)("",!0)],64)))),128))])])))),128))],64)))),128))]))])])])],2),v.value?((0,s.uX)(),(0,s.Wv)(qc,{key:0,selectItems:r.value,ref_key:"printContent",ref:p,printOnOff:v.value,selectItemWbc:(0,o.R1)(m),onPrintClose:N},null,8,["selectItems","printOnOff","selectItemWbc"])):(0,s.Q3)("",!0)],64)}}});const Hg=Gg;var Vg=Hg;const jg={class:"moveImgIsBool"},Yg={class:"wbcContent"},qg={class:"topClintInfo"},Jg={class:"sizeContainer"},zg={class:"imgSetWrap",ref:"imgSetWrap"},Qg={class:"imgSet"},Zg={class:"wbcInfoDbUl"},eI=["onClick"],tI=["onDrop"],aI={key:0,class:"cellImgBox"},lI={class:"mt1"},sI=["onInput","checked"],oI=["onDrop"],nI=["onClick","onDblclick","onContextmenu"],iI={style:{position:"relative"}},uI={class:"titleImg"},cI={class:"fileTitle"},rI=["src","width","height","onDragstart","onError"],dI={key:1},mI=(0,s.Lk)("select",null,[(0,s.Lk)("option",null,"1")],-1),vI={class:"mt1"},pI=["checked"],gI=(0,s.Lk)("div",null,[(0,s.Lk)("select",null,[(0,s.Lk)("option",null,"1")]),(0,s.Lk)("div")],-1),II=["onClick"],bI={class:"wbcModal"},fI={class:"wbc-modal-content"},yI={class:"wbcModalImageContent"},CI=["src"];var kI=(0,s.pM)({__name:"listDetail",setup(e){(0,o.KR)({});const t=(0,o.KR)(""),a=sessionStorage.getItem("selectItemWbc"),i=(0,o.KR)(null),u=sessionStorage.getItem("selectItems"),r=(0,o.KR)(u?JSON.parse(u):null),d=(0,c.Pj)(),m=(0,o.KR)(""),v=(0,s.EW)((()=>d.state.userModule)),p=(0,s.EW)((()=>d.state.commonModule.cbcLayer)),b=(0,s.EW)((()=>d.state.commonModule.moveImgIsBool)),f=(0,s.EW)((()=>d.state.commonModule.classInfoSort)),y=(0,o.KR)(d.state.commonModule.iaRootPath),C=(0,s.EW)((()=>d.state.commonModule.siteCd)),k=(0,o.KR)(null),h=(0,o.KR)(null),S=(0,o.KR)(!1),_=(0,o.KR)(null),E=(0,o.KR)(!1),N=(0,o.KR)(null),L=(0,o.KR)([]),R=(0,o.KR)(null),T=(0,o.KR)([]),w=(0,o.KR)([]),P=[],A=(0,o.KR)(150),D=(0,o.KR)(100),M=(0,o.KR)([0,0,0]),x=(0,o.KR)("ME"),O=(0,o.KR)([]),B=(0,o.KR)(""),K=(0,o.KR)(null),U=(0,o.KR)(!1),X=(0,o.KR)(!1),F=(0,o.KR)(!1),W=(0,o.KR)(""),$=(0,o.KR)("150px"),G=(0,o.KR)("150px"),H=(0,o.KR)(!1),V=window.APP_API_BASE_URL||"http://192.168.0.131:3002",j=(0,o.KR)([]),Y=(0,o.KR)([]),q=(0,o.KR)([]),J=((0,s.nI)(),(0,o.KR)("bm")),z=(0,o.KR)("0.9"),Q=(0,o.KR)([]),Z=(0,o.KR)([]),ee=(0,o.KR)([]),te=(0,o.KR)(!1),ae=(0,o.KR)({}),le=(0,o.KR)(!1),se=(0,o.KR)(0),oe=(0,o.KR)(0),ne=(0,o.KR)(null),ie=(0,o.KR)(!1),ue=(0,o.KR)(!1);(0,s.EW)((()=>d.state.commonModule.iaRootPath));(0,s.sV)((async()=>{i.value=[],r.value=u?JSON.parse(u):null,J.value=window.PROJECT_TYPE,window.addEventListener("keydown",Ze),window.addEventListener("keyup",tt),document.body.addEventListener("click",Qe),await Ee(!1,null),document.addEventListener("click",ke);const e=""!==r.value?.rootPath&&r.value?.rootPath?r.value?.rootPath:d.state.commonModule.iaRootPath;y.value=e,await ce()})),(0,s.hi)((async()=>{document.addEventListener("click",ke)})),(0,s.wB)(D,(e=>{localStorage.setItem("imgBrightness",String(e))})),(0,s.wB)(A,(e=>{localStorage.setItem("imageSize",String(e))})),(0,s.wB)(X,(e=>{Ee(!1,null)}),{deep:!0}),(0,s.wB)(M,(e=>{const t=e[0],a=e[1],l=e[2];localStorage.setItem("imageRgb",JSON.stringify([t,a,l]))}),{deep:!0});const ce=async()=>{const e=localStorage.getItem("imgBrightness"),t=localStorage.getItem("imageRgb"),a=localStorage.getItem("imageSize");t&&(M.value=JSON.parse(t)),e&&(D.value=Number(e)),a&&(A.value=Number(a));const l=255-M.value[0],s=255-M.value[1],o=255-M.value[2];i.value.forEach((e=>{e.images.forEach((e=>{e.filter=`opacity(0.9) drop-shadow(0 0 0 rgb(${l}, ${s}, ${o})) brightness(${D.value}%)`,e.width=Number(A.value),e.height=Number(A.value)}))}))},de=e=>{X.value=e},me=()=>{ie.value=!0},pe=()=>{ie.value=!1},ge=(e,t,a)=>{e.preventDefault(),he(e,a)};function be(e,t,a){ae.value[`${e}-${t}`]=!0}const fe=(e,t)=>{if(0===r.value.wbcInfoAfter.length)return null;if(X.value){const a=r.value.wbcInfoAfter.find((t=>t.images&&t.images.find((t=>t.fileName===e))));if(a&&a.title!==t)return{fileNameMa:e,idMa:a.id,titleMa:a.title}}return null},ye=()=>{te.value=!0},Ce=()=>{te.value=!1},ke=e=>{e.target.closest(".imgSetWrap")||(H.value=!1,t.value="")};document.addEventListener("click",(e=>{le.value&&(le.value=!1)}));const he=(e,t)=>{X.value||(le.value=!0,se.value=e.clientX,oe.value=e.clientY-250,ne.value=t)},Se=async(e,t)=>{Je();const a=i.value[t];if(ne.value){const t=i.value.findIndex((t=>t.id===e.id));await rt(t,T.value,a,i.value[t],!1,"",i.value),le.value=!1}le.value=!1},_e=async(e,t)=>{let a=e.slice();a.sort(((e,a)=>{const l=t.findIndex((t=>(t.title||t.abbreviation)===(e.title||e.abbreviation))),s=t.findIndex((e=>(e.title||e.abbreviation)===(a.title||a.abbreviation)));return-1===l?1:-1===s?-1:l-s})),e.splice(0,e.length,...a)},Ee=async(e,t)=>{i.value=[];try{const a=await re(),l=a.data,s=l.filter((e=>e.abbreviation)),o=sessionStorage.getItem("customClass"),n=JSON.parse(o);n&&n.forEach((e=>{const t=l.find((t=>t.customNum===e.customNum&&t.abbreviation!==e.abbreviation));if(t){if(""===e?.abbreviation)return;const t=`${y.value}/${r.value.slotId}/${Ct(J.value)}/${e?.abbreviation}`;yp({path:t})}})),sessionStorage.setItem("customClass",JSON.stringify(l)),j.value=l;for(const e of s){const{fullNm:t,abbreviation:a,customNum:l}=e,s=`${y.value}/${r.value.slotId}/${Ct(J.value)}/${l}_${a}`;await fp({path:s});const o={id:l,name:t,count:"0",images:[],title:a};let n=[];n=X.value?r.value.wbcInfo.wbcInfo[0]:0!==r.value.wbcInfoAfter.length?r.value.wbcInfoAfter:r.value.wbcInfo.wbcInfo[0];const u=n.find((e=>e.id===o.id&&e.name===o.name));u||(n.push(o),i.value=n,sessionStorage.setItem("selectItems",JSON.stringify(r.value)),await pt("notWbcAfterSave"))}await Le(),await Ne(),await lt(),await at(s,e,t)}catch(a){console.log(a)}},Ne=async()=>{try{const e=await Ie();if(e&&e?.data){const t=e.data;q.value=t}}catch(e){console.log(e)}},Le=async()=>{try{const e=await ve();e&&e?.data&&(Y.value=e.data)}catch(e){console.log(e)}};function Re(e){const t=e.fileName.split("_")[0],a={NES:"NS",NEB:"NB"},l=Object.keys(a).reduce(((e,t)=>e.replace(t,a[t])),t);return e.title!==l}function Te(e){const t={NES:"NS",NEB:"NB"},a=e.split("_")[0],l=Object.keys(t).reduce(((e,a)=>e.replace(a,t[a])),a);return l}const we=(e,t)=>{F.value=!0,W.value=It(e.fileName,t.id,t.title,"getImageRealTime")},Pe=()=>{F.value=!1},Ae=()=>{H.value=!H.value},De=()=>{let e=Math.min(parseFloat($.value)+50,400),t=Math.min(parseFloat(G.value)+50,400);$.value=`${e}px`,G.value=`${t}px`},Me=()=>{let e=Math.max(parseFloat($.value)-50,150),t=Math.max(parseFloat(G.value)-50,150);$.value=`${e}px`,G.value=`${t}px`};(0,s.wB)(v.value,((e,t)=>{m.value=e.id})),(0,s.wB)((()=>f.value),(async e=>{await lt();const t=0!==ee.value.length?ee.value:"bm"===window.PROJECT_TYPE?va:ma;await _e(i.value,t)}));const xe=async e=>{r.value=e;const t=""!==r.value?.rootPath&&r.value?.rootPath?r.value?.rootPath:d.state.commonModule.iaRootPath;y.value=t,await Ee(!0,e)},Oe=()=>{},Be=async e=>{if(e||(U.value=!U.value),U.value){let e="";"pb"===J.value?e=`${y.value}/${r.value.slotId}/${"01"===r.value.testType||"04"===r.value.testType?"01_WBC_Classification":"05_BF_Classification"}/${r.value.slotId}.json`:"bm"===J.value&&(e=`${y.value}/${r.value.slotId}/${Ct(J.value)}/${r.value.slotId}.json`);const t=await tm({fullPath:e});if(t&&t.success){const e=t.data;i.value.forEach((t=>{0!==t.images.length&&t.images.forEach((t=>{const a=K.value,l=e.find((e=>e?.FILE_NM===t?.fileName));if(l){const e=(a[0]?.width||150)/Number(l.ORG_WIDTH)*100,s=(a[0]?.height||150)/Number(l.ORG_HEIGHT)*100,o=(Number(l.POSX2)-Number(l.POSX1))*(e/100),n=(Number(l.POSY2)-Number(l.POSY1))*(s/100),i=a[0]?.offsetLeft+Number(l.POSX1)*(e/100)+o/2+"px",u=a[0]?.offsetTop+Number(l.POSY1)*(s/100)+n/2+"px";t.coordinates={position:"absolute",left:i,top:u,width:"5px",height:"5px",background:"#10ff00"}}}))}))}}else i.value.forEach((e=>{e.images.forEach((e=>{e.coordinates={display:"none"}}))}))},Ke=(e,a)=>{B.value=e.target.checked?a:"",e.target.checked?t.value=a:t.value="",Ue()},Ue=()=>{T.value=[],Q.value=[],Z.value=[];for(const e in i.value)if(B.value===i.value[e].title)for(const t in i.value[e].images){const a={id:i.value[e].id,title:i.value[e].title,...i.value[e].images[t]};T.value.push(a),Q.value.push(a)}},Xe=e=>t=>{t&&(O.value[e]=t)},Fe=e=>{const t=O.value[e];t&&t.scrollIntoView({behavior:"smooth"})};function We(){M.value=[0,0,0],z.value="0.9",Ve("reset")}function $e(){Be(!0),A.value=150,i.value.forEach((e=>{e.images.forEach((e=>{e.width=150,e.height=150}))}))}function He(){D.value=100,z.value="0.9",Ve("reset")}function Ve(e){const t=x.value;if(!t)return void We();"reset"!==e&&(z.value="0.9");const a=255-M.value[0],l=255-M.value[1],s=255-M.value[2];i.value.forEach((e=>{e.images.forEach((e=>{e.filter=`opacity(${z.value}) drop-shadow(0 0 0 rgb(${a}, ${l}, ${s})) brightness(${D.value}%)`}))}))}function je(e){const t=M.value[0],a=M.value[1],l=M.value[2],s=e?.target?.value;i.value.forEach((e=>{e.images.forEach((e=>{e.filter=`opacity(0.9) drop-shadow(0 0 0 rgb(${t}, ${a}, ${l})) brightness(${s}%)`}))}))}function Ye(e){i.value.forEach((t=>{t.images.forEach((t=>{let a=e?.target?.value,l=e?.target?.value;t.width=Number(a),t.height=Number(l)}))})),Be(!0)}function qe(){}function Je(){P.push(JSON.parse(JSON.stringify(i.value)))}async function ze(e){if(X.value)return;const t=i.value[N.value];if(e.id!==t.id)if(Je(),0===T.value.length){const a=t.images[R.value];e.images.push(a);const l=i.value.findIndex((t=>t.id===e.id));-1!==l?i.value[l].images.push(a):console.error(" id   "),await rt(l,[{fileName:a.fileName}],t,i.value[l],!1)}else{const a=i.value.findIndex((t=>t.id===e.id));await rt(a,T.value,t,i.value[a],!1,"",i.value)}}function Qe(e){const t=e.target;t.closest(".wbcImgWrapLi")||t.closest(".context-menu")||(T.value=[],w.value=[],Q.value=[])}async function Ze(e){e.shiftKey&&(S.value=!0),e.ctrlKey&&(E.value=!0),X.value||("pb"===J.value?e.key&&("01"===r.value.testType||"04"===r.value.testType?Y.value:q.value).some((t=>t.key.toUpperCase()===e.key.toUpperCase()))&&await et(("01"===r.value.testType||"04"===r.value.testType?Y.value:q.value).find((t=>t.key.toUpperCase()===e.key.toUpperCase()))):"bm"===J.value&&e.key&&Y.value.some((t=>t.key.toUpperCase()===e.key.toUpperCase()))&&await et(Y.value.find((t=>t.key.toUpperCase()===e.key.toUpperCase()))))}async function et(e){const t=i.value.findIndex((t=>(t.title||t.abbreviation)===(e.title||e.abbreviation))),a=T.value;Je();for(const l of a){const a=i.value.findIndex((e=>(e.title||e.abbreviation)===(l.title||l.abbreviation))),s=i.value[a],o=s.images.findIndex((e=>e.fileName===l.fileName));-1!==o&&await rt(t,[{fileName:l.fileName,id:l.id,title:l.title}],e,i.value[t],!0,"keyMove")}}function tt(e){e.shiftKey||(S.value=!1),e.ctrlKey||(E.value=!1)}async function at(e,t,l){i.value=[];let s=[];if(t?(i.value=0!==l.wbcInfoAfter.length?l.wbcInfoAfter:l.wbcInfo.wbcInfo[0],s=l):(i.value=a?JSON.parse(a):null,s=r.value),s.wbcInfoAfter&&0!==s.wbcInfoAfter.length&&!X.value?(i.value=s.wbcInfoAfter,s.wbcInfo.wbcInfo[0].forEach((e=>{const t=e.title,a=s.wbcInfoAfter.find((e=>e.title===t));a&&a.images.forEach((e=>{e.title=t}))}))):X.value&&(i.value=s.wbcInfo.wbcInfo[0],s.wbcInfo.wbcInfo[0].forEach((e=>{e.images&&e.images.length>0&&e.images.forEach((t=>{t.title=e.title}))}))),""!==e&&(s.wbcInfo.wbcInfo[0]=s.wbcInfo.wbcInfo[0].filter((t=>!e.find((e=>e.customNum===t.id&&""===e.abbreviation))))),!X.value){const e=i.value.map((e=>e.id)),t=s.wbcInfo.wbcInfo[0].filter((t=>!e.includes(t.id)));i.value=[...i.value,...t]}const o=ee.value.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx))),n=0!==ee.value.length?o:"bm"===window.PROJECT_TYPE?da:ra;await _e(i.value,n)}const lt=async()=>{try{const e=await Ge();e&&(0===e?.data.length?ee.value=[]:ee.value=e.data.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx))))}catch(e){console.log(e)}};function st(){}function ot(e,t){k.value=e,h.value=t,R.value=t,N.value=e,L.value.push(e)}function nt(e,t,a){if(S.value){if(null!==_.value){w.value.push(t);const l=Math.min(_.value,t),s=Math.max(_.value,t);T.value=[],Q.value=[];for(let t=l;t<=s;t++)T.value.push({id:i.value[e].id,title:i.value[e].title,...i.value[e].images[t]}),Q.value.push(a)}}else{_.value=t;const l=i.value[e].images[t];if(!E.value)return T.value=[],Q.value=[],T.value.push({...l,id:i.value[e].id}),void Q.value.push(a);const s=T.value.findIndex((e=>e===l));-1===s?(T.value.push({...l,id:i.value[e].id}),Q.value.push(a)):(T.value.splice(s,1),Q.value.splice(s,1))}}function it(e){const t=e.fileName;return T.value.some((e=>e.fileName===t))}async function ut(e){if(!X.value){if(Je(),0===T.value.length)return await ct(e);await d.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!0});for(const t of T.value){const a=t.fileName,l=i.value.findIndex((e=>e.images.some((e=>e.fileName===a)))),s=i.value[l];await rt(e,[{fileName:t.fileName}],s,i.value[e],!1)}await d.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!1}),T.value=[],Q.value=[],w.value=[]}}async function ct(e){if(null!==k.value&&null!==h.value&&k.value!==e){const t=i.value[k.value],a=t.images[h.value];await rt(e,[{fileName:a.fileName}],t,i.value[e],!1)}}async function rt(e,a,l,s,o,n,u){const{slotId:c}=r.value,m=a;let v=[],p=[],g=[];for(const t of m){const a=t.fileName;if(g.push(a),"keyMove"===n){const a="bm"===window.PROJECT_TYPE?da:ra,n=a.find((e=>e.abbreviation===(t.title||t.abbreviation))),u=o?`${y.value}/${c}/${Ct(J.value)}/${n?.id}_${t.title}`:`${y.value}/${c}/${Ct(J.value)}/${n?.id}_${l.title}`,r=`${y.value}/${c}/${Ct(J.value)}/${s.id}_${s.title}`;p.push(r),v.push(u);const m={sourceFolders:v,destinationFolders:p,fileNames:g};await d.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!0});const I=await Ym(m);if(I){const a=i.value.findIndex((e=>e.title===(t.title||t.abbreviation))),l=i.value[a],s=l.images.findIndex((e=>e.fileName===t.fileName));if(-1!==s){const t=l.images.splice(s,1)[0];t.title=i.value[e].title,t.width=A.value,t.height=A.value,i.value[e].images.push(t),l.count--,i.value[e].count++}T.value=[],Q.value=[],w.value=[],await pt(),await d.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!1})}return}if(!u&&"keyMove"!==n){const n=o?`${y.value}/${c}/${Ct(J.value)}/${t.id}_${t.title}`:`${y.value}/${c}/${Ct(J.value)}/${l.id}_${l.title}`,u=`${y.value}/${c}/${Ct(J.value)}/${s.id}_${s.title}`;p.push(u),v.push(n);const r={sourceFolders:v,destinationFolders:p,fileNames:g};let d=await Ym(r);if(d){const s=l.images.findIndex((e=>e.fileName===a));l.images.splice(s,1);const o={width:A.value,height:A.value};i.value[e].images.push({...t,...o}),i.value=mt(i.value),i.value.forEach((e=>{e.count=e.images.length,e.images.length>0&&e.images.forEach((t=>{t.title=e.title}))}))}}}if(u){await d.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!0});for(const e of Q.value){const t="bm"===window.PROJECT_TYPE?da:ra,a=t.find((t=>t.abbreviation===(e.title||e.abbreviation))),l=`${y.value}/${c}/${Ct(J.value)}/${a?.id}_${e.title}`,o=`${y.value}/${c}/${Ct(J.value)}/${s.id}_${s.title}`;p.push(o),v.push(l)}const t={sourceFolders:v,destinationFolders:p,fileNames:g};let l=await Ym(t);if(l){const t=i.value[e];for(const e of dt(Q.value,"title")){const l=a.filter((t=>t.title===(e.title||e.abbreviation)));t.images.push(...l),t.count=t.images.length;const s=i.value.findIndex((t=>t.title===(e.title||e.abbreviation)));if(-1!==s){const e=i.value[s],t=a.map((e=>e.fileName)),l=e.images.filter((e=>!t.includes(e.fileName)));e.images=l,e.count=e.images.length}}for(const l of a)l.title=i.value[e].title,l.width=A.value,l.height=A.value;await d.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!1})}else await d.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!1})}T.value=[],Q.value=[],w.value=[],B.value="",t.value="",await pt()}function dt(e,t){const a=new Set;return e.filter((e=>{const l=e[t];return!a.has(l)&&(a.add(l),!0)}))}function mt(e){const t=new Set;return e.map((e=>{const a=e.images.filter((e=>!t.has(e.fileName)&&(t.add(e.fileName),!0)));return{...e,images:a}}))}const vt=(e,t)=>{e||""!==e||(e="0000",t="01");const a={"0006":{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","SM","NE","GP","PA","OT"]}},l=a[e]||{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","NE","SM","GP","PA","OT"]};return"01"===t||"04"===t?l.includesStr:l.includesStr2};async function pt(e){let t=[],a=JSON.parse(JSON.stringify(i.value)),l=0;a.forEach((e=>{if("bm"===J.value)"OT"!==e.title&&(l+=Number(e.count));else{const t=vt(C.value,r.value?.testType);t.includes(e.title)||(l+=Number(e.count))}})),a.forEach((e=>{if(e.images.forEach((e=>{delete e.width,delete e.height,delete e.filter})),"bm"===J.value){if("OT"!==e.title){const t=(Number(e.count)/Number(l)*100).toFixed(1);e.percent=Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t}}else{const t=vt(C.value,r.value?.testType);if(!t.includes(e.title)){const t=(Number(e.count)/Number(l)*100).toFixed(1);e.percent=Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t}}}));let s=[];const o=a.map((e=>{const t=e.images.filter((e=>!s.includes(e.fileName)&&(s.push(e.fileName),!0)));return{...e,images:t}}));if(a=o,"notWbcAfterSave"!==e){r.value.wbcInfoAfter=a,sessionStorage.setItem("selectItems",JSON.stringify(r.value)),sessionStorage.setItem("selectItemWbc",JSON.stringify(a)),await d.dispatch("commonModule/setCommonInfo",{clonedWbcInfo:a});const e=await Lu(String(r.value.id));e&&(e.data.wbcInfoAfter=a),t=[e.data]}await gt(a,t)}async function gt(e,t){try{const e=await _u({userId:Number(m.value),runingInfoDtoItems:t});e?U.value&&await Be(!0):console.error("   ")}catch(a){console.error("Error:",a)}}function It(e,t,a,l,s){if(!i.value||0===i.value.length)return"";const o=r.value.slotId||"";let n=`${y.value}/${o}/${Ct(J.value)}/${t}_${a}`,u="";if(X.value&&fe(e,a)){const{idMa:t,titleMa:l}=fe(e,a);n=`${y.value}/${o}/${Ct(J.value)}/${t}_${l}`}return u="getImageRealTime"===l||"pb"===J.value?`${V}/images/getImageRealTime?folder=${n}&imageName=${e}`:`${V}/images?folder=${n}&imageName=${e}`,u}async function bt(){if(P.length>0){const e=P.pop();k.value=null,h.value=null,N.value=null,L.value=[],R.value=null,T.value=[],Q.value=[],w.value=[],await yt(i.value,e),i.value=e}}const ft=(e,t,a)=>{e.forEach(((e,l)=>{const s=t[l];e&&s&&e.images.forEach(((e,t)=>{const o=s.images[t];void 0===o&&a.push({itemIndex:l,imageIndex:t,fileName:e.fileName,title:s.title,id:s.id})}))}))};async function yt(e,t){const a=[],l=[];ft(e,t,a),ft(t,e,l);let s=[],o=[],n=[];for(const i in a){const e=`${y.value}/${r.value.slotId}/${Ct(J.value)}/${a[i].id}_${a[i].title}`,t=`${y.value}/${r.value.slotId}/${Ct(J.value)}/${l[i].id}_${l[i].title}`;s.push(e),o.push(t),n.push(a[i].fileName)}const u={sourceFolders:s,destinationFolders:o,fileNames:n};let c=await Ym(u);c&&(i.value=t),await pt()}const Ct=e=>"bm"===e?"04_BM_Classification":"pb"===e?"01_WBC_Classification":void 0;return(e,a)=>{const u=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bo)((0,s.Lk)("div",jg," Moving image...",512),[[l.aG,b.value]]),(0,s.bF)(Vv,{onRefreshClass:xe,isNext:ie.value,onIsNextFalse:pe},null,8,["isNext"]),(0,s.Lk)("div",Yg,[(0,s.Lk)("div",qg,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,(0,n.v_)("bm"===J.value?(0,o.R1)(I)(r.value?.testType):(0,o.R1)(g)(r.value?.testType)),1),(0,s.Lk)("li",null,(0,n.v_)(r.value?.barcodeNo),1),(0,s.Lk)("li",null,(0,n.v_)(r.value?.patientId||"patientId No Data"),1),(0,s.Lk)("li",null,(0,n.v_)(r.value?.cbcPatientNo),1),(0,s.Lk)("li",null,(0,n.v_)(r.value?.patientName),1),(0,s.Lk)("li",null,(0,n.v_)(r.value?.cbcPatientNm)+" "+(0,n.v_)(r.value?.cbcSex)+" "+(0,n.v_)(r.value?.cbcAge),1),(0,s.Lk)("li",null,(0,n.v_)(r.value?.analyzedDttm),1)])]),p.value?((0,s.uX)(),(0,s.Wv)(op,{key:0,selectItems:r.value},null,8,["selectItems"])):(0,s.Q3)("",!0),(0,s.Lk)("div",{class:(0,n.C4)("databaseWbcRight"+(p.value?" cbcLayer":""))},[(0,s.bF)(ag,{wbcInfo:i.value,selectItems:r.value,type:"listTable",onNextPage:me,onScrollEvent:Fe,onIsBefore:de},null,8,["wbcInfo","selectItems"])],2),(0,s.Lk)("div",{class:(0,n.C4)("databaseWbcLeft"+(p.value?" cbcLayer":""))},[(0,s.Lk)("div",{class:"imgMenuSetDiv",onMouseleave:Ce},[(0,s.Lk)("button",{type:"button",onClick:a[0]||(a[0]=e=>Be(!1))},[(0,s.bF)(u,{icon:U.value?["fas","toggle-on"]:["fas","toggle-off"]},null,8,["icon"]),(0,s.eW)(" Cell Marking ")]),(0,s.Lk)("button",{onClick:Oe},[(0,s.bF)(u,{icon:["fas","file-csv"]}),(0,s.eW)(" Excel ")]),(0,s.Lk)("button",{onMouseover:ye},[(0,s.bF)(u,{icon:["fas","plus-minus"]}),(0,s.eW)(" Size ")],32),(0,s.bo)((0,s.Lk)("div",Jg,[(0,s.Lk)("div",null,[(0,s.eW)(" Size "+(0,n.v_)(A.value)+" ",1),(0,s.bF)(u,{icon:["fas","undo"],onClick:$e}),(0,s.bo)((0,s.Lk)("input",{type:"range",min:"80",max:"300","onUpdate:modelValue":a[1]||(a[1]=e=>A.value=e),onInput:Ye},null,544),[[l.Jo,A.value]])])],512),[[l.aG,te.value]]),(0,s.Lk)("div",zg,[(0,s.Lk)("button",{onClick:Ae},[(0,s.bF)(u,{icon:["fas","gear"]}),(0,s.eW)(" IMG Setting ")]),(0,s.bo)((0,s.Lk)("div",Qg,[(0,s.Lk)("div",null,[(0,s.bF)(u,{icon:["fas","sun"]}),(0,s.eW)(" Brightness "+(0,n.v_)(D.value)+" ",1),(0,s.bo)((0,s.Lk)("input",{type:"range",min:"50",max:"600","onUpdate:modelValue":a[2]||(a[2]=e=>D.value=e),onInput:je},null,544),[[l.Jo,D.value]]),(0,s.Lk)("button",{class:"resetBtn mb2",onClick:He},"Brightness Reset")]),(0,s.Lk)("div",null,[(0,s.bF)(u,{icon:["fas","palette"]}),(0,s.eW)(" RGB [ "+(0,n.v_)(`${M.value[0]} , ${M.value[1]}, ${M.value[2]}`)+" ] ",1),(0,s.bo)((0,s.Lk)("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":a[3]||(a[3]=e=>M.value[0]=e),onInput:a[4]||(a[4]=e=>Ve(""))},null,544),[[l.Jo,M.value[0]]]),(0,s.bo)((0,s.Lk)("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":a[5]||(a[5]=e=>M.value[1]=e),onInput:a[6]||(a[6]=e=>Ve(""))},null,544),[[l.Jo,M.value[1]]]),(0,s.bo)((0,s.Lk)("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":a[7]||(a[7]=e=>M.value[2]=e),onInput:a[8]||(a[8]=e=>Ve(""))},null,544),[[l.Jo,M.value[2]]]),(0,s.Lk)("button",{class:"resetBtn",onClick:We},"RGB Reset")])],512),[[l.aG,H.value]])],512),(0,s.Q3)("",!0),(0,s.Lk)("button",{onClick:bt,class:"rollbackButton"},[(0,s.bF)(u,{icon:["fas","rotate-left"]}),(0,s.eW)(" Rollback ")])],32),(0,s.Lk)("div",null,[(0,s.Lk)("ul",Zg,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,(e=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("li",{key:e.id,onClick:t=>Fe(e.id)},[(0,s.Lk)("div",{class:"circle",onDragover:a[9]||(a[9]=(0,l.D$)((e=>qe()),["prevent"])),onDrop:t=>ze(e)},[(0,s.Lk)("p",null,(0,n.v_)(e?.title),1),(0,s.Lk)("p",null,(0,n.v_)(e?.count),1)],40,tI)],8,eI)),[[l.aG,"0006"!==C.value&&"SM"!==e?.title]]))),128))]),ue.value?((0,s.uX)(),(0,s.CE)("div",dI,[(0,s.Lk)("div",null,[mI,(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("div",null,[(0,s.Lk)("p",vI,[(0,s.Lk)("input",{type:"checkbox",onInput:a[11]||(a[11]=e=>Ke(e,i.value[0].title)),checked:t.value===i.value[0].title},null,40,pI),(0,s.eW)(" "+(0,n.v_)(i.value[0]?.title)+" ("+(0,n.v_)(i.value[0]?.count)+")",1)])],512),[[l.aG,"0"!==i.value[0]?.count&&0!==i.value[0]?.count]])])]),gI])):((0,s.uX)(),(0,s.CE)("ul",aI,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,((e,o)=>((0,s.uX)(),(0,s.CE)("li",{key:e.id,ref_for:!0,ref:Xe(e.id)},[(0,s.bo)((0,s.Lk)("div",null,[(0,s.Lk)("p",lI,[(0,s.Lk)("input",{type:"checkbox",onInput:t=>Ke(t,e.title),checked:t.value===e.title},null,40,sI),(0,s.eW)(" "+(0,n.v_)(e?.title)+" ("+(0,n.v_)(e?.count)+")",1)])],512),[[l.aG,"0"!==e?.count&&0!==e?.count]]),(0,s.bo)((0,s.Lk)("ul",{class:(0,n.C4)("wbcImgWrap "+e?.title),onDragover:a[10]||(a[10]=(0,l.D$)((e=>st()),["prevent"])),onDrop:e=>ut(o)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.images,((t,a)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("li",{key:t.fileName,class:(0,n.C4)({"border-changed":Re(t),"selected-image":it(t),wbcImgWrapLi:!0}),onClick:t=>nt(o,a,e),onDblclick:a=>we(t,e),onContextmenu:a=>ge(a,t,e)},[(0,s.Lk)("div",iI,[(0,s.bo)((0,s.Lk)("div",uI,[(0,s.Lk)("div",cI,[(0,s.eW)((0,n.v_)(Te(t.fileName))+" ",1),(0,s.bF)(u,{icon:["fas","arrow-right"]}),(0,s.eW)(" "+(0,n.v_)(t.title),1)])],512),[[l.aG,Te(t.fileName)!==e?.title]]),(0,s.bo)((0,s.Lk)("img",{src:It(t.fileName,e.id,e.title,""),width:t.width?t.width:"150px",height:t.height?t.height:"150px",style:(0,n.Tr)({filter:t.filter}),onDragstart:e=>ot(o,a),draggable:"true",class:"cellImg",ref_for:!0,ref_key:"cellRef",ref:K,onError:a=>be(e.id,t.fileName,e.title)},null,44,rI),[[l.aG,!ae.value[`${e.id}-${t.fileName}`]]]),(0,s.Lk)("div",{class:"center-point",style:(0,n.Tr)(t.coordinates)},null,4)])],42,nI)),[[l.aG,!ae.value[`${e.id}-${t.fileName}`]]]))),128))],42,oI),[[l.aG,"0"!==e?.count&&0!==e?.count]])])))),128))]))]),le.value?((0,s.uX)(),(0,s.CE)("div",{key:0,style:(0,n.Tr)({top:oe.value+"px",left:se.value+"px"}),class:"context-menu detail"},[(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t,onClick:a=>Se(e,t)},(0,n.v_)(e.name),9,II)))),128))])],4)):(0,s.Q3)("",!0),(0,s.bo)((0,s.Lk)("div",bI,[(0,s.Lk)("div",fI,[(0,s.Lk)("span",{class:"wbcClose",onClick:Pe},""),(0,s.Lk)("div",yI,[(0,s.Lk)("img",{src:W.value,style:(0,n.Tr)({width:$.value,height:G.value}),class:"modal-image"},null,12,CI)]),(0,s.Lk)("div",{class:"buttons"},[(0,s.Lk)("button",{onClick:De},"+"),(0,s.Lk)("button",{onClick:Me},"-")])])],512),[[l.aG,F.value]])],2)])],64)}}});const hI=kI;var SI=hI;const _I=e=>((0,s.Qi)("data-v-4505cb42"),e=e(),(0,s.jt)(),e),EI=_I((()=>(0,s.Lk)("div",{id:"viewerSmall"},null,-1))),NI={class:"leftImgList"},LI={class:""},RI=_I((()=>(0,s.Lk)("p",null,"Partical Image",-1))),TI=["src","onDblclick"],wI={class:""},PI=_I((()=>(0,s.Lk)("p",null,"Ideal Zone",-1))),AI=["src","onDblclick"],DI={class:""},MI=_I((()=>(0,s.Lk)("p",null,"Ideal stitch",-1))),xI=["src","onDblclick"],OI=_I((()=>(0,s.Lk)("p",null,"Megakaryocyte",-1))),BI=["src","onDblclick"];var KI=(0,s.pM)({__name:"leftImgList",props:["selectItems"],setup(e){const t=e,a=((0,c.Pj)(),window.APP_API_BASE_URL||"http://192.168.0.131:3002"),l=(0,o.KR)([]),n=(0,o.KR)([]),i=(0,o.KR)([]),u=(0,o.KR)([]),r=["02_Particle_Image","03_Cell_Ideal_Image","04_Cell_Ideal_Stitch_Image","05_Mega_Image"],d=(0,o.KR)(!1);let m=null;(0,s.sV)((()=>{g()})),(0,s.wB)((()=>t.selectItems),(async e=>{await(0,s.dY)(),g()}));const v=(e,l)=>{let s;switch(l){case"particle":s="02_Particle_Image";break;case"idealZone":s="03_Cell_Ideal_Image";break;case"idealStitch":s="04_Cell_Ideal_Stitch_Image";break;case"mega":s="05_Mega_Image";break;default:break}const o=t.selectItems?.slotId||"",n=""!==t.selectItems?.img_drive_root_path&&t.selectItems?.img_drive_root_path?t.selectItems?.img_drive_root_path:sessionStorage.getItem("iaRootPath"),i=`${n}/${o}/${s}`;return`${a}/folders?folderPath=${i}/${e}`},p=(e,l)=>{let s;switch(l){case"particle":s="02_Particle_Image";break;case"idealZone":s="03_Cell_Ideal_Image";break;case"idealStitch":s="04_Cell_Ideal_Stitch_Image";break;case"mega":s="05_Mega_Image";break;default:break}const o=t.selectItems?.slotId||"",n=""!==t.selectItems?.rootPath&&t.selectItems?.rootPath?t.selectItems?.rootPath:sessionStorage.getItem("iaRootPath"),i=`${n}/${o}/${s}`;return`${a}/folders/getFilesInFolderWhole?folderPath=${i}/${e}`},g=()=>{const e=t.selectItems?.slotId||"",s=""!==t.selectItems?.rootPath&&t.selectItems?.rootPath?t.selectItems?.rootPath:sessionStorage.getItem("iaRootPath");for(const t of r)Q.A.get(`${a}/folders?folderPath=${s}/${e}/${t}`).then((e=>{switch(t){case"02_Particle_Image":l.value=e.data.filter((e=>"Thumb"!==e)).slice(0,7);break;case"03_Cell_Ideal_Image":n.value=e.data.filter((e=>"Thumb"!==e)).slice(0,14);break;case"04_Cell_Ideal_Stitch_Image":i.value=e.data.filter((e=>"Thumb"!==e));break;case"05_Mega_Image":u.value=e.data.filter((e=>"Thumb"!==e));break}})).catch((e=>{console.error("Error:",e)}))},I=e=>{m&&m.destroy(),m=Gm()({id:"viewerSmall",element:document.getElementById("viewerSmall"),tileSources:{type:"image",url:e},defaultZoomLevel:.2,navigator:!1,showZoomControl:!1,showHomeControl:!1,showFullScreenControl:!1,showRotationControl:!1,showFullPageControl:!1}),d.value=!0,m.addHandler("open",(function(){const e=m.source.dimensions.x,t=m.source.dimensions.y,a=document.getElementById("viewerSmall"),l=a.clientWidth,s=t/e,o=l*s;a.style.position="fixed",a.style.height=`${o}px`,a.style.width="100%",a.style.left="0",a.style.background="#00000061"}))},b=()=>{if(m){m.destroy();const e=document.getElementById("viewerSmall");e&&(e.innerHTML="",e.style.background="none",e.style.height="0",e.style.width="0",e.removeEventListener("click",b)),m=null,d.value=!1}};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[d.value?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"closeViewer",onClick:b},"x")):(0,s.Q3)("",!0),EI,(0,s.Lk)("div",NI,[(0,s.Lk)("ul",LI,[RI,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},[(0,s.Lk)("img",{src:p(e,"particle"),alt:"Partical Image",onDblclick:t=>I(v(e,"particle"))},null,40,TI)])))),128))]),(0,s.Lk)("ul",wI,[PI,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t,style:{width:"100px"}},[(0,s.Lk)("img",{src:p(e,"idealZone"),onDblclick:t=>I(v(e,"idealZone"))},null,40,AI)])))),128))]),(0,s.Lk)("ul",DI,[(0,s.Lk)("div",null,[MI,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},[(0,s.Lk)("img",{src:p(e,"idealStitch"),onDblclick:t=>I(v(e,"idealStitch"))},null,40,xI)])))),128))]),(0,s.Lk)("div",null,[OI,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},[(0,s.Lk)("img",{src:p(e,"mega"),onDblclick:t=>I(v(e,"mega"))},null,40,BI)])))),128))])])])],64))}});const UI=(0,Dl.A)(KI,[["__scopeId","data-v-4505cb42"]]);var XI=UI;const FI=["src"],WI={class:"tilingViewerContainer",style:{height:"100%"},id:"tiling-container"};var $I=(0,s.pM)({__name:"tilingViewer",props:["selectItems"],setup(e){const t=e,a=((0,s.EW)((()=>l.state.commonModule.iaRootPath)),window.APP_API_BASE_URL||"http://192.168.0.115:3002"),l=(0,c.Pj)(),n=(0,o.KR)(null),i=(0,o.KR)(null),u=(0,o.KR)(""),r=(0,o.KR)(""),d=(0,o.KR)("");let m=null;(0,s.sV)((async()=>{await v(!0)})),(0,s.wB)((()=>t.selectItems),(async e=>{await(0,s.dY)(),await v(!1)}));const v=async e=>{const l=i.value,s=t.selectItems?.slotId||"",o=""!==t.selectItems?.img_drive_root_path&&t.selectItems?.img_drive_root_path?t.selectItems?.img_drive_root_path:sessionStorage.getItem("iaRootPath"),n=`${o}/${s}/01_Stitching_Image`,c=`${a}/folders?folderPath=${n}/PMC_Result.jpg`;if(d.value=c,l&&l.complete){const t=l.naturalHeight,a=l.naturalWidth;0!==t&&(u.value=t,r.value=a,await p(t,e))}},p=async(e,l)=>{m&&m.destroy();const s=t.selectItems?.slotId||"",o=""!==t.selectItems?.img_drive_root_path&&t.selectItems?.img_drive_root_path?t.selectItems?.img_drive_root_path:sessionStorage.getItem("iaRootPath"),n=`${o}/${s}/01_Stitching_Image`,i=`${a}/folders?folderPath=${n}/PMC_Result.jpg`;d.value=i;try{const e=await g(n);m=Gm()({id:"tiling-viewer",animationTime:.4,navigatorSizeRatio:.25,showNavigator:!0,sequenceMode:!0,defaultZoomLevel:1,prefixUrl:`${a}/folders?folderPath=D:/UIMD_Data/Res/uimdFe/images/`,tileSources:e,gestureSettingsMouse:{clickToZoom:!1}}),m.addHandler("open",(function(){m.source.dimensions.x,m.source.dimensions.y;const e=document.getElementById("tiling-viewer"),t=e.clientWidth;e.style.width=`${t}px`,e.style.position="absolute",e.style.left="50%",e.style.top="50%",e.style.transform="translate(-50%, -50%)"})),m.addHandler("zoom",(function(){const e=document.getElementById("tiling-viewer");l&&e&&(e.style.height="80vh")}))}catch(u){console.error("Error:",u)}},g=async e=>{const t=`${a}/folders?folderPath=${e}`,l=await fetch(t);if(!l.ok)throw new Error("Network response was not ok");const s=await l.json(),o=[];for(const n of s)n.endsWith("_files")&&o.push({Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2009",Url:`${a}/folders?folderPath=${e}/${n}/`,Format:"jpg",Overlap:"1",TileSize:"1024",Size:{Width:r.value,Height:u.value}}});return o};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("img",{src:d.value,ref_key:"hideImageRef",ref:i,style:{display:"none"},onLoad:t[0]||(t[0]=e=>v(!0))},null,40,FI),(0,s.Lk)("div",WI,[(0,s.Lk)("div",{ref_key:"tilingViewerLayer",ref:n,id:"tiling-viewer"},null,512)])],64))}});const GI=$I;var HI=GI;const VI={class:"imgContent"},jI={class:"wrap-whole"},YI={class:"leftWhole"};var qI=(0,s.pM)({__name:"index",setup(e){const t=sessionStorage.getItem("selectItems"),a=(0,o.KR)(t?JSON.parse(t):null),l=(0,o.KR)(null),n=(0,o.KR)(null);(0,s.sV)((()=>{l.value=document.querySelector(".img")}));const i=async e=>{a.value=e};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(Vv,{onRefreshClass:i}),(0,s.Lk)("div",VI,[(0,s.Lk)("div",jI,[(0,s.Lk)("div",{ref_key:"imageContainer",ref:n,class:"image-container"},[(0,s.bF)(HI,{selectItems:a.value},null,8,["selectItems"])],512),(0,s.Lk)("div",YI,[(0,s.bF)(XI,{selectItems:a.value},null,8,["selectItems"])])])])],64))}});const JI=(0,Dl.A)(qI,[["__scopeId","data-v-71d7a081"]]);var zI=JI;const QI=(0,u.aE)({history:(0,u.LA)(),routes:[{path:"/analysis",name:"AnalysisView",component:ls},{path:"/user/join",name:"join",component:hs},{path:"/user/login",name:"login",component:Vs},{path:"/setting",name:"setting",component:pu},{path:"/database",name:"database",component:$d},{path:"/databaseDetail",name:"databaseDetail",component:SI},{path:"/databaseWhole",name:"databaseWhole",component:zI},{path:"/databaseRbc",name:"databaseRbc",component:rp},{path:"/report",name:"report",component:Vg}]});QI.beforeEach(((e,t,a)=>{const l=sessionStorage.getItem("user"),s=JSON.parse(l||"{}"),o=(0,c.Pj)(),n=o.state.userModule;"login"===e.name||"join"===e.name||s.userId||n.userId?a():a("/user/login")}));var ZI=QI;const eb={class:"header"},tb=(0,s.Lk)("div",{class:"borderLine"},[(0,s.Lk)("img",{src:i,class:"headerLogo"})],-1),ab=(0,s.Lk)("span",{class:"icoText"},"Setting",-1),lb=(0,s.Lk)("span",{class:"icoText"},"Analysis",-1),sb=(0,s.Lk)("span",{class:"icoText"},"Database",-1),ob={class:"small-icon-menu"},nb={class:"lastMenu"},ib={class:"lastLiM"},ub={class:"iconHeaderMenu"},cb={class:"alarm"},rb=["title"],db=["title"],mb=(0,s.Lk)("h2",null,"Immersion Oil",-1),vb={class:"immersionOilContainer"},pb=(0,s.Lk)("h5",{class:"modalTitle"},"Immersion Oil count Reset",-1),gb=(0,s.Lk)("span",{class:"colorGray"},"Reset Immersion Oil count after changing Oil pack",-1),Ib={class:"smallTitle"},bb=(0,s.Lk)("span",null,"Estimated number of slides left",-1),fb={class:"border ml-5",style:{width:"80px"}},yb=(0,s.Lk)("h5",{class:"modalTitle"},"Prime Immersion Oil",-1),Cb=(0,s.Lk)("span",{class:"colorGray"},"Prime oil to remove air from the oil hose",-1),kb=(0,s.Lk)("div",{class:"statusBarWrapper"},null,-1);var hb=(0,s.pM)({__name:"AppHeader",setup(e){const t=(0,u.lq)(),a=(0,o.KR)(!1),l=(0,c.Pj)(),i=sessionStorage.getItem("user"),r=JSON.parse(i||"{}"),d=(0,o.KR)(!1),m=(0,s.EW)((()=>l.state.commonModule.viewerCheck)),v=(0,s.nI)(),p=(0,o.KR)(!1),g=(0,o.KR)(""),I=(0,o.KR)(""),b=(0,s.EW)((()=>l.state.embeddedStatusModule)),f=(0,o.KR)(0),y=(0,o.KR)(""),C=(0,o.KR)(0),k=(0,o.KR)(""),h=(0,s.EW)((()=>l.state.commonModule)),S=(0,s.EW)((()=>l.state.commonModule)),_=(0,o.KR)({icon:["fas","person"],class:""}),E=(0,o.KR)(""),N=(0,o.KR)(""),L=(0,o.KR)(!1),R=(0,o.KR)(!1),T=(0,o.KR)(1e3),w=(0,o.KR)(null),P=(0,o.KR)(null),A=(0,o.KR)(""),D=(0,s.EW)((()=>l.state.userModule)),M=(0,o.KR)(""),x=(0,o.KR)(0),O=(0,o.KR)(!1),B=(0,o.KR)(""),K=(0,o.KR)("");let U=null;const X=(0,o.KR)(!1),F=(0,o.KR)(""),W=(0,o.KR)(""),G=(0,o.KR)(!1),H=(0,s.EW)((()=>B.value)),V=(0,s.EW)((()=>K.value)),j=()=>{const e=new Date;B.value=e.toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"}),K.value=e.toLocaleTimeString("en-US")},Y=()=>{p.value=!1,sessionStorage.clear(),ZI.push("user/login"),document.fullscreenElement&&document.exitFullscreen()},q=()=>{p.value=!1};(0,s.sV)((async()=>{G.value="bm"===window.PROJECT_TYPE,j();const e=setInterval(j,1e3);(0,s.xo)((()=>{clearInterval(e)})),""===A.value&&await l.dispatch("userModule/setUserAction",r)})),(0,s.wB)(D.value,((e,t)=>{me(),A.value=e.id})),(0,s.wB)([b.value],(async e=>{await(0,s.dY)(),f.value=Number(e[0].sysInfo.oilCount),y.value=e[0].sysInfo.isDoorOpen,C.value=Number(e[0].sysInfo.storagePercent),k.value=e[0].sysInfo.eqStatCd,_.value=oe(e[0].sysInfo.eqStatCd),E.value=ae(),N.value=se()})),(0,s.wB)([S.value],(async e=>{const t=JSON.parse(JSON.stringify(e));t[0].isRunningState?O.value=!0:O.value=!1})),(0,s.wB)([h.value],(async e=>{L.value=e[0].isAlarm,e[0].isAlarm&&(U=setTimeout((()=>{l.dispatch("commonModule/setCommonInfo",{isAlarm:!1})}),x.value))}));const J=e=>{X.value=!0,F.value="success",W.value=e},Q=()=>{X.value=!1},Z=e=>t.path===e,ee=()=>{d.value=!d.value},te=()=>{I.value=$.Logout,p.value=!0,localStorage.removeItem("user")},ae=()=>f.value>=0&&f.value<=100?"10%":f.value>100&&f.value<=250?"25%":f.value>250&&f.value<=500?"50%":f.value>500&&f.value<=750?"75%":"100%",se=()=>C.value>=0&&C.value<=30?"30%":C.value>30&&C.value<=60?"60%":C.value>60&&C.value<=90?"90%":"100%",oe=e=>"01"===e?{icon:["fas","person"],class:""}:"02"===e?{icon:["fas","person-walking"],class:""}:"03"===e?{icon:["fas","person-running"],class:"runRed"}:"04"===e||"05"===e?{icon:["fas","person-running"],class:"runBlue"}:{icon:["fas","person"],class:""},ne=()=>{R.value=!0},ie=e=>{R.value=e},ue=()=>{ce();const e=z().embedStatus.settings;e.reqUserId=A,Object.assign(e,{oilCount:f,isOilReset:"Y",userId:"",isNsNbIntegration:M.value}),v?.appContext.config.globalProperties.$socket.emit("message",{type:"SEND_DATA",payload:e}),J($.IDS_MSG_SUCCESS)},ce=()=>{if(!w.value||!P.value)return;const e=Math.round(f.value/T.value*100),t=e/100*w.value.offsetWidth+"px";P.value.style.width=t},re=()=>{z().embedStatus.oilPrime.reqUserId=A,v?.appContext.config.globalProperties.$socket.emit("message",{type:"SEND_DATA",payload:z().embedStatus.oilPrime}),J($.IDS_MSG_SUCCESS)},de=()=>{ce()},me=async()=>{try{const e=await le();if(e&&e?.data){const t=e.data;M.value=t.isNsNbIntegration?"Y":"N",x.value=t?.isAlarm?1e3*Number(t.alarmCount):5e3,await l.dispatch("dataBaseSetDataModule/setDataBaseSetData",{isNsNbIntegration:t?.isNsNbIntegration?"Y":"N"}),sessionStorage.setItem("isNsNbIntegration",M.value),sessionStorage.setItem("wbcPositionMargin",t?.wbcPositionMargin),sessionStorage.setItem("rbcPositionMargin",t?.rbcPositionMargin),sessionStorage.setItem("pltPositionMargin",t?.pltPositionMargin),sessionStorage.setItem("iaRootPath",t?.iaRootPath),await l.dispatch("commonModule/setCommonInfo",{iaRootPath:String(t?.iaRootPath)})}}catch(e){console.log(e)}};return(e,l)=>{const i=(0,s.g2)("font-awesome-icon"),u=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("header",eb,[(0,s.Lk)("nav",null,[a.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,n.C4)(["appHeaderLeft",{bmComponent:G.value}])},[tb,(0,s.bF)(u,{to:O.value?"#":"/setting",class:(0,n.C4)({leftActive:Z("/setting"),disabledLink:O.value})},{default:(0,s.k6)((()=>[(0,s.bF)(i,{icon:["fas","gear"],style:{"font-size":"1rem"}}),ab])),_:1},8,["to","class"]),"main"===m.value?((0,s.uX)(),(0,s.Wv)(u,{key:0,to:"/",class:(0,n.C4)({leftActive:Z("/analysis")||"/"===(0,o.R1)(t).path})},{default:(0,s.k6)((()=>[(0,s.bF)(i,{icon:["fas","chart-pie"],style:{"font-size":"1rem"}}),lb])),_:1},8,["class"])):(0,s.Q3)("",!0),(0,s.bF)(u,{to:"/dataBase",class:(0,n.C4)({leftActive:Z("/dataBase")||Z("/databaseDetail")||Z("/databaseRbc")||Z("/report")})},{default:(0,s.k6)((()=>[(0,s.bF)(i,{icon:["fas","server"],style:{"font-size":"1rem"}}),sb])),_:1},8,["class"]),(0,s.Lk)("div",ob,[(0,s.Lk)("div",nb,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,(0,n.v_)(H.value)+" "+(0,n.v_)(V.value),1),(0,s.Lk)("li",ib,[(0,s.Lk)("div",{class:"userBox",onClick:ee},[(0,s.bF)(i,{icon:["fas","circle-user"]}),(0,s.eW)(" "+(0,n.v_)(D.value.userId),1)]),(0,s.Lk)("div",{class:"logOutBox",onClick:te}," LOG OUT ")])])]),(0,s.Lk)("div",ub,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",cb,[(0,s.bF)(i,{icon:["fas","bell"],class:(0,n.C4)({blinking:L.value})},null,8,["class"])]),(0,s.Lk)("li",null,["Y"!==y.value?((0,s.uX)(),(0,s.Wv)(i,{key:0,icon:["fas","door-closed"]})):((0,s.uX)(),(0,s.Wv)(i,{key:1,icon:["fas","door-open"]}))]),(0,s.Lk)("li",null,[(0,s.bF)(i,{icon:_.value.icon,class:(0,n.C4)(_.value.class)},null,8,["icon","class"])]),(0,s.Lk)("li",{class:"oliCount",onClick:ne,title:"oilCount: "+(E.value||0)},[(0,s.bF)(i,{icon:["fas","droplet"]})],8,rb),(0,s.Lk)("li",{class:"storage",title:"storage: "+(N.value||0)},[(0,s.bF)(i,{icon:["fas","database"]})],8,db)])])])],2))])]),R.value?((0,s.uX)(),(0,s.Wv)(ku,{key:0,"onUpdate:closeLayer":ie,onAfterOpen:de},{header:(0,s.k6)((()=>[mb])),content:(0,s.k6)((()=>[(0,s.Lk)("div",vb,[pb,gb,(0,s.Lk)("div",Ib,[bb,(0,s.Lk)("div",fb,(0,n.v_)(f.value),1)]),(0,s.Lk)("div",null,[(0,s.Lk)("div",{ref_key:"statusBarWrapper",ref:w,class:"statusBarWrapper"},[(0,s.Lk)("div",{ref_key:"statusBar",ref:P,class:"statusBar"},null,512)],512),(0,s.Lk)("div",null,[(0,s.Lk)("button",{onClick:ue,class:"alertButton"},"RESET")])])]),(0,s.Lk)("div",{class:"mt2"},[yb,Cb,(0,s.Lk)("div",null,[kb,(0,s.Lk)("button",{onClick:re,class:"alertButton"},"PRIME")])])])),_:1})):(0,s.Q3)("",!0),X.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:1,"is-visible":X.value,type:F.value,message:W.value,onHide:Q,"onUpdate:hideAlert":Q},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0),p.value?((0,s.uX)(),(0,s.Wv)(jd,{key:2,"is-visible":p.value,type:g.value,message:I.value,onHide:q,onOkConfirm:Y},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const Sb=hb;var _b=Sb;const Eb={namespaced:!0,state:()=>({id:0,userId:"",password:"",name:"",employeeNo:"",userType:"",subscriptionDate:"",latestDate:""}),mutations:{setUserMutation(e,t){Object.assign(e,t)}},actions:{setUserAction({commit:e},t){e("setUserMutation",t)}}},Nb={namespaced:!0,state:()=>({analysisType:"",wbcDiffVal:"100",stitchCount:""}),mutations:{analysisTypeSet(e,t){e.analysisType=t},wbcDiffValSet(e,t){e.analysisType=t},stitchCountSet(e,t){e.analysisType=t}},actions:{setAnalysisType({commit:e},t){e("analysisTypeSet",t)},setWbcDiffValSet({commit:e},t){e("wbcDiffValSet",t)},setStitchCountSet({commit:e},t){e("stitchCountSet",t)}}},Lb={namespaced:!0,state:()=>({equipmentStatusCode:"",wbcCount:"",slideTime:"",time:"",slotInfo:{input:[],output:[]}}),mutations:{setEquipmentStatusCode(e,t){e.equipmentStatusCode=t},setWbcCount(e,t){e.wbcCount=t},setSlideTime(e,t){e.slideTime=t},setTime(e,t){e.time=t},setSlotInfo(e,t){e.slotInfo=t}},actions:{setWorkingViewInfo({commit:e},t){e("setEquipmentStatusCode",t.equipmentStatusCode),e("setWbcCount",t.wbcCount),e("setSlideTime",t.slideTime),e("setTime",t.time),e("setSlotInfo",t.slotInfo)}}},Rb={namespaced:!0,state:()=>({embeddedStatusJobCmd:"",userStop:!1,isRecoveryRun:!1,isPause:!1,sysInfo:{eqStatCd:"",iCasStat:"",oCasStat:"",jobCmd:"",isDoorOpen:"",oilCount:"",storageSize:""},isInit:""}),mutations:{setEmbeddedStatusJobCmd(e,t){e.embeddedStatusJobCmd=t},setUserStop(e,t){e.userStop=t},setIsRecoveryRun(e,t){e.isRecoveryRun=t},setIsPause(e,t){e.isPause=t},setSysInfo(e,t){e.sysInfo=t},setIsInit(e,t){e.isInit=t}},actions:{setEmbeddedStatusInfo({commit:e},t){Object.keys(t).forEach((a=>{"embeddedStatusJobCmd"===a?e("setEmbeddedStatusJobCmd",t[a]):"userStop"===a?e("setUserStop",t[a]):"isRecoveryRun"===a?e("setIsRecoveryRun",t[a]):"isPause"===a?e("setIsPause",t[a]):"sysInfo"===a?e("setSysInfo",t[a]):"isInit"===a&&e("setIsInit",t[a])}))}}},Tb={namespaced:!0,state:()=>({slotInfo:[]}),mutations:{setSlotInfo(e,t){e.slotInfo=t}},actions:{setSlotInfo({commit:e},t){e("setSlotInfo",t)}}},wb={namespaced:!0,state:()=>({runningInfo:null,changeSlideState:null,slideBooleanState:null}),mutations:{setRunningInfo(e,t){t&&(e.runningInfo=t)},setChangeSlide(e,t){e.changeSlideState?e.changeSlideState.changeSlide=t:e.changeSlideState={changeSlide:t}},setSlideBoolean(e,t){e.slideBooleanState?e.slideBooleanState.slideIs=t:e.slideBooleanState={slideIs:t}}},actions:{setRunningInfo({commit:e},t){e("setRunningInfo",t)},updateRunningInfo({commit:e},t){t&&t.key&&void 0!==t.value&&e(`set${t.key.charAt(0).toUpperCase()+t.key.slice(1)}`,t.value)},setChangeSlide({commit:e},t){e("setChangeSlide",t)},setSlideBoolean({commit:e},t){e("setSlideBoolean",t)}}},Pb={namespaced:!0,state:()=>({startEmbedded:!1,eqStatCd:0,isRunningState:!1,totalCount:"",embeddedNumber:"",isAlarm:!1,bfSelectFiles:[],slideProceeding:"",totalSlideTime:"00:00:00",iaRootPath:"",runningSlotId:"",isRequestInProgress:!1,startInfoBoolen:!1,runningInfoBoolen:!1,runningInfoStop:!1,reqArr:[],resFlag:!0,firstLoading:!1,slotIndex:0,viewerCheck:"",runningArr:[],classArr:[{},{},{},{},{},{},{},{},{},{},{},{}],rbcArr:[{},{},{},{},{},{},{},{},{},{},{},{}],processInfo:[{},{},{},{},{},{},{},{},{},{},{},{}],orderList:[{},{},{},{},{},{},{},{},{},{},{},{}],loginSetData:"",siteCd:"",deviceSerialNm:"",clonedWbcInfo:[],clonedRbcInfo:[],moveImgIsBool:!1,classInfoSort:[],chatRunningData:[],cbcLayer:!1,inhaTestCode:"",rbcReData:!1}),mutations:{setStartEmbedded(e,t){e.startEmbedded=t},setEqStatCd(e,t){e.eqStatCd=t},setIsRunningState(e,t){e.isRunningState=t},setTotalCount(e,t){e.totalCount=t},setEmbeddedNumber(e,t){e.embeddedNumber=t},setIsAlarm(e,t){e.isAlarm=t},setBfSelectFiles(e,t){e.bfSelectFiles=t},setSlideProceeding(e,t){e.slideProceeding=t},setTotalSlideTime(e,t){e.totalSlideTime=t},setIaRootPath(e,t){e.iaRootPath=t},setRunningSlotId(e,t){e.runningSlotId=t},setIsRequestInProgress(e,t){e.isRequestInProgress=t},setStartInfoBoolen(e,t){e.startInfoBoolen=t},setRunningInfoBoolen(e,t){e.runningInfoBoolen=t},setRunningInfoStop(e,t){e.runningInfoStop=t},setReqArr(e,t){e.reqArr||(e.reqArr=[]),e.reqArr.push(t)},shiftReqArr(e){e.reqArr.shift()},setReqArrPaste(e,t){e.reqArr=t},setResFlag(e,t){e.resFlag=t},setFirstLoading(e,t){e.firstLoading=t},setSlotIndex(e,t){e.slotIndex=t},setViewerCheck(e,t){e.viewerCheck=t},setRunningArr(e,t){e.runningArr=t},setClassArr(e,t){e.classArr=t},setRbcArr(e,t){e.rbcArr=t},setProcessInfo(e,t){e.processInfo=t},setOrderList(e,t){e.orderList=t},setLoginSetData(e,t){e.loginSetData=t},setDeviceSerialNm(e,t){e.deviceSerialNm=t},setSiteCd(e,t){e.siteCd=t},setClonedWbcInfo(e,t){e.clonedWbcInfo=t},setClonedRbcInfo(e,t){e.clonedRbcInfo=t},setMoveImgIsBool(e,t){e.moveImgIsBool=t},setClassInfoSort(e,t){e.classInfoSort=t},setChatRunningData(e,t){e.chatRunningData=t},setCbcLayer(e,t){e.cbcLayer=t},setInhaTestCode(e,t){e.inhaTestCode=t},setRbcReData(e,t){e.rbcReData=t}},actions:{setCommonInfo({commit:e},t){t.hasOwnProperty("startEmbedded")&&e("setStartEmbedded",t.startEmbedded),t.hasOwnProperty("eqStatCd")&&e("setEqStatCd",t.eqStatCd),t.hasOwnProperty("isRunningState")&&e("setIsRunningState",t.isRunningState),t.hasOwnProperty("totalCount")&&e("setTotalCount",t.totalCount),t.hasOwnProperty("embeddedNumber")&&e("setEmbeddedNumber",t.embeddedNumber),t.hasOwnProperty("isAlarm")&&e("setIsAlarm",t.isAlarm),t.hasOwnProperty("bfSelectFiles")&&e("setBfSelectFiles",t.bfSelectFiles),t.hasOwnProperty("slideProceeding")&&e("setSlideProceeding",t.slideProceeding),t.hasOwnProperty("totalSlideTime")&&e("setTotalSlideTime",t.totalSlideTime),t.hasOwnProperty("iaRootPath")&&e("setIaRootPath",t.iaRootPath),t.hasOwnProperty("runningSlotId")&&e("setRunningSlotId",t.runningSlotId),t.hasOwnProperty("isRequestInProgress")&&e("setIsRequestInProgress",t.isRequestInProgress),t.hasOwnProperty("startInfoBoolen")&&e("setStartInfoBoolen",t.startInfoBoolen),t.hasOwnProperty("runningInfoBoolen")&&e("setRunningInfoBoolen",t.runningInfoBoolen),t.hasOwnProperty("runningInfoStop")&&e("setRunningInfoStop",t.runningInfoStop),t.hasOwnProperty("reqArr")&&e("setReqArr",t.reqArr),t.hasOwnProperty("shiftReqArr")&&e("shiftReqArr"),t.hasOwnProperty("reqArrPaste")&&e("setReqArrPaste",t.reqArr),t.hasOwnProperty("resFlag")&&e("setResFlag",t.resFlag),t.hasOwnProperty("firstLoading")&&e("setFirstLoading",t.firstLoading),t.hasOwnProperty("slotIndex")&&e("setSlotIndex",t.slotIndex),t.hasOwnProperty("viewerCheck")&&e("setViewerCheck",t.viewerCheck),t.hasOwnProperty("runningArr")&&e("setRunningArr",t.runningArr),t.hasOwnProperty("classArr")&&e("setClassArr",t.classArr),t.hasOwnProperty("rbcArr")&&e("setRbcArr",t.rbcArr),t.hasOwnProperty("processInfo")&&e("setProcessInfo",t.processInfo),t.hasOwnProperty("orderList")&&e("setOrderList",t.orderList),t.hasOwnProperty("loginSetData")&&e("setLoginSetData",t.loginSetData),t.hasOwnProperty("siteCd")&&e("setSiteCd",t.siteCd),t.hasOwnProperty("deviceSerialNm")&&e("setDeviceSerialNm",t.deviceSerialNm),t.hasOwnProperty("clonedWbcInfo")&&e("setClonedWbcInfo",t.clonedWbcInfo),t.hasOwnProperty("clonedRbcInfo")&&e("setClonedRbcInfo",t.clonedRbcInfo),t.hasOwnProperty("moveImgIsBool")&&e("setMoveImgIsBool",t.moveImgIsBool),t.hasOwnProperty("classInfoSort")&&e("setClassInfoSort",t.classInfoSort),t.hasOwnProperty("chatRunningData")&&e("setChatRunningData",t.chatRunningData),t.hasOwnProperty("cbcLayer")&&e("setCbcLayer",t.cbcLayer),t.hasOwnProperty("inhaTestCode")&&e("setInhaTestCode",t.inhaTestCode),t.hasOwnProperty("rbcReData")&&e("setRbcReData",t.rbcReData)}}},Ab={namespaced:!0,state:()=>({dataBaseSetData:null}),mutations:{setDataBaseSetData(e,t){t&&(e.dataBaseSetData={...e.dataBaseSetData,changeSlide:t.changeSlide??e.dataBaseSetData?.changeSlide,resultCode:t.resultCode??e.dataBaseSetData?.resultCode,resultMsg:t.resultMsg??e.dataBaseSetData?.resultMsg,errorLevel:t.errorLevel??e.dataBaseSetData?.errorLevel,jobCmd:t.jobCmd??e.dataBaseSetData?.jobCmd,processingCode:t.processingCode??e.dataBaseSetData?.processingCode,iCasStat:t.iCasStat??e.dataBaseSetData?.iCasStat,oCasStat:t.oCasStat??e.dataBaseSetData?.oCasStat,cassetId:t.cassetId??e.dataBaseSetData?.cassetId,isRunningState:t.isRunningState??e.dataBaseSetData?.isRunningState,slotInfo:t.slotInfo?t.slotInfo.map((t=>{const a=e.dataBaseSetData?.slotInfo?.find((e=>e?.slotId===t?.slotId));return a?{...a,...t}:t})):e.dataBaseSetData?.slotInfo??[]})}},actions:{setDataBaseSetData({commit:e},t){e("setDataBaseSetData",t)}}},Db={namespaced:!0,state:()=>({totalSlideTime:"00:00:00",slideTime:"00:00:00"}),mutations:{setTotalSlideTime(e,t){e.totalSlideTime=t},setSlideTime(e,t){e.slideTime=t}},actions:{setTimeInfo({commit:e},t){t.hasOwnProperty("totalSlideTime")&&e("setTotalSlideTime",t.totalSlideTime),t.hasOwnProperty("slideTime")&&e("setSlideTime",t.slideTime)}}},Mb=(0,c.y$)({modules:{userModule:Eb,executeModule:Nb,workingViewModule:Lb,embeddedStatusModule:Rb,orderListModule:Tb,runningInfoModule:wb,commonModule:Pb,dataBaseSetDataModule:Ab,timeModule:Db}});var xb=Mb;const Ob=async e=>{if("00000"===e?.resultCd){const t={embeddedStatusJobCmd:"",userStop:"Y"===e.isRecovery,isRecoveryRun:"N"===e.isRecovery&&!1,isPause:"PAUSE"===e.jobCmd,sysInfo:e,isInit:e?e.isInit:void 0},a={siteCd:e.siteCd,deviceSerialNm:e.deviceSerialNm};await xb.dispatch("commonModule/setCommonInfo",a),await xb.dispatch("embeddedStatusModule/setEmbeddedStatusInfo",t)}else alert(e?.resultMsg)},Bb=async e=>{await xb.dispatch("runningInfoModule/setRunningInfo",e)},Kb=(e,t)=>{let a=0,l=0;const s={isNormal:"Y",class:[]};return e&&(e.forEach((e=>{-1===["NR","AR","GP","PA","MC","MA"].indexOf(e.title)&&(a+=Number(e.count)),["NE","NS","NB"].includes(e.title)&&(l+=Number(e.count))})),e.forEach((e=>{t.forEach((t=>{if("01"===t.classId){let o=0;["01","71"].includes(e.id)&&(o=l/a*100,o<t.min||o>t.max?(console.log(`SET [NE] Abnormal : ${e.title}`),s.isNormal="N",s.class.push(`[NE] : [${o.toFixed(2)}]%`)):console.log(`SET [NE] NORMAL : ${e.title}`))}else if(e.id===t.classId)if("Count"===t.unit)(Number(e.count)<t.min||Number(e.count)>t.max)&&(s.isNormal="N",s.class.push(`${e.title} : [${e.count}]Count`));else{let l=0;l=Number(e.count)/a*100,l<t.min||l>t.max?(console.log(`SET Abnormal : ${e.title}`),s.isNormal="N",s.class.push(`${e.title} : [${l.toFixed(2)}]%`)):console.log(`SET NORMAL : ${e.title}`)}}))}))),s};var Ub=(0,s.pM)({__name:"App",setup(e){const t=(0,u.rd)(),a=(0,o.KR)(!1),l=(0,o.KR)(""),i=(0,o.KR)(""),r=(0,c.Pj)(),d=(0,s.EW)((()=>r.state.commonModule)),m=(0,s.nI)(),v=(0,o.KR)(""),p=sessionStorage.getItem("user"),g=JSON.parse(p||"{}"),I=(0,o.KR)([]),b=(0,s.EW)((()=>r.state.userModule)),f=(0,s.EW)((()=>r.state.commonModule)),y=(0,o.KR)(!1);let C=null,k=null;const h=(0,o.KR)(""),S=(0,s.EW)((()=>r.state.commonModule.iaRootPath)),_=(0,s.EW)((()=>r.state.commonModule.slotIndex)),E=(0,o.KR)([]),N=(0,o.KR)([]),L=(0,o.KR)([]),R=(0,o.KR)(""),T=(0,o.KR)(!1),w=(0,o.KR)({}),P=(0,o.KR)(!1),A=(0,o.KR)(""),D=(0,o.KR)(""),M=(0,o.KR)(!1);m?.appContext.config.globalProperties.$socket.on("viewerCheck",(async e=>{await O(e)}));const x=(0,o.KR)(!1),O=async e=>{try{const e=await Ns();e.data,R.value=e.data}catch(t){console.log(t)}};(0,s.wB)(f.value,(async(e,t)=>{if(!e.reqArr)return;if(M.value)return M.value=!1,void await r.dispatch("commonModule/setCommonInfo",{reqArrPaste:[]});const a=X(e.reqArr);if(0===a.length)return;const l=a.filter((e=>!["SYSINFO","RUNNING_INFO"].includes(e.jobCmd)));l.length>0?await j(l[0]):await j(a[0]),await r.dispatch("commonModule/setCommonInfo",{reqArrPaste:[]})})),(0,s.wB)(b.value,((e,t)=>{""!==e.id&&(Y(e.id),v.value=e.id)})),(0,s.KC)((()=>{m?.appContext.config.globalProperties.$socket.emit("viewerCheck",{type:"SEND_DATA",payload:window.APP_API_BASE_URL})})),window.addEventListener("beforeunload",(function(e){r.dispatch("commonModule/setCommonInfo",{firstLoading:!1})}));const B=e=>{e.preventDefault()};(0,s.sV)((async()=>{await(0,s.dY)(),await Y(),x.value=!1,window.addEventListener("beforeunload",B),T.value="bm"===window.PROJECT_TYPE,T.value||(A.value=window.PB_VERSION),""===v.value&&(await r.dispatch("userModule/setUserAction",g),v.value=b.value.id),d.value.isRunningState||(v.value&&""!==v.value&&await V(),d.value.firstLoading||(C=setInterval((async()=>{await F()}),400),k=setInterval((async()=>{d.value.runningInfoStop||await W()}),500),await r.dispatch("commonModule/setCommonInfo",{firstLoading:!0})),h.value=sessionStorage.getItem("isNsNbIntegration")||""),console.log(window.APP_API_BASE_URL),Ye.subscribe("executeAction",G)})),(0,s.xo)((()=>{window.removeEventListener("beforeunload",B),k&&(clearInterval(k),k=null),C&&(clearInterval(k),k=null)})),m?.appContext.config.globalProperties.$socket.on("chat",(async e=>{if("main"===d.value.viewerCheck){M.value=!1;try{if("string"===typeof e)return m?.appContext.config.globalProperties.$socket.emit("message",{type:"SEND_DATA",payload:{jobCmd:"clientExit",reqUserId:"",reqDttm:""}}),void await q($.TCP_DiSCONNECTED);J();const a=new TextDecoder("utf-8"),l=a.decode(e),s=JSON.parse(l),o=s;switch(o.jobCmd){case"RBC_RE_CLASSIFICATION":await r.dispatch("commonModule/setCommonInfo",{rbcReData:!0});break;case"SYSINFO":await Ob(o);const f={siteCd:o.siteCd,deviceSerialNm:o.deviceSerialNm};x.value||await p(f);break;case"INIT":H();break;case"START":await i();break;case"RUNNING_INFO":w.value=o,y.value=!0,await Bb(o),await u(o);break;case"STOP":console.log("stop!=--------------------------"),await r.dispatch("commonModule/setCommonInfo",{isRunningState:!1}),await r.dispatch("timeModule/setTimeInfo",{totalSlideTime:"00:00:00"}),await r.dispatch("timeModule/setTimeInfo",{slideTime:"00:00:00"}),await r.dispatch("commonModule/setCommonInfo",{runningSlotId:""}),await r.dispatch("commonModule/setCommonInfo",{slotIndex:0}),await r.dispatch("commonModule/setCommonInfo",{runningArr:[]}),await r.dispatch("runningInfoModule/setSlideBoolean",{key:"slideBoolean",value:!1}),P.value=!1,y.value=!1;break;case"RUNNING_COMP":await n();break;case"PAUSE":await r.dispatch("embeddedStatusModule/setEmbeddedStatusInfo",{isPause:!0}),await r.dispatch("commonModule/setCommonInfo",{runningSlotId:""}),await r.dispatch("commonModule/setCommonInfo",{slotIndex:0}),await r.dispatch("commonModule/setCommonInfo",{runningArr:[]}),await r.dispatch("runningInfoModule/setSlideBoolean",{key:"slideBoolean",value:!1}),P.value=!1,y.value=!1;break;case"RESTART":await Bb(o),await u(o),await r.dispatch("embeddedStatusModule/setEmbeddedStatusInfo",{isPause:!1}),await r.dispatch("timeModule/setTimeInfo",{totalSlideTime:"00:00:00"}),await r.dispatch("timeModule/setTimeInfo",{slideTime:"00:00:00"}),y.value=!0,P.value=!0,await r.dispatch("commonModule/setCommonInfo",{runningSlotId:""}),await r.dispatch("commonModule/setCommonInfo",{slotIndex:0}),await r.dispatch("commonModule/setCommonInfo",{runningArr:[]}),N.value=[],L.value=[];break;case"RECOVERY":await r.dispatch("embeddedStatusModule/setEmbeddedStatusInfo",{userStop:!1}),await r.dispatch("commonModule/setCommonInfo",{runningSlotId:""}),await r.dispatch("commonModule/setCommonInfo",{slotIndex:0}),await r.dispatch("commonModule/setCommonInfo",{runningArr:[]});break;case"ERROR_CLEAR":console.log("err"),await q($.IDS_MSG_FAILED);break}async function n(){await r.dispatch("commonModule/setCommonInfo",{runningInfoStop:!0}),await r.dispatch("commonModule/setCommonInfo",{embeddedNumber:String(e?.iCasStat)}),await r.dispatch("commonModule/setCommonInfo",{startEmbedded:!1}),await r.dispatch("commonModule/setCommonInfo",{isRunningState:!1}),await r.dispatch("commonModule/setCommonInfo",{isAlarm:!0}),await r.dispatch("commonModule/setCommonInfo",{runningSlotId:""}),await r.dispatch("commonModule/setCommonInfo",{slotIndex:0}),await r.dispatch("commonModule/setCommonInfo",{runningArr:[]}),await r.dispatch("runningInfoModule/setChangeSlide",{key:"changeSlide",value:"stop"}),await r.dispatch("runningInfoModule/setSlideBoolean",{key:"slideBoolean",value:!1}),y.value=!1,P.value=!1}async function i(){await r.dispatch("commonModule/setCommonInfo",{isRunningState:!0}),await r.dispatch("runningInfoModule/setChangeSlide",{key:"changeSlide",value:"start"}),await r.dispatch("commonModule/setCommonInfo",{startEmbedded:"start"}),await r.dispatch("timeModule/setTimeInfo",{totalSlideTime:"00:00:00"}),await r.dispatch("timeModule/setTimeInfo",{slideTime:"00:00:00"}),await r.dispatch("commonModule/setCommonInfo",{runningInfoStop:!1}),await r.dispatch("commonModule/setCommonInfo",{slotIndex:0}),await r.dispatch("commonModule/setCommonInfo",{runningSlotId:""}),await r.dispatch("commonModule/setCommonInfo",{runningArr:[]}),P.value=!0,N.value=[],L.value=[],y.value=!0}async function u(e){const t=/[1,2,9]/g;if("999999999999"!==String(e?.iCasStat)){const a=String(e?.iCasStat),l=e?.slotInfo,s=e?.iCasStat,o=[...s],n=-1===o.lastIndexOf("3")?0:o.lastIndexOf("3")+1;if(0===o.lastIndexOf("2")&&await r.dispatch("runningInfoModule/setSlideBoolean",{key:"slideBoolean",value:!0}),-1!==e?.iCasStat.indexOf("2")&&await r.dispatch("commonModule/setCommonInfo",{slideProceeding:e?.iCasStat.indexOf("2")}),"100a"===A.value&&(D.value="1"===e?.iCasChange?"reset":""),a.search(t)<0||"111111111111"===e?.oCasStat&&!d.value.runningInfoStop)return z().embedStatus.runIngComp.reqUserId=b.value.userId,("100a"!==A.value||"Y"===e?.workingDone)&&(await r.dispatch("commonModule/setCommonInfo",{reqArr:z().embedStatus.runIngComp}),await r.dispatch("commonModule/setCommonInfo",{runningInfoStop:!0})),void await c(e,e?.slotInfo?.slotNo);await r.dispatch("runningInfoModule/setChangeSlide",{key:"changeSlide",value:"start"}),"Y"===l?.isLowPowerScan&&"03"===l?.testType?(z().embedStatus.pause.reqUserId=v.value,await r.dispatch("commonModule/setCommonInfo",{reqArr:z().embedStatus.pause}),z().embedStatus.pause.reqUserId=v.value,await r.dispatch("commonModule/setCommonInfo",{isRunningState:!1})):n!==_.value&&(console.log("save"),await r.dispatch("runningInfoModule/setChangeSlide",{key:"changeSlide",value:"afterChange"}),await r.dispatch("runningInfoModule/setSlideBoolean",{key:"slideBoolean",value:!0}),await c(E.value,E.value?.slotInfo?.slotNo),await r.dispatch("commonModule/setCommonInfo",{runningSlotId:l?.slotId}),await r.dispatch("commonModule/setCommonInfo",{slotIndex:n})),-1!==o.lastIndexOf("2")&&(E.value=e)}}async function c(e,t,a,l){const s=e.slotInfo;if(s){s.userId=v.value,s.cassetId=e.cassetId,s.isNormal="Y","01"===s.analysisType&&(s.isNormal=Kb(s.wbcInfo,I.value).isNormal);const o=sessionStorage.getItem("isNsNbIntegration"),n=N.value.filter((e=>e?.slotId===s.slotId)),i=L.value.filter((e=>e?.slotId===s.slotId)),u=n[0],c={wbcInfo:u?.wbcInfo,nonRbcClassList:u?.nonRbcClassList,totalCount:u?.totalCount,maxWbcCount:u?.maxWbcCount},r={slotNo:s.slotNo,lock_status:!1,traySlot:"1-"+t,barcodeNo:s.barcodeNo,patientId:s.patientId,patientNm:s.patientNm,gender:s.gender,birthDay:s.birthDay,wbcCount:s.wbcCount,slotId:s.slotId,orderDttm:s.orderDttm,testType:s.testType,analyzedDttm:z().embedStatus.settings.reqDttm,tactTime:s.tactTime,maxWbcCount:s.maxWbcCount,bf_lowPowerPath:s.bf_lowPowerPath,wbcInfo:0===Object.keys(c).length?T.value?{wbcInfo:[zc]}:{wbcInfo:[Jc]}:c,wbcInfoAfter:0===Object.keys(c).length?T.value?[zc]:[Jc]:c?.wbcInfo[0],rbcInfo:T.value?[]:{pltCount:s.pltCount,malariaCount:s.malariaCount,maxRbcCount:s.maxRbcCount,rbcClass:i[0].rbcInfo},rbcInfoAfter:T.value?[]:i[0].rbcInfo,bminfo:s.bminfo,cassetId:s.cassetId,isNormal:s.isNormal,submitState:"",submitOfDate:"",submitUserId:"",isNsNbIntegration:o,wbcMemo:"",rbcMemo:""};await g(r,a,l)}}async function p(e){try{const t=await Es();0!==t.data.length&&t.data||await _s({deviceItem:e}),x.value=!0}catch(t){console.error("Error handling device information",t),x.value=!0}}async function g(e,t,a){try{let a;a=await Su({userId:Number(v.value),runingInfoDtoItems:e}),a&&(t&&console.log("save successful"),m?.appContext.config.globalProperties.$socket.emit("state",{type:"SEND_DATA",payload:"refreshDb"}))}catch(l){console.error(l)}}}catch(t){console.error(t)}}}));const K=e=>{L.value[e.iCasStatArr]=e.rbc},U=e=>{N.value[e.iCasStatArr]=e.classInfo},X=e=>{const t=new Set,a=[];return e.forEach((e=>{t.has(e.jobCmd)||(t.add(e.jobCmd),a.push(e))})),a},F=async()=>{z().embedStatus.sysInfo.reqUserId=v.value;const e=z().embedStatus.sysInfo;await r.dispatch("commonModule/setCommonInfo",{reqArr:e})},W=async()=>{if(!y.value)return;z().embedStatus.runningInfo.reqUserId=v.value;const e=z().embedStatus.runningInfo;await r.dispatch("commonModule/setCommonInfo",{reqArr:e})},G=async e=>{await r.dispatch("commonModule/setCommonInfo",{reqArr:e})},H=()=>{const e=sessionStorage.getItem("isNsNbIntegration"),t={jobCmd:"SETTINGS",reqUserId:"",reqDttm:z().embedStatus.settings.reqDttm,pbiaRootDir:S.value||"",oilCount:"1000",isOilReset:"N",deviceType:"01",isNsNbIntegration:e||"N"};r.dispatch("commonModule/setCommonInfo",{reqArr:t})},V=async()=>{try{const e=await ye();if(e&&e?.data){const t=e.data;I.value=t}}catch(e){console.log(e)}},j=async e=>{const t=async()=>{m?.appContext.config.globalProperties.$socket.emit("message",{type:"SEND_DATA",payload:e})};await t(),M.value=!0},Y=async e=>{try{const e=await le();if(e&&e?.data){const t=e.data;sessionStorage.setItem("iaRootPath",t?.iaRootPath),await r.dispatch("commonModule/setCommonInfo",{iaRootPath:String(t?.iaRootPath)}),await r.dispatch("dataBaseSetDataModule/setDataBaseSetData",{isNsNbIntegration:t?.isNsNbIntegration?"Y":"N"}),sessionStorage.setItem("isNsNbIntegration",h.value),sessionStorage.setItem("wbcPositionMargin",t?.wbcPositionMargin),sessionStorage.setItem("rbcPositionMargin",t?.rbcPositionMargin),sessionStorage.setItem("pltPositionMargin",t?.pltPositionMargin),sessionStorage.setItem("keepPage",String(t?.keepPage))}}catch(t){console.log(t)}},q=async e=>{a.value=!0,l.value="success",i.value=e},J=()=>{a.value=!1};return(e,u)=>{const c=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",null,["/user/login"!==(0,o.R1)(t).currentRoute.value.path&&"/user/join"!==(0,o.R1)(t).currentRoute.value.path?((0,s.uX)(),(0,s.Wv)(_b,{key:0})):(0,s.Q3)("",!0),(0,s.Lk)("main",{class:(0,n.C4)(["content",{bmComponent:T.value}])},[(0,s.bF)(c),(0,s.bF)(es,{onClassAppUpdateLast:U,onRbcAppUpdate:K,parsedData:w.value,isClass:"/"===(0,o.R1)(t).currentRoute.value.path,startStatus:P.value,pb100aCassette:D.value},null,8,["parsedData","isClass","startStatus","pb100aCassette"])],2),a.value?((0,s.uX)(),(0,s.Wv)(Qe,{key:1,"is-visible":a.value,type:l.value,message:i.value,onHide:J,"onUpdate:hideAlert":J},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)])}}});const Xb=Ub;var Fb=Xb,Wb=a(7107),$b=a(6188),Gb=a(1273),Hb=a(327);const Vb=window.APP_API_BASE_URL||"http://192.168.0.131:3002",jb={install:e=>{const t=(0,Hb.io)(`${Vb}`,{transports:["websocket"],withCredentials:!0});e.config.globalProperties.$socket=t}};var Yb=jb;const qb={prefix:"fac",iconName:"half-circle-up",icon:[512,512,[],"e002","M256 0c141.385 0 256 114.615 256 256H0C0 114.615 114.615 0 256 0z"]},Jb={prefix:"fac",iconName:"half-circle-down",icon:[512,512,[],"e003","M256 512c-141.385 0-256-114.615-256-256h512c0 141.385-114.615 256-256 256z"]};Wb.Yv.add($b.X7I),Wb.Yv.add($b.GEE),Wb.Yv.add(qb),Wb.Yv.add(Jb);const zb=(0,l.Ef)(Fb);zb.use(ZI),zb.use(xb),zb.use(Yb),zb.component("font-awesome-icon",Gb.gc),zb.mount("#app")}},t={};function a(l){var s=t[l];if(void 0!==s)return s.exports;var o=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){var e=[];a.O=function(t,l,s,o){if(!l){var n=1/0;for(r=0;r<e.length;r++){l=e[r][0],s=e[r][1],o=e[r][2];for(var i=!0,u=0;u<l.length;u++)(!1&o||n>=o)&&Object.keys(a.O).every((function(e){return a.O[e](l[u])}))?l.splice(u--,1):(i=!1,o<n&&(n=o));if(i){e.splice(r--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var r=e.length;r>0&&e[r-1][2]>o;r--)e[r]=e[r-1];e[r]=[l,s,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var s,o,n=l[0],i=l[1],u=l[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(s in i)a.o(i,s)&&(a.m[s]=i[s]);if(u)var r=u(a)}for(t&&t(l);c<n.length;c++)o=n[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(r)},l=self["webpackChunkuimdCell"]=self["webpackChunkuimdCell"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],(function(){return a(6912)}));l=a.O(l)})();
//# sourceMappingURL=app.eeddc0dd.js.map