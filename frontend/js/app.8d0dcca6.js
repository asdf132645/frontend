(function(){var e={5358:function(e,t,a){var l={"./af":5177,"./af.js":5177,"./ar":1509,"./ar-dz":1488,"./ar-dz.js":1488,"./ar-kw":8676,"./ar-kw.js":8676,"./ar-ly":2353,"./ar-ly.js":2353,"./ar-ma":4496,"./ar-ma.js":4496,"./ar-ps":6947,"./ar-ps.js":6947,"./ar-sa":2682,"./ar-sa.js":2682,"./ar-tn":9756,"./ar-tn.js":9756,"./ar.js":1509,"./az":5533,"./az.js":5533,"./be":8959,"./be.js":8959,"./bg":7777,"./bg.js":7777,"./bm":4903,"./bm.js":4903,"./bn":1290,"./bn-bd":7357,"./bn-bd.js":7357,"./bn.js":1290,"./bo":1545,"./bo.js":1545,"./br":1470,"./br.js":1470,"./bs":4429,"./bs.js":4429,"./ca":7306,"./ca.js":7306,"./cs":6464,"./cs.js":6464,"./cv":3635,"./cv.js":3635,"./cy":4226,"./cy.js":4226,"./da":3601,"./da.js":3601,"./de":7853,"./de-at":6111,"./de-at.js":6111,"./de-ch":4697,"./de-ch.js":4697,"./de.js":7853,"./dv":708,"./dv.js":708,"./el":4691,"./el.js":4691,"./en-au":3872,"./en-au.js":3872,"./en-ca":8298,"./en-ca.js":8298,"./en-gb":6195,"./en-gb.js":6195,"./en-ie":6584,"./en-ie.js":6584,"./en-il":5543,"./en-il.js":5543,"./en-in":9033,"./en-in.js":9033,"./en-nz":9402,"./en-nz.js":9402,"./en-sg":3004,"./en-sg.js":3004,"./eo":2934,"./eo.js":2934,"./es":7650,"./es-do":838,"./es-do.js":838,"./es-mx":7730,"./es-mx.js":7730,"./es-us":6575,"./es-us.js":6575,"./es.js":7650,"./et":3035,"./et.js":3035,"./eu":3508,"./eu.js":3508,"./fa":119,"./fa.js":119,"./fi":527,"./fi.js":527,"./fil":5995,"./fil.js":5995,"./fo":2477,"./fo.js":2477,"./fr":5498,"./fr-ca":6435,"./fr-ca.js":6435,"./fr-ch":7892,"./fr-ch.js":7892,"./fr.js":5498,"./fy":7071,"./fy.js":7071,"./ga":1734,"./ga.js":1734,"./gd":217,"./gd.js":217,"./gl":7329,"./gl.js":7329,"./gom-deva":2124,"./gom-deva.js":2124,"./gom-latn":3383,"./gom-latn.js":3383,"./gu":5050,"./gu.js":5050,"./he":1713,"./he.js":1713,"./hi":3861,"./hi.js":3861,"./hr":6308,"./hr.js":6308,"./hu":609,"./hu.js":609,"./hy-am":7160,"./hy-am.js":7160,"./id":4063,"./id.js":4063,"./is":9374,"./is.js":9374,"./it":8383,"./it-ch":1827,"./it-ch.js":1827,"./it.js":8383,"./ja":3827,"./ja.js":3827,"./jv":9722,"./jv.js":9722,"./ka":1794,"./ka.js":1794,"./kk":7088,"./kk.js":7088,"./km":6870,"./km.js":6870,"./kn":4451,"./kn.js":4451,"./ko":3164,"./ko.js":3164,"./ku":8174,"./ku-kmr":6181,"./ku-kmr.js":6181,"./ku.js":8174,"./ky":8474,"./ky.js":8474,"./lb":9680,"./lb.js":9680,"./lo":5867,"./lo.js":5867,"./lt":5766,"./lt.js":5766,"./lv":9532,"./lv.js":9532,"./me":8076,"./me.js":8076,"./mi":1848,"./mi.js":1848,"./mk":306,"./mk.js":306,"./ml":3739,"./ml.js":3739,"./mn":9053,"./mn.js":9053,"./mr":6169,"./mr.js":6169,"./ms":3386,"./ms-my":2297,"./ms-my.js":2297,"./ms.js":3386,"./mt":7075,"./mt.js":7075,"./my":2264,"./my.js":2264,"./nb":2274,"./nb.js":2274,"./ne":8235,"./ne.js":8235,"./nl":2572,"./nl-be":3784,"./nl-be.js":3784,"./nl.js":2572,"./nn":4566,"./nn.js":4566,"./oc-lnc":9330,"./oc-lnc.js":9330,"./pa-in":9849,"./pa-in.js":9849,"./pl":4418,"./pl.js":4418,"./pt":9834,"./pt-br":8303,"./pt-br.js":8303,"./pt.js":9834,"./ro":4457,"./ro.js":4457,"./ru":2271,"./ru.js":2271,"./sd":1221,"./sd.js":1221,"./se":3478,"./se.js":3478,"./si":7538,"./si.js":7538,"./sk":5784,"./sk.js":5784,"./sl":6637,"./sl.js":6637,"./sq":6794,"./sq.js":6794,"./sr":5719,"./sr-cyrl":3322,"./sr-cyrl.js":3322,"./sr.js":5719,"./ss":6e3,"./ss.js":6e3,"./sv":1011,"./sv.js":1011,"./sw":748,"./sw.js":748,"./ta":1025,"./ta.js":1025,"./te":1885,"./te.js":1885,"./tet":8861,"./tet.js":8861,"./tg":6571,"./tg.js":6571,"./th":5802,"./th.js":5802,"./tk":9527,"./tk.js":9527,"./tl-ph":9231,"./tl-ph.js":9231,"./tlh":1052,"./tlh.js":1052,"./tr":5096,"./tr.js":5096,"./tzl":9846,"./tzl.js":9846,"./tzm":1765,"./tzm-latn":7711,"./tzm-latn.js":7711,"./tzm.js":1765,"./ug-cn":8414,"./ug-cn.js":8414,"./uk":6618,"./uk.js":6618,"./ur":158,"./ur.js":158,"./uz":7609,"./uz-latn":2475,"./uz-latn.js":2475,"./uz.js":7609,"./vi":1135,"./vi.js":1135,"./x-pseudo":4051,"./x-pseudo.js":4051,"./yo":2218,"./yo.js":2218,"./zh-cn":2648,"./zh-cn.js":2648,"./zh-hk":1632,"./zh-hk.js":1632,"./zh-mo":1541,"./zh-mo.js":1541,"./zh-tw":304,"./zh-tw.js":304};function s(e){var t=o(e);return a(t)}function o(e){if(!a.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}s.keys=function(){return Object.keys(l)},s.resolve=o,e.exports=s,s.id=5358},8856:function(e,t,a){"use strict";var l=a(3751),s=(a(4114),a(641)),o=a(953),n=a(33),i=a.p+"img/celli.2d8862ab.png",c=a(5220),u=a(6278);const r=[{grpCd:"00",grpNm:"User position",cd:"00",cdNm:"Position"},{grpCd:"00",grpNm:"User position",cd:"01",cdNm:"Executive advisor"},{grpCd:"00",grpNm:"User position",cd:"02",cdNm:"General manager"},{grpCd:"00",grpNm:"User position",cd:"03",cdNm:"Chief"},{grpCd:"00",grpNm:"User position",cd:"04",cdNm:"Assistant manager"},{grpCd:"00",grpNm:"User position",cd:"05",cdNm:"Staff"},{grpCd:"01",grpNm:"User authorization",cd:"01",cdNm:"Normal"},{grpCd:"01",grpNm:"User authorization",cd:"02",cdNm:"Admin"},{grpCd:"01",grpNm:"User authorization",cd:"03",cdNm:"Developer"},{grpCd:"02",grpNm:"Cassete state",cd:"0",cdNm:"Empty"},{grpCd:"02",grpNm:"Cassete state",cd:"1",cdNm:"Ready"},{grpCd:"02",grpNm:"Cassete state",cd:"2",cdNm:"Analyzing"},{grpCd:"02",grpNm:"Cassete state",cd:"3",cdNm:"Complete"},{grpCd:"02",grpNm:"Cassete state",cd:"4",cdNm:"Error"},{grpCd:"02",grpNm:"Cassete state",cd:"9",cdNm:"Scan"},{grpCd:"03",grpNm:"Processing code",cd:"01",cdNm:"Cassette Loaded."},{grpCd:"03",grpNm:"Processing code",cd:"02",cdNm:"PB/BM Sequence Start."},{grpCd:"03",grpNm:"Processing code",cd:"03",cdNm:"Cassette Scanning......"},{grpCd:"03",grpNm:"Processing code",cd:"04",cdNm:"Cassette Scanned."},{grpCd:"03",grpNm:"Processing code",cd:"05",cdNm:"Loading Slide #"},{grpCd:"03",grpNm:"Processing code",cd:"06",cdNm:"Barcode Scanned : "},{grpCd:"03",grpNm:"Processing code",cd:"07",cdNm:"Low Power Slide Scanning......"},{grpCd:"03",grpNm:"Processing code",cd:"08",cdNm:"Low Power Slide Scan Complete."},{grpCd:"03",grpNm:"Processing code",cd:"09",cdNm:"Dispensing Immersion Oil......"},{grpCd:"03",grpNm:"Processing code",cd:"10",cdNm:"High Power Slide Scanning......"},{grpCd:"03",grpNm:"Processing code",cd:"11",cdNm:"RBC Classification Processing......"},{grpCd:"03",grpNm:"Processing code",cd:"11",cdNm:"WBC Classification Processing......"},{grpCd:"03",grpNm:"Processing code",cd:"12",cdNm:"Unloading Slide #"},{grpCd:"03",grpNm:"Processing code",cd:"13",cdNm:"Cassette Complete"},{grpCd:"04",grpNm:"Analysis type",cd:"01",cdNm:"PB smear"},{grpCd:"04",grpNm:"Analysis type",cd:"02",cdNm:"BM smear"},{grpCd:"04",grpNm:"Analysis type",cd:"03",cdNm:"Touch print"},{grpCd:"04",grpNm:"Analysis type",cd:"04",cdNm:"BM biopsy"},{grpCd:"04",grpNm:"Analysis type",cd:"05",cdNm:"Clot section"},{grpCd:"05",grpNm:"Cell count",cd:"01",cdNm:"100 count"},{grpCd:"05",grpNm:"Cell count",cd:"02",cdNm:"200 count"},{grpCd:"05",grpNm:"Cell count",cd:"03",cdNm:"300 count"},{grpCd:"05",grpNm:"Cell count",cd:"04",cdNm:"400 count"},{grpCd:"05",grpNm:"Cell count",cd:"05",cdNm:"500 count"},{grpCd:"06",grpNm:"General stain",cd:"01",cdNm:"Wright stain"},{grpCd:"06",grpNm:"General stain",cd:"02",cdNm:"Giemsa stain"},{grpCd:"06",grpNm:"General stain",cd:"03",cdNm:"Wright & Giemsa stain"},{grpCd:"07",grpNm:"Special stain",cd:"04",cdNm:"Iron stain"},{grpCd:"07",grpNm:"Special stain",cd:"05",cdNm:"Trichrome stain"},{grpCd:"07",grpNm:"Special stain",cd:"06",cdNm:"Myeloperoxidase stain"},{grpCd:"07",grpNm:"Special stain",cd:"07",cdNm:"NSE stain"},{grpCd:"07",grpNm:"Special stain",cd:"08",cdNm:"NSE stain after NaFinhibition"},{grpCd:"07",grpNm:"Special stain",cd:"09",cdNm:"Reticulin stain"},{grpCd:"07",grpNm:"Special stain",cd:"10",cdNm:"PAS stain"},{grpCd:"08",grpNm:"Immuno stain",cd:"11",cdNm:"CD 3"},{grpCd:"08",grpNm:"Immuno stain",cd:"12",cdNm:"CD 5"},{grpCd:"08",grpNm:"Immuno stain",cd:"13",cdNm:"CD 20"},{grpCd:"08",grpNm:"Immuno stain",cd:"14",cdNm:"CD 79a"},{grpCd:"09",grpNm:"Sampling stain",cd:"01",cdNm:"Single"},{grpCd:"09",grpNm:"Sampling stain",cd:"02",cdNm:"Both"},{grpCd:"10",grpNm:"Gender",cd:"01",cdNm:"Male"},{grpCd:"10",grpNm:"Gender",cd:"02",cdNm:"Female"},{grpCd:"11",grpNm:"Test Type",cd:"01",cdNm:"PB"},{grpCd:"11",grpNm:"Test Type",cd:"02",cdNm:"BF(Default)"},{grpCd:"11",grpNm:"Test Type",cd:"03",cdNm:"BF(Select)"},{grpCd:"11",grpNm:"Test Type",cd:"04",cdNm:"Premium"},{grpCd:"12",grpNm:"Signed state",cd:"01",cdNm:"Signed"},{grpCd:"12",grpNm:"Signed state",cd:"02",cdNm:"Ready"},{grpCd:"13",grpNm:"Log type",cd:"00",cdNm:"User log"},{grpCd:"13",grpNm:"Log type",cd:"01",cdNm:"System log"},{grpCd:"14",grpNm:"Slot state",cd:"00",cdNm:"Empty"},{grpCd:"14",grpNm:"Slot state",cd:"01",cdNm:"Ready"},{grpCd:"14",grpNm:"Slot state",cd:"02",cdNm:"Scan"},{grpCd:"14",grpNm:"Slot state",cd:"03",cdNm:"Analyzing"},{grpCd:"14",grpNm:"Slot state",cd:"04",cdNm:"Complete"},{grpCd:"14",grpNm:"Slot state",cd:"05",cdNm:"Error"}],d=[{value:"01",text:"Diff"},{value:"04",text:"Premium"},{value:"02",text:"Body fluid default"},{value:"03",text:"Body fluid select"}],m=[{value:"02",text:"BM smear"},{value:"03",text:"Touch print"},{value:"04",text:"BM biopsy"},{value:"05",text:"Clot section"}],v=(e,t)=>{const a=r.find((a=>a.grpCd===e&&a.cd===t));return a?.cdNm};function p(e){if(!e)return"";const[t,a,l,s,o,n]=[e.substring(0,4),e.substring(4,6),e.substring(6,8),e.substring(8,10),e.substring(10,12),e.substring(12,14)];return`${t}-${a}-${l} ${s}:${o}:${n}`}const g=e=>{const t=d.find((t=>t.value===e));return t?t.text:""},I=e=>{const t=m.find((t=>t.value===e));return t?t.text:""},b=(e,t,a,l)=>{const s=window.APP_API_BASE_URL||"http://192.168.0.131:3002";return`${s}/images/getImageRealTime?folder=${t+"/"+a+"/"+l+"/"}&imageName=${e}`},y=(0,s.Lk)("h3",{class:"titleText"},[(0,s.Lk)("span",{class:"greenColor"},"P"),(0,s.eW)("rocessing "),(0,s.Lk)("span",{class:"greenColor"},"I"),(0,s.eW)("nformation ")],-1),f={class:"processInfoUl"},C=(0,s.Lk)("span",{class:"proSpan"},"Cassette No",-1),k={class:"proVal"},h=(0,s.Lk)("span",{class:"proSpan"},"Barcode ID",-1),S={class:"proVal"},_=(0,s.Lk)("span",{class:"proSpan"},"Patient ID",-1),E={class:"proVal"},N=(0,s.Lk)("span",{class:"proSpan"},"Patient Name",-1),L={class:"proVal"},R={class:"proSpan"},T={class:"proVal"},w={class:"proSpan"},P={class:"proVal"},A=(0,s.Lk)("span",{class:"proSpan"},"Oil Count",-1),D={class:"proVal"};var M=(0,s.pM)({__name:"processInfo",props:["parsedData"],setup(e){const t=e,a=(0,u.Pj)(),l=(0,s.EW)((()=>a.state.embeddedStatusModule)),i=(0,s.EW)((()=>a.state.commonModule.siteCd)),c=(0,o.KR)({}),r=(0,o.KR)(null),d=((0,s.nI)(),(0,o.KR)(!1));(0,s.wB)([l.value],(async e=>{if(e.length>0){const t=e[0].sysInfo;t.oilCount!==r.value&&(c.value.oilCount=t.oilCount,r.value=t.oilCount)}})),(0,s.sV)((()=>{r.value=l.value[0]?.sysInfo.oilCount,d.value="bm"===window.PROJECT_TYPE})),(0,s.wB)((()=>t.parsedData),((e,t)=>{m(e)}),{deep:!0});const m=async e=>{const t=e;if("RUNNING_INFO"===t.jobCmd){const e=t?.slotInfo;e&&(c.value={cassetteNo:"",barcodeId:e.barcodeNo,patientId:e.patientId,patientName:e.patientNm,orderDate:p(e.orderDttm),analyzedDttm:p(e.analyzedDttm)})}};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[y,(0,s.Lk)("ul",f,[(0,s.Lk)("li",null,[C,(0,s.eW)(),(0,s.Lk)("span",k,(0,n.v_)(c.value?.cassetteNo),1)]),(0,s.Lk)("li",null,[h,(0,s.eW)(),(0,s.Lk)("span",S,(0,n.v_)(c.value?.barcodeId),1)]),(0,s.Lk)("li",null,[_,(0,s.eW)(),(0,s.Lk)("span",E,(0,n.v_)(c.value?.patientId),1)]),(0,s.Lk)("li",null,[N,(0,s.eW)(),(0,s.Lk)("span",L,(0,n.v_)(c.value?.patientName),1)]),(0,s.Lk)("li",null,[(0,s.Lk)("span",R,(0,n.v_)(d.value?"BM CELL Count ":"WBC Count "),1),(0,s.Lk)("span",T,(0,n.v_)(c.value?.wbcCount),1)]),(0,s.Lk)("li",null,[(0,s.Lk)("span",w,(0,n.v_)("0019"===i.value?"Order Date":"Analyzed Date"),1),(0,s.Lk)("span",P,(0,n.v_)("0019"===i.value?c.value?.analyzedDttm:c.value?.orderDate),1)]),(0,s.Lk)("li",null,[A,(0,s.Lk)("span",D,(0,n.v_)(r.value),1)])])]))}});const x=M;var O=x;const K=[{value:"01",text:"WBC Diff (Standard)"},{value:"04",text:"PBS (Premium)"}],B=[{value:"100",text:"100 WBC"},{value:"150",text:"150 WBC"},{value:"200",text:"200 WBC"},{value:"250",text:"250 WBC"},{value:"300",text:"300 WBC"},{value:"350",text:"350 WBC"},{value:"400",text:"400 WBC"},{value:"450",text:"450 WBC"},{value:"500",text:"500 WBC"}],U=[{value:"500",text:"500"},{value:"600",text:"600"},{value:"700",text:"700"},{value:"800",text:"800"},{value:"900",text:"900"},{value:"1000",text:"1000"},{value:"1100",text:"1100"},{value:"1200",text:"1200"},{value:"1300",text:"1300"},{value:"1400",text:"1400"},{value:"1500",text:"1500"}],X=[{value:"1",text:"1 stitch"},{value:"2",text:"2 stitch"},{value:"3",text:"3 stitch"},{value:"4",text:"4 stitch"},{value:"5",text:"5 stitch"}],F={input:[{slotNo:1,slotState:"0"},{slotNo:2,slotState:"0"},{slotNo:3,slotState:"0"},{slotNo:4,slotState:"0"},{slotNo:5,slotState:"0"},{slotNo:6,slotState:"0"},{slotNo:7,slotState:"0"},{slotNo:8,slotState:"0"},{slotNo:9,slotState:"0"},{slotNo:10,slotState:"0"},{slotNo:11,slotState:"0"},{slotNo:12,slotState:"0"}],output:[{slotNo:1,slotState:"0"},{slotNo:2,slotState:"0"},{slotNo:3,slotState:"0"},{slotNo:4,slotState:"0"},{slotNo:5,slotState:"0"},{slotNo:6,slotState:"0"},{slotNo:7,slotState:"0"},{slotNo:8,slotState:"0"},{slotNo:9,slotState:"0"},{slotNo:10,slotState:"0"},{slotNo:11,slotState:"0"},{slotNo:12,slotState:"0"}]},W={input:[{slotNo:1,slotState:"0"},{slotNo:2,slotState:"0"},{slotNo:3,slotState:"0"},{slotNo:4,slotState:"0"},{slotNo:5,slotState:"0"},{slotNo:6,slotState:"0"},{slotNo:7,slotState:"0"},{slotNo:8,slotState:"0"},{slotNo:9,slotState:"0"},{slotNo:10,slotState:"0"}],output:[{slotNo:1,slotState:"0"},{slotNo:2,slotState:"0"},{slotNo:3,slotState:"0"},{slotNo:4,slotState:"0"},{slotNo:5,slotState:"0"},{slotNo:6,slotState:"0"},{slotNo:7,slotState:"0"},{slotNo:8,slotState:"0"},{slotNo:9,slotState:"0"},{slotNo:10,slotState:"0"}]},G={Logout:"Would you like to log out?",GET_POSITION_LIST:"getPositionList",GET_LOGIN_HISTORY:"getLoginHistory",SET_USER:"setUser",IS_REGIST_USER:"isRegistUser",UPDATE_LOGIN_DTTM:"updateLoginDttm",UPDATE_USER_AVAILABLE:"updateUserAvailable",GET_WBC_CLASS_LIST:"getWbcClassList",GET_WBC_CLASS_LIST_ALL:"getWbcClassListAll",GET_WBC_TOTAL_COUNT:"getWbcTotalCount",UPDATE_WBC_COUNT:"updateWbcCount",GET_WBC_COUNT:"getWbcCount",GET_TEST_TYPE:"getTestType",GET_MODIFIED_TEST_TYPE:"getModifiedTestType",GET_STITCH_COUNT:"getStitchCount",GET_RBC_COUNT:"getRbcCount",GET_RBC_COUNT_HIST:"getRbcCountHist",GET_RBC_COUNT_SKMC:"getRbcCountSkmc",UPDATE_DEGREE:"updateDegree",INIT_WBC_COUNT:"initWbcCount",INIT_RBC_DEGREE:"initRbcDegree",GET_WBC_INFO:"getWbcInfo",SET_WBC_IMAGE_HIST:"setWbcImageHist",GET_WBC_IMAGE_HIST:"getWbcImageHist",INIT_WBC_IMAGE_HIST:"initWbcImageHist",INSERT_WBC_CLASSIFICATION:"insertWbcClassification",SET_WBC_CUSTOM_LIST:"setWbcClassList",UPDATE_HOT_KEYS:"updateHotKeys",UPDATE_BF_HOT_KEYS:"updateBfHotKeys",UPDATE_ORDER:"updateOrder",UPDATE_ORDER_BF:"updateOrderBf",UPDATE_IMAGE_HIST:"updateImageHist",SET_CURRENT_WBC_RESULTS:"setCurrentWbcResults",GET_CURRENT_WBC_RESULTS:"getCurrentWbcResults",SET_BEFORE_WBC_RESULTS:"setBeforeWbcResults",GET_BEFORE_WBC_RESULTS:"getBeforeWbcResults",GET_WBC_MODIFY_LIST:"getWbcModifyList",GET_WBC_MODIFY_LIST_ALL:"getWbcModifyListAll",GET_BF_MODIFY_LIST:"getBfModifyList",GET_RBC_CLASS_LIST:"getRbcClassList",GET_MALARIA_COUNT:"getMalariaCount",UPDATE_MALARIA_COUNT:"updateMalariaCount",SET_CURRENT_RBC_RESULTS:"setCurrentRbcResults",GET_CURRENT_RBC_RESULTS:"getCurrentRbcResults",SET_CLASSIFICATION:"setClassification",GET_CLASSIFICATION_ITEM:"getClassificationItem",SET_CLASSIFICATION_ITEM:"setClassificationItem",UPDATE_RBC_CLASSIFICATION:"updateRbcClassificatin",UPDATE_RBC_CLASSIFICATION_SKMC:"updateRbcClassificatinSkmc",INSERT_WBC_SUCCESS:"insertWbcSuccess",SELECT_RBC_DEGREE:"selectRbcDegree",UPDATE_RBC_DEGREE:"updateRbcDegree",SET_TEST_LIST:"setTestList",GET_TEST_LIST:"getTestList",GET_TEST_RESULT:"getTestResult",GET_RBC_FIELDS:"getRbcFields",GET_WBC_FIELDS:"getWbcFields",GET_RBC_ITEMS:"getRbcItems",GET_WBC_ITEMS:"getWbcItems",INIT_OIL_COUNT:"initOilCount",UPDATE_RESULT:"updateResult",UPDATE_RUNNING_STATE:"updateRunningState",GET_ORDER_LIST:"getOrderList",SET_ORDER_LIST:"setOrderList",UPDATE_ORDER_LIST:"updateOrderList",INIT_ORDER_LIST:"initOrderList",GET_TEST_RESULT_ALL:"getTestResultAll",GET_SEARCH_OPTIONS:"getSearchOptions",UPDATE_SEARCH_OPTIONS:"updateSearchOption",SET_TEST_HISTORY:"setTestHistory",GET_TEST_HISTORY_LIST:"getTestHistoryList",ALL_TEST_HISTORY_LIST:"allTestHistoryList",SEARCH_TEST_HISTORY_LIST:"searchTestHistoryList",UPDATE_TEST_HISTORY:"updateTestHistory",GET_TEST_HISTORY:"getTestHistory",DELETE_TEST_HISTORY:"deleteTestHistory",UPDATE_SIGNED_STATE:"updatesubmitState",UPDATE_TEST_HISTORY_WBC_INFO:"updateTestHistoryWbcInfo",GET_RBC_COMMENT:"getRbcComment",GET_WBC_COMMENT:"getWbcComment",GET_RUNNING_INTERVAL_ID:"getRunningIntervalId",SET_RUNNING_INTERVAL_ID:"setRuningIntervalId",UPDATE_TIMER:"updateWorkingTimer",GET_TIMER:"getWorkingTimer",SET_TIMER:"setWorkingTimer",SET_WORKING_INTERVAL_ID:"setWorkingIntervalId",GET_WORKING_INTERVAL_ID:"getWorkingIntervalId",GET_RUNNING_STATE:"getRunningState",SET_SLIDE_TIMER:"setSlideTimer",UPDATE_SLIDE_TIMER:"updateSlideTimer",GET_SLIDE_TIME_COUNT:"getSlideTimeCount",SET_USER_STOP:"setUserStop",GET_USER_STOP:"getUserStop",SET_WBC_CELL_POSITION:"setWbcCellPosition",GET_WBC_CELL_POSITION:"getWbcCellPosition",GET_TEST_HISTORY_PREV:"getTestHistoryPrev",GET_TEST_HISTORY_NEXT:"getTestHistoryNext",SET_IS_RECOVERY_RUN:"setIsRecoveryRun",GET_IS_RECOVERY_RUN:"getIsRecoveryRun",SET_WORK_LIST:"setWorkList",GET_WORK_LIST:"getWorkList",INIT_WORK_LIST:"initWorkList",DELETE_WORK_LIST:"deleteWorkList",UPDATE_WORK_LIST:"updateWorkList",UPDATE_WORK_LIST_BM:"updateWorkListBm",UPDATE_SIGNED_WORK_LIST:"updateSignedWorkList",UPDATE_RBC_COMMENT:"updateRbcComment",UPDATE_WBC_COMMENT:"updateWbcComment",UPDATE_BM_COMMENT:"updateBmComment",UPDATE_SELECT_ORDER_ID:"updateSelectOrderId",GET_SELECT_ORDER_ID:"getSelectOrderId",ADD_WORK_LIST:"addWorkList",GET_TEST_BARCODES:"getTestBarcodes",ADD_DSP_LIST:"addDspList",GET_DSP_LIST:"getDspList",SET_LIS_HOT_KEY:"setLisHotKey",UPDATE_NEW_TEST_SET:"updateNewTestSet",UPDATE_EXEC_TEST_TYPE:"updateExecTestType",INITIALIZE_MOUNT_CNT:"initializeMountCnt",UPDATE_MOUNT_CNT:"updateMountCnt",GET_CURRENT_USER:"getCurrentUser",GET_SETTINGS:"getSettings",UPDATE_RUNNING_PATH:"updateRunningPath",UPDATE_RESULT_PATH_WBC:"updateResultPathWbc",UPDATE_RESULT_PATH_RBC:"updateResultPathRbc",UPDATE_BARCODE_PATH:"updateBarcodePath",GET_SYSTEM_TIME_ID:"getSystemTimeId",SET_SYSTEM_TIME_ID:"setSystemTimeId",GET_USER:"getUser",UPDATE_REMEMBER_STATE:"updateRememberState",SET_CURRENT_USER:"setCurrentUser",UPDATE_ROOT_PATH:"updateRootPath",GET_FILE_FILTER:"getFileFilter",GET_USER_LIST:"getUserList",UPDATE_ANALYSIS_TYPE:"updateAnalysisType",UPDATE_TEST_TYPE:"updateTestType",UPDATE_RUNNING_MODE:"updateRunningMode",UPDATE_USER:"updateUser",DELETE_USER:"deleteUser",UPDATE_MARKER_STATE:"updateMarkerState",GET_MARKER_STATE:"getMarkerState",SET_PAUSE_STATE:"setPauseState",GET_PAUSE_STATE:"getPauseState",GET_BF_WHOLE_SLIDE_PATH:"getBfWholeSlidePath",GET_BF_WBC_CLASS_LIST:"getBfWbcClassList",GET_SIZE_SLIDE_VALUE:"getSizeSlideValue",UPDATE_LIS_CODE:"updateLisCode",SELECT_LIS_CODE:"selectLisCode",SELECT_LIS_CODE_RBC:"selectLisCodeRbc",UPDATE_CBC_CODE:"updateCbcCode",SELECT_CBC_CODE:"selectCbcCode",UPDATE_LIS_CONN_PATH:"updateLisConnPath",SELECT_LIS_CONN_PATH:"selectLisConnPath",GET_BACKUP_LIST:"getBackupList",RESTORE_BACKUP_DATA:"restoreBackupData",DELETE_BACKUP_DATA:"deleteBackupData",RESET_RBC_DEGREE:"resetRbcDegree",GET_DEFAULT_RBC_DEGREE:"getDefaultRbcDegree",UPDATE_CHECKED_CELL:"updateCheckedCell",SET_LOCK_SLIDE:"setLockSlide",SET_HOST_IP:"setHostIp",GET_HOST_IP:"getHostIp",GET_NORMAL_RANGE:"getNormalRange",UPDATE_NORMAL_RANGE:"updateNormalRange",GET_LOCK_STATE:"getLockState",GET_KUMC_CBC_PATH:"getKumcCbcPath",SET_WBC_NORMAL_RANGE:"setWbcNormalRange",GET_WBC_NORMAL_RANGE:"getWbcNormalRange",GET_SKMC_RESULT_CD:"getSkmcResultCd",SET_SKMC_RESULT_CD:"setSkmcResultCd",REMOVE_SKMC_RESULT_CD:"removeSkmcResultCd",GET_SKMC_REMARK:"getSkmcRemark",SET_SKMC_REMARK:"setSkmcRemark",REMOVE_SKMC_REMARK:"removeSkmcRemark",SET_SKMC_FAVORITE:"setSkmcFavorite",GET_SKMC_FAVORITE:"getSkmcFavorite",GET_SKMC_LIS_RESULTS:"getSkmcLisResults",SET_SKMC_LIS_RESULTS:"setSkmcLisResults",SET_ALARM_COUNT:"setAlarmCount",SET_SORT_TYPE:"setSortType",GET_SORT_TYPE:"getSortType",SET_CUSTOM_CLASS:"setCustomClass",GET_CUSTOM_CLASS:"getCustomClass",SET_SYS_INFO:"setSysInfo",GET_SYS_INFO:"getSysInfo",SET_BACKEND_DATA:"setBackendData",GET_BACKEND_DATA:"getBackendData",SELECT_CBC_CODE_INHA:"selectCbcCodeInha",SELECT_LIS_CODE_INHA:"selectLisCodeInha",SELECT_LIS_CODE_RBC_INHA:"selectLisCodeRbcInha",SELECT_LIS_CONN_PATH_INHA:"selectLisConnPathInha",GET_RBC_COUNT_INHA:"getRbcCountInha",SELECT_WBC_RUNNING_COUNT:"selectWbcRunningCount",GET_BRIGHTNESS_SLIDE_VALUE:"getBrightnessSlideValue",GET_RED_VALUE:"getRedValue",GET_GREEN_VALUE:"getGreenValue",GET_BLUE_VALUE:"getBlueValue",GET_RGB_VALUE:"getRgbValue",SET_SIZE_SLIDE_VALUE:"setSizeSlideValue",SET_BRIGHTNESS_SLIDE_VALUE:"setBrightnessSlideValue",SET_RED_VALUE:"setRedValue",SET_GREEN_VALUE:"setGreenValue",SET_BLUE_VALUE:"setBlueValue",SET_RGB_VALUE:"setRgbValue",SET_ROLLBACK_LIST:"setRollbackList",GET_ROLLBACK_LIST:"getRollbackList",GET_IMAGE_ROLLBACK_LIST:"getImageRollbackList",SET_CLONED_WBC_INFO:"setClonedWbcInfo",GET_RBC_BRIGHTNESS_SLIDE_VALUE:"getRbcBrightnessSlideValue",GET_RBC_RED_VALUE:"getRbcRedValue",GET_RBC_GREEN_VALUE:"getRbcGreenValue",GET_RBC_BLUE_VALUE:"getRbcBlueValue",SET_RBC_BRIGHTNESS_SLIDE_VALUE:"setRbcBrightnessSlideValue",SET_RBC_RED_VALUE:"setRbcRedValue",SET_RBC_GREEN_VALUE:"setRbcGreenValue",SET_RBC_BLUE_VALUE:"setRbcBlueValue",SET_CLONED_RBC_INFO:"setClonedRbcInfo",UPDATE_OIL_COUNT:"updateOilCount",SET_RESULT_LIST:"setResultList",CLEAR_RESULT_LIST:"clearResultList",GET_RESULT_LIST:"getResultList",SET_WBC_REPORT_PRINT:"setWbcReportPrint",GET_WBC_REPORT_PRINT:"getWbcReportPrint",SET_RBC_REPORT_PRINT:"setRbcReportPrint",GET_RBC_REPORT_PRINT:"getRbcReportPrint",SET_RBC_SIZE:"setRbcSize",GET_RBC_SIZE:"getRbcSize",SET_RBC_CHROMIA:"setRbcChromia",GET_RBC_CHROMIA:"getRbcChromia",SET_RBC_SHAPE:"setRbcShape",GET_RBC_SHAPE:"getRbcShape",PUSH_RBC_SHAPE:"pushRbcShape",POP_RBC_SHAPE:"popRbcShape",SET_RBC_PLATELET:"setRbcPlatelet",GET_RBC_PLATELET:"getRbcPlatelet",PUSH_RBC_PLATELET:"pushRbcPlatelet",POP_RBC_PLATELET:"popRbcPlatelet",SET_RBC_INCLUSION:"setRbcInclusion",GET_RBC_INCLUSION:"getRbcInclusion",POP_RBC_INCLUSION:"popRbcInclusion",PUSH_RBC_INCLUSION:"pushRbcInclusion",SET_IS_SHOW_MODAL_BARCODE:"setIsShowModalBarcode",GET_IS_SHOW_MODAL_BARCODE:"getIsShowModalBarcode",SET_IS_NS_NB_INTEGRATION:"setIsNsNbIntegration",GET_IS_NS_NB_INTEGRATION:"getIsNsNbIntegration",SET_IS_ALARM:"setIsAlarm",GET_IS_ALARM:"getIsAlarm",SET_IS_CBC_SHOW:"setIsCbcShow",GET_IS_CBC_SHOW:"getIsCbcShow",SET_SITE_CD:"setSiteCd",GET_SITE_CD:"getSiteCd",SET_DEVICE_SERIALNUM:"setDeviceSerialNm",GET_DEVICE_SERIALNUM:"getDeviceSerialNm",SELECT_BF_HOT_KEY:"selectBfHotKey",SELECT_WBC_HOT_KEY:"selectWbcHotKey",SELECT_WBC_CUSTOM_CLASS:"selectWbcCustomClass",SELECT_EMP_NO:"selectEmpNo",INSERT_WBC_MODIFY_HIST:"insetWbcModifyHist",GET_WBC_MODIFY_HIST:"getWbcModifyHist",UPDATE_WBC_HIST_LIST:"updateWbcHistList",GET_WBC_HIST_LIST:"getWbcHistList",GET_COMMON_CODE_LIST:"getCommonCodeList",GET_COMMON_CODE:"getCommonCode",GET_CODE_LIST_USER_POSITION:"00",GET_CODE_LIST_USER_AUTHORIZATION:"01",GET_CODE_LIST_USER_CASSETE_STATE:"02",GET_CODE_LIST_PROCESSING_STATE:"03",GET_CODE_LIST_ANALYSIS_TYPE:"04",GET_CODE_LIST_CELL_COUNT:"05",GET_CODE_LIST_GENERAL_STAIN:"06",GET_CODE_LIST_SPECIAL_STAIN:"07",GET_CODE_LIST_IMMUNO_STAIN:"08",GET_CODE_LIST_SAMPLING_STAIN:"09",GET_CODE_LIST_GENDER:"10",GET_CODE_LIST_TEST_TYPE:"11",GET_CODE_SIGNED_STATE:"12",GET_CODE_LOG_TYPE:"13",GET_CODE_SLOT_STATE:"14",EVENT_TYPE_USER:"00",EVENT_TYPE_SYSTEM:"01",SET_EVENT_LOG:"setEventLog",GET_EVENT_LOG:"getEventLog",REMOVE_EVENT_LOG:"removeEventLog",REMEMBER_PWD_KEY:"uimdia190$^!00000000000000000000",REMEMBER_PWD_IV:"0000000000000000",RECEIVE_DATA_BROADCAST_CHAN:"RECEIVE_DATA_BROADCAST_CHAN",GET_PB_CLASSIFICATIONS:"getPbClassifications",GET_CLASSIFICATION_IMAGES:"getClassificationImages",GET_MARKER_POSITION:"getMarkerPosition",GET_PB_HOT_KEYS:"getPbHotKeys",UPDATE_CLASSIFICATION:"updateClassification",PB_IA_MOVE_IMAGE:"PbIaMoveImage",SET_WBC_IMAGE_LIST:"setWbcImageList",GET_PB_WBC_IMAGES:"getPbWbcImages",SET_SELECTED_ITEM:"setSelectedItem",GET_SELECTED_ITEM:"getSelectedItem",IA_SET_CUSTOM_CLASS:"iaSetCustomClass",IA_GET_CUSTOM_CLASS:"iaGetCustomClass",IDS_MSG_SUCCESS:"Success",IDS_MSG_FAILED:"Failed",IDS_MSG_OIL_REMAIN_COUNTER:"Reset Immersion oil counter after final test or changing the Oil",IDS_MSG_POWEROFF:"Shutdown the system.",IDS_MSG_INITALIZE:"Please execute after initialization.",IDS_MSG_SIGNING_COMPLETE:"Signing is complete.",IDS_MSG_DELETE_THE_SELECTED_ITEMS:"Delete the selected items?",IDS_MSG_ACCOUNT_CHANGED:"Account conversion is complete.",IDS_MSG_DELETE_ACCOUNT:"Are you sure you want to delete your account?",IDS_MSG_LOGOUT:"Are you sure you want to logout now?",IDS_MSG_DUPLICATE_KEY:"The %s key is a duplicate key.",IDS_MSG_HOTKEY_IN_ENGLISH:"Please recheck the key",IDS_ERROR_CHECK_ID:"The ID must be 5-20 letters or numbers starting with the alphabet.",IDS_ERROR_CHECK_PASSWORD:"The password is a combination of 6-30 digits in English, numbers.",IDS_ERROR_NOT_MATCHED_PASSWORD:"Passwords do not match.",IDS_ERROR_SIGINUP:"Please check the input field.",IDS_ERROR_SIGINUP_ALREADY_ID:"ID already registered.",IDS_ERROR_LOGIN_ERROR:"Please check your ID and password.",IDS_ERROR_LOGIN_ID:"Please check your Login ID.",IDS_ERROR_ALREADY_RUNNING:"Process is already running.",IDS_ERROR_STOP_PROCESS:"Process is terminating.",IDS_ERROR_INIT_ERROR:"Please initialize.",IDS_ERROR_CHECK_REQUIRED_FIELDS:"Please check required fields",IDS_ERROR_CHECK_SLOT_NO:"Please check the slot number.",IDS_ERROR_FAVORITE_MAX_REGIST:"Up to 5 favorites can be registered.",IDS_ERROR_FAVORITE_MAX_REGIST2:"Up to 12 favorites can be registered.",IDS_ERROR_ENTER_YOUR_ORDER_DETAILS:"Please enter your order details.",IDS_ERROR_SELECT_A_TARGET_ITEM:"Please select items",IDS_ERROR_PLEASE_SELECT_AN_IMAGE:"Please select an image.",IDS_ERROR_ALREADY_ADDED:"This item has already been added.",IDS_ERROR_ADD_A_WORKLIST:"Please add a worklist",IDS_ERROR_NO_TEST_RESULTS:"There are no test results.",IDS_ERROR_FILE_CLISSIFICATION:"File classification error",IDS_ERROR_ENTER_CLASS_INFO:"Please enter class information",IDS_ERROR_PLEASE_CONFIRM_YOUR_USER_ID:"Please confirm your user ID.",IDS_DOWNLOAD_COMPLETE:"Download Complete",IDS_SELECT_SLIDE:"Please select a slide.",IDS_SIGNED_ITEMS_CANNOT_BE_MODIFIED:"Signed items cannot be modified.",IDS_RECOVER_GRIPPER_CONDITION:"Would you like to recover the gripper condition?",IDS_PLEASE_ENTER_END_DATE:"Please enter the end date.",IDS_PLEASE_ENTER_START_DATE:"Please enter the start date.",IDS_THE_MAXIMUM_INQUIRY_DATE_IS_31_DAYS:"The maximum inquiry date is 31 days.",IDS_START_DATE_IS_NOT_GREATER_THEN_END_DATE:"Start date is not greater than end date.",IDS_RESTART_SYSTEM:"A new version has been downloaded. Please restart the application to apply the update.",IDS_PLEASE_ENTER_YOUR_BARCODE_NUMBER:"Please enter your barcode number",IDS_BARCODE_REGISTRATION_SUCCESSFUL:"Barcode registration successful",IDS_THIS_IS_A_DUPLICATION_ABBREVIATION:"This is a duplicate abbreviation.",IDS_THIS_CARD_HAS_ALREADY_BEEN_USED:"This card has already been used.",IDS_MSG_UPLOAD_LIS:"Upload current results to LIS",IDS_MSG_SUBMIT_SLIDE:"Submit slide",IDS_MSG_CONFIRM_SLIDE:"Confirm slide",IDS_PLEASE_SELECT_A_CLASS:"Please select a class",IDS_PLEASE_SELECT_A_BACKUP_DATE:"Please select a backup date.",IDS_PLEASE_SELECT_A_BACKUP_PATH:"Please select a backup path.",IDS_PLEASE_SELECT_A_BACKUP_FILE:"Please select a backup file.",IDS_NO_DATA_FOUND:"No data found.",IDS_MSG_DATA_BACKUP:"Data from that period will be deleted. Would you like to proceed?",IDS_MSG_DATA_RESTORE:"Do you want to recover your data?",IDS_MSG_SIZE_CHROMIA_LINKED_LIS:"Size and Chromia categories are linked with LIS data.",UPDATE_SUCCESSFULLY:"Update Successfully",TCP_DiSCONNECTED:"The TCP connection was disconnected.",alreadyInitialized:"It has already been initialized."};var $=a(5093),H=a.n($);a(4743);function j(){const e=H()(),t=e.format("YYYYMMDDHHmmssSSS");return t}const V=e=>{if(!e)return null;const t=H()(e,"YYYYMMDDHHmmssSSSSS");return t.format("YYYY-MM-DD HH:mm:ss")},Y=e=>{const t=Math.floor(e/3600),a=Math.floor(e%3600/60),l=Math.floor(e%3600%60);return`${q(t,2)}:${q(a,2)}:${q(l,2)}`},q=(e,t)=>String(e).padStart(t,"0"),J=e=>{const t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),l=e.getDate().toString().padStart(2,"0");return`${t}-${a}-${l}`},Q=()=>{const e=j();return{embedStatus:{start:{jobCmd:"START",reqUserId:"",testType:"",wbcCount:"",reqDttm:e},startAction:{jobCmd:"START",reqUserId:"",testType:"01",wbcCount:"",stitchCount:"",runningMode:"00",positionMargin:"0",wbcPositionMargin:"0",pltPositionMargin:"0",reqDttm:e},init:{jobCmd:"INIT",reqUserId:"",reqDttm:e},restart:{jobCmd:"RESTART",reqUserId:"",reqDttm:e,bfSelectFiles:[]},stop:{jobCmd:"STOP",reqUserId:"",reqDttm:e,isEmergency:"N",isUserStop:"Y"},end:{jobCmd:"END",reqUserId:"",testType:"",wbcCount:"",reqDttm:e},runningInfo:{jobCmd:"RUNNING_INFO",reqUserId:"",reqDttm:e},sysInfo:{jobCmd:"SYSINFO",reqUserId:"",reqDttm:e},pause:{jobCmd:"PAUSE",reqUserId:"",reqDttm:e},runIngComp:{jobCmd:"RUNNING_COMP",reqUserId:"",reqDttm:e},recovery:{jobCmd:"RECOVERY",reqUserId:"",reqDttm:e},settings:{jobCmd:"SETTINGS",reqUserId:"",reqDttm:e,pbiaRootDir:"D:/IA_Proc",oilCount:"",isOilReset:"",deviceType:"01",isNsNbIntegration:""},oilPrime:{jobCmd:"OIL_PRIME",reqUserId:"",reqDttm:e},gripperOpen:{jobCmd:"GRIPPER_OPEN",reqUserId:"",reqDttm:e},cameraReset:{jobCmd:"CAMERA_RESET",reqUserId:"",reqDttm:e}}}};var z=a(1250);function Z(){const e=window.APP_API_BASE_URL||"http://192.168.0.131:3002",t=async(e,t,l)=>a(e.endpoint,t,l),a=async(t,a,l)=>{const s={headers:{"Content-Type":"application/json","Cache-Control":"public, max-age=3600"}};z.A.defaults.withCredentials=!0;const o=a?l?"?":"/":"";a=a||"";try{const l=await z.A.get(`${e}/${t}${o}${a}`,s);return Promise.resolve(l.data||{code:500,data:void 0,success:!1})}catch(n){return Promise.reject(n)}},l=async(e,t,a,l=!1)=>s(e.endpoint,t,a,l),s=async(t,a,l,s=!1)=>{const o={headers:{"Content-Type":"application/json"}};"blob"===l&&(o.responseType="blob"),"text/plain"===l&&(o.headers={"Content-Type":"text/plain"}),s&&(o.headers={"Content-Type":"multipart/form-data"}),z.A.defaults.withCredentials=!0;try{const l=await z.A.post(`${e}/${t}`,a,o);return Promise.resolve(l.data||{code:500,data:void 0,success:!1})}catch(n){return Promise.reject(n)}},o=async(e,t,a,l)=>n(e.endpoint,t,a,l),n=async(t,a,l,s)=>{const o={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}};z.A.defaults.withCredentials=!0;const n=l?s?"?":"/":"";l=l||"";try{const s=await z.A.put(`${e}/${t}${n}${l}`,a,o);return Promise.resolve(s.data||{code:500,data:void 0,success:!1})}catch(i){return Promise.reject(i)}},i=async(e,t,a)=>c(e.endpoint,t,a),c=async(t,a,l)=>{const s={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}};z.A.defaults.withCredentials=!0;const o=l?"?":"/";try{const l=await z.A.delete(`${e}/${t}${o}`,{...s,data:a});return Promise.resolve(l.data||{code:500,data:void 0,success:!1})}catch(n){return Promise.reject(n)}};return{httpGet:t,httpGetAct:a,httpPost:l,httpPostAct:s,httpPut:o,httpPutAct:n,httpDelete:i,httpDeleteAct:c}}const ee={auth:{refresh:{endpoint:"/auth/refresh",requiresToken:!1}},processInfo:{list:{endpoint:"proinfo/getAllProcessInfo",requiresToken:!1}},rbcclassification:{list:{endpoint:"rbc/getAllRbc",requiresToken:!1}},wbcclassification:{list:{endpoint:"wbc/getAllWbc",requiresToken:!1}},user:{register:{endpoint:"user/register",requiresToken:!1},login:{endpoint:"user/login",requiresToken:!1},userCheck:{endpoint:"user",requiresToken:!1},userIp:{endpoint:"ip",requiresToken:!1},getUsers:{endpoint:"user/getUsers",requiresToken:!1},userDataPut:{endpoint:"user/update",requiresToken:!1}},settings:{cellImgAnalyzedPost:{cellImgAdd:{endpoint:"cellImgAnalyzed/cellImgAdd",requiresToken:!1},cellImgGet:{endpoint:"cellImgAnalyzed",requiresToken:!1},cellImgPut:{endpoint:"cellImgAnalyzed/update",requiresToken:!1}},rbcDegree:{rbcDegreeAdd:{endpoint:"rbcDegree/rbcDegreeAdd",requiresToken:!1},rbcDegree:{endpoint:"rbcDegree",requiresToken:!1}},wbcCustomClass:{create:{endpoint:"wbcCustomClass/create",requiresToken:!1},update:{endpoint:"wbcCustomClass/update",requiresToken:!1},get:{endpoint:"wbcCustomClass/get",requiresToken:!1}},wbcHotKeys:{create:{endpoint:"wbcHotKeys/create",requiresToken:!1},update:{endpoint:"wbcHotKeys/update",requiresToken:!1},get:{endpoint:"wbcHotKeys/get",requiresToken:!1}},bfHotKeys:{create:{endpoint:"bfHotKeys/create",requiresToken:!1},update:{endpoint:"bfHotKeys/update",requiresToken:!1},get:{endpoint:"bfHotKeys/get",requiresToken:!1}},normalRange:{create:{endpoint:"normalRange/create",requiresToken:!1},update:{endpoint:"normalRange/update",requiresToken:!1},get:{endpoint:"normalRange/get",requiresToken:!1}},imagePrint:{create:{endpoint:"imagePrint/create",requiresToken:!1},update:{endpoint:"imagePrint/update",requiresToken:!1},get:{endpoint:"imagePrint/get",requiresToken:!1}},lisCode:{create:{endpoint:"lisCode/create",requiresToken:!1},update:{endpoint:"lisCode/update",requiresToken:!1},get:{endpoint:"lisCode/get",requiresToken:!1}},lisCodeRbc:{create:{endpoint:"lisCodeRbc/create",requiresToken:!1},update:{endpoint:"lisCodeRbc/update",requiresToken:!1},get:{endpoint:"lisCodeRbc/get",requiresToken:!1}},cbcCode:{create:{endpoint:"cbcCode/create",requiresToken:!1},update:{endpoint:"cbcCode/update",requiresToken:!1},get:{endpoint:"cbcCode/get",requiresToken:!1}},filePathSet:{create:{endpoint:"filePathSet/create",requiresToken:!1},update:{endpoint:"filePathSet/update",requiresToken:!1},get:{endpoint:"filePathSet/get",requiresToken:!1}},runCount:{create:{endpoint:"runCount/create",requiresToken:!1},update:{endpoint:"runCount/update",requiresToken:!1},get:{endpoint:"runCount/get",requiresToken:!1}},minCount:{create:{endpoint:"minCount/create",requiresToken:!1},update:{endpoint:"minCount/update",requiresToken:!1},get:{endpoint:"minCount/get",requiresToken:!1}},runningInfo:{create:{endpoint:"runningInfo/create",requiresToken:!1},update:{endpoint:"runningInfo/update",requiresToken:!1},get:{endpoint:"runningInfo/getAll",requiresToken:!1},delete:{endpoint:"runningInfo/delete",requiresToken:!1},detail:{endpoint:"runningInfo/detail",requiresToken:!1},pageUpDown:{endpoint:"runningInfo/pageUpDown",requiresToken:!1},updatePcIpState:{endpoint:"runningInfo/updatePcIpState",requiresToken:!1},clearPcIpState:{endpoint:"runningInfo/clearPcIpState",requiresToken:!1}},folder:{get:{endpoint:"folder/drives",requiresToken:!1}},folders:{get:{endpoint:"folders",requiresToken:!1}},classOrder:{create:{endpoint:"classOrders/create",requiresToken:!1},update:{endpoint:"classOrders/update",requiresToken:!1},get:{endpoint:"classOrders/get",requiresToken:!1}}},images:{move:{endpoint:"images/move",requiresToken:!1},moveClassImage:{endpoint:"images/moveClassImage",requiresToken:!1}},jsonReader:{get:{endpoint:"jsonReader/send",requiresToken:!1},jsonCreate:{endpoint:"jsonReader/upload",requiresToken:!1}},pdf:{post:{endpoint:"pdf/generate",requiresToken:!1}},filesystem:{post:{endpoint:"filesystem/create-folder",requiresToken:!1},delete:{endpoint:"filesystem/delete-folder",requiresToken:!1},readGet:{endpoint:"file/read",requiresToken:!1},createDirectory:{endpoint:"file/create-directory",requiresToken:!1},fileCreate:{endpoint:"file/createFile",requiresToken:!1}},fileTxtRead:{get:{endpoint:"file/read",requiresToken:!1}},H7Read:{post:{endpoint:"hl7/parse",requiresToken:!1}},H7Message:{post:{endpoint:"hl7/message",requiresToken:!1}},Hl7Create:{post:{endpoint:"hl7/hl7Create",requiresToken:!1}},device:{getDeviceInfo:{create:{endpoint:"device/create",requiresToken:!1},get:{endpoint:"device/get",requiresToken:!1}}},backUp:{backUpDate:{endpoint:"backup/post",requiresToken:!1}}},te=Z(),ae=async e=>te.httpPost(ee.settings.cellImgAnalyzedPost.cellImgAdd,e),le=async()=>te.httpGet(ee.settings.cellImgAnalyzedPost.cellImgGet),se=async(e,t)=>te.httpPut(ee.settings.cellImgAnalyzedPost.cellImgPut,e,t),oe=async e=>te.httpPost(ee.settings.rbcDegree.rbcDegreeAdd,e),ne=async e=>te.httpPut(ee.settings.rbcDegree.rbcDegree,e),ie=async()=>te.httpGet(ee.settings.rbcDegree.rbcDegree),ce=async e=>te.httpPost(ee.settings.wbcCustomClass.create,e),ue=async e=>te.httpPut(ee.settings.wbcCustomClass.update,e),re=async()=>te.httpGet(ee.settings.wbcCustomClass.get),de=async e=>te.httpPost(ee.settings.wbcHotKeys.create,e),me=async e=>te.httpPut(ee.settings.wbcHotKeys.update,e),ve=async()=>te.httpGet(ee.settings.wbcHotKeys.get),pe=async e=>te.httpPost(ee.settings.bfHotKeys.create,e),ge=async e=>te.httpPut(ee.settings.bfHotKeys.update,e),Ie=async()=>te.httpGet(ee.settings.bfHotKeys.get),be=async e=>te.httpPost(ee.settings.normalRange.create,e),ye=async e=>te.httpPut(ee.settings.normalRange.update,e),fe=async()=>te.httpGet(ee.settings.normalRange.get),Ce=async e=>te.httpPost(ee.settings.imagePrint.create,e),ke=async e=>te.httpPut(ee.settings.imagePrint.update,e),he=async()=>te.httpGet(ee.settings.imagePrint.get),Se=async e=>te.httpPost(ee.settings.lisCode.create,e),_e=async e=>te.httpPut(ee.settings.lisCode.update,e),Ee=async()=>te.httpGet(ee.settings.lisCode.get),Ne=async e=>te.httpPost(ee.settings.lisCodeRbc.create,e),Le=async e=>te.httpPut(ee.settings.lisCodeRbc.update,e),Re=async()=>te.httpGet(ee.settings.lisCodeRbc.get),Te=async e=>te.httpPost(ee.settings.cbcCode.create,e),we=async e=>te.httpPut(ee.settings.cbcCode.update,e),Pe=async()=>te.httpGet(ee.settings.cbcCode.get),Ae=async e=>te.httpPost(ee.settings.filePathSet.create,e),De=async e=>te.httpPut(ee.settings.filePathSet.update,e),Me=async()=>te.httpGet(ee.settings.filePathSet.get),xe=async e=>te.httpPost(ee.settings.runCount.create,e),Oe=async e=>te.httpPut(ee.settings.runCount.update,e),Ke=async()=>te.httpGet(ee.settings.runCount.get),Be=async e=>te.httpPost(ee.settings.minCount.create,e),Ue=async e=>te.httpPut(ee.settings.minCount.update,e),Xe=async()=>te.httpGet(ee.settings.minCount.get),Fe=async()=>te.httpGet(ee.settings.lisCode.get),We=async()=>te.httpGet(ee.settings.folder.get),Ge=async e=>te.httpPost(ee.settings.classOrder.create,e),$e=async()=>te.httpGet(ee.settings.classOrder.get),He=async e=>te.httpPut(ee.settings.classOrder.update,e);var je=a(3772);class Ve{constructor(){(0,je.A)(this,"events",{})}subscribe(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}publish(e,...t){const a=this.events[e];a&&a.forEach((e=>e(...t)))}unsubscribe(e,t){const a=this.events[e];a&&(this.events[e]=a.filter((e=>e!==t)))}}var Ye=new Ve;const qe={class:"mb1 alertMessage"};var Je={__name:"Alert",props:["isVisible","type","message"],emits:["update:hideAlert"],setup(e,{emit:t}){const a=e,l=(0,s.EW)((()=>`alert-${a.type}`)),o=t,i=()=>{o("hide")};return(t,a)=>e.isVisible?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,n.C4)(["alert",l.value])},[(0,s.Lk)("p",qe,(0,n.v_)(e.message),1),(0,s.Lk)("button",{class:"alertButton",onClick:i},"Close")],2)):(0,s.Q3)("",!0)}};const Qe=Je;var ze=Qe;const Ze=[{value:"01",text:"PB standard"},{value:"04",text:"PB premium"}],et=[{value:"02",text:"BM wedge"},{value:"03",text:"Touch print"},{value:"04",text:"BM biopsy"},{value:"05",text:"Clot section"},{value:"06",text:"BM squash"}],tt=[{value:"100",text:"100"},{value:"150",text:"150"},{value:"200",text:"200"},{value:"250",text:"250"},{value:"300",text:"300"},{value:"350",text:"350"},{value:"400",text:"400"},{value:"450",text:"450"},{value:"500",text:"500"}],at=[{value:"500",text:"500"},{value:"600",text:"600"},{value:"700",text:"700"},{value:"800",text:"800"},{value:"900",text:"900"},{value:"1000",text:"1000"},{value:"1100",text:"1100"},{value:"1200",text:"1200"},{value:"1300",text:"1300"},{value:"1400",text:"1400"},{value:"1500",text:"1500"}],lt=[{value:"50",text:"50"},{value:"100",text:"100"},{value:"150",text:"150"},{value:"200",text:"200"},{value:"250",text:"250"},{value:"300",text:"300"},{value:"350",text:"350"},{value:"400",text:"400"},{value:"450",text:"450"},{value:"500",text:"500"}],st=[{value:"1",text:"1"},{value:"2",text:"2"},{value:"3",text:"3"},{value:"4",text:"4"},{value:"5",text:"5"}],ot=[{value:"0",text:"0"},{value:"1",text:"1"},{value:"2",text:"2"},{value:"3",text:"3"},{value:"4",text:"4"},{value:"5",text:"5"}],nt=[{value:"0",text:"0"},{value:"1",text:"1"},{value:"2",text:"2"},{value:"3",text:"3"},{value:"4",text:"4"},{value:"5",text:"5"}],it=[{cd:"01",classCd:"",classNm:"WBC Diff. Count",isSelected:!0},{cd:"02",classCd:"",classNm:"Seg.-neutrophils",isSelected:!0},{cd:"03",classCd:"",classNm:"Band-neutrophils",isSelected:!0},{cd:"04",classCd:"",classNm:"Lymphocytes",isSelected:!0},{cd:"05",classCd:"",classNm:"Monocytes",isSelected:!0},{cd:"06",classCd:"",classNm:"Eosinophils",isSelected:!0},{cd:"07",classCd:"",classNm:"Basophils",isSelected:!0},{cd:"08",classCd:"",classNm:"Metamyelocytes",isSelected:!0},{cd:"09",classCd:"",classNm:"Myelocytes",isSelected:!0},{cd:"10",classCd:"",classNm:"Promyelocytes",isSelected:!0},{cd:"11",classCd:"",classNm:"Blasts",isSelected:!0},{cd:"12",classCd:"",classNm:"Immature cells",isSelected:!0},{cd:"13",classCd:"",classNm:"Atypical cells",isSelected:!0},{cd:"14",classCd:"",classNm:"Atypical lymphocyte",isSelected:!0},{cd:"15",classCd:"",classNm:"Activated lymphocyte",isSelected:!0},{cd:"16",classCd:"",classNm:"Prolymphocytes",isSelected:!0},{cd:"17",classCd:"",classNm:"Promonocytes",isSelected:!0},{cd:"18",classCd:"",classNm:"Plasma cells",isSelected:!0},{cd:"19",classCd:"",classNm:"Nucleated RBC",isSelected:!0},{cd:"20",classCd:"",classNm:"Others",isSelected:!0},{cd:"21",classCd:"",classNm:"Atypical Lymphoid cells",isSelected:!0},{cd:"22",classCd:"",classNm:"Leukemic cells",isSelected:!0},{cd:"23",classCd:"",classNm:"Abnormal lymphocyte",isSelected:!0},{cd:"24",classCd:"",classNm:"Reactive lymphocyte",isSelected:!0},{cd:"25",classCd:"",classNm:"Plasmacytoid lymphocyte",isSelected:!0},{cd:"26",classCd:"",classNm:"ANC calc",isSelected:!0},{cd:"27",classCd:"",classNm:"WBC",isSelected:!0},{cd:"28",classCd:"",classNm:"RBC",isSelected:!0},{cd:"29",classCd:"",classNm:"HGB",isSelected:!0},{cd:"30",classCd:"",classNm:"HCT",isSelected:!0},{cd:"31",classCd:"",classNm:"MCV",isSelected:!0},{cd:"32",classCd:"",classNm:"MCH",isSelected:!0},{cd:"33",classCd:"",classNm:"MCHC",isSelected:!0},{cd:"34",classCd:"",classNm:"RDW",isSelected:!0},{cd:"35",classCd:"",classNm:"Platelet",isSelected:!0},{cd:"36",classCd:"",classNm:"PCT",isSelected:!0},{cd:"37",classCd:"",classNm:"MPV",isSelected:!0},{cd:"38",classCd:"",classNm:"PDW",isSelected:!0},{cd:"39",classCd:"",classNm:"ESR",isSelected:!0}],ct={rbcClassList:[{categoryId:"01",categoryNm:"Size",classInfo:[{classId:"01",classNm:"Normal",degree:"0"},{classId:"02",classNm:"Macrocyte",degree:"0"},{classId:"03",classNm:"Microcyte",degree:"0"},{classId:"04",classNm:"Anisocytosis",degree:"0"}]},{categoryId:"02",categoryNm:"Chromia",classInfo:[{classId:"01",classNm:"Normal",degree:"0"},{classId:"02",classNm:"Hyperchromic",degree:"0"},{classId:"03",classNm:"Hypochromic",degree:"0"},{classId:"04",classNm:"Polychromia",degree:"0"}]},{categoryId:"03",categoryNm:"Shape",classInfo:[{classId:"01",classNm:"Normal",degree:"0"},{classId:"02",classNm:"Poikilocytosis",degree:"0"},{classId:"03",classNm:"Target Cell",degree:"0"},{classId:"04",classNm:"Burr Cell",degree:"0"},{classId:"05",classNm:"Acanthocyte",degree:"0"},{classId:"06",classNm:"Ovalocyte",degree:"0"},{classId:"07",classNm:"Schistocyte",degree:"0"},{classId:"08",classNm:"Sickle Cell",degree:"0"},{classId:"09",classNm:"Stomatocyte",degree:"0"},{classId:"10",classNm:"Tear Drop Cell",degree:"0"},{classId:"11",classNm:"Spherocyte",degree:"0"}]},{categoryId:"05",categoryNm:"Inclusion Body",classInfo:[{classId:"01",classNm:"Howell-Jolly Body",degree:"0"},{classId:"02",classNm:"Basophilic Stippling",degree:"0"}]}],malariaCount:0,currentRbcResults:null},ut=[{categoryId:"01",classId:"02",degree1:"5",degree2:"10",degree3:"20"},{categoryId:"01",classId:"03",degree1:"5",degree2:"10",degree3:"20"},{categoryId:"01",classId:"04",degree1:"5",degree2:"10",degree3:"20"},{categoryId:"02",classId:"02",degree1:"5",degree2:"10",degree3:"20"},{categoryId:"02",classId:"03",degree1:"5",degree2:"10",degree3:"20"},{categoryId:"02",classId:"04",degree1:"5",degree2:"10",degree3:"20"},{categoryId:"03",classId:"03",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"03",classId:"04",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"03",classId:"05",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"03",classId:"06",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"03",classId:"07",degree1:"0.5",degree2:"1",degree3:"2"},{categoryId:"03",classId:"08",degree1:"0.5",degree2:"1",degree3:"2"},{categoryId:"03",classId:"09",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"03",classId:"10",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"03",classId:"11",degree1:"2.5",degree2:"5",degree3:"20"},{categoryId:"05",classId:"01",degree1:"1",degree2:"2",degree3:"3"},{categoryId:"05",classId:"02",degree1:"2.5",degree2:"5",degree3:"20"}],rt=[{id:"01",abbreviation:"NE",fullNm:"Neutrophil",key:"",orderIdx:1},{id:"02",abbreviation:"ME",fullNm:"Metamyelocyte",key:"",orderIdx:4},{id:"03",abbreviation:"MY",fullNm:"Myelocyte",key:"",orderIdx:5},{id:"04",abbreviation:"PR",fullNm:"Promyelocyte",key:"",orderIdx:6},{id:"05",abbreviation:"LY",fullNm:"Lymphocyte",key:"",orderIdx:7},{id:"07",abbreviation:"MO",fullNm:"Monocyte",key:"",orderIdx:10},{id:"08",abbreviation:"EO",fullNm:"Eosinophil",key:"",orderIdx:11},{id:"09",abbreviation:"BA",fullNm:"Basophil",key:"",orderIdx:12},{id:"10",abbreviation:"BL",fullNm:"Blast",key:"",orderIdx:13},{id:"11",abbreviation:"PC",fullNm:"Plasma cell",key:"",orderIdx:14},{id:"12",abbreviation:"NR",fullNm:"nRBC",key:"",orderIdx:15},{id:"13",abbreviation:"GP",fullNm:"Giant platelet",key:"",orderIdx:16},{id:"14",abbreviation:"PA",fullNm:"Platelet aggregation",key:"",orderIdx:17},{id:"15",abbreviation:"AR",fullNm:"Artifact(Smudge)",key:"",orderIdx:19},{id:"16",abbreviation:"MA",fullNm:"Malaria",key:"",orderIdx:18},{id:"61",abbreviation:"LR",fullNm:"Reactive lymphocyte",key:"",orderIdx:8},{id:"62",abbreviation:"LA",fullNm:"Abnormal lymphocyte",key:"",orderIdx:9},{id:"71",abbreviation:"NS",fullNm:"Neutrophil-Segmented",key:"",orderIdx:2},{id:"72",abbreviation:"NB",fullNm:"Neutrophil-Band",key:"",orderIdx:3}],dt=[{id:"01",abbreviation:"NE",fullNm:"Neutrophil",key:"",orderIdx:1},{id:"71",abbreviation:"NS",fullNm:"Neutrophil-Segmented",key:"",orderIdx:2},{id:"72",abbreviation:"NB",fullNm:"Neutrophil-Band",key:"",orderIdx:3},{id:"02",abbreviation:"ME",fullNm:"Metamyelocyte",key:"",orderIdx:4},{id:"03",abbreviation:"MY",fullNm:"Myelocyte",key:"",orderIdx:5},{id:"04",abbreviation:"PR",fullNm:"Promyelocyte",key:"",orderIdx:6},{id:"05",abbreviation:"LY",fullNm:"Lymphocyte",key:"",orderIdx:7},{id:"06",abbreviation:"LA",fullNm:"Abnormal lymphocyte",key:"",orderIdx:8},{id:"07",abbreviation:"MO",fullNm:"Monocyte",key:"",orderIdx:9},{id:"08",abbreviation:"EO",fullNm:"Eosinophil",key:"",orderIdx:10},{id:"09",abbreviation:"BA",fullNm:"Basophil",key:"",orderIdx:11},{id:"10",abbreviation:"BL",fullNm:"Blast",key:"",orderIdx:12},{id:"11",abbreviation:"PC",fullNm:"Plasma cell",key:"",orderIdx:13},{id:"12",abbreviation:"ON",fullNm:"Orthochromic Normoblast",key:"",orderIdx:14},{id:"13",abbreviation:"PN",fullNm:"Polychromic Normoblast",key:"",orderIdx:15},{id:"14",abbreviation:"BN",fullNm:"Basophilic Normoblast",key:"",orderIdx:16},{id:"15",abbreviation:"PE",fullNm:"Proerythroblast",key:"",orderIdx:17},{id:"16",abbreviation:"HC",fullNm:"Histiocyte",key:"",orderIdx:18},{id:"17",abbreviation:"OT",fullNm:"Others",key:"",orderIdx:19}],mt=[{id:"01",abbreviation:"NE",fullNm:"Neutrophil",key:"",orderIdx:1},{id:"02",abbreviation:"LY",fullNm:"Lymphocyte",key:"",orderIdx:2},{id:"03",abbreviation:"MO",fullNm:"Monocyte",key:"",orderIdx:3},{id:"04",abbreviation:"EO",fullNm:"Eosinophil",key:"",orderIdx:4},{id:"05",abbreviation:"BA",fullNm:"Basophil",key:"",orderIdx:5},{id:"06",abbreviation:"BL",fullNm:"Blast",key:"",orderIdx:6},{id:"07",abbreviation:"PC",fullNm:"Plasma cell",key:"",orderIdx:7},{id:"08",abbreviation:"NR",fullNm:"NRBC",key:"",orderIdx:8},{id:"09",abbreviation:"AR",fullNm:"Artifact(Smudge)",key:"",orderIdx:9},{id:"10",abbreviation:"MC",fullNm:"Malignant cell",key:"",orderIdx:10},{id:"11",abbreviation:"MT",fullNm:"Mesothelial cell",key:"",orderIdx:11}],vt=[{abbreviation:"NE",fullNm:"Neutrophil",classId:"01",min:42,max:85,unit:"%"},{abbreviation:"ME",fullNm:"Metamyelocyte",classId:"02",min:0,max:100,unit:"%"},{abbreviation:"MY",fullNm:"Myelocyte",classId:"03",min:0,max:100,unit:"%"},{abbreviation:"PR",fullNm:"Promyelocyte",classId:"04",min:0,max:100,unit:"%"},{abbreviation:"LY",fullNm:"Lymphocyte",classId:"05",min:11,max:49,unit:"%"},{abbreviation:"MO",fullNm:"Monocyte",classId:"07",min:0,max:9,unit:"%"},{abbreviation:"EO",fullNm:"Eosinophil",classId:"08",min:0,max:6,unit:"%"},{abbreviation:"BA",fullNm:"Basophil",classId:"09",min:0,max:2,unit:"%"},{abbreviation:"BL",fullNm:"Blast",classId:"10",min:0,max:100,unit:"%"},{abbreviation:"PC",fullNm:"Plasma cell",classId:"11",min:0,max:100,unit:"%"},{abbreviation:"NR",fullNm:"nRBC",classId:"12",min:0,max:100,unit:"Count"},{abbreviation:"GP",fullNm:"Giant platelet",classId:"13",min:0,max:100,unit:"Count"},{abbreviation:"PA",fullNm:"Platelet aggregation",classId:"14",min:0,max:100,unit:"Count"},{abbreviation:"AR",fullNm:"Artifact(Smudge)",classId:"15",min:0,max:100,unit:"Count"},{abbreviation:"MA",fullNm:"Malaria",classId:"16",min:0,max:100,unit:"Count"},{abbreviation:"LR",fullNm:"Reactive lymphocyte",classId:"61",min:0,max:100,unit:"%"},{abbreviation:"LA",fullNm:"Abnormal lymphocyte",classId:"62",min:0,max:100,unit:"%"}],pt=[{classNm:"Neutrophil",value:"01",checked:!1},{classNm:"Neutrophil-Segmented",value:"71",checked:!1},{classNm:"Neutrophil-Band",value:"72",checked:!1},{classNm:"Metamyelocyte",value:"02",checked:!1},{classNm:"Myelocyte",value:"03",checked:!1},{classNm:"Promyelocyte",value:"04",checked:!1},{classNm:"Lymphocyte",value:"05",checked:!1},{classNm:"Reactive lymphocyte",value:"61",checked:!1},{classNm:"Abnormal lymphocyte",value:"62",checked:!1},{classNm:"Monocyte",value:"07",checked:!1},{classNm:"Eosinophil",value:"08",checked:!1},{classNm:"Basophil",value:"09",checked:!1},{classNm:"Blast",value:"10",checked:!1},{classNm:"Plasma cell",value:"11",checked:!1},{classNm:"nRBC",value:"12",checked:!1},{classNm:"Giant platelet",value:"13",checked:!1},{classNm:"Platelet aggregation",value:"14",checked:!1},{classNm:"Malaria",value:"16",checked:!1},{classNm:"Artifact(Smudge)",value:"15",checked:!1},{classNm:"rbcPrintModel",value:"99999",checked:!1}],gt=[{classNm:"Neutrophil",value:"01",checked:!1},{classNm:"Neutrophil-Segmented",value:"71",checked:!1},{classNm:"Neutrophil-Band",value:"72",checked:!1},{classNm:"Metamyelocyte",value:"02",checked:!1},{classNm:"Myelocyte",value:"03",checked:!1},{classNm:"Promyelocyte",value:"04",checked:!1},{classNm:"Lymphocyte",value:"05",checked:!1},{classNm:"Abnormal lymphocyte",value:"06",checked:!1},{classNm:"Monocyte",value:"07",checked:!1},{classNm:"Eosinophil",value:"08",checked:!1},{classNm:"Basophil",value:"09",checked:!1},{classNm:"Blast",value:"10",checked:!1},{classNm:"Plasma cell",value:"11",checked:!1},{classNm:"Orthochromic Normoblast",value:"12",checked:!1},{classNm:"Polychromic Normoblast",value:"13",checked:!1},{classNm:"Basophilic Normoblast",value:"14",checked:!1},{classNm:"Proerythroblast",value:"15",checked:!1},{classNm:"Histiocyte",value:"16",checked:!1},{classNm:"Others",value:"17",checked:!1}],It=[{classNm:"Neutrophil",value:"01",code:""},{classNm:"Neutrophil-Segmented",value:"71",code:""},{classNm:"Neutrophil-Band",value:"72",code:""},{classNm:"Metamyelocyte",value:"02",code:""},{classNm:"Myelocyte",value:"03",code:""},{classNm:"Promyelocyte",value:"04",code:""},{classNm:"Lymphocyte",value:"05",code:""},{classNm:"Reactive lymphocyte",value:"61",code:""},{classNm:"Abnormal lymphocyte",value:"62",code:""},{classNm:"Monocyte",value:"07",code:""},{classNm:"Eosinophil",value:"08",code:""},{classNm:"Basophil",value:"09",code:""},{classNm:"Blast",value:"10",code:""},{classNm:"Plasma cell",value:"11",code:""},{classNm:"nRBC",value:"12",code:""},{classNm:"Giant platelet",value:"13",code:""},{classNm:"Platelet aggregation",value:"14",code:""},{classNm:"Malaria",value:"16",code:""},{classNm:"Artifact(Smudge)",value:"15",code:""},{classNm:"rbcPrintModel",value:"99999",code:""}],bt=[{categoryId:"01",categoryNm:"Size",classId:"01",classNm:"Normal",code:"0"},{categoryId:"01",categoryNm:"Size",classId:"02",classNm:"Macrocyte",code:"0"},{categoryId:"01",categoryNm:"Size",classId:"03",classNm:"Microcyte",code:"0"},{categoryId:"01",categoryNm:"Size",classId:"04",classNm:"Anisocytosis",code:"0"},{categoryId:"02",categoryNm:"Chromia",classId:"01",classNm:"Normal",code:"0"},{categoryId:"02",categoryNm:"Chromia",classId:"02",classNm:"Hyperchromic",code:"0"},{categoryId:"02",categoryNm:"Chromia",classId:"03",classNm:"Hypochromic",code:"0"},{categoryId:"02",categoryNm:"Chromia",classId:"04",classNm:"Polychromia",code:"0"},{categoryId:"03",categoryNm:"Shape",classId:"01",classNm:"Normal",code:"0"},{categoryId:"03",categoryNm:"Shape",classId:"02",classNm:"Poikilocytosis",code:"0"},{categoryId:"03",categoryNm:"Shape",classId:"03",classNm:"Target Cell",code:"0"},{categoryId:"03",categoryNm:"Shape",classId:"04",classNm:"Burr Cell",code:"0"},{categoryId:"03",categoryNm:"Shape",classId:"05",classNm:"Acanthocyte",code:"0"},{categoryId:"03",categoryNm:"Shape",classId:"06",classNm:"Ovalocyte",code:"0"},{categoryId:"03",categoryNm:"Shape",classId:"07",classNm:"Schistocyte",code:"0"},{categoryId:"03",categoryNm:"Shape",classId:"08",classNm:"Sickle Cell",code:"0"},{categoryId:"03",categoryNm:"Shape",classId:"09",classNm:"Stomatocyte",code:"0"},{categoryId:"03",categoryNm:"Shape",classId:"10",classNm:"Tear Drop Cell",code:"0"},{categoryId:"03",categoryNm:"Shape",classId:"11",classNm:"Spherocyte",code:"0"},{categoryId:"05",categoryNm:"Inclusion Body",classId:"01",classNm:"Howell-Jolly Body",code:"0"},{categoryId:"05",categoryNm:"Inclusion Body",classId:"02",classNm:"Basophilic Stippling",code:"0"}],yt=[{minGPCount:0,minPACount:0}],ft=[{min:0,max:700,wbcCount:50},{min:701,max:1e3,wbcCount:100},{min:1001,max:2e3,wbcCount:150},{min:2001,max:3e3,wbcCount:250}],Ct=[{lisHotKey:"",lisFilePath:"",cbcFilePath:""}],kt={barcodeDirName:"00_Barcode_Image"},ht={howellJollyDirName:"19_Howell_jolly",malariaDirName:"43_InclusionBody_Malaria",noMalariaDirName:"44_InclusionBody_NoMalaria",rbcClassDirName:"03_RBC_Classification",rbcImageDirName:"02_RBC_Image",barcodeDirName:"00_Barcode_Image",wbcClassDirName:"01_WBC_Classification",bfDirName:"02_LowPower_Image",bfHighDirName:"03_HighPower_Image",bfClassDirName:"05_BF_Classification",iaRootPath:"D:/ia_proc"},St={class:"execute"},_t={class:"startDiv"},Et=["disabled"],Nt=["value"],Lt={key:0,class:"startStopP"},Rt={key:1,class:"startStopP"},Tt={class:"stopDiv"},wt=["disabled"],Pt=["value"],At=["disabled"],Dt=["value"],Mt=(0,s.Lk)("span",null," INITIALIZING ",-1);var xt=(0,s.pM)({__name:"execute",setup(e){const t=(0,u.Pj)(),a=(0,s.EW)((()=>t.state.embeddedStatusModule)),i=(0,s.EW)((()=>t.state.userModule)),c=(0,o.KR)("pb"),r=(0,o.KR)([]),d=(0,s.EW)((()=>t.state.commonModule)),m=(0,s.EW)((()=>t.state.executeModule)),v=(0,o.KR)(d.value?.isPause),p=(0,o.KR)(m.value?.isRunningState),g=(0,o.KR)(a.value?.userStop),I=(0,o.KR)(a.value?.isRecoveryRun),b=(0,o.KR)(a.value?.isInit),y=(0,o.KR)(""),f=(0,o.KR)(),C=(0,o.KR)(),k=(0,o.KR)(),h=(0,o.KR)([]),S=(0,s.EW)((()=>t.state.commonModule)),_=(0,o.KR)(!1),E=(0,o.KR)(""),N=(0,o.KR)(!1),L=(0,o.KR)(""),R=(0,o.KR)(""),T=(0,o.KR)([]);(0,s.wB)(i.value,(async(e,t)=>{""!==e.id&&(y.value=e.id,await w())})),(0,s.sV)((async()=>{await w()}));const w=async()=>{c.value="bm"===window.PROJECT_TYPE?"bm":"pb",T.value="bm"===window.PROJECT_TYPE?et:K,r.value="bm"===window.PROJECT_TYPE?U:B,await(0,s.dY)(),await F(),O(),p.value?(E.value="isRunning",_.value=!1):(E.value="start",_.value=!0)};(0,s.wB)(S.value,(e=>{""===e.loginSetData&&(w(),t.dispatch("commonModule/setCommonInfo",{loginSetData:"nn"}))})),(0,s.wB)([d.value],(async e=>{await(0,s.dY)();const[t]=e,{isRunningState:a,bfSelectFiles:l}=t||{};p.value=a,h.value=l,p.value?(E.value="isRunning",_.value=!1):_.value=!0})),(0,s.wB)([a.value,m.value],(async e=>{const[t,a]=e;await(0,s.dY)();const{isPause:l,userStop:o,isRecoveryRun:n,isInit:i}=t||{};v.value=l,g.value=o,I.value=n,b.value=i,v.value?E.value="isPause":g.value&&!I.value?E.value="onRecover":"N"===b.value||""===b.value?E.value="isInit":E.value="start"}));const P=async(e,t)=>{Ye.publish("executeAction",t)},A=e=>{if("start"===e){if(v.value)return Q().embedStatus.restart.bfSelectFiles=h.value,Q().embedStatus.restart.reqUserId=y.value,void P("SEND_DATA",Q().embedStatus.restart);if(p.value)return void D(G.IDS_ERROR_ALREADY_RUNNING);if(g.value)return void(!0===confirm(G.IDS_RECOVER_GRIPPER_CONDITION)&&(Q().embedStatus.recovery.reqUserId=y.value,P("SEND_DATA",Q().embedStatus.recovery)));const e=sessionStorage.getItem("rbcPositionMargin"),a=sessionStorage.getItem("wbcPositionMargin"),l=sessionStorage.getItem("pltPositionMargin");let s=Q().embedStatus.startAction;if(Object.assign(s,{testType:f.value,wbcCount:C.value,stitchCount:k.value,reqUserId:y.value,rbcPositionMargin:e||"0",wbcPositionMargin:a||"0",pltPositionMargin:l||"0"}),console.log(s),"bm"===window.PROJECT_TYPE&&(s={jobCmd:"START",reqUserId:y.value,reqDttm:Q().embedStatus.startAction.reqDttm,orderInfo:[{orderId:"1",cassetNo:"",slotNo:"1",bmNo:"1",patientId:"",patientNm:"",age:"1",gender:"01",testType:"02",stainType:"01",userInputStainType:"",analysisType:f.value,bmSamplingSide:"01",cellCount:C.value,department:"s",stitchCount:k.value}],runningMode:"00",positionMargin:"0"}),"Y"===b.value){P("SEND_DATA",s);const e={startEmbedded:!0};t.dispatch("commonModule/setCommonInfo",e)}}else{if(!p.value)return void D(G.IDS_ERROR_STOP_PROCESS);t.dispatch("embeddedStatusModule/setEmbeddedStatusInfo",{userStop:!0}),Q().embedStatus.stop.reqUserId=y.value,P("SEND_DATA",Q().embedStatus.stop)}},D=e=>{N.value=!0,L.value="success",R.value=e},M=()=>{N.value=!1},x=()=>{"Y"===b.value||"isRunning"===E.value||p.value?D(G.alreadyInitialized):(Q().embedStatus.init.reqUserId=y.value,P("SEND_DATA",Q().embedStatus.init))},O=()=>{const e={...a.value},t={...d.value};b.value=e.isInit,v.value=e.isPause,g.value=e.userStop,I.value=e.isRecoveryRun,p.value=t.isRunningState,_.value=("N"===b.value||""===b.value)&&!p.value},F=async()=>{try{const e=await le();if(e&&e?.data){const t=e.data;if(f.value=t.analysisType,"bm"===window.PROJECT_TYPE)C.value=t.cellAnalyzingCount;else switch(f.value){case"01":C.value=t.cellAnalyzingCount;break;case"04":C.value=t.pbsAnalysisType;break;default:C.value=t.bfAnalysisType}k.value=t.stitchCount}}catch(e){console.log(e)}};return(e,t)=>{const a=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",St,[(0,s.Lk)("div",_t,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),disabled:p.value},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(T.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,Nt)))),128))],8,Et),[[l.u1,f.value]]),_.value?((0,s.uX)(),(0,s.CE)("p",Lt,[(0,s.bF)(a,{icon:["fas","circle-play"],class:(0,n.C4)({startBtn:!0,[E.value]:!0}),onClick:t[1]||(t[1]=e=>"Y"===b.value&&A("start"))},null,8,["class"])])):((0,s.uX)(),(0,s.CE)("p",Rt,[(0,s.bF)(a,{icon:["fas","circle-stop"],class:"stopBtn",onClick:t[2]||(t[2]=e=>A("stop"))})]))]),(0,s.Lk)("div",Tt,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>C.value=e),disabled:p.value},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,Pt)))),128))],8,wt),[[l.u1,C.value]]),(0,s.bo)((0,s.Lk)("select",{class:"stopDivSelect","onUpdate:modelValue":t[4]||(t[4]=e=>k.value=e),disabled:p.value},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(X),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,Dt)))),128))],8,At),[[l.u1,k.value]]),(0,s.Lk)("div",{class:(0,n.C4)(["initBtn",{isInitDisabled:"Y"===b.value}]),onClick:x},[(0,s.bF)(a,{icon:["fas","rotate-right"],style:{"font-size":"0.9rem"},class:(0,n.C4)({disabled:"N"!==b.value})},null,8,["class"]),Mt],2)])]),N.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":N.value,type:L.value,message:R.value,onHide:M,"onUpdate:hideAlert":M},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const Ot=xt;var Kt=Ot;const Bt=(0,s.Lk)("h3",{class:"titleText"},[(0,s.Lk)("span",{class:"greenColor"},"W"),(0,s.eW)("orking "),(0,s.Lk)("span",{class:"greenColor"},"V"),(0,s.eW)("iew ")],-1),Ut={class:"circular-progress-bar mt2"},Xt={class:"progress-ring",width:"120",height:"120"},Ft=["cx","cy","r","stroke-width"],Wt=["cx","cy","r","stroke-width","stroke","stroke-dasharray","stroke-dashoffset"],Gt={class:"slideTime"},$t=(0,s.Lk)("p",{class:"slideTime1 mt2"},"Number of WBCs",-1),Ht={class:"slideCardWrap"},jt={class:"slideContent"},Vt=(0,s.Lk)("p",{class:"mt1"},"INPUT",-1),Yt={class:"slideContent"},qt=(0,s.Lk)("p",{class:"mt1"},"OUTPUT",-1);var Jt=(0,s.pM)({__name:"workingView",props:["parsedData"],setup(e){const t=(0,u.Pj)(),a=(0,s.EW)((()=>t.state.runningInfoModule)),l=(0,s.EW)((()=>t.state.commonModule)),i=(0,s.EW)((()=>t.state.timeModule)),c=(0,o.KR)(0),r=(0,o.KR)(120),d=(0,o.KR)(6),m=(0,o.KR)("#00c2ff"),v=(0,o.KR)(r.value/2),p=(0,o.KR)(2*Math.PI*(v.value-d.value/2)),g=(0,o.KR)(p.value),I=(0,o.KR)(0),b=(0,o.KR)(0),y=(0,o.KR)(""),f=(0,o.KR)(""),C=(0,o.KR)("");let k=null,h=null;const S=(0,o.KR)(F);let _=(0,o.KR)(0),E=(0,o.KR)(0);const N=(0,o.KR)(!1);let L=(0,o.KR)(null);(0,s.wB)((()=>t.state.embeddedStatusModule),(e=>{const t=e.sysInfo;y.value=e.sysInfo.eqStatCd,l.value.isRunningState?(R(t.iCasStat,S.value.input),R(t.oCasStat,S.value.output)):(A(),P());const a=/[1,2,9]/g,s=String(t?.iCasStat);"999999999999"!==String(t?.iCasStat)&&(s.search(a)<0||"111111111111"===t?.oCasStat)&&(R(t.iCasStat,S.value.input),R(t.oCasStat,S.value.output))}),{deep:!0}),(0,s.wB)([l.value],(async e=>{const t=JSON.parse(JSON.stringify(e));t[0].startEmbedded?""===t[0].runningSlotId&&t[0].startEmbedded&&w():P(),t[0].isRunningState||(A(),P())})),(0,s.wB)([a.value],(e=>{const t=JSON.parse(JSON.stringify(e));if("start"===t[0].changeSlideState?.changeSlide.value&&!0===t[0].slideBooleanState?.slideIs.value?T():"stop"===t[0].changeSlideState?.changeSlide.value&&null!==k&&(clearInterval(k),k=null),"afterChange"===t[0].changeSlideState?.changeSlide.value&&(P(),T()),t[0].runningInfo){const e=t[0].runningInfo.slotInfo;if(e&&"03"===e?.stateCd){I.value=Number(e.wbcCount),b.value=Number(e.maxWbcCount),I.value>b.value&&(I.value=b.value);const t=I.value/b.value*100;g.value=p.value*(1-t/100)}}})),(0,s.wB)((()=>y.value),(e=>{"05"===e?L.value=setInterval((()=>{N.value=!N.value}),1e3):(N.value=!1,clearInterval(L.value))})),(0,s.sV)((()=>{y.value="01",S.value.input.forEach((e=>{e.slotState="0"})),S.value.output.forEach((e=>{e.slotState="0"}))}));const R=(e,t)=>{t.forEach(((t,a)=>{t.slotState=e.charAt(a)}))},T=()=>{k||(k=setInterval((()=>{l.value.isRunningState&&(E.value+=1,c.value=E.value%60,sessionStorage.setItem("elapsedTimeCount",String(E.value)),t.dispatch("timeModule/setTimeInfo",{slideTime:Y(E.value)}))}),1e3)),(0,s.xo)((()=>{k&&(clearInterval(k),k=null)}))},w=()=>{h||(h=setInterval((()=>{l.value.isRunningState&&(_.value+=1,sessionStorage.setItem("totalElapsedTimeCount",String(_.value)),t.dispatch("timeModule/setTimeInfo",{totalSlideTime:Y(_.value)}))}),1e3)),(0,s.xo)((()=>{h&&(clearInterval(h),h=null)}))},P=()=>{clearInterval(k),k=null,E.value=0,f.value=Y(0),sessionStorage.removeItem("elapsedTimeCount"),t.dispatch("timeModule/setTimeInfo",{slideTime:"00:00:00"})},A=()=>{clearInterval(h),h=null,_.value=0,C.value=Y(0),sessionStorage.removeItem("totalElapsedTimeCount"),t.dispatch("timeModule/setTimeInfo",{totalSlideTime:"00:00:00"})},D=()=>{switch(y.value){case"01":return"IDLE";case"02":return"READY";case"03":return"ERROR";case"04":return"RUNNING";case"05":return"INITIALIZATION";default:return"UNKNOWN"}},M=(e,t)=>{if("input"===t)switch(e){case"0":return"class-for-state-0";case"1":return"class-for-state-1";case"2":return"class-for-state-2";case"3":return"class-for-state-3";case"4":return"class-for-state-4";default:return""}else switch(e){case"0":return"out-for-state-0";case"1":return"out-for-state-1";default:return"outClassDefault"}};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[Bt,(0,s.Lk)("div",null,[(0,s.Lk)("p",{class:(0,n.C4)({blinkColor:N.value})},(0,n.v_)(D()),3),(0,s.Lk)("p",null,(0,n.v_)(I.value),1),(0,s.Lk)("div",Ut,[((0,s.uX)(),(0,s.CE)("svg",Xt,[(0,s.Lk)("circle",{cx:v.value,cy:v.value,r:v.value-d.value/2,"stroke-width":d.value,stroke:"#ccc",fill:"none"},null,8,Ft),(0,s.Lk)("circle",{cx:v.value,cy:v.value,r:v.value-d.value/2,"stroke-width":d.value,stroke:m.value,fill:"none","stroke-dasharray":p.value,"stroke-dashoffset":g.value},null,8,Wt)])),(0,s.Lk)("p",Gt,(0,n.v_)(i.value.slideTime),1)]),$t,(0,s.Lk)("p",null,(0,n.v_)(i.value.totalSlideTime),1)]),(0,s.Lk)("div",Ht,[(0,s.Lk)("ul",jt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(S.value.input,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.slotNo,class:(0,n.C4)(M(e.slotState,"input"))},null,2)))),128)),Vt]),(0,s.Lk)("ul",Yt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(S.value.output,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.slotNo,class:(0,n.C4)(M(e.slotState,"output"))},null,2)))),128)),qt])])]))}});const Qt=Jt;var zt=Qt;const Zt={class:"orderListTableContainer"},ea=(0,s.Lk)("h3",{class:"titleText"},[(0,s.Lk)("span",{class:"greenColor"},"O"),(0,s.eW)("rder "),(0,s.Lk)("span",{class:"greenColor"},"L"),(0,s.eW)("ist")],-1),ta={class:"orderListTable"},aa=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Barcode ID"),(0,s.Lk)("th",null,"Patient Name"),(0,s.Lk)("th",null,"Order Date"),(0,s.Lk)("th",null,"State")])],-1),la={key:0},sa={key:1},oa=(0,s.Lk)("tr",null,[(0,s.Lk)("td",{colspan:"4"},"Data is empty.")],-1),na=[oa];var ia=(0,s.pM)({__name:"orderList",props:["parsedData","startStatus","pb100aCassette"],setup(e){const t=e,a=(0,o.KR)([]);(0,s.wB)((()=>t.parsedData),(e=>{l(e)}),{deep:!0}),(0,s.wB)((()=>t.pb100aCassette),(e=>{"reset"===e&&(a.value=[],console.log("pb100aCassette ",a.value))}),{deep:!0}),(0,s.wB)((()=>t.startStatus),(e=>{!0===e&&(a.value=[])}),{deep:!0});const l=async e=>{const t=e;if("RUNNING_INFO"===t.jobCmd){const e=t?.slotInfo;if(e){const t=e.barcodeNo,l=a.value.findIndex((e=>e.barcodeId===t));-1===l&&""!==t?a.value.push({barcodeId:t,patientName:e.patientNm,orderDate:p(e.orderDttm),analyzedDttm:p(e.analyzedDttm),state:e.stateCd}):a.value[l]={barcodeId:t,patientName:e.patientNm,orderDate:p(e.orderDttm),analyzedDttm:p(e.analyzedDttm),state:e.stateCd}}}};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",Zt,[ea,(0,s.Lk)("table",ta,[aa,a.value.length>0?((0,s.uX)(),(0,s.CE)("tbody",la,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,((e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:t},[(0,s.Lk)("td",null,(0,n.v_)(e?.barcodeId),1),(0,s.Lk)("td",null,(0,n.v_)(e?.patientName),1),(0,s.Lk)("td",null,(0,n.v_)(e?.analyzedDttm?(0,o.R1)(V)(e?.analyzedDttm):(0,o.R1)(V)(e?.orderDate)),1),(0,s.Lk)("td",null,(0,n.v_)((0,o.R1)(v)("14",e?.state)),1)])))),128))])):((0,s.uX)(),(0,s.CE)("tbody",sa,na))])]))}});const ca=ia;var ua=ca;const ra=[{id:"01",abbreviation:"NE",fullNm:"Neutrophil",key:"",orderIdx:1},{id:"71",abbreviation:"NS",fullNm:"Neutrophil-Segmented",key:"",orderIdx:2},{id:"72",abbreviation:"NB",fullNm:"Neutrophil-Band",key:"",orderIdx:3},{id:"02",abbreviation:"ME",fullNm:"Metamyelocyte",key:"",orderIdx:4},{id:"03",abbreviation:"MY",fullNm:"Myelocyte",key:"",orderIdx:5},{id:"04",abbreviation:"PR",fullNm:"Promyelocyte",key:"",orderIdx:6},{id:"05",abbreviation:"LY",fullNm:"Lymphocyte",key:"",orderIdx:7},{id:"61",abbreviation:"LR",fullNm:"Reactive lymphocyte",key:"",orderIdx:8},{id:"62",abbreviation:"LA",fullNm:"Abnormal lymphocyte",key:"",orderIdx:9},{id:"07",abbreviation:"MO",fullNm:"Monocyte",key:"",orderIdx:10},{id:"08",abbreviation:"EO",fullNm:"Eosinophil",key:"",orderIdx:11},{id:"09",abbreviation:"BA",fullNm:"Basophil",key:"",orderIdx:12},{id:"10",abbreviation:"BL",fullNm:"Blast",key:"",orderIdx:13},{id:"11",abbreviation:"PC",fullNm:"Plasma cell",key:"",orderIdx:14},{id:"12",abbreviation:"NR",fullNm:"nRBC",key:"",orderIdx:15},{id:"13",abbreviation:"GP",fullNm:"Giant platelet",key:"",orderIdx:16},{id:"14",abbreviation:"PA",fullNm:"Platelet aggregation",key:"",orderIdx:17},{id:"16",abbreviation:"MA",fullNm:"Malaria",key:"",orderIdx:18},{id:"15",abbreviation:"AR",fullNm:"Artifact",key:"",orderIdx:19},{id:"17",abbreviation:"SM",fullNm:"Smudge",key:"",orderIdx:20}],da=[{id:"01",abbreviation:"NE",fullNm:"Neutrophil",key:"",orderIdx:1},{id:"71",abbreviation:"NS",fullNm:"Neutrophil-Segmented",key:"",orderIdx:2},{id:"72",abbreviation:"NB",fullNm:"Neutrophil-Band",key:"",orderIdx:3},{id:"02",abbreviation:"ME",fullNm:"Metamyelocyte",key:"",orderIdx:4},{id:"03",abbreviation:"MY",fullNm:"Myelocyte",key:"",orderIdx:5},{id:"04",abbreviation:"PR",fullNm:"Promyelocyte",key:"",orderIdx:6},{id:"05",abbreviation:"LY",fullNm:"Lymphocyte",orderIdx:7},{id:"06",abbreviation:"LA",fullNm:"Abnormal lymphocyte",orderIdx:8},{id:"07",abbreviation:"MO",fullNm:"Monocyte",orderIdx:9},{id:"08",abbreviation:"EO",fullNm:"Eosinophil",orderIdx:10},{id:"09",abbreviation:"BA",fullNm:"Basophil",orderIdx:11},{id:"10",abbreviation:"BL",fullNm:"Blast",orderIdx:12},{id:"11",abbreviation:"PC",fullNm:"Plasma cell",orderIdx:13},{id:"12",abbreviation:"ON",fullNm:"Orthochromic Normoblast",orderIdx:14},{id:"13",abbreviation:"PN",fullNm:"Polychromic Normoblast",orderIdx:15},{id:"14",abbreviation:"BN",fullNm:"Basophilic Normoblast",orderIdx:16},{id:"15",abbreviation:"PE",fullNm:"Proerythroblast",orderIdx:17},{id:"16",abbreviation:"HC",fullNm:"Histiocyte",orderIdx:18},{id:"17",abbreviation:"OT",fullNm:"Others",orderIdx:19}],ma={class:"titleText"},va=(0,s.Lk)("span",{class:"greenColor"},"BM",-1),pa=(0,s.Lk)("span",{class:"greenColor"},"C",-1),ga=(0,s.Lk)("span",{class:"greenColor"},"WBC",-1),Ia=(0,s.Lk)("span",{class:"greenColor"},"C",-1),ba={class:"analysisWbc"},ya={key:0,class:"categories"},fa={class:"categoryNm"},Ca={key:0,class:"mb1 liTitle"},ka={class:"classNm"},ha={key:0,class:"mb1 liTitle"},Sa={style:{"text-align":"center"}},_a={class:"degree"},Ea={key:0,class:"mb1 liTitle"},Na={class:"categories"},La=(0,s.Lk)("ul",{class:"categoryNm"},[(0,s.Lk)("li",null," Total ")],-1),Ra={class:"classNm"},Ta=(0,s.Lk)("ul",{class:"degree"},[(0,s.Lk)("li",null," 100.00 ")],-1),wa={key:0,class:"categories mt1"},Pa={class:"categoryNm"},Aa={key:0,class:"mb1 liTitle"},Da={class:"classNm"},Ma={key:0,class:"mb1 liTitle"},xa={style:{"text-align":"center"}},Oa={class:"degree"},Ka={key:0,class:"mb1 liTitle"},Ba={class:"mt1"},Ua={class:"categoryNm"},Xa={key:0,class:"mb1 liTitle"},Fa={class:"classNm"},Wa={key:0,class:"mb1 liTitle"},Ga={key:0},$a={class:"degree"},Ha={key:0,class:"mb1 liTitle"},ja=(0,s.Lk)("li",null,"-",-1);var Va=(0,s.pM)({__name:"classInfoification",props:["bmIsBoolen","parsedData"],setup(e,{emit:t}){const a=e,l=(0,u.Pj)(),i=(0,s.EW)((()=>l.state.commonModule.siteCd)),c=(0,o.KR)([]),r=(0,o.KR)([]),d=(0,o.KR)([]),m=(0,o.KR)(""),v=(0,o.KR)("0"),p=(0,o.KR)(""),g=t;(0,s.sV)((()=>{b(da,null,!0)})),(0,s.wB)((()=>a.parsedData),((e,t)=>{I(e)}),{deep:!0});const I=async e=>{const t=e;"RUNNING_INFO"===t.jobCmd&&await b({wbcInfo:t.slotInfo},t)},b=async(e,t,l)=>{const s=JSON.parse(JSON.stringify(e));if(s.wbcInfo){m.value=s?.wbcInfo?.testType;const e=a.bmIsBoolen?[s.wbcInfo.bmInfo]:[s.wbcInfo.wbcInfo],t=e,l=a.bmIsBoolen?[da]:[ra];c.value=t[0].length>0?t:l;const o=e=>e.every((e=>e.every((e=>"0"===e.count)))),n=o(c.value);n&&(v.value="0"),r.value=c.value.flat();const i=t.flat().filter((e=>["NR","AR","GP","PA","MC","MA","GP","PA","SM"].includes(e?.title)));d.value=i}else{const e=a.bmIsBoolen?[da]:[ra];c.value=e,r.value=c.value.flat()}if(s&&s.wbcInfo){const e=s.wbcInfo;if(e&&"03"===e?.stateCd){if("00"===e.wbcCount)return;await C(e),p.value=e.maxWbcCount}}const o=t?.iCasStat??"",n=[...o];if(-1!==n.lastIndexOf("2")){const e={classInfo:{wbcInfo:c.value,nonRbcClassList:d,totalCount:v.value,maxWbcCount:p.value,slotId:t.slotInfo.slotId},iCasStatArr:n.lastIndexOf("2")};g("classInfoUpdate",e)}},y=(e,t)=>{e&&""!==e||(e="0000",t="01");const a={"0006":{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","SM","NE","GP","PA","OT"]}},l=a[e]||{includesStr:["AR","NR","GP","PA","MC","SM","MA","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","NE","SM","GP","PA","OT"]};return"01"===t||"04"===t?l.includesStr:l.includesStr2},f=(e,t)=>{const a=y(i.value,m.value);let l=0;for(let s of e)a.includes(s.title)||(l+=Number(s.count));return l},C=async e=>{const t=a.bmIsBoolen?e.bmInfo:e.wbcInfo,l=t;let s="0";s="01"===m.value||"04"===m.value?f(c.value.flat(),l).toFixed(0):f(r.value,l).toFixed(0),v.value=s,await S()},k=e=>{const t=h(i.value,m.value);return!t.includes(e.title)},h=(e,t)=>{const a={"0006":{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","SM","NE","GP","PA","OT"]}},l=a[e]||{includesStr:["AR","NR","GP","PA","MC","SM","MA","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","NE","SM","GP","PA","OT"]};return"01"===t||"04"===t?l.includesStr:l.includesStr2},S=async()=>{const e=c.value.map((e=>e.map((e=>{const t=v.value&&"0"!==v.value?(Number(e.count)/Number(v.value)*100).toFixed(1):"0",a=Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t;return{...e,percent:a}}))));c.value=e},_=e=>e?.name;return(t,a)=>((0,s.uX)(),(0,s.CE)("div",{class:(0,n.C4)([e.bmIsBoolen?"bmclass":""])},[(0,s.Lk)("h3",ma,[e.bmIsBoolen?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[va,(0,s.eW)(),pa,(0,s.eW)("lassification ")],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[ga,(0,s.eW)(),Ia,(0,s.eW)("lassification")],64))]),(0,s.Lk)("div",ba,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.value,((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:a},[k(e)?((0,s.uX)(),(0,s.CE)("div",ya,[(0,s.Lk)("ul",fa,[0===a&&0===t?((0,s.uX)(),(0,s.CE)("li",Ca,"Class")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(_(e)),1)]),(0,s.Lk)("ul",ka,[0===a&&0===t?((0,s.uX)(),(0,s.CE)("li",ha,"Count")):(0,s.Q3)("",!0),(0,s.Lk)("li",Sa,(0,n.v_)(e?.count),1)]),(0,s.Lk)("ul",_a,[0===a&&0===t?((0,s.uX)(),(0,s.CE)("li",Ea,"%")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(v.value&&"0"!==v.value?(Number(e?.count)/Number(v.value)*100).toFixed(Number(e?.count)/Number(v.value)===0?0:1):"0"),1)])])):(0,s.Q3)("",!0)],64)))),128))],64)))),128)),(0,s.Lk)("div",Na,[La,(0,s.Lk)("ul",Ra,[(0,s.Lk)("li",null,(0,n.v_)(v.value||0),1)]),Ta]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.value,((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:a},["OT"===e.title?((0,s.uX)(),(0,s.CE)("div",wa,[(0,s.Lk)("ul",Pa,[0===a&&0===t?((0,s.uX)(),(0,s.CE)("li",Aa,"Class")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(_(e)),1)]),(0,s.Lk)("ul",Da,[0===a&&0===t?((0,s.uX)(),(0,s.CE)("li",Ma,"Count")):(0,s.Q3)("",!0),(0,s.Lk)("li",xa,(0,n.v_)(e?.count),1)]),(0,s.Lk)("ul",Oa,[0===a&&0===t?((0,s.uX)(),(0,s.CE)("li",Ka,"%")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(v.value&&"0"!==v.value?(Number(e?.count)/Number(v.value)*100).toFixed(0):"0"),1)])])):(0,s.Q3)("",!0)],64)))),128))],64)))),128)),(0,s.Lk)("div",Ba,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"categories"},[(0,s.Lk)("ul",Ua,[0===t?((0,s.uX)(),(0,s.CE)("li",Xa,"non-WBC")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(_(e)),1)]),(0,s.Lk)("ul",Fa,[0===t?((0,s.uX)(),(0,s.CE)("li",Wa)):(0,s.Q3)("",!0),(0,s.Lk)("li",null,[(0,s.eW)((0,n.v_)(e?.count)+" ",1),"NR"===e.title||"GP"===e.title?((0,s.uX)(),(0,s.CE)("span",Ga," / "+(0,n.v_)(p.value)+" WBC",1)):(0,s.Q3)("",!0)])]),(0,s.Lk)("ul",$a,[0===t?((0,s.uX)(),(0,s.CE)("li",Ha)):(0,s.Q3)("",!0),ja])])))),128))])])],2))}});const Ya=Va;var qa=Ya;const Ja=[{categoryId:"01",categoryNm:"Size",classInfo:[{classId:"01",classNm:"Normal",degree:"0"},{classId:"02",classNm:"Macrocyte",degree:"0"},{classId:"03",classNm:"Microcyte",degree:"0"},{classId:"04",classNm:"Anisocytosis",degree:"0"}]},{categoryId:"02",categoryNm:"Chromia",classInfo:[{classId:"01",classNm:"Normal",degree:"0"},{classId:"02",classNm:"Hyperchromic",degree:"0"},{classId:"03",classNm:"Hypochromic",degree:"0"},{classId:"04",classNm:"Polychromia",degree:"0"}]},{categoryId:"03",categoryNm:"Shape",classInfo:[{classId:"01",classNm:"Normal",degree:"0"},{classId:"02",classNm:"Poikilocytosis",degree:"0"},{classId:"03",classNm:"Target Cell",degree:"0"},{classId:"04",classNm:"Burr Cell",degree:"0"},{classId:"05",classNm:"Acanthocyte",degree:"0"},{classId:"06",classNm:"Ovalocyte",degree:"0"},{classId:"07",classNm:"Schistocyte",degree:"0"},{classId:"08",classNm:"Sickle Cell",degree:"0"},{classId:"09",classNm:"Stomatocyte",degree:"0"},{classId:"10",classNm:"Tear Drop Cell",degree:"0"},{classId:"11",classNm:"Spherocyte",degree:"0"}]},{categoryId:"05",categoryNm:"Inclusion Body",classInfo:[{classId:"01",classNm:"Howell-Jolly Body",degree:"0"},{classId:"02",classNm:"Basophilic Stippling",degree:"0"}]}],Qa={key:0},za=(0,s.Lk)("h3",{class:"titleText"},[(0,s.Lk)("span",{class:"greenColor"},"Whole"),(0,s.eW)(" Slide Image ")],-1),Za={class:"row"},el=["src","id","onClick"],tl={key:0,class:"mt-3 row"},al=(0,s.Lk)("div",{class:"col"},[(0,s.Lk)("div",{style:{color:"#2798DC"}},"Select Interest Area")],-1),ll={class:"col"},sl={key:1},ol=(0,s.Lk)("h3",{class:"titleText"},[(0,s.Lk)("span",{class:"greenColor"},"RBC"),(0,s.eW)(),(0,s.Lk)("span",{class:"greenColor"},"C"),(0,s.eW)("lassification ")],-1),nl={class:"categoryNm"},il={key:0,class:"mb1 liTitle"},cl={class:"classNmRbc"},ul={key:0,class:"mb1 liTitle"},rl={class:"degree analysis"},dl={key:0,class:"mb1 liTitle"},ml={key:0},vl={key:1},pl={key:0},gl={key:1},Il={class:"categories"},bl=(0,s.Lk)("ul",{class:"categoryNm"},[(0,s.Lk)("li",null,"Others")],-1),yl=(0,s.Lk)("ul",{class:"classNmRbc"},[(0,s.Lk)("li",null,"Platelets"),(0,s.Lk)("li",null,"Malaria")],-1),fl={class:"degree analysis"},Cl={style:{"font-size":"0.7rem"}},kl={style:{"font-size":"0.7rem"}};var hl=(0,s.pM)({__name:"rbcclassification",props:["bmIsBoolen","parsedData"],setup(e,{emit:t}){const a=e,l=(0,o.KR)([]),i=(0,o.KR)(""),c=(0,o.KR)(""),u=(0,o.KR)(""),r=(0,o.KR)("01"),d=(0,o.KR)([]),m=(0,o.KR)([]),v=t;(0,s.sV)((async()=>{await C(),await I({rbcInfo:a.parsedData.slotInfo},"")})),(0,s.wB)((()=>a.parsedData),((e,t)=>{p(e)}),{deep:!0});const p=async e=>{const t=e;if("RUNNING_INFO"===t.jobCmd){const a=e?.slotInfo;a&&"03"===a?.stateCd&&(i.value=a.malariaCount,c.value=a.maxRbcCount,u.value=a.pltCount),await I({rbcInfo:t.slotInfo},t)}},g=(0,o.KR)([]),I=async(e,t)=>{const a=JSON.parse(JSON.stringify(e));if(Array.isArray(a.rbcInfo)){if(r.value=a.rbcInfo[0].testType,!a.rbcInfo[0])return;const e=[a.rbcInfo[0].rbcInfo],l=e[0].length>0?e:[Ja];b(l[0],t),a.rbcInfo[0].lowPowerPath?g.value=a.rbcInfo[0].lowPowerPath.sort((function(e,t){return e.seqNo-t.seqNo})):g.value=[]}else b([Ja][0],t)},b=(e,t)=>{let a=0,s=0,o=0;const n=0!==t.length&&t?JSON.parse(JSON.stringify(t?.slotInfo?.rbcInfo)):JSON.parse(JSON.stringify(e)),i=0!==t.length&&t?JSON.parse(JSON.stringify(t?.slotInfo?.rbcInfo)):JSON.parse(JSON.stringify(e));i.forEach((e=>{e.classInfo.forEach((t=>{"01"===e.categoryId?"04"!==t.classId&&(s+=Number(t.degree)):"02"===e.categoryId?"04"!==t.classId&&(o+=Number(t.degree)):a+=Number(t.degree)}))})),i.forEach(((e,t)=>{e.classInfo.forEach(((l,i)=>{m.value&&m.value.forEach((c=>{if(l.originalDegree=n[t].classInfo[i].degree,c.categoryId===e.categoryId&&c.classId===l.classId){const e=Number(l.degree);let t=0;t="01"===c.categoryId?Number((e/s*100).toFixed(2)):"02"===c.categoryId?Number((e/o*100).toFixed(2)):Number((e/a*100).toFixed(2)),isNaN(t)&&(t=0);const n=e=>l.degree=e;t<Number(c.degree1)?n("0"):t<Number(c.degree2)?n("1"):t<Number(c.degree3)?n("2"):n("3")}}))}))})),i.forEach((e=>{e.classInfo.forEach((t=>{if("01"===e.categoryId&&("01"===t.classId&&(e.classInfo[0].degree="1"),["02","03"].includes(t.classId)&&Number(t.degree)>0&&(e.classInfo[0].degree="0")),"02"===e.categoryId&&("01"===t.classId&&(e.classInfo[0].degree="1"),["02","03"].includes(t.classId)&&Number(t.degree)>0&&(e.classInfo[0].degree="0")),"03"===e.categoryId&&("01"===t.classId&&(e.classInfo[0].degree="1",e.classInfo[1].degree="0"),"01"!==t.classId&&"02"!==t.classId)){var a=Number(e.classInfo[1].degree);Number(t.degree)>a&&(e.classInfo[0].degree="0",e.classInfo[1].degree=t.degree)}}))})),l.value[0]=i;const c=t?.iCasStat??"",u=[...c];if(-1!==u.lastIndexOf("2")){const e={rbc:{rbcInfo:i,slotId:t.slotInfo.slotId},iCasStatArr:u.lastIndexOf("2")};v("rbcUpdate",e)}},y=e=>e?.categoryNm,f=(e,t)=>{if("03"===r.value){const e=d.value.findIndex((e=>e.seqNo===t.seqNo));-1!==e?d.value.splice(e,1):d.value.push(t)}},C=async()=>{try{const e=await ie(),t=e.data;m.value=t}catch(e){}};return(e,t)=>{const a=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)("div",null,["01"!==r.value&&"04"!==r.value?((0,s.uX)(),(0,s.CE)("div",Qa,[za,(0,s.Lk)("div",null,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)([0,6,12,18,24,30],((e,t)=>(0,s.Lk)("div",{key:t,class:"pl-2"},[(0,s.Lk)("div",Za,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(g.value.slice(e,e+6),((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"col-2 p-1"},[(0,s.Lk)("img",{src:e.path,id:e.seqNo,ref_for:!0,ref:"wholeSlideImg",class:"wholeSlideImg",onClick:t=>f(t,e),style:{width:"75px"}},null,8,el)])))),128))])]))),64)),"03"===r.value?((0,s.uX)(),(0,s.CE)("div",tl,[al,(0,s.Lk)("div",ll,[(0,s.Lk)("div",null,(0,n.v_)(d.value.length),1)])])):(0,s.Q3)("",!0)])])):((0,s.uX)(),(0,s.CE)("div",sl,[ol,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"categories"},[(0,s.Lk)("ul",nl,[0===t?((0,s.uX)(),(0,s.CE)("li",il,"Category")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(y(e)),1)]),(0,s.Lk)("ul",cl,[0===t?((0,s.uX)(),(0,s.CE)("li",ul,"Class")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},(0,n.v_)(e?.classNm),1)))),128))]),(0,s.Lk)("ul",rl,[0===t?((0,s.uX)(),(0,s.CE)("li",dl,"Degree")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((t,l)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:l},["01"!==t.classId||"05"===e.categoryId?((0,s.uX)(),(0,s.CE)("li",ml,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(4,(e=>(0,s.bF)(a,{icon:["fas","circle"],key:e,class:(0,n.C4)({degreeActive:e<Number(t?.degree)+2||0,"degree0-img":e>=Number(t?.degree)+1||0})},null,8,["class"]))),64))])):((0,s.uX)(),(0,s.CE)("li",vl,["0"===t.degree?((0,s.uX)(),(0,s.CE)("div",pl,[(0,s.bF)(a,{icon:["fas","circle"]})])):((0,s.uX)(),(0,s.CE)("div",gl,[(0,s.bF)(a,{icon:["fas","circle"],class:"degreeActive"})]))]))],64)))),128))])])))),128))],64)))),128))])),(0,s.Lk)("div",null,[(0,s.Lk)("div",Il,[bl,yl,(0,s.Lk)("ul",fl,[(0,s.Lk)("li",Cl,(0,n.v_)(u.value||0)+" PLT / 1000 RBC",1),(0,s.Lk)("li",kl,(0,n.v_)(i.value||0)+" / "+(0,n.v_)(c.value||0)+" RBC",1)])])])])}}});const Sl=hl;var _l=Sl;const El={class:"mt1"},Nl={key:0,class:"slider"},Ll=["src"];var Rl=(0,s.pM)({__name:"foundingCells",props:["parsedData"],setup(e){const t=window.APP_API_BASE_URL||"http://192.168.0.131:3002",a=e,n=(0,o.KR)([]);function i(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function c(e){if(!e||0===e.length)return[];const a=[],l=e?.path.match(/^(.*\\)\d+_Real_Time\\/)?.[0],s=e?.path.match(/[^\\]*$/)[0],o=`${t}/images/getImageRealTime?folder=${l}&imageName=${s}`;return o&&a.unshift(o),a}return(0,s.wB)((()=>a.parsedData),((e,t)=>{const a=e?.slotInfo;if(a){let e={};if("03"===a.stateCd&&a.runningPath&&a.runningPath.length>0){const t=a.runningPath.map((e=>({...e,path:e.path,id:i()})));e=t}if(e.length>0){let t=!1;for(const a of e){if(n.value.find((e=>e.path===a.path))){t=!0;break}n.value.unshift(a)}}}}),{deep:!0}),(e,t)=>((0,s.uX)(),(0,s.CE)("div",El,[(0,s.bF)(l.eB,{name:"fade",mode:"out-in"},{default:(0,s.k6)((()=>[n.value.length>0?((0,s.uX)(),(0,s.CE)("div",Nl,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.value,(e=>((0,s.uX)(),(0,s.CE)(s.FK,{key:e.id},[c(e)?((0,s.uX)(),(0,s.CE)("img",{key:0,src:c(e),alt:"Slide"},null,8,Ll)):(0,s.Q3)("",!0)],64)))),128))])):(0,s.Q3)("",!0)])),_:1})]))}}),Tl=a(6262);const wl=(0,Tl.A)(Rl,[["__scopeId","data-v-e5e792d0"]]);var Pl=wl;const Al=(0,s.Lk)("h3",{class:"titleText"},[(0,s.Lk)("span",{class:"greenColor"},"W"),(0,s.eW)("orking "),(0,s.Lk)("span",{class:"greenColor"},"V"),(0,s.eW)("iew ")],-1),Dl={class:"circular-progress-bar mt2"},Ml={class:"progress-ring",width:"120",height:"120"},xl=["cx","cy","r","stroke-width"],Ol=["cx","cy","r","stroke-width","stroke","stroke-dasharray","stroke-dashoffset"],Kl={class:"slideTime"},Bl=(0,s.Lk)("p",{class:"slideTime1 mt2"},"Number of WBCs",-1),Ul={class:"slideCardWrap"},Xl={class:"slideContent pb100a"},Fl={class:"mt1"};var Wl=(0,s.pM)({__name:"workingView100A",props:["parsedData","pb100aCassette"],setup(e){const t=(0,u.Pj)(),a=(0,s.EW)((()=>t.state.runningInfoModule)),l=(0,s.EW)((()=>t.state.commonModule)),i=(0,s.EW)((()=>t.state.timeModule)),c=e,r=(0,o.KR)(0),d=(0,o.KR)(120),m=(0,o.KR)(6),v=(0,o.KR)("#00c2ff"),p=(0,o.KR)(d.value/2),g=(0,o.KR)(2*Math.PI*(p.value-m.value/2)),I=(0,o.KR)(g.value),b=(0,o.KR)(0),y=(0,o.KR)(0),f=(0,o.KR)(""),C=(0,o.KR)(""),k=(0,o.KR)("");let h=null,S=null;const _=(0,o.KR)(W);let E=(0,o.KR)(0),N=(0,o.KR)(0);const L=(0,o.KR)(!1);let R=(0,o.KR)(null);const T=(0,o.KR)("0"),w=(0,o.KR)("0");(0,s.wB)((()=>c.pb100aCassette),(e=>{"reset"===e&&(O(),M(),x())}),{deep:!0}),(0,s.wB)((()=>t.state.embeddedStatusModule),(e=>{const t=e.sysInfo;f.value=e.sysInfo.eqStatCd,l.value.isRunningState?(A(t.iCasStat,_.value.input),A(t.oCasStat,_.value.output)):(O(),x());const a=/[1,2,9]/g,s=String(t?.iCasStat);"999999999999"!==String(t?.iCasStat)&&(s.search(a)<0||"111111111111"===t?.oCasStat)&&(A(t.iCasStat,_.value.input),A(t.oCasStat,_.value.output))}),{deep:!0}),(0,s.wB)([l.value],(async e=>{const t=JSON.parse(JSON.stringify(e));t[0].startEmbedded?""===t[0].runningSlotId&&t[0].startEmbedded&&M():x(),t[0].isRunningState||(O(),x())})),(0,s.wB)([a.value],(e=>{const t=JSON.parse(JSON.stringify(e));if(T.value=t[0]?.runningInfo?.iCasExist,w.value=t[0]?.runningInfo?.oCasExist,"start"===t[0].changeSlideState?.changeSlide.value&&!0===t[0].slideBooleanState?.slideIs.value?D():"stop"===t[0].changeSlideState?.changeSlide.value&&null!==h&&(clearInterval(h),h=null),"afterChange"===t[0].changeSlideState?.changeSlide.value&&(console.log("afterChange"),x(),D()),t[0].runningInfo){const e=t[0].runningInfo.slotInfo;if(e&&"03"===e?.stateCd){b.value=Number(e.wbcCount),y.value=Number(e.maxWbcCount),b.value>y.value&&(b.value=y.value);const t=b.value/y.value*100;I.value=g.value*(1-t/100)}}}));const P=e=>{switch(e){case"0":return"EMPTY";case"1":return"EXIST";case"2":return"FULL"}};(0,s.wB)((()=>f.value),(e=>{"05"===e?R.value=setInterval((()=>{L.value=!L.value}),1e3):(L.value=!1,clearInterval(R.value))})),(0,s.sV)((()=>{f.value="01",_.value.input.forEach((e=>{e.slotState="0"})),_.value.output.forEach((e=>{e.slotState="0"}))}));const A=(e,t)=>{t.forEach(((t,a)=>{t.slotState=e.charAt(a)}))},D=()=>{h||(h=setInterval((()=>{l.value.isRunningState&&(N.value+=1,r.value=N.value%60,sessionStorage.setItem("elapsedTimeCount",String(N.value)),t.dispatch("timeModule/setTimeInfo",{slideTime:Y(N.value)}))}),1e3)),(0,s.xo)((()=>{h&&(clearInterval(h),h=null)}))},M=()=>{S||(S=setInterval((()=>{l.value.isRunningState&&(E.value+=1,sessionStorage.setItem("totalElapsedTimeCount",String(E.value)),t.dispatch("timeModule/setTimeInfo",{totalSlideTime:Y(E.value)}))}),1e3)),(0,s.xo)((()=>{S&&(clearInterval(S),S=null)}))},x=()=>{clearInterval(h),h=null,N.value=0,C.value=Y(0),sessionStorage.removeItem("elapsedTimeCount"),t.dispatch("timeModule/setTimeInfo",{slideTime:"00:00:00"})},O=()=>{clearInterval(S),S=null,E.value=0,k.value=Y(0),sessionStorage.removeItem("totalElapsedTimeCount"),t.dispatch("timeModule/setTimeInfo",{totalSlideTime:"00:00:00"})},K=()=>{switch(f.value){case"01":return"IDLE";case"02":return"READY";case"03":return"ERROR";case"04":return"RUNNING";case"05":return"INITIALIZATION";default:return"UNKNOWN"}},B=(e,t)=>{if("input"===t)switch(e){case"0":return"class-for-state-0";case"1":return"class-for-state-1";case"2":return"class-for-state-2";case"3":return"class-for-state-3";case"4":return"class-for-state-4";default:return""}else switch(e){case"0":return"out-for-state-0";case"1":return"out-for-state-1";default:return"outClassDefault"}};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[Al,(0,s.Lk)("div",null,[(0,s.Lk)("p",{class:(0,n.C4)({blinkColor:L.value})},(0,n.v_)(K()),3),(0,s.Lk)("p",null,(0,n.v_)(b.value),1),(0,s.Lk)("div",Dl,[((0,s.uX)(),(0,s.CE)("svg",Ml,[(0,s.Lk)("circle",{cx:p.value,cy:p.value,r:p.value-m.value/2,"stroke-width":m.value,stroke:"#ccc",fill:"none"},null,8,xl),(0,s.Lk)("circle",{cx:p.value,cy:p.value,r:p.value-m.value/2,"stroke-width":m.value,stroke:v.value,fill:"none","stroke-dasharray":g.value,"stroke-dashoffset":I.value},null,8,Ol)])),(0,s.Lk)("p",Kl,(0,n.v_)(i.value.slideTime),1)]),Bl,(0,s.Lk)("p",null,(0,n.v_)(i.value.totalSlideTime),1)]),(0,s.Lk)("div",Ul,[(0,s.Lk)("ul",Xl,[(0,s.Lk)("p",null,"INPUT : "+(0,n.v_)(P(T.value)),1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(_.value.input,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.slotNo,class:(0,n.C4)(B(e.slotState,"input"))},null,2)))),128)),(0,s.Lk)("p",Fl,"OUTPUT : "+(0,n.v_)(P(w.value)),1)])])]))}});const Gl=Wl;var $l=Gl;const Hl={class:"contentLeft"},jl={class:"contentRight"},Vl={class:"contentBottom"};var Yl=(0,s.pM)({__name:"index",props:["parsedData","isClass","startStatus","pb100aCassette"],setup(e,{emit:t}){const a=t,n=(0,o.KR)(!1),i=e,c=(0,o.KR)("");(0,s.sV)((async()=>{"bm"===window.PROJECT_TYPE?n.value=!0:c.value=window.PB_VERSION}));const u=e=>{a("rbcAppUpdate",e)},r=e=>{a("classAppUpdateLast",e)};return(t,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bo)((0,s.Lk)("div",Hl,[(0,s.bF)(Kt),(0,s.bF)(O,{parsedData:i.parsedData,pb100aCassette:e.pb100aCassette},null,8,["parsedData","pb100aCassette"]),(0,s.bF)(ua,{parsedData:i.parsedData,startStatus:i.startStatus,pb100aCassette:e.pb100aCassette},null,8,["parsedData","startStatus","pb100aCassette"])],512),[[l.aG,i.isClass]]),(0,s.bo)((0,s.Lk)("div",jl,["100a"!==c.value?((0,s.uX)(),(0,s.Wv)(zt,{key:0,parsedData:i.parsedData,class:"contentRightChild"},null,8,["parsedData"])):((0,s.uX)(),(0,s.Wv)($l,{key:1,parsedData:i.parsedData,pb100aCassette:e.pb100aCassette,class:"contentRightChild"},null,8,["parsedData","pb100aCassette"])),n.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(_l,{key:2,onRbcUpdate:u,parsedData:i.parsedData,class:"contentRightChild"},null,8,["parsedData"])),(0,s.bF)(qa,{onClassInfoUpdate:r,parsedData:i.parsedData,bmIsBoolen:n.value,class:"contentRightChild"},null,8,["parsedData","bmIsBoolen"]),(0,s.Lk)("div",Vl,[(0,s.bF)(Pl,{parsedData:i.parsedData},null,8,["parsedData"])])],512),[[l.aG,i.isClass]])],64))}});const ql=(0,Tl.A)(Yl,[["__scopeId","data-v-de316cce"]]);var Jl=ql,Ql=(0,s.pM)({__name:"HomeView",setup(e){return(e,t)=>{const a=(0,s.g2)("Fragment");return(0,s.uX)(),(0,s.Wv)(a,null,{default:(0,s.k6)((()=>[(0,s.bF)(Jl)])),_:1})}}});const zl=Ql;var Zl=zl;const es=Z(),ts=async e=>es.httpPost(ee.user.register,e),as=async e=>es.httpPost(ee.user.login,e),ls=async e=>es.httpGet(ee.user.getUsers,e),ss=async e=>es.httpPut(ee.user.userDataPut,e,"",!0),os=async()=>es.httpGet(ee.user.userIp,""),ns={class:"joinContent"},is=(0,s.Lk)("p",{class:"mt2 mb4"},"CREATE ACCOUNT",-1),cs={class:"joinWrapper"},us=(0,s.Lk)("span",{class:"loginTitle"},"ID",-1),rs=(0,s.Lk)("span",{class:"loginTitle"},"password",-1),ds=(0,s.Lk)("span",{class:"loginTitle"},"Repeat password",-1),ms=(0,s.Lk)("span",{class:"loginTitle"},"name",-1),vs=(0,s.Lk)("span",{class:"loginTitle"},"Employee No",-1),ps=(0,s.Lk)("span",{class:"loginTitle"},"user Type",-1),gs=(0,s.Lk)("option",{value:"admin"},"Admin",-1),Is=(0,s.Lk)("option",{value:"normal"},"Normal",-1),bs=[gs,Is];var ys=(0,s.pM)({__name:"index",setup(e){const t=(0,o.KR)(""),a=(0,o.KR)(""),n=(0,o.KR)(""),i=(0,o.KR)(""),c=(0,o.KR)(""),u=(0,o.KR)("admin"),r=(0,o.KR)(!1),d=(0,o.KR)(""),m=(0,o.KR)(""),v=()=>{UI.push("/user/login")},p=async()=>{const e=await os(),l=new Date,s={userId:a.value,password:c.value,name:n.value,employeeNo:t.value,userType:u.value,subscriptionDate:l,state:"",pcIp:e.data};try{const e=await ts(s);e&&(await g("registration successful"),await UI.push("/user/login"))}catch(o){console.log(o)}},g=async e=>{r.value=!0,d.value="success",m.value=e},I=()=>{r.value=!1};return(e,o)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",ns,[is,(0,s.Lk)("div",null,[(0,s.Lk)("ul",cs,[(0,s.Lk)("li",null,[us,(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e)},null,512),[[l.Jo,a.value]])]),(0,s.Lk)("li",null,[rs,(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"text","onUpdate:modelValue":o[1]||(o[1]=e=>c.value=e)},null,512),[[l.Jo,c.value]])]),(0,s.Lk)("li",null,[ds,(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"text","onUpdate:modelValue":o[2]||(o[2]=e=>i.value=e)},null,512),[[l.Jo,i.value]])]),(0,s.Lk)("li",null,[ms,(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"text","onUpdate:modelValue":o[3]||(o[3]=e=>n.value=e)},null,512),[[l.Jo,n.value]])]),(0,s.Lk)("li",null,[vs,(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"text","onUpdate:modelValue":o[4]||(o[4]=e=>t.value=e)},null,512),[[l.Jo,t.value]])]),(0,s.Lk)("li",null,[ps,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":o[5]||(o[5]=e=>u.value=e)},bs,512),[[l.u1,u.value]])])]),(0,s.Lk)("div",{class:"joinBtn"},[(0,s.Lk)("button",{class:"defaultBtn",type:"button",onClick:p},"Create Account"),(0,s.Lk)("button",{class:"defaultBtn",type:"button",onClick:v},"Back")])])]),r.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":r.value,type:d.value,message:m.value,onHide:I,"onUpdate:hideAlert":I},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const fs=ys;var Cs=fs;const ks=(0,o.KR)(""),hs=((0,o.KR)(""),(0,o.KR)("")),Ss=(0,o.KR)(vt),_s=(0,o.Kh)({value:[]}),Es="bm"===window.PROJECT_TYPE,Ns={testTypeCd:Es?"02":"01",pbAnalysisType:Es?"500":"100",wbcPositionMargin:"0",rbcPositionMargin:"0",pltPositionMargin:"0",pbsAnalysisType:"100",stitchCount:"1",bfAnalysisType:"100",iaRootPath:Es?"D:\\BMIA_proc":"D:\\PBIA_proc",isNsNbIntegration:!1,isAlarm:!1,alarmCount:"5",keepPage:!1,backupPath:"",backupStartDate:new Date,backupEndDate:new Date,userId:""},Ls=async()=>{let e;const t=await le();t&&t.data&&(e=t.data),ks.value=e?"put":"post";const a={analysisType:Ns.testTypeCd,cellAnalyzingCount:Ns.pbAnalysisType,wbcPositionMargin:Ns.wbcPositionMargin,rbcPositionMargin:Ns.rbcPositionMargin,pltPositionMargin:Ns.pltPositionMargin,pbsAnalysisType:Ns.pbsAnalysisType,stitchCount:Ns.stitchCount,bfAnalysisType:Ns.bfAnalysisType,iaRootPath:Ns.iaRootPath,isNsNbIntegration:Ns.isNsNbIntegration,isAlarm:Ns.isAlarm,alarmCount:Ns.alarmCount,keepPage:Ns.keepPage,backupPath:Ns.backupPath,backupStartDate:Ns.backupStartDate.toISOString().split("T")[0],backupEndDate:Ns.backupEndDate.toISOString().split("T")[0]};if("post"===ks.value)try{const e=await ae(a);e&&(sessionStorage.setItem("isNsNbIntegration",Ns?.isNsNbIntegration?"Y":"N"),sessionStorage.setItem("wbcPositionMargin",String(Ns?.wbcPositionMargin)),sessionStorage.setItem("rbcPositionMargin",String(Ns?.rbcPositionMargin)),sessionStorage.setItem("pltPositionMargin",String(Ns?.pltPositionMargin)),sessionStorage.setItem("iaRootPath",String(Ns?.iaRootPath)),sessionStorage.setItem("keepPage",String(Ns?.keepPage)))}catch(l){console.log(l)}},Rs=async e=>{const t="bm"===window.PROJECT_TYPE?da:ra;for(const s in t)t[s].userName=e,t[s].orderIdx=s;const a=await $e();a&&(0===a?.data.length?hs.value="post":hs.value="put");try{"post"===hs.value&&await Ge(t)}catch(l){console.log(l)}},Ts=async e=>{try{const e=await fe();e&&(!e?.data||e?.data instanceof Array&&0===e?.data.length)&&await be({normalRangeItems:Ss.value})}catch(t){console.log(t)}},ws=async e=>{await Ps();const t=[];_s.value.forEach((e=>{e.classInfo.forEach((a=>{t.push({categoryId:e.categoryId,categoryNm:e.categoryNm,classId:a.classId,classNm:a.classNm,degree1:a.degree1,degree2:a.degree2,degree3:a.degree3})}))}));try{const e=await ie();e.data||await oe(t)}catch(a){console.error(a)}},Ps=async()=>{_s.value=ct.rbcClassList.map((e=>({...e,classInfo:e.classInfo.map((t=>{const a=ut.find((a=>a.categoryId===e.categoryId&&a.classId===t.classId));return{...t,degree1:a?.degree1||0,degree2:a?.degree2||0,degree3:a?.degree3||0}}))})))},As={class:"uimdLogin"},Ds={class:"loginContent"},Ms=(0,s.Lk)("p",{class:"loginTitle"},[(0,s.Lk)("span",{class:"loginColorSpan"},"U"),(0,s.eW)("IMD")],-1),xs=(0,s.Lk)("p",{class:"loginP mt2"},"Unique Idea Medical Device",-1),Os={class:"mt3 loginDiv"},Ks={class:"loginUl"};var Bs=(0,s.pM)({__name:"index",setup(e){const t=(0,u.Pj)(),a=(0,o.KR)(""),n=(0,o.KR)(""),i=((0,s.nI)(),(0,o.KR)(!1)),c=(0,o.KR)(""),r=(0,o.KR)(""),d=(0,o.KR)(!1);(0,s.sV)((()=>{m()}));const m=()=>{const e=JSON.parse(localStorage.getItem("user")||"{}");e.userId&&e.password&&(n.value=e.userId,a.value=e.password,p())},v=()=>{UI.push("/user/join")},p=async()=>{const e={userId:n.value,password:a.value};if(""!==e.userId&&""!==e.password)try{const a=await as(e);a?.data?.user?(await Ls(),await Rs(String(a.data?.user.id)),await Ts(String(a.data?.user.id)),await ws(String(a.data?.user.id)),await t.dispatch("userModule/setUserAction",a.data?.user),sessionStorage.setItem("user",JSON.stringify(a.data.user)),d.value&&localStorage.setItem("user",JSON.stringify(a.data.user)),await g(a?.data?.user.userId)):b("Login failed.")}catch(l){b("server Err."),console.log(l)}else b("Login failed.")},g=async e=>{try{const a=await os();"1"===a.data||window.APP_API_BASE_URL&&window.APP_API_BASE_URL.includes(a.data)?(await t.dispatch("commonModule/setCommonInfo",{viewerCheck:"main"}),await I(e,String(a.data),"main"),sessionStorage.setItem("pcIp",JSON.stringify(a.data))):(await t.dispatch("commonModule/setCommonInfo",{viewerCheck:"viewer"}),await I(e,a.data,"viewer"),sessionStorage.setItem("pcIp",JSON.stringify(a.data)))}catch(a){console.log(a)}},I=async(e,a,l)=>{const s={userId:e,password:"",name:"",employeeNo:"",userType:"",subscriptionDate:"",state:"",pcIp:a};try{const e=await ss(s);e&&(b("login successful."),"main"===l?(await UI.push("/"),await document.documentElement.requestFullscreen()):(await UI.push("/dataBase"),await document.documentElement.requestFullscreen()),await t.dispatch("commonModule/setCommonInfo",{loginSetData:""}),await t.dispatch("commonModule/setCommonInfo",{resFlag:!1}))}catch(o){console.log(o)}},b=e=>{i.value=!0,c.value="success",r.value=e},y=()=>{i.value=!1};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",As,[(0,s.Lk)("div",Ds,[Ms,xs,(0,s.Lk)("div",Os,[(0,s.Lk)("ul",Ks,[(0,s.Lk)("li",null,[(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),placeholder:"ID"},null,512),[[l.Jo,n.value]])]),(0,s.Lk)("li",null,[(0,s.bo)((0,s.Lk)("input",{class:"loginInput",type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>a.value=e),placeholder:"password"},null,512),[[l.Jo,a.value]])])]),(0,s.Lk)("div",{class:"loginBtn"},[(0,s.Lk)("button",{type:"button",onClick:p},"Login"),(0,s.Lk)("button",{type:"button",onClick:v},"Add User")])])])]),i.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":i.value,type:c.value,message:r.value,onHide:y,"onUpdate:hideAlert":y},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Us=Bs;var Xs=Us,Fs=a(2903);const Ws=Z(),Gs=async e=>Ws.httpPost(ee.backUp.backUpDate,e),$s={class:"settingTable"},Hs=(0,s.Lk)("th",null,"Analysis Type",-1),js={colspan:"2"},Vs=["value"],Ys={key:0,rowspan:"4"},qs={key:1},Js=(0,s.Lk)("th",null,"Cell Analyzing Count",-1),Qs=["value"],zs={key:0},Zs=(0,s.Lk)("th",null,"Wbc Position Margin",-1),eo=["value"],to={key:1},ao=(0,s.Lk)("th",null,"Rbc Position Margin",-1),lo=["value"],so={key:2},oo=(0,s.Lk)("th",null,"Plt Position Margin",-1),no=["value"],io={key:3},co=(0,s.Lk)("th",null,"WBC Diff",-1),uo=(0,s.Lk)("th",null,"Cell Analyzing Count",-1),ro=["value"],mo={key:4},vo=(0,s.Lk)("th",{rowspan:"2"},"PBS Analysis Values",-1),po=(0,s.Lk)("th",null," Cell Analyzing Count ",-1),go=["value"],Io={key:0},bo=(0,s.Lk)("th",null,"Stitch Count",-1),yo=["value"],fo={key:5},Co=(0,s.Lk)("th",null,"BF Analysis Values",-1),ko=(0,s.Lk)("th",null,"Cell Analyzing Count",-1),ho=["value"],So=(0,s.Lk)("th",null,"IA Root Path",-1),_o={colspan:"2"},Eo=["value"],No=(0,s.Lk)("th",null,"NS/NB Integration",-1),Lo=(0,s.Lk)("th",null,"Alarm Timer (sec)",-1),Ro={key:6},To=(0,s.Lk)("th",null,"Keep WBC Page",-1),wo={class:"backupDiv"},Po={class:"backupDivChild"},Ao=(0,s.Lk)("h5",{class:"mb1"},"Backup and Restore",-1),Do={class:"settingDatePickers"},Mo=["value"];var xo=(0,s.pM)({__name:"cellImageAnalyzed",setup(e){const t=(0,o.KR)(!1),a=(0,o.KR)(""),i=(0,o.KR)(""),c=(0,o.KR)([]),r=(0,o.KR)("01"),d=(0,o.KR)("100"),m=(0,o.KR)("0"),v=(0,o.KR)("0"),p=(0,o.KR)("0"),g=(0,o.KR)("100"),I=(0,o.KR)("1"),b=(0,o.KR)("100"),y=(0,o.KR)("bm"===window.PROJECT_TYPE?"D:\\BMIA_proc":"D:\\PBIA_proc"),f=(0,o.KR)("bm"===window.PROJECT_TYPE?"D:\\BM_backup":"D:\\PB_backup"),C=(0,o.KR)(!1),k=(0,o.KR)(!1),h=(0,o.KR)("5"),S=(0,o.KR)(!1),_=(0,o.KR)(H()().local().toDate()),E=(0,o.KR)(H()().local().toDate()),N=(0,o.KR)(""),L=(0,o.KR)([]),R=(0,o.KR)([]),T=(0,o.KR)(""),w=(0,o.KR)("pb"),P=(0,o.KR)([]),A=(0,u.Pj)(),D=async()=>{const e={startDate:H()(_.value).add(1,"day").local().toDate().toISOString().split("T")[0],endDate:H()(E.value).add(1,"day").local().toDate().toISOString().split("T")[0],backupPath:f.value,sourceFolderPath:`${y.value}`},t=await Gs(e);t&&console.log(t)};(0,s.sV)((async()=>{await(0,s.dY)(),r.value="bm"===window.PROJECT_TYPE?"02":"01",w.value="bm"===window.PROJECT_TYPE?"bm":"pb",P.value="bm"===window.PROJECT_TYPE?et:Ze,c.value="bm"===window.PROJECT_TYPE?at:tt,await x(),await M()}));const M=async()=>{try{const e=await We();if(e)if(e?.data){const t=e.data,a=JSON.parse(JSON.stringify(t)),l=JSON.parse(JSON.stringify(t)),s="bm"===window.PROJECT_TYPE?"BMIA_proc":"PBIA_proc",o="bm"===window.PROJECT_TYPE?"BM_backup":"PB_backup";for(const e in t)a[e]=a[e]+`\\${s}`,l[e]=l[e]+`\\${o}`;L.value=a,R.value=l}else;}catch(e){console.log(e)}},x=async()=>{try{const e=await le();if(e)if(e?.data){N.value="put";const t=e.data;T.value=String(t.id),r.value=t.analysisType,d.value=t.cellAnalyzingCount,m.value=t.wbcPositionMargin,v.value=t.rbcPositionMargin,p.value=t.pltPositionMargin,g.value=t.pbsAnalysisType,I.value=t.stitchCount,b.value=t.bfAnalysisType,y.value=t.iaRootPath,f.value=t.backupPath,C.value=t.isNsNbIntegration,k.value=t.isAlarm,h.value=t.alarmCount,S.value=t.keepPage,_.value=H()(t.backupStartDate).local().toDate(),E.value=H()(t.backupEndDate).local().toDate()}else console.log(null),N.value="post"}catch(e){console.log(e)}},O=async()=>{const e={analysisType:r.value,cellAnalyzingCount:d.value,wbcPositionMargin:m.value,rbcPositionMargin:v.value,pltPositionMargin:p.value,pbsAnalysisType:g.value,stitchCount:I.value,bfAnalysisType:b.value,iaRootPath:y.value,isNsNbIntegration:C.value,isAlarm:k.value,alarmCount:h.value,keepPage:S.value,backupPath:f.value,backupStartDate:H()(_.value).add(1,"day").local().toDate().toISOString().split("T")[0],backupEndDate:H()(E.value).add(1,"day").local().toDate().toISOString().split("T")[0]};try{let t={};if(t="post"===N.value?await ae(e):await se(e,T.value),t){const e="post"===N.value?"save successful":G.UPDATE_SUCCESSFULLY;X(e);const a=t?.data;await A.dispatch("dataBaseSetDataModule/setDataBaseSetData",{isNsNbIntegration:a?.isNsNbIntegration?"Y":"N"}),sessionStorage.setItem("isNsNbIntegration",a.isNsNbIntegration?"Y":"N"),sessionStorage.setItem("wbcPositionMargin",a?.wbcPositionMargin),sessionStorage.setItem("rbcPositionMargin",a?.rbcPositionMargin),sessionStorage.setItem("pltPositionMargin",a?.pltPositionMargin),sessionStorage.setItem("iaRootPath",a?.iaRootPath),sessionStorage.setItem("keepPage",String(a?.keepPage)),console.log(t)}}catch(t){console.log(t)}},K=()=>{C.value=!C.value},B=()=>{k.value=!k.value},U=()=>{S.value=!S.value},X=e=>{t.value=!0,a.value="success",i.value=e},F=()=>{t.value=!1};return(e,u)=>{const N=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("table",$s,[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[Hs,(0,s.Lk)("td",js,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":u[0]||(u[0]=e=>r.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(P.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,Vs)))),128))],512),[[l.u1,r.value]])])]),(0,s.Lk)("tr",null,["pb"===w.value?((0,s.uX)(),(0,s.CE)("th",Ys,"WBC Diff Analysis Values")):(0,s.Q3)("",!0),"classInfo"===w.value?((0,s.uX)(),(0,s.CE)("th",qs,"BM Diff Analysis Values")):(0,s.Q3)("",!0),Js,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":u[1]||(u[1]=e=>d.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,Qs)))),128))],512),[[l.u1,d.value]])])]),"pb"===w.value?((0,s.uX)(),(0,s.CE)("tr",zs,[Zs,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":u[2]||(u[2]=e=>m.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(nt),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,eo)))),128))],512),[[l.u1,m.value]])])])):(0,s.Q3)("",!0),"pb"===w.value?((0,s.uX)(),(0,s.CE)("tr",to,[ao,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":u[3]||(u[3]=e=>v.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(ot),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,lo)))),128))],512),[[l.u1,v.value]])])])):(0,s.Q3)("",!0),"pb"===w.value?((0,s.uX)(),(0,s.CE)("tr",so,[oo,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":u[4]||(u[4]=e=>p.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(ot),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,no)))),128))],512),[[l.u1,p.value]])])])):(0,s.Q3)("",!0),"pb"===w.value?((0,s.uX)(),(0,s.CE)("tr",io,[co,uo,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":u[5]||(u[5]=e=>d.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(tt),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,ro)))),128))],512),[[l.u1,d.value]])])])):(0,s.Q3)("",!0),"pb"===w.value?((0,s.uX)(),(0,s.CE)("tr",mo,[vo,po,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":u[6]||(u[6]=e=>g.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(tt),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,go)))),128))],512),[[l.u1,g.value]])])])):(0,s.Q3)("",!0),(0,s.Lk)("tr",null,["classInfo"===w.value?((0,s.uX)(),(0,s.CE)("th",Io)):(0,s.Q3)("",!0),bo,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":u[7]||(u[7]=e=>I.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(st),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,yo)))),128))],512),[[l.u1,I.value]])])]),"pb"===w.value?((0,s.uX)(),(0,s.CE)("tr",fo,[Co,ko,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":u[8]||(u[8]=e=>b.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(tt),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,ho)))),128))],512),[[l.u1,b.value]])])])):(0,s.Q3)("",!0),(0,s.Lk)("tr",null,[So,(0,s.Lk)("td",_o,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":u[9]||(u[9]=e=>y.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(L.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,n.v_)(e),9,Eo)))),128))],512),[[l.u1,y.value]])])]),(0,s.Lk)("tr",null,[No,(0,s.Lk)("td",null,[(0,s.bF)(N,{icon:C.value?["fas","toggle-on"]:["fas","toggle-off"],class:"iconSize",onClick:K},null,8,["icon"])])]),(0,s.Lk)("tr",null,[Lo,(0,s.Lk)("td",null,[(0,s.bF)(N,{icon:k.value?["fas","toggle-on"]:["fas","toggle-off"],class:"iconSize",onClick:B},null,8,["icon"])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":u[10]||(u[10]=e=>h.value=e),class:"alarmInput"},null,512),[[l.Jo,h.value]])])]),"pb"===w.value?((0,s.uX)(),(0,s.CE)("tr",Ro,[To,(0,s.Lk)("td",null,[(0,s.bF)(N,{icon:S.value?["fas","toggle-on"]:["fas","toggle-off"],class:"iconSize",onClick:U},null,8,["icon"])])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",wo,[(0,s.Lk)("div",Po,[Ao,(0,s.Lk)("div",Do,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":u[11]||(u[11]=e=>f.value=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(R.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,n.v_)(e),9,Mo)))),128))],512),[[l.u1,f.value]]),(0,s.bF)((0,o.R1)(Fs.A),{modelValue:_.value,"onUpdate:modelValue":u[12]||(u[12]=e=>_.value=e)},null,8,["modelValue"]),(0,s.bF)((0,o.R1)(Fs.A),{modelValue:E.value,"onUpdate:modelValue":u[13]||(u[13]=e=>E.value=e)},null,8,["modelValue"]),(0,s.Lk)("button",{class:"backupBtn",onClick:D},"backup")])])]),(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:u[14]||(u[14]=e=>O())},"Save Cell Image Analyzed")]),t.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":t.value,type:a.value,message:i.value,onHide:F,"onUpdate:hideAlert":F},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const Oo=xo;var Ko=Oo;const Bo={id:"collapse-4"},Uo={class:"rbcDegreeCategoryNm"},Xo={class:"mb1"},Fo={class:"degreeInput mb1"},Wo=["onUpdate:modelValue"],Go=["onUpdate:modelValue"],$o=["onUpdate:modelValue"];var Ho=(0,s.pM)({__name:"rbcDegree",setup(e){const t=(0,o.Kh)({value:[]}),a=(0,o.KR)("post"),i=(0,o.KR)(!1),c=(0,o.KR)(""),u=(0,o.KR)("");(0,s.sV)((async()=>{await v()}));const r=async()=>{t.value=ct.rbcClassList.map((e=>({...e,classInfo:e.classInfo.map((t=>{const a=ut.find((a=>a.categoryId===e.categoryId&&a.classId===t.classId));return{...t,degree1:a?.degree1||0,degree2:a?.degree2||0,degree3:a?.degree3||0}}))})))},d=()=>{r()},m=async()=>{const e=[];t.value.forEach((t=>{t.classInfo.forEach((a=>{e.push({categoryId:t.categoryId,categoryNm:t.categoryNm,classId:a.classId,classNm:a.classNm,degree1:a.degree1,degree2:a.degree2,degree3:a.degree3})}))}));try{let t={};t="post"===a.value?await oe(e):await ne(e),t&&(g("Save successful"),a.value="put")}catch(l){I(l),console.error(l)}},v=async()=>{try{const e=await ie();console.log(!e.data),a.value="put";const t=e.data;p(t)}catch(e){a.value="post",await r()}},p=e=>{const a=new Map;e.forEach((e=>{const t=e.categoryId,l=e.classId;if(a.has(t)){const s=a.get(t),o=s.classInfo.findIndex((e=>e.classId===l));-1===o?s.classInfo.push({classId:l,classNm:e.classNm,degree1:e.degree1,degree2:e.degree2,degree3:e.degree3}):s.classInfo[o].degree=e.degree}else{const s={categoryId:t,categoryNm:e.categoryNm,classInfo:[{classId:l,classNm:e.classNm,degree1:e.degree1,degree2:e.degree2,degree3:e.degree3}]};a.set(t,s)}})),t.value=Array.from(a.values())},g=e=>{i.value=!0,c.value="success",u.value=e},I=e=>{i.value=!0,c.value="error",u.value=e},b=()=>{i.value=!1};return(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("div",Bo,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"mt2 rbcClassListArr",key:"rbc"+t},[(0,s.Lk)("div",Uo,(0,n.v_)(e?.categoryNm),1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.classInfo,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t},[(0,s.Lk)("div",null,(0,n.v_)(e.classNm),1),(0,s.Lk)("div",Xo," [ "+(0,n.v_)(`${e.degree1} , ${e.degree2} , ${e.degree3}`)+" ] ",1),(0,s.Lk)("div",null,[(0,s.Lk)("div",Fo,[(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.degree1=t},null,8,Wo),[[l.Jo,e.degree1]]),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.degree2=t},null,8,Go),[[l.Jo,e.degree2]]),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.degree3=t},null,8,$o),[[l.Jo,e.degree3]])])])])))),128))])))),128))]),(0,s.Lk)("div",{class:"mt-2 degreeDiv"},[(0,s.Lk)("button",{onClick:d},"Reset"),(0,s.Lk)("button",{type:"button",onClick:m},"Save")])]),i.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":i.value,type:c.value,message:u.value,onHide:b,"onUpdate:hideAlert":b},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const jo=Ho;var Vo=jo;const Yo=(0,s.nI)(),qo=((0,u.Pj)(),e=>{Q().embedStatus.gripperOpen.reqUserId=e,Qo(Q().embedStatus.gripperOpen)}),Jo=e=>{Q().embedStatus.cameraReset.reqUserId=e,Qo(Q().embedStatus.cameraReset)},Qo=e=>{Yo?.appContext.config.globalProperties.$socket.emit("message",{type:"SEND_DATA",payload:e})},zo=(0,s.Lk)("p",{class:"mb1"},"Gripper Open",-1),Zo=(0,s.Lk)("p",{class:"mb1"},"Camera Reset",-1),en=(0,s.Lk)("li",{class:"mt2"},[(0,s.Lk)("p",{class:"mb1"},"Charge Remaining Count"),(0,s.Lk)("button",{type:"button",class:"defaultBtn"},"Scan")],-1);var tn=(0,s.pM)({__name:"deviceControls",setup(e){const t=(0,o.KR)(!1),a=(0,o.KR)(""),l=(0,o.KR)(""),n=(0,u.Pj)(),i=(0,o.KR)(""),c=(0,s.EW)((()=>n.state.userModule)),r=(0,s.EW)((()=>n.state.commonModule)),d=(0,o.KR)(!1);(0,s.sV)((async()=>{const e=JSON.parse(JSON.stringify(c.value));i.value=e.userId})),(0,s.wB)([r.value],(async e=>{await(0,s.dY)();const[t]=e,{isRunningState:a}=t||{};d.value=a}));const m=()=>{d.value?p(G.IDS_ERROR_ALREADY_RUNNING):qo(i.value)},v=()=>{d.value?p(G.IDS_ERROR_ALREADY_RUNNING):Jo(i.value)},p=e=>{t.value=!0,a.value="success",l.value=e},g=()=>{t.value=!1};return(e,o)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",{class:"customSettingContainer"},[(0,s.Lk)("li",null,[zo,(0,s.Lk)("button",{onClick:m,type:"button",class:"defaultBtn"},"OK")]),(0,s.Lk)("li",{class:"mt2"},[Zo,(0,s.Lk)("button",{type:"button",class:"defaultBtn",onClick:v},"OK")]),en])]),t.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":t.value,type:a.value,message:l.value,onHide:g,"onUpdate:hideAlert":g},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const an=tn;var ln=an;const sn={class:"customClass customSettingContainer"},on=["onUpdate:modelValue"],nn=["onUpdate:modelValue"];var cn=(0,s.pM)({__name:"customClass",setup(e){const t=(0,o.KR)(""),a=[{customNum:90,abbreviation:"",className:""},{customNum:91,abbreviation:"",className:""},{customNum:92,abbreviation:"",className:""},{customNum:93,abbreviation:"",className:""},{customNum:94,abbreviation:"",className:""}],i=(0,o.KR)([]),c=(0,o.KR)(!1),u=(0,o.KR)(""),r=(0,o.KR)("");(0,s.sV)((async()=>{await m()}));const d=async()=>{try{let e;if("post"!==t.value){const e=await ue({classArr:i.value});return void(e.data?(v(G.UPDATE_SUCCESSFULLY),await m()):p("update failed"))}e=await ce({classArr:i.value}),e&&(v("save successful"),t.value="put",await m())}catch(e){console.log(e)}},m=async()=>{try{const e=await re();if(e)if(!e?.data||e?.data instanceof Array&&0===e?.data.length)console.log(null),t.value="post",i.value=a;else{t.value="put";const a=e.data;i.value=a}}catch(e){console.log(e)}},v=e=>{c.value=!0,u.value="success",r.value=e},p=e=>{c.value=!0,u.value="error",r.value=e},g=()=>{c.value=!1};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",sn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id},[(0,s.Lk)("span",null,"ID: "+(0,n.v_)(e.customNum),1),(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.abbreviation=t,type:"text",maxlength:"3",placeholder:"abbreviation"},null,8,on),[[l.Jo,e.abbreviation]])]),(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.className=t,type:"text",maxlength:"25",placeholder:"class name"},null,8,nn),[[l.Jo,e.className]])])])))),128))]),(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:d},"Save")]),c.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":c.value,type:u.value,message:r.value,onHide:g,"onUpdate:hideAlert":g},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const un=cn;var rn=un;const dn={class:"wbcHotKeysItems"},mn=["onUpdate:modelValue"];var vn=(0,s.pM)({__name:"wbcHotKeys",setup(e){const t=(0,o.KR)(""),a=(0,o.KR)([]),i=(0,o.KR)(!1),c=(0,o.KR)(""),u=(0,o.KR)(""),r=(0,o.KR)("pb");(0,s.sV)((async()=>{r.value="bm"===window.PROJECT_TYPE?"bm":"pb",await m()}));const d=async()=>{try{let e;if("post"!==t.value){const e=await me({wbcHotKeysItems:a.value});return void(e.data?(v(G.UPDATE_SUCCESSFULLY),await m()):p("update failed"))}e=await de({wbcHotKeysItems:a.value}),e&&(v("save successful"),t.value="put",await m())}catch(e){console.log(e)}},m=async()=>{try{const e=await ve();e&&(!e?.data||e?.data instanceof Array&&0===e?.data.length?(t.value="post",a.value="bm"===r.value?dt:rt):(t.value="put",a.value=e.data))}catch(e){console.log(e)}},v=e=>{i.value=!0,c.value="success",u.value=e},p=e=>{i.value=!0,c.value="error",u.value=e},g=()=>{i.value=!1};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",dn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id},[(0,s.Lk)("span",null,(0,n.v_)(e.abbreviation),1),(0,s.Lk)("span",null,(0,n.v_)(e.fullNm),1),(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.key=t,type:"text",maxlength:"25",placeholder:"class name"},null,8,mn),[[l.Jo,e.key]])])])))),128))]),(0,s.Lk)("button",{onClick:d,class:"saveBtn",type:"button"},"Save")]),i.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":i.value,type:c.value,message:u.value,onHide:g,"onUpdate:hideAlert":g},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const pn=vn;var gn=pn;const In={class:"wbcHotKeysItems"},bn=["onUpdate:modelValue"];var yn=(0,s.pM)({__name:"bfHotKeys",setup(e){const t=(0,o.KR)(""),a=(0,o.KR)([]),i=(0,o.KR)(!1),c=(0,o.KR)(""),u=(0,o.KR)("");(0,s.sV)((async()=>{await d()}));const r=async()=>{try{let e;if("post"!==t.value){const e=await ge({bfHotKeysItems:a.value});return void(e.data?(m(G.UPDATE_SUCCESSFULLY),await d()):v("update failed"))}e=await pe({bfHotKeysItems:a.value}),e&&(m("save successful"),t.value="put",await d())}catch(e){console.log(e)}},d=async()=>{try{const e=await Ie();e&&(!e?.data||e?.data instanceof Array&&0===e?.data.length?(t.value="post",a.value=mt):(t.value="put",a.value=e.data))}catch(e){console.log(e)}},m=e=>{i.value=!0,c.value="success",u.value=e},v=e=>{i.value=!0,c.value="error",u.value=e},p=()=>{i.value=!1};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",In,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id},[(0,s.Lk)("span",null,(0,n.v_)(e.abbreviation),1),(0,s.Lk)("span",null,(0,n.v_)(e.fullNm),1),(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.key=t,type:"text",maxlength:"25",placeholder:"class name"},null,8,bn),[[l.Jo,e.key]])])])))),128))]),(0,s.Lk)("button",{onClick:r,class:"saveBtn",type:"button"},"Save")]),i.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":i.value,type:c.value,message:u.value,onHide:p,"onUpdate:hideAlert":p},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const fn=yn;var Cn=fn;const kn={class:"normalItems"},hn={class:"mt1"},Sn=["onUpdate:modelValue"],_n=["onUpdate:modelValue"];var En=(0,s.pM)({__name:"normalRange",setup(e){const t=(0,o.KR)(""),a=(0,o.KR)([]),i=(0,o.KR)(!1),c=(0,o.KR)(""),u=(0,o.KR)("");(0,s.sV)((async()=>{await d()}));const r=async()=>{try{let e;if("post"!==t.value){const e=await ye({normalRangeItems:a.value});return void(e.data?(m(G.UPDATE_SUCCESSFULLY),await d()):v("update failed"))}e=await be({normalRangeItems:a.value}),e&&(m("save successful"),t.value="put",await d())}catch(e){console.log(e)}},d=async()=>{try{const e=await fe();e&&(!e?.data||e?.data instanceof Array&&0===e?.data.length?(t.value="post",a.value=vt):(t.value="put",a.value=e.data))}catch(e){console.log(e)}},m=e=>{i.value=!0,c.value="success",u.value=e},v=e=>{i.value=!0,c.value="error",u.value=e},p=()=>{i.value=!1};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",kn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id},[(0,s.Lk)("div",null,(0,n.v_)(e.abbreviation)+" - "+(0,n.v_)(e.fullNm),1),(0,s.Lk)("div",hn,[(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.min=t,type:"text",maxlength:"25",placeholder:"class name"},null,8,Sn),[[l.Jo,e.min]])]),(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.max=t,type:"text",maxlength:"25",placeholder:"class name"},null,8,_n),[[l.Jo,e.max]])]),(0,s.Lk)("span",null,(0,n.v_)(e.unit),1)])])))),128))]),(0,s.Lk)("button",{onClick:r,class:"saveBtn",type:"button"},"Save")]),i.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":i.value,type:c.value,message:u.value,onHide:p,"onUpdate:hideAlert":p},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Nn=En;var Ln=Nn;const Rn={class:"wbcClassScroll"},Tn=(0,s.Lk)("h1",{class:"classTitle"},"Class",-1),wn=["onDragstart","onDrop"],Pn={class:"nth1ChildOrder"};var An=(0,s.pM)({__name:"classOrder",setup(e){const t=(0,o.KR)([]),a=(0,o.KR)(-1),i=(0,o.KR)(0),c=(0,o.KR)(""),u=(0,o.KR)(!1),r=(0,o.KR)(""),d=(0,o.KR)("");(0,s.sV)((async()=>{t.value="bm"===window.PROJECT_TYPE?da:ra,await m()}));const m=async()=>{try{const e=await $e();e&&(0===e?.data.length?c.value="post":(c.value="put",t.value=e.data.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx)))))}catch(e){console.log(e)}},v=async()=>{let e=t.value;for(const t in e)e[t].orderIdx=t;try{let t={};if(t="post"===c.value?await Ge(e):await He(e),t){const e="post"===c.value?"save successful":G.UPDATE_SUCCESSFULLY;I(e)}}catch(a){console.log(a)}},p=(e,t)=>{a.value=e,i.value=t.clientY-t.target.getBoundingClientRect().top},g=(e,l)=>{if(l.preventDefault(),-1!==a.value){const l=t.value.splice(a.value,1)[0];t.value.splice(e,0,l),a.value=-1}},I=e=>{u.value=!0,r.value="success",d.value=e},b=()=>{u.value=!1};return(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Rn,[Tn,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"wbcClassDbDiv",draggable:"true",onDragstart:e=>p(t,e),onDragover:a[0]||(a[0]=(0,l.D$)((()=>{}),["prevent"])),onDrop:e=>g(t,e)},[(0,s.Lk)("ul",Pn,[(0,s.Lk)("li",null,(0,n.v_)(e?.fullNm),1)])],40,wn)))),128))]),(0,s.Lk)("button",{onClick:v,class:"saveBtn",type:"button"},"Save"),u.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":u.value,type:r.value,message:d.value,onHide:b,"onUpdate:hideAlert":b},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Dn=An;var Mn=Dn;const xn={class:"alignDiv"},On={class:"defaultTable",style:{margin:"auto"}},Kn=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"WBC min"),(0,s.Lk)("th",null,"WBC max"),(0,s.Lk)("th",null,"count")])],-1),Bn=["onUpdate:modelValue"],Un=["onUpdate:modelValue"],Xn=["onUpdate:modelValue"],Fn=["value"],Wn={class:"mt1"};var Gn=(0,s.pM)({__name:"wbcRunningCount",setup(e){const t=(0,o.KR)(""),a=(0,o.KR)([]),i=(0,o.KR)(!1),c=(0,o.KR)(""),u=(0,o.KR)("");(0,s.sV)((async()=>{await r()}));const r=async()=>{try{const e=await Ke();if(e&&e.data){const l=e.data;!l||l instanceof Array&&0===l.length?(console.log(null),t.value="post",a.value=ft):(t.value="put",a.value=l)}}catch(e){console.error(e)}},d=async()=>{try{let e;if("post"!==t.value){const e=await Oe({wbcRunCountItems:a.value});return void(e.data?(m(G.UPDATE_SUCCESSFULLY),await r()):v("update failed"))}e=await xe({wbcRunCountItems:a.value}),e&&(m("save successful"),t.value="put",await r())}catch(e){console.error(e)}},m=e=>{i.value=!0,c.value="success",u.value=e},v=e=>{i.value=!0,c.value="error",u.value=e},p=()=>{i.value=!1};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",xn,[(0,s.Lk)("table",On,[Kn,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.min=t,class:"form-control form-control-sm"},null,8,Bn),[[l.Jo,e.min]])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.max=t,class:"form-control form-control-sm"},null,8,Un),[[l.Jo,e.max]])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t=>e.wbcCount=t,class:"form-select form-select-sm"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(lt),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,Fn)))),128))],8,Xn),[[l.u1,e.wbcCount]])])])))),128))])])]),(0,s.Lk)("div",Wn,[(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:t[0]||(t[0]=e=>d())},"Save")]),i.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":i.value,type:c.value,message:u.value,onHide:p,"onUpdate:hideAlert":p},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const $n=Gn;var Hn=$n;const jn={class:"settingTabSubButtons"},Vn={class:"tab-content"};var Yn=(0,s.pM)({__name:"index",setup(e){const t=(0,o.KR)("cellImageAnalyzed"),a=(0,o.KR)(""),l=e=>{t.value=e},i=(0,s.EW)((()=>{switch(t.value){case"cellImageAnalyzed":return Ko;case"rbcDegree":return Vo;case"deviceControls":return ln;case"wbcCustomClass":return rn;case"wbcHotKeys":return gn;case"bfHotKeys":return Cn;case"normalRange":return Ln;case"wbcOrder":return Mn;case"wbcRunningCount":return Hn;default:return null}}));return(0,s.sV)((async()=>{a.value="bm"===window.PROJECT_TYPE?"bm":"pb"})),(e,o)=>((0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",jn,[(0,s.Lk)("button",{onClick:o[0]||(o[0]=e=>l("cellImageAnalyzed")),class:(0,n.C4)({active:"cellImageAnalyzed"===t.value})},"Cell Image Analyzed",2),"pb"===a.value?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:o[1]||(o[1]=e=>l("rbcDegree")),class:(0,n.C4)({active:"rbcDegree"===t.value})},"RBC Degree",2)):(0,s.Q3)("",!0),(0,s.Lk)("button",{onClick:o[2]||(o[2]=e=>l("deviceControls")),class:(0,n.C4)({active:"deviceControls"===t.value})},"Device Controls",2),(0,s.Lk)("button",{onClick:o[3]||(o[3]=e=>l("wbcRunningCount")),class:(0,n.C4)({active:"wbcRunningCount"===t.value})},"WBC Running Count",2),(0,s.Lk)("button",{onClick:o[4]||(o[4]=e=>l("wbcCustomClass")),class:(0,n.C4)({active:"wbcCustomClass"===t.value})},(0,n.v_)("pb"===a.value?"WBC":"BM")+" Custom Class ",3),(0,s.Lk)("button",{onClick:o[5]||(o[5]=e=>l("wbcHotKeys")),class:(0,n.C4)({active:"wbcHotKeys"===t.value})},(0,n.v_)("pb"===a.value?"WBC":"BM")+" Hot Keys ",3),"pb"===a.value?((0,s.uX)(),(0,s.CE)("button",{key:1,onClick:o[6]||(o[6]=e=>l("bfHotKeys")),class:(0,n.C4)({active:"bfHotKeys"===t.value})},"BF Hot Keys",2)):(0,s.Q3)("",!0),(0,s.Lk)("button",{onClick:o[7]||(o[7]=e=>l("normalRange")),class:(0,n.C4)({active:"normalRange"===t.value})},"Normal Range",2),(0,s.Lk)("button",{onClick:o[8]||(o[8]=e=>l("wbcOrder")),class:(0,n.C4)({active:"wbcOrder"===t.value})},(0,n.v_)("pb"===a.value?"WBC":"BM")+" Order ",3)]),(0,s.Lk)("div",Vn,[((0,s.uX)(),(0,s.Wv)((0,s.$y)(i.value)))])]))}});const qn=Yn;var Jn=qn;const Qn={class:"settingContainer"},zn={class:"searchUserContainer"},Zn=["value"],ei={class:"table defaultTable mt2"},ti=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"No."),(0,s.Lk)("th",null,"User Type"),(0,s.Lk)("th",null,"User ID"),(0,s.Lk)("th",null,"Name"),(0,s.Lk)("th",null,"Employee"),(0,s.Lk)("th",null,"Subscription Date"),(0,s.Lk)("th",null,"Latest Date")])],-1);var ai=(0,s.pM)({__name:"index",setup(e){(0,s.sV)((async()=>{i.value=a.id,await g()}));const t=sessionStorage.getItem("user"),a=JSON.parse(t||"{}"),i=(0,o.KR)(""),c=(0,o.KR)([]),u=e=>e.replace("T"," ").replace(".000Z",""),r=(0,o.KR)("userId"),d=(0,o.KR)([{value:"userId",text:"User Id"},{value:"name",text:"User Name"}]),m=(0,o.KR)(""),v=(e,t,a)=>{const l=t.toLowerCase();return e.filter((e=>{const t="userId"===a?String(e.userId):e.name;return t.toLowerCase().includes(l)}))},p=async()=>{try{const e=await ls(String(i.value));if(e&&e.data){const t=e.data.users||[],a=v(t,m.value,r.value);c.value=a}else console.log("No data received from the API")}catch(e){console.error("An error occurred:",e)}},g=async()=>{try{const e=await ls(String(i.value));console.log("result - get all users"),e&&(e?.data?c.value=e.data.users||[]:console.log(null))}catch(e){console.log(e)}};return(e,t)=>{const a=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)("div",Qn,[(0,s.Lk)("div",zn,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),class:"searchSelect"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.text),9,Zn)))),128))],512),[[l.u1,r.value]]),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>m.value=e),class:"searchInputBox"},null,512),[[l.Jo,m.value]]),(0,s.bF)(a,{icon:["fas","search"],class:"searchBtn",onClick:p})]),(0,s.Lk)("table",ei,[ti,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,n.v_)(e.id),1),(0,s.Lk)("td",null,(0,n.v_)(e.userType),1),(0,s.Lk)("td",null,(0,n.v_)(e.userId),1),(0,s.Lk)("td",null,(0,n.v_)(e.name),1),(0,s.Lk)("td",null,(0,n.v_)(e.employeeNo),1),(0,s.Lk)("td",null,(0,n.v_)(u(e.subscriptionDate)),1),(0,s.Lk)("td",null,(0,n.v_)(u(e.latestDate)),1)])))),128))])])])}}});const li=ai;var si=li;const oi={class:"settingImagePrint"},ni=["value"],ii={class:"mt1"};var ci=(0,s.pM)({__name:"ImagePrint",setup(e){const t=(0,o.KR)([]),a=(0,o.KR)([]),i=(0,o.KR)(""),c=(0,o.KR)(!1),u=(0,o.KR)(""),r=(0,o.KR)("");(0,s.sV)((async()=>{await m()}));const d=async()=>{try{let e;if(t.value.forEach((e=>{e.checked=a.value.includes(e.value)})),"post"!==i.value){const e=await ke({imagePrintItems:t.value});return void(e.data?(v(G.UPDATE_SUCCESSFULLY),await m()):p("update failed"))}e=await Ce({imagePrintItems:t.value}),e&&(v("save successful"),i.value="put",await m())}catch(e){console.error(e)}},m=async()=>{try{const e=await he();if(e&&e.data){const l=e.data;!l||l instanceof Array&&0===l.length?(i.value="post",t.value="bm"===window.PROJECT_TYPE?gt:pt):(i.value="put",t.value=l,a.value=l.filter((e=>e.checked)).map((e=>e.value)))}}catch(e){console.error(e)}},v=e=>{c.value=!0,u.value="success",r.value=e},p=e=>{c.value=!0,u.value="error",r.value=e},g=()=>{c.value=!1};return(e,o)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",oi,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,(e=>((0,s.uX)(),(0,s.CE)("label",{key:e.value},[(0,s.Lk)("div",null,(0,n.v_)(e.classNm),1),(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:e.value,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e)},null,8,ni),[[l.lH,a.value]])])])))),128))]),(0,s.Lk)("div",ii,[(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:o[1]||(o[1]=e=>d())},"Save")]),c.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":c.value,type:u.value,message:r.value,onHide:g,"onUpdate:hideAlert":g},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const ui=ci;var ri=ui;const di={class:"alignDiv"},mi=(0,s.Lk)("p",{class:"mb4"}," [ WBC ] ",-1),vi={class:"mb1"},pi=["onUpdate:modelValue"],gi={class:"alignDiv"},Ii=(0,s.Lk)("p",{class:"mt2 mb4"}," [ RBC ] ",-1),bi={class:"mb1"},yi=["onUpdate:modelValue"],fi={class:"alignDiv"},Ci=(0,s.Lk)("p",{class:"mb2"}," [ Min Count ] ",-1),ki={key:0},hi=(0,s.Lk)("p",{class:"mb1 mt1"},"Giant Platelet",-1),Si={key:1},_i=(0,s.Lk)("p",{class:"mb1 mt1"},"Platelet Aggregation",-1),Ei={class:"mt1"};var Ni=(0,s.pM)({__name:"lisCode",setup(e){const t=(0,o.KR)([]),a=(0,o.KR)([]),i=(0,o.KR)([]),c=(0,o.KR)(""),u=(0,o.KR)(!1),r=(0,o.KR)(""),d=(0,o.KR)("");(0,s.sV)((async()=>{await v()}));const m=async()=>{try{let e,l,s;if("post"!==c.value){const e=await _e({lisCodeItems:t.value}),l=await Le({lisCodeItems:a.value}),s=await Ue({minCountItems:i.value});return void(e.data&&l.data&&s.data?(p(G.UPDATE_SUCCESSFULLY),await v()):g("update failed"))}e=await Se({lisCodeItems:t.value}),l=await Ne({lisCodeItems:a.value}),s=await Be({minCountItems:i.value}),e&&l&&s&&(p("save successful"),c.value="put",await v())}catch(e){console.error(e)}},v=async()=>{try{const e=await Ee(),l=await Re(),s=await Xe();if(e&&e.data&&l&&l.data&&s&&s.data){const o=e.data,n=l.data,u=s.data;!o||o instanceof Array&&0===o.length?(console.log(null),c.value="post",t.value=It):(c.value="put",t.value=o),!n||n instanceof Array&&0===n.length?(console.log(null),c.value="post",a.value=bt):(c.value="put",a.value=n),!u||u instanceof Array&&0===u.length?(c.value="post",i.value=yt):(c.value="put",i.value=u)}}catch(e){console.error(e)}},p=e=>{u.value=!0,r.value="success",d.value=e},g=e=>{u.value=!0,r.value="error",d.value=e},I=()=>{u.value=!1};return(e,o)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",di,[mi,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,(e=>((0,s.uX)(),(0,s.CE)("label",{key:e.value},[(0,s.Lk)("p",vi,(0,n.v_)(e.classNm),1),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.code=t},null,8,pi),[[l.Jo,e.code]])])))),128))]),(0,s.Lk)("div",gi,[Ii,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("label",{key:e.classNm},[(0,s.Lk)("p",bi,(0,n.v_)(e.categoryNm)+" - "+(0,n.v_)(e.classNm),1),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.code=t},null,8,yi),[[l.Jo,e.code]])])))),128))]),(0,s.Lk)("div",fi,[Ci,(0,s.Lk)("ul",null,[i.value.length>0?((0,s.uX)(),(0,s.CE)("li",ki,[hi,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>i.value[0].minGPCount=e),class:"form-control form-control-sm"},null,512),[[l.Jo,i.value[0].minGPCount]])])):(0,s.Q3)("",!0),i.value.length>0?((0,s.uX)(),(0,s.CE)("li",Si,[_i,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=e=>i.value[0].minPACount=e),class:"form-control form-control-sm"},null,512),[[l.Jo,i.value[0].minPACount]])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",Ei,[(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:o[2]||(o[2]=e=>m())},"Save")]),u.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":u.value,type:r.value,message:d.value,onHide:I,"onUpdate:hideAlert":I},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Li=Ni;var Ri=Li;const Ti={class:"alignDiv"},wi={class:"mb1"},Pi=["onUpdate:modelValue"],Ai={class:"mt1"};var Di=(0,s.pM)({__name:"cbcCode",setup(e){const t=(0,o.KR)([]),a=(0,o.KR)(""),i=(0,o.KR)(!1),c=(0,o.KR)(""),u=(0,o.KR)("");(0,s.sV)((async()=>{await d()}));const r=async()=>{try{let e;if(console.log(t.value),"post"!==a.value){const e=await we({cbcCodeItems:t.value});return void(e.data?(m(G.UPDATE_SUCCESSFULLY),await d()):v("update failed"))}e=await Te({cbcCodeItems:t.value}),e&&(m("save successful"),a.value="put",await d())}catch(e){console.error(e)}},d=async()=>{try{const e=await Pe();if(e&&e.data){const l=e.data;!l||l instanceof Array&&0===l.length?(console.log(null),a.value="post",t.value=it):(a.value="put",t.value=l)}}catch(e){console.error(e)}},m=e=>{i.value=!0,c.value="success",u.value=e},v=e=>{i.value=!0,c.value="error",u.value=e},p=()=>{i.value=!1};return(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Ti,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,(e=>((0,s.uX)(),(0,s.CE)("label",{key:e.cd},[(0,s.Lk)("p",wi,(0,n.v_)(e.classNm),1),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.classCd=t},null,8,Pi),[[l.Jo,e.classCd]])])))),128))]),(0,s.Lk)("div",Ai,[(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:a[0]||(a[0]=e=>r())},"Save")]),i.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":i.value,type:c.value,message:u.value,onHide:p,"onUpdate:hideAlert":p},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Mi=Di;var xi=Mi;const Oi={class:"alignDiv",style:{"text-align":"center"}},Ki=(0,s.Lk)("p",{class:"mb2"},"LIS Hot Key",-1),Bi=["value"],Ui=(0,s.Lk)("p",{class:"mb2 mt2"},"Lis File Path",-1),Xi=["value"],Fi=(0,s.Lk)("p",{class:"mb2 mt2"},"Cbc File Path",-1),Wi=["value"],Gi={class:"mt1"};var $i=(0,s.pM)({__name:"filePathSet",setup(e){const t=(0,o.KR)([]),a=(0,o.KR)(""),l=(0,o.KR)(!1),n=(0,o.KR)(""),i=(0,o.KR)("");(0,s.sV)((async()=>{await u()}));const c=async()=>{try{let e;if("post"!==a.value){const e=await De({filePathSetItems:t.value});return void(e.data?(v(G.UPDATE_SUCCESSFULLY),await u()):p("update failed"))}e=await Ae({filePathSetItems:t.value}),e&&(v("save successful"),a.value="put",await u())}catch(e){console.error(e)}},u=async()=>{try{const e=await Me();if(e&&e.data){const l=e.data;!l||l instanceof Array&&0===l.length?(console.log(null),a.value="post",t.value=Ct):(a.value="put",t.value=l)}}catch(e){console.error(e)}},r=(e,a)=>{t.value[a].lisHotKey=e.target.value},d=(e,a)=>{t.value[a].lisFilePath=e.target.value},m=(e,a)=>{t.value[a].cbcFilePath=e.target.value},v=e=>{l.value=!0,n.value="success",i.value=e},p=e=>{l.value=!0,n.value="error",i.value=e},g=()=>{l.value=!1};return(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Oi,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,[Ki,(0,s.Lk)("input",{type:"text",value:t.value[0]?t.value[0].lisHotKey:"",onInput:a[0]||(a[0]=e=>r(e,0))},null,40,Bi)]),(0,s.Lk)("li",null,[Ui,(0,s.Lk)("input",{type:"text",value:t.value[0]?t.value[0].lisFilePath:"",onInput:a[1]||(a[1]=e=>d(e,0))},null,40,Xi)]),(0,s.Lk)("li",null,[Fi,(0,s.Lk)("input",{type:"text",value:t.value[0]?t.value[0].cbcFilePath:"",onInput:a[2]||(a[2]=e=>m(e,0))},null,40,Wi)])])]),(0,s.Lk)("div",Gi,[(0,s.Lk)("button",{class:"saveBtn",type:"button",onClick:a[3]||(a[3]=e=>c())},"Save")]),l.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":l.value,type:n.value,message:i.value,onHide:g,"onUpdate:hideAlert":g},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64))}});const Hi=$i;var ji=Hi;const Vi={class:"settingTabSubButtons"},Yi={key:0},qi={class:"tab-content"};var Ji=(0,s.pM)({__name:"index",setup(e){const t=(0,o.KR)(!1);let a=(0,o.KR)("ImagePrint");const l=e=>{a.value=e},i=(0,s.EW)((()=>{switch(a.value){case"ImagePrint":return ri;case"LisCode":return Ri;case"CbcCode":return xi;case"filePathSet":return ji;default:return null}}));return(0,s.sV)((()=>{t.value="bm"===window.PROJECT_TYPE})),(e,c)=>((0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",Vi,[(0,s.Lk)("button",{onClick:c[0]||(c[0]=e=>l("ImagePrint")),class:(0,n.C4)({active:"ImagePrint"===(0,o.R1)(a)})},"Image Print",2),t.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Yi,[(0,s.Lk)("button",{onClick:c[1]||(c[1]=e=>l("LisCode")),class:(0,n.C4)({active:"LisCode"===(0,o.R1)(a)})},"Lis Code",2),(0,s.Lk)("button",{onClick:c[2]||(c[2]=e=>l("CbcCode")),class:(0,n.C4)({active:"CbcCode"===(0,o.R1)(a)})},"CBC Code",2),(0,s.Lk)("button",{onClick:c[3]||(c[3]=e=>l("filePathSet")),class:(0,n.C4)({active:"filePathSet"===(0,o.R1)(a)})},"Lis(CBC) Hot Key & File Path",2)]))]),(0,s.Lk)("div",qi,[((0,s.uX)(),(0,s.Wv)((0,s.$y)(i.value)))])]))}});const Qi=Ji;var zi=Qi;function Zi(e,t){return(0,s.uX)(),(0,s.CE)("div")}const ec={},tc=(0,Tl.A)(ec,[["render",Zi]]);var ac=tc;const lc={class:"versionContainer"};var sc=(0,s.pM)({__name:"index",setup(e){const t=(0,o.KR)();return(0,s.sV)((()=>{t.value=[{key:"AI Version",name:window.AI_VERSION},{key:"Web Frontend Version",name:window.WEB_FRONTEND_VERSION},{key:"Web Backend Version",name:window.WEB_BACKEND_VERSION},{key:"PB Version",name:window.PB_VERSION}]})),(e,a)=>((0,s.uX)(),(0,s.CE)("div",lc,[(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},[(0,s.Lk)("span",null,(0,n.v_)(e.key),1),(0,s.Lk)("span",null,(0,n.v_)(e.name),1)])))),128))])]))}});const oc=sc;var nc=oc;const ic={class:"settingWrapDiv"},cc={class:"settingTabBtn"},uc=["onClick"];var rc=(0,s.pM)({__name:"index",setup(e){const t=["Login/Account","Analysis/Database","Report","Quality Check","Version"],a=(0,o.KR)(t[0]),l=e=>{a.value=e,sessionStorage.setItem("selectedTab",e)},i={"Login/Account":si,"Analysis/Database":Jn,Report:zi,"Quality Check":ac,Version:nc},c=sessionStorage.getItem("selectedTab");c&&t.includes(c)&&(a.value=c);const u=(0,s.EW)((()=>i[a.value]));return(e,o)=>((0,s.uX)(),(0,s.CE)("div",ic,[(0,s.Lk)("ul",cc,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(t,(e=>(0,s.Lk)("li",{key:e,class:(0,n.C4)({activeTab:a.value===e}),onClick:t=>l(e)},(0,n.v_)(e),11,uc))),64))]),((0,s.uX)(),(0,s.Wv)((0,s.$y)(u.value),{class:"settingWrap"}))]))}});const dc=rc;var mc=dc;const vc={class:"layer"},pc={class:"layer-content"},gc={class:"layer-header"},Ic={class:"layer-body"};var bc={__name:"modal",emits:["update:closeLayer"],setup(e,{emit:t}){const a=(0,o.KR)(!1),l=t,n=()=>{a.value=!1,l("update:closeLayer",!1)};return(0,s.sV)((()=>{l("afterOpen")})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",vc,[(0,s.Lk)("div",pc,[(0,s.Lk)("div",gc,[(0,s.RG)(e.$slots,"header"),(0,s.Lk)("button",{onClick:n,class:"alertButton"},"Close")]),(0,s.Lk)("div",Ic,[(0,s.RG)(e.$slots,"content")])])]))}};const yc=(0,Tl.A)(bc,[["__scopeId","data-v-5bdfef29"]]);var fc=yc;const Cc=Z(),kc=async e=>Cc.httpPost(ee.settings.runningInfo.create,e),hc=async e=>Cc.httpPut(ee.settings.runningInfo.update,e,"",!0),Sc=async e=>{const t=Object.entries(e).filter((([e,t])=>void 0!==t)).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(String(t))}`)).join("&");return Cc.httpGet(ee.settings.runningInfo.get,`${t}`,!0)},_c=async e=>Cc.httpDelete(ee.settings.runningInfo.delete,e,!0),Ec=async e=>Cc.httpGet(ee.settings.runningInfo.detail,`${e}`,!1),Nc=async e=>Cc.httpGet(ee.settings.runningInfo.pageUpDown,`${e}`,!0),Lc=async e=>Cc.httpGet(ee.settings.runningInfo.updatePcIpState,`${e}`,!0),Rc=async e=>Cc.httpGet(ee.settings.runningInfo.clearPcIpState,`${e}`,!0);a(4603),a(7566),a(8721);var Tc=a(3075);const wc={style:{width:"900px",height:"90%","overflow-y":"auto",background:"#fff",color:"#000",position:"absolute",top:"10%",left:"33%","box-sizing":"border-box",padding:"3rem 7rem",border:"2px solid #ccc","border-radius":"10px"}},Pc=(0,s.Lk)("div",null,[(0,s.Lk)("h3",{style:{margin:"40px 0","font-size":"1.2rem","font-weight":"600","text-align":"center"}},"Analysis Report from UIMD PB system")],-1),Ac={style:{display:"flex","flex-direction":"column","justify-content":"space-between"}},Dc={style:{width:"100%"}},Mc=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{style:{width:"30%"}}),(0,s.Lk)("col",{style:{width:"70%"}})],-1),xc={style:{"padding-bottom":"5px"}},Oc=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Slot ID",-1),Kc={style:{"text-align":"left",padding:"5px 0"}},Bc={style:{"padding-bottom":"5px"}},Uc=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Ordered date",-1),Xc={style:{"text-align":"left",padding:"5px 0"}},Fc={style:{"padding-bottom":"5px"}},Wc=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Signed by ID",-1),Gc={style:{"text-align":"left",padding:"5px 0"}},$c={style:{"padding-bottom":"5px"}},Hc=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Signed date",-1),jc={style:{"text-align":"left",padding:"5px 0"}},Vc={style:{"padding-bottom":"5px"}},Yc=(0,s.Lk)("th",{style:{"text-align":"left"}},"Ordered Classification",-1),qc={style:{"text-align":"left",padding:"5px 0"}},Jc={style:{"padding-bottom":"5px"}},Qc=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Name",-1),zc={style:{"text-align":"left",padding:"5px 0"}},Zc={style:{"padding-bottom":"5px"}},eu=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Birth",-1),tu={style:{"text-align":"left",padding:"5px 0"}},au={style:{"padding-bottom":"5px"}},lu=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Gender",-1),su={style:{"text-align":"left",padding:"5px 0"}},ou={style:{"margin-top":"20px","border-top":"2px dotted #696969"}},nu={key:0,style:{"margin-top":"20px"}},iu=(0,s.Lk)("h3",{style:{margin:"40px 0","font-size":"1.2rem","font-weight":"600","text-align":"center"}},"RBC classification result",-1),cu={style:{width:"100%"}},uu=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{style:{width:"30%"}}),(0,s.Lk)("col",{style:{width:"45%"}}),(0,s.Lk)("col",{style:{width:"25%"}})],-1),ru=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{style:{"text-align":"left"}},"Category"),(0,s.Lk)("th",{style:{"text-align":"left"}},"Class"),(0,s.Lk)("th",{style:{"text-align":"left"}},"Degree")])],-1),du={style:{"text-align":"left",padding:"5px 0"}},mu={style:{"text-align":"left",padding:"5px 0"}},vu={style:{"text-align":"left",padding:"5px 0"}},pu={key:0},gu={style:{"padding-bottom":"5px"}},Iu=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Others",-1),bu=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Platelets",-1),yu={style:{"text-align":"left",padding:"5px 0"}},fu={style:{"padding-bottom":"5px"}},Cu=(0,s.Lk)("th",null,null,-1),ku=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Malaria",-1),hu={style:{"text-align":"left",padding:"5px 0"}},Su={style:{"padding-bottom":"5px"}},_u=(0,s.Lk)("th",null,null,-1),Eu=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Comment",-1),Nu={style:{"text-align":"left",padding:"5px 0"}},Lu={style:{"margin-top":"20px"}},Ru=(0,s.Lk)("h3",{style:{margin:"40px 0","font-size":"1.2rem","font-weight":"600","text-align":"center"}},"WBC classification result",-1),Tu={style:{width:"100%"}},wu=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{style:{width:"30%"}}),(0,s.Lk)("col",{style:{width:"45%"}}),(0,s.Lk)("col",{style:{width:"25%"}})],-1),Pu={style:{"text-align":"left",padding:"5px 0"}},Au={style:{"text-align":"left",padding:"5px 0"}},Du={style:{"text-align":"left",padding:"5px 0"}},Mu={style:{"padding-bottom":"5px"}},xu=(0,s.Lk)("th",{style:{"text-align":"left","font-weight":"bold",padding:"5px 0"}},"Total count",-1),Ou={style:{"text-align":"left",padding:"5px 0"}},Ku=(0,s.Lk)("td",{style:{"text-align":"left",padding:"5px 0"}},"100.00%",-1),Bu={style:{"text-align":"left",padding:"5px 0"}},Uu={colspan:"1",style:{"text-align":"left",padding:"5px 0"}},Xu={key:0},Fu={style:{"padding-bottom":"5px"}},Wu=(0,s.Lk)("th",{style:{"text-align":"left",padding:"5px 0"}},"Comment",-1),Gu={colspan:"2",style:{"text-align":"left",padding:"5px 0"}},$u={class:"print",style:{"list-style":"none","padding-left":"0","margin-top":"20px"}},Hu={style:{"font-weight":"bold"}},ju={style:{position:"relative"}},Vu=["src","width","height"];var Yu=(0,s.pM)({__name:"print",props:["selectItems","printOnOff","selectItemWbc"],emits:["printClose"],setup(e,{emit:t}){const a=e,l=window.APP_API_BASE_URL||"http://192.168.0.131:3002",i=(0,u.Pj)(),c=(0,o.KR)(null),r=(0,o.KR)([]),d=((0,o.KR)([]),(0,s.EW)((()=>i.state.commonModule))),m=d.value.iaRootPath,v=((0,s.EW)((()=>i.state.userModule)),(0,o.KR)([])),p=t;(0,s.sV)((async()=>{r.value="object"===typeof a.selectItemWbc?a.selectItemWbc:JSON.parse(a.selectItemWbc),await f(),await y()}));const I=(0,s.EW)((()=>r.value.filter((e=>"12"!==e.id&&"13"!==e.id&&"14"!==e.id&&"15"!==e.id&&"16"!==e.id&&e.count>0))));function b(e,t,s){if(!r.value||0===r.value.length)return"";const o=""!==a.selectItems?.img_drive_root_path&&a.selectItems?.img_drive_root_path?a.selectItems?.img_drive_root_path:m,n=a.selectItems.slotId||"",i="bm"===window.PROJECT_TYPE?`${o}/${n}/04_BM_Classification/${t}_${s}`:`${o}/${n}/01_WBC_Classification/${t}_${s}`;return`${l}/images?folder=${i}&imageName=${e}`}const y=async()=>{try{const e=c.value;if(!e)throw new Error("    .");const t=Tc.Ay.gzip(e.innerHTML,{level:9}),a=await fetch(`${l}/pdf/convert`,{method:"POST",headers:{"Content-Type":"application/octet-stream","Content-Encoding":"gzip"},body:t});if(!a.ok)throw new Error("HTML PDF  .");const s=await a.blob(),o=window.URL.createObjectURL(s);window.open(o,"_blank","width=800,height=500,noopener,noreferrer"),window.URL.revokeObjectURL(o)}catch(e){console.error("Error:",e)}},f=async()=>{try{const e=await he();if(e&&e.data){const t=e.data;!t||t instanceof Array&&0===t.length?console.log(null):(v.value=t.filter((e=>e.checked)).map((e=>e.value)),r.value=r.value.filter((e=>v.value.includes(e.id))))}}catch(e){console.error(e)}},C=()=>{p("printClose")};return(t,a)=>((0,s.uX)(),(0,s.CE)("div",wc,[(0,s.Lk)("button",{style:{position:"absolute",right:"8px",background:"none",border:"1px solid #000","border-radius":"5px",padding:"7px 25px",top:"5px",cursor:"pointer"},onClick:C},"Close"),(0,s.Lk)("div",{ref_key:"printContent",ref:c,style:{"margin-top":"20px"}},[Pc,(0,s.Lk)("div",Ac,[(0,s.Lk)("table",Dc,[Mc,(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",xc,[Oc,(0,s.Lk)("td",Kc,(0,n.v_)(e.selectItems?.slotId),1)]),(0,s.Lk)("tr",Bc,[Uc,(0,s.Lk)("td",Xc,(0,n.v_)((0,o.R1)(V)(e.selectItems?.orderDttm)),1)]),(0,s.Lk)("tr",Fc,[Wc,(0,s.Lk)("td",Gc,(0,n.v_)(e.selectItems?.submitUserId),1)]),(0,s.Lk)("tr",$c,[Hc,(0,s.Lk)("td",jc,(0,n.v_)(e.selectItems?.submitOfDate),1)]),(0,s.Lk)("tr",Vc,[Yc,(0,s.Lk)("td",qc,(0,n.v_)((0,o.R1)(g)(e.selectItems?.testType)),1)]),(0,s.Lk)("tr",Jc,[Qc,(0,s.Lk)("td",zc,(0,n.v_)(e.selectItems?.patientName),1)]),(0,s.Lk)("tr",Zc,[eu,(0,s.Lk)("td",tu,(0,n.v_)(e.selectItems?.birthDay),1)]),(0,s.Lk)("tr",au,[lu,(0,s.Lk)("td",su,(0,n.v_)("01"===e.selectItems?.gender?"Male":"Female"),1)])])]),(0,s.Lk)("div",ou,[["01","04"].includes(e.selectItems?.testType)?((0,s.uX)(),(0,s.CE)("div",nu,[iu,(0,s.Lk)("table",cu,[uu,ru,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)([e.selectItems?.rbcInfo],((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:t,style:{"padding-bottom":"5px"}},[(0,s.Lk)("td",du,(0,n.v_)(e.categoryNm),1),(0,s.Lk)("td",mu,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t},(0,n.v_)(e?.classNm),1)))),128))]),(0,s.Lk)("td",vu,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((t,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:a},["01"!==t.classId||"05"===e.categoryId?((0,s.uX)(),(0,s.CE)("div",pu,(0,n.v_)(t?.degree),1)):(0,s.Q3)("",!0)],64)))),128))])])))),128))],64)))),128)),(0,s.Lk)("tr",gu,[Iu,bu,(0,s.Lk)("th",yu,(0,n.v_)(e.selectItems?.rbcInfo.pltCount)+" PLT / 1000 RBC",1)]),(0,s.Lk)("tr",fu,[Cu,ku,(0,s.Lk)("th",hu,(0,n.v_)(e.selectItems?.rbcInfo?.malariaCount)+" / "+(0,n.v_)(e.selectItems.maxRbcCount)+" RBC",1)]),(0,s.Lk)("tr",Su,[_u,Eu,(0,s.Lk)("th",Nu,(0,n.v_)(e.selectItems.rbcMemo),1)])])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Lu,[Ru,(0,s.Lk)("table",Tu,[wu,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(I.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id,style:{"padding-bottom":"5px"}},[(0,s.Lk)("th",Pu,(0,n.v_)(e?.name),1),(0,s.Lk)("td",Au,(0,n.v_)(e?.count),1),(0,s.Lk)("td",Du,(0,n.v_)(e?.percent),1)])))),128)),(0,s.Lk)("tr",Mu,[xu,(0,s.Lk)("td",Ou,(0,n.v_)(e.selectItems?.wbcInfo?.totalCount),1),Ku]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(I.value,(t=>((0,s.uX)(),(0,s.CE)("tr",{key:t.id,style:{"padding-bottom":"5px"}},[(0,s.Lk)("th",Bu,(0,n.v_)(t?.name),1),(0,s.Lk)("td",Uu,[(0,s.eW)((0,n.v_)(t?.count)+" ",1),"12"===t.id||"13"===t.id?((0,s.uX)(),(0,s.CE)("span",Xu," / "+(0,n.v_)(e.selectItems?.wbcInfo?.maxWbcCount)+" WBC",1)):(0,s.Q3)("",!0)])])))),128)),(0,s.Lk)("tr",Fu,[Wu,(0,s.Lk)("td",Gu,(0,n.v_)(e.selectItems?.memo),1)])])]),(0,s.Lk)("ul",$u,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id},[(0,s.Lk)("div",Hu,(0,n.v_)(e?.title)+" ("+(0,n.v_)(e?.count)+")",1),(0,s.Lk)("ul",{class:(0,n.C4)("wbcImgWrap "+e?.title),style:{"list-style":"none","padding-left":"0","margin-top":"10px"}},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.images,(t=>((0,s.uX)(),(0,s.CE)("li",{key:t.fileName,style:{display:"inline-block","margin-right":"10px"}},[(0,s.Lk)("div",ju,[(0,s.Lk)("img",{src:b(t.fileName,e.id,e.title),width:t.width?t.width:"150px",height:t.height?t.height:"150px",style:(0,n.Tr)({filter:t.filter}),class:"cellImg",ref_for:!0,ref:"cellRef"},null,12,Vu),(0,s.Lk)("div",{class:"center-point",style:(0,n.Tr)(t.coordinates)},null,4)])])))),128))],2)])))),128))])])])])],512)]))}});const qu=Yu;var Ju=qu;const Qu=[{id:"01",title:"NE",name:"Neutrophil",count:0,percent:0,key:"",order:1},{id:"71",title:"NS",name:"Neutrophil-Segmented",count:0,percent:0,key:"",order:2},{id:"72",title:"NB",name:"Neutrophil-Band",count:0,percent:0,key:"",order:3},{id:"02",title:"ME",name:"Metamyelocyte",count:0,percent:0,key:"",order:4},{id:"03",title:"MY",name:"Myelocyte",count:0,percent:0,key:"",order:5},{id:"04",title:"PR",name:"Promyelocyte",count:0,percent:0,key:"",order:6},{id:"05",title:"LY",name:"Lymphocyte",count:0,percent:0,key:"",order:7},{id:"61",title:"LR",name:"Reactive lymphocyte",count:0,percent:0,key:"",order:8},{id:"62",title:"LA",name:"Abnormal lymphocyte",count:0,percent:0,key:"",order:9},{id:"07",title:"MO",name:"Monocyte",count:0,percent:0,key:"",order:10},{id:"08",title:"EO",name:"Eosinophil",count:0,percent:0,key:"",order:11},{id:"09",title:"BA",name:"Basophil",count:0,percent:0,key:"",order:12},{id:"10",title:"BL",name:"Blast",count:0,percent:0,key:"",order:13},{id:"11",title:"PC",name:"Plasma cell",count:0,percent:0,key:"",order:14},{id:"12",title:"NR",name:"nRBC",count:0,percent:0,key:"",order:15},{id:"13",title:"GP",name:"Giant platelet",count:0,percent:0,key:"",order:16},{id:"14",title:"PA",name:"Platelet aggregation",count:0,percent:0,key:"",order:17},{id:"16",title:"MA",name:"Malaria",count:0,percent:0,key:"",order:18},{id:"15",title:"AR",name:"Artifact",count:0,percent:0,key:"",order:19},{id:"17",title:"SM",name:"Smudge",count:0,percent:0,key:"",order:20}],zu=[{id:"01",title:"NE",name:"Neutrophil",count:0,percent:0,order:1},{id:"71",title:"NS",name:"Neutrophil-Segmented",count:0,percent:0,key:"",order:2},{id:"72",title:"NB",name:"Neutrophil-Band",count:0,percent:0,key:"",order:3},{id:"02",title:"ME",name:"Metamyelocyte",count:0,percent:0,order:4},{id:"03",title:"MY",name:"Myelocyte",count:0,percent:0,order:5},{id:"04",title:"PR",name:"Promyelocyte",count:0,percent:0,order:6},{id:"05",title:"LY",name:"Lymphocyte",count:0,percent:0,order:7},{id:"06",title:"LA",name:"Abnormal lymphocyte",count:0,percent:0,order:8},{id:"07",title:"MO",name:"Monocyte",count:0,percent:0,order:9},{id:"08",title:"EO",name:"Eosinophil",count:0,percent:0,order:10},{id:"09",title:"BA",name:"Basophil",count:0,percent:0,order:11},{id:"10",title:"BL",name:"Blast",count:0,percent:0,order:12},{id:"11",title:"PC",name:"Plasma cell",count:0,percent:0,order:13},{id:"12",title:"ON",name:"Orthochromic Normoblast",count:0,percent:0,order:14},{id:"13",title:"PN",name:"Polychromic Normoblast",count:0,percent:0,order:15},{id:"14",title:"BN",name:"Basophilic Normoblast",count:0,percent:0,order:16},{id:"15",title:"PE",name:"Proerythroblast",count:0,percent:0,order:17},{id:"16",title:"HC",name:"Histiocyte",count:0,percent:0,order:18},{id:"17",title:"OT",name:"Others",count:0,percent:0,order:19}],Zu={class:"defaultTable mt2 dbDataTable"},er=(0,s.Lk)("th",null,"NO",-1),tr=(0,s.Lk)("th",null,"Type",-1),ar=(0,s.Lk)("th",null,"State",-1),lr=(0,s.Lk)("th",null,"Tray Slot",-1),sr=(0,s.Lk)("th",null,"Barcode NO",-1),or=(0,s.Lk)("th",null,"Patient ID",-1),nr=(0,s.Lk)("th",null,"Patient Name",-1),ir=(0,s.Lk)("th",null,"Analyzed Date",-1),cr=(0,s.Lk)("th",null,"Tact Time(S)",-1),ur=(0,s.Lk)("th",null,"Submit",-1),rr=(0,s.Lk)("th",null,"Submit Date",-1),dr=(0,s.Lk)("th",null,"Edit",-1),mr=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"15%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"3%"}),(0,s.Lk)("col",{width:"15%"}),(0,s.Lk)("col",{width:"3%"})],-1),vr={key:0},pr=["onClick","onDblclick","data-row-id","onContextmenu"],gr=["onUpdate:modelValue","onChange","checked"],Ir={key:1},br=(0,s.Lk)("tr",{class:"text-center"},[(0,s.Lk)("td",{colspan:"13"}," NO Data")],-1),yr=[br],fr=(0,s.Lk)("li",null,"export XLSX",-1),Cr=(0,s.Lk)("h2",null,"Edit order data",-1),kr={class:"editOrder"},hr=(0,s.Lk)("span",null,"PB/BF",-1),Sr=(0,s.Lk)("span",null,"Tray Slot",-1),_r=(0,s.Lk)("span",null,"BARCODE ID",-1),Er=(0,s.Lk)("span",null,"PATIENT ID",-1),Nr=(0,s.Lk)("span",null,"PATIENT NAME",-1),Lr=(0,s.Lk)("span",null,"Analyzed date",-1),Rr=(0,s.Lk)("span",null,"Signed state",-1),Tr=(0,s.Lk)("li",null,[(0,s.Lk)("span",null,"Barcode Image")],-1);var wr={__name:"listTable",props:["dbData"],setup(e,{emit:t}){const a=e,i=(0,o.KR)(null),c=t,r=(0,o.KR)(""),d=(0,o.KR)(!1),m=(0,o.KR)({}),v=(0,u.Pj)(),p=(0,s.EW)((()=>v.state.userModule)),b=(0,o.KR)(""),y=(0,o.KR)(!1),f=(0,o.KR)(""),C=(0,o.KR)(""),k=(0,o.KR)(""),h=e=>{const t=H()(e,"YYYYMMDDHHmmssSSSSS");return t.format("YYYY-MM-DD HH:mm:ss")},S=(0,o.KR)({visible:!1,x:0,y:0}),_=(0,o.KR)([]),E=sessionStorage.getItem("user"),N=JSON.parse(E||"{}"),L=(0,o.KR)(""),R=(0,o.KR)({}),T=(0,o.KR)(!1),w=(0,o.KR)(null),P=(0,o.KR)([]),A=(0,o.KR)(!1),D=(0,s.nI)();(0,s.EW)((()=>v.state.commonModule.siteCd));(0,s.sV)((async()=>{k.value=JSON.parse(sessionStorage.getItem("pcIp")),b.value=window.PROJECT_TYPE;try{L.value=N.id,await Q()}catch(e){console.log(e)}document.addEventListener("click",X)})),(0,s.hi)((()=>{document.removeEventListener("click",X)})),(0,s.nT)((async()=>{if(a.dbData.length>0){await(0,s.dY)();const e=sessionStorage.getItem("dbBaseTrClickId")||0,t=a.dbData.filter((t=>t.id===Number(e)));Y(t[0]);const l=new IntersectionObserver($,{root:null,rootMargin:"0px",threshold:.5});i.value&&l.observe(i.value)}}));const M=()=>{T.value=!1},x=()=>{T.value=!0,U()},O=()=>{te(R.value),U()},K=()=>{J(R.value),U()},B=()=>{a.dbData.forEach((e=>{e.checked=A.value}))},U=()=>{S.value.x=0,S.value.y=0,S.value.visible=!1},X=e=>{const t=document.querySelector(".context-menu");t&&!t.contains(e.target)&&U()},F=(e,t)=>{if(0!==a.dbData.filter((e=>e.checked)).length){if(R.value=e,0!==Object.keys(e?.wbcInfo).length){const t=e?.wbcInfo?.wbcInfo[0],a=t.sort(((e,t)=>e.id-t.id));P.value=a}t&&(S.value.x=t.clientX,S.value.y=t.clientY,S.value.visible=!0)}else j(G.IDS_ERROR_SELECT_A_TARGET_ITEM)},W=e=>{e.hasOwnProperty("checked")||(e.checked=!1)},$=(e,t)=>{e.forEach((e=>{e.isIntersecting&&1!==e.intersectionRatio&&c("loadMoreData")}))},j=e=>{y.value=!0,f.value="error",C.value=e},V=()=>{y.value=!1},Y=e=>{if(!e)return;c("selectItem",e),r.value=e.id,sessionStorage.setItem("dbBaseTrClickId",e.id);const t=document.querySelector(`[data-row-id="${e.id}"]`);t&&t.scrollIntoView({behavior:"smooth",block:"center"})},q=async e=>{try{const t=await os(),a=`oldPcIp=${t.data}&newEntityId=${e.id}&newPcIp=${t.data}`;await Lc(a).then((e=>{D?.appContext.config.globalProperties.$socket.emit("state",{type:"SEND_DATA",payload:"refreshDb"})})).catch((e=>{console.log("3 err")}))}catch(t){console.log(t)}},J=async e=>{if(e.lock_status)return;let t=[];0===Object.keys(e?.wbcInfo).length?(t="bm"!==b.value?Qu:zu,e.wbcInfo="bm"!==b.value?{wbcInfo:[Qu]}:{wbcInfo:[zu]}):t=e?.wbcInfo?.wbcInfo[0];const a=t.sort(((e,t)=>e.id-t.id));sessionStorage.setItem("selectItemRbc",JSON.stringify(e?.rbcInfo)),sessionStorage.setItem("selectItemWbc",JSON.stringify(a)),sessionStorage.setItem("selectItems",JSON.stringify(e)),await v.dispatch("commonModule/setCommonInfo",{clonedWbcInfo:e.wbcInfoAfter}),await v.dispatch("commonModule/setCommonInfo",{clonedRbcInfo:e.rbcInfo.rbcClass}),await q(e),await UI.push("/databaseDetail")},Q=async()=>{try{const e=await ie(),t=e.data;_.value=t}catch(e){}},z=e=>{d.value=e},Z=()=>{},ee=async()=>{try{const e={id:m.value.id,barcodeNo:m.value.barcodeNo,patientId:m.value.patientId,patientNm:m.value.patientNm},t=[...a.dbData],l=t.findIndex((e=>e.id===m.value.id));-1!==l&&(t[l]={...t[l],...e});const s=await hc({userId:Number(p.value.id),runingInfoDtoItems:[t[l]]});s?(j("success"),c("initData"),z()):console.error("   ")}catch(e){console.error("Error:",e)}},te=async e=>{ae(),m.value=JSON.parse(JSON.stringify(e)),m.value.submitState=["","Ready","checkFirst"].includes(m.value.submitState)?"":m.value.submitState,m.value.testType="bm"!==b.value?g(e?.testType):I(e?.testType)},ae=()=>{d.value=!0},le=async()=>{try{const e=a.dbData.filter((e=>e.checked));if(0===e.length)return void j(G.IDS_ERROR_SELECT_A_TARGET_ITEM);const t=e.map((e=>e.id)),l=""!==e?.img_drive_root_path&&e?.img_drive_root_path?e?.img_drive_root_path:sessionStorage.getItem("iaRootPath"),s=e.map((e=>`${l}/${e.slotId}`)),o={ids:t,img_drive_root_path:s},n=await _c(o);n.success?(j("Items deleted successfully"),c("refresh"),U()):console.error("Failed to delete items")}catch(e){console.error("Error:",e)}},se=(e,t)=>{switch(e){case"Ready":return"Ready";case"Submit":return`Submit (${t})`;default:return"Ready"}};return(t,a)=>{const c=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("table",Zu,[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[er,(0,s.Lk)("th",null,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=e=>A.value=e),onChange:B},null,544),[[l.lH,A.value]])]),tr,ar,lr,sr,or,nr,ir,cr,ur,rr,dr])]),mr,0!==e.dbData.length?((0,s.uX)(),(0,s.CE)("tbody",vr,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.dbData,((e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id,class:(0,n.C4)({selectedTr:r.value===e.id,submittedTr:"Submit"===e.submitState,rock:e.lock_status&&e.pcIp!==k.value,checkFirst:"checkFirst"===e.submitState}),onClick:t=>Y(e),onDblclick:t=>J(e),ref_for:!0,ref:"firstRow",style:{height:"49px"},"data-row-id":e.id,onContextmenu:(0,l.D$)((t=>F(e,t)),["prevent"])},[(0,s.Lk)("td",null,(0,n.v_)(t+1),1),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t=>e.checked=t,onChange:t=>W(e),checked:e.checked},null,40,gr),[[l.lH,e.checked]])]),(0,s.Lk)("td",null,(0,n.v_)("bm"!==b.value?(0,o.R1)(g)(e?.testType):(0,o.R1)(I)(e?.testType)),1),(0,s.Lk)("td",null,[(0,s.bF)(c,{icon:["fas",""+(e?.lock_status?"lock":"lock-open")]},null,8,["icon"])]),(0,s.Lk)("td",null,(0,n.v_)(e?.traySlot),1),(0,s.Lk)("td",null,(0,n.v_)(e?.barcodeNo),1),(0,s.Lk)("td",null,(0,n.v_)(e?.patientId),1),(0,s.Lk)("td",null,(0,n.v_)(e?.patientNm),1),(0,s.Lk)("td",null,(0,n.v_)(""===e?.analyzedDttm?"":h(e?.analyzedDttm)),1),(0,s.Lk)("td",null,(0,n.v_)(e?.tactTime),1),(0,s.Lk)("td",null,(0,n.v_)(se(e?.submitState,e?.submitUserId)),1),(0,s.Lk)("td",null,(0,n.v_)(""!==e?.submitOfDate&&e?.submitOfDate?h(e?.submitOfDate):""),1),(0,s.Lk)("td",null,["checkFirst"===e?.submitState||""===e?.submitState?((0,s.uX)(),(0,s.Wv)(c,{key:0,icon:["fas","pen-to-square"],onClick:t=>te(e)},null,8,["onClick"])):(0,s.Q3)("",!0)])],42,pr)))),128)),(0,s.Lk)("tr",null,[(0,s.Lk)("div",{ref_key:"loadMoreRef",ref:i,style:{height:"10px"}},null,512)])])):((0,s.uX)(),(0,s.CE)("tbody",Ir,yr))]),S.value.visible?((0,s.uX)(),(0,s.CE)("div",{key:0,style:(0,n.Tr)({top:S.value.y-60+"px",left:S.value.x+"px"}),class:"context-menu"},[(0,s.Lk)("ul",null,[(0,s.Lk)("li",{onClick:x},"Print"),(0,s.Lk)("li",{onClick:K},"Classification"),(0,s.Lk)("li",{onClick:O},"Edit order data"),(0,s.Lk)("li",{onClick:le},"Delete"),fr])],4)):(0,s.Q3)("",!0),d.value?((0,s.uX)(),(0,s.Wv)(fc,{key:1,"onUpdate:closeLayer":z,onAfterOpen:Z},{header:(0,s.k6)((()=>[Cr])),content:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.Lk)("ul",kr,[(0,s.Lk)("li",null,[hr,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>m.value.testType=e)},null,512),[[l.Jo,m.value.testType]])]),(0,s.Lk)("li",null,[Sr,(0,s.bo)((0,s.Lk)("input",{type:"text",readonly:"","onUpdate:modelValue":a[2]||(a[2]=e=>m.value.traySlot=e)},null,512),[[l.Jo,m.value.traySlot]])]),(0,s.Lk)("li",null,[_r,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>m.value.barcodeNo=e),placeholder:"BARCODE ID"},null,512),[[l.Jo,m.value.barcodeNo]])]),(0,s.Lk)("li",null,[Er,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[4]||(a[4]=e=>m.value.patientId=e),placeholder:"PATIENT ID"},null,512),[[l.Jo,m.value.patientId]])]),(0,s.Lk)("li",null,[Nr,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=e=>m.value.patientNm=e),placeholder:"PATIENT NAME"},null,512),[[l.Jo,m.value.patientNm]])]),(0,s.Lk)("li",null,[Lr,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=e=>m.value.analyzedDttm=e),readonly:""},null,512),[[l.Jo,m.value.analyzedDttm]])]),(0,s.Lk)("li",null,[Rr,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=e=>m.value.submitState=e),readonly:""},null,512),[[l.Jo,m.value.submitState]])]),Tr])]),(0,s.Lk)("div",{class:"modalBottom"},[(0,s.Lk)("button",{onClick:ee},"Ok")])])),_:1})):(0,s.Q3)("",!0),T.value?((0,s.uX)(),(0,s.Wv)(Ju,{key:2,selectItems:R.value,ref_key:"printContent",ref:w,printOnOff:T.value,selectItemWbc:P.value,onPrintClose:M},null,8,["selectItems","printOnOff","selectItemWbc"])):(0,s.Q3)("",!0),y.value?((0,s.uX)(),(0,s.Wv)(ze,{key:3,"is-visible":y.value,type:f.value,message:C.value,onHide:V,"onUpdate:hideAlert":V},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}};const Pr=wr;var Ar=Pr;const Dr={key:0},Mr=(0,s.Lk)("h3",{class:"orderTitle hh3title"},"Order Information",-1),xr={class:"orderListUi"},Or=(0,s.Lk)("li",null,[(0,s.eW)("LIS status "),(0,s.Lk)("span",null,"No data sent or received from LIS")],-1),Kr=(0,s.Lk)("span",null,"No data sent or received from LIS",-1),Br={key:0},Ur={key:1},Xr=["src"],Fr=(0,s.Lk)("h3",{class:"mt2 mb1 hh3title"},"Result Information",-1),Wr={key:0},Gr={key:0};var $r={__name:"listInfo",props:["selectedItem"],setup(e){const t=e,a=(0,o.KR)(""),l=(0,o.KR)("");(0,s.sV)((()=>{a.value=sessionStorage.getItem("iaRootPath"),a.value&&(l.value=r("barcode_image.jpg"))})),(0,s.wB)((()=>t.selectedItem),(e=>{a.value&&(l.value=r("barcode_image.jpg",e))}));const i=e=>{const t=H()(e,"YYYYMMDDHHmmssSSSSS");return t.format("YYYY-MM-DD HH:mm:ss")},c=e=>e&&e.length>0&&!["12_NR","13_GP","14_PA","15_AR","16_MA","17_SM"].includes(result.dirName),u=window.APP_API_BASE_URL||"http://192.168.0.131:3002";function r(e){const l=""!==t.selectedItem?.img_drive_root_path&&t.selectedItem?.img_drive_root_path?t.selectedItem?.img_drive_root_path:a.value;return`${u}/images?folder=${l+"/"+t.selectedItem.slotId+"/"+kt.barcodeDirName+"/"}&imageName=${e}`}return(t,a)=>0!==Object.keys(e.selectedItem).length?((0,s.uX)(),(0,s.CE)("div",Dr,[(0,s.Lk)("div",null,[Mr,(0,s.Lk)("ul",xr,[(0,s.Lk)("li",null,[(0,s.eW)("Order ID "),(0,s.Lk)("span",null,(0,n.v_)(e.selectedItem?.slotId),1)]),Or,(0,s.Lk)("li",null,[(0,s.eW)("Type of order "),Kr,"01"===e.selectedItem?.testType||"04"===e.selectedItem?.testType?((0,s.uX)(),(0,s.CE)("span",Br,"WBC + RBC")):((0,s.uX)(),(0,s.CE)("span",Ur,(0,n.v_)(e.selectedItem?.testType),1))]),(0,s.Lk)("li",null,[(0,s.eW)("NS, NB Integration "),(0,s.Lk)("span",null,(0,n.v_)(e.selectedItem?.isNsNbIntegration),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Patient ID "),(0,s.Lk)("span",null,(0,n.v_)(e.selectedItem?.patientId),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Patient Name "),(0,s.Lk)("span",null,(0,n.v_)(e.selectedItem?.patientNm),1)]),(0,s.Lk)("li",null,[(0,s.Lk)("img",{src:l.value,style:{width:"235px"}},null,8,Xr)])])]),(0,s.Lk)("div",null,[Fr,(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,[(0,s.eW)("Analyzed Date "),(0,s.Lk)("span",null,(0,n.v_)(i(e.selectedItem?.analyzedDttm)),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Signed State "),(0,s.Lk)("span",null,(0,n.v_)(e.selectedItem?.submitState),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Signed of Date "),(0,s.Lk)("span",null,(0,n.v_)(e.selectedItem?.submitOfDate),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Signed User ID "),(0,s.Lk)("span",null,(0,n.v_)(e.selectedItem?.submitUserId),1)]),"01"===e.selectedItem?.testType||"04"===e.selectedItem?.testType?((0,s.uX)(),(0,s.CE)("li",Wr,[c(e.selectedItem?.classificationResult)?((0,s.uX)(),(0,s.CE)("div",Gr,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.selectedItem.classificationResult,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.title},[(0,s.Lk)("p",null,(0,n.v_)(e.title),1),(0,s.Lk)("p",null,(0,n.v_)(e.count),1),(0,s.Lk)("p",null,(0,n.v_)(e.percent),1)])))),128))])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])])])):(0,s.Q3)("",!0)}};const Hr=$r;var jr=Hr;const Vr=e=>((0,s.Qi)("data-v-4e8f47d4"),e=e(),(0,s.jt)(),e),Yr={class:"mt3"},qr=Vr((()=>(0,s.Lk)("h3",{class:"mb1 hh3title infoImageTitle"},"WBC Images",-1))),Jr={key:0,class:"dbWbcImageContainer"},Qr=["src","onError","onClick"],zr={key:1};var Zr=(0,s.pM)({__name:"listWbcImg",props:["dbData","selectedItem"],setup(e){const t=e,a=sessionStorage.getItem("iaRootPath"),i=window.APP_API_BASE_URL||"http://192.168.0.131:3002",c=(0,o.KR)([]),u=(0,o.KR)({}),r=(0,o.KR)("");(0,s.sV)((()=>{c.value=[],v()})),(0,s.wB)((()=>t.selectedItem),(()=>{c.value=[],v()}),{deep:!0});const d=e=>{r.value===e?r.value="":r.value=e},m=e=>r.value===e;function v(){t.selectedItem?.wbcInfo&&0!==Object.keys(t.selectedItem?.wbcInfo).length&&(c.value=t.selectedItem?.wbcInfo?.wbcInfo[0]?.reduce(((e,t)=>(t.images&&t.images.length>0&&e.push({id:t.id,images:t.images,title:t.title}),e)),[])||[])}function p(e,l,s){const{selectedItem:o}=t;if(!o?.wbcInfo?.wbcInfo||0===o?.wbcInfo?.wbcInfo.length)return"";const n=o.slotId||"",c=""!==o?.img_drive_root_path&&o?.img_drive_root_path?o?.img_drive_root_path:a,u=`${c}/${n}/01_WBC_Classification/${l}_${s}`;return`${i}/images/getImageRealTime?folder=${u}&imageName=${e}`}function g(e,t){u.value[`${e}-${t}`]=!0}return(e,t)=>((0,s.uX)(),(0,s.CE)("div",Yr,[qr,c.value.length>0?((0,s.uX)(),(0,s.CE)("div",Jr,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.value,(e=>((0,s.uX)(),(0,s.CE)(s.FK,{key:e.id},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.images,(t=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("img",{key:t.fileName,class:(0,n.C4)(["dbRightImages",["dbRightImages",{"selected-image":m(`${e.id}-${t.fileName}`)}]]),src:p(t.fileName,e.id,e.title),onError:a=>g(e.id,t.fileName),onClick:a=>d(`${e.id}-${t.fileName}`)},null,42,Qr)),[[l.aG,!u.value[`${e.id}-${t.fileName}`]]]))),128))],64)))),128))])):((0,s.uX)(),(0,s.CE)("div",zr,"No images available"))]))}});const ed=(0,Tl.A)(Zr,[["__scopeId","data-v-4e8f47d4"]]);var td=ed;const ad={class:"mt3"},ld=(0,s.Lk)("h3",{class:"mb1 hh3title infoImageTitle"},"BM Images",-1),sd={key:0,class:"dbBmImageContainer"},od=["src","onError"],nd={key:1};var id=(0,s.pM)({__name:"listBmImg",props:["dbData","selectedItem"],setup(e){const t=e,a=(0,u.Pj)(),n=(0,s.EW)((()=>a.state.commonModule.iaRootPath)),i=window.APP_API_BASE_URL||"http://192.168.0.131:3002",c=(0,o.KR)([]),r=(0,o.KR)({});function d(){t.selectedItem?.wbcInfo&&0!==Object.keys(t.selectedItem?.wbcInfo).length&&(c.value=t.selectedItem?.wbcInfo?.wbcInfo[0]?.reduce(((e,t)=>(t.images&&t.images.length>0&&e.push({id:t.id,images:t.images,title:t.title}),e)),[])||[])}function m(e,a,l){const{selectedItem:s}=t;if(!s?.wbcInfo?.wbcInfo||0===s?.wbcInfo?.wbcInfo.length)return"";const o=s.slotId||"",c=""!==s?.rootPath&&s?.rootPath?s?.rootPath:n.value,u=`${c}/${o}/04_BM_Classification/${a}_${l}`;return`${i}/images?folder=${u}&imageName=${e}`}function v(e,t){r.value[`${e}-${t}`]=!0}return(0,s.sV)((()=>{d()})),(0,s.wB)((()=>t.selectedItem),(()=>{d()})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",ad,[ld,c.value.length>0?((0,s.uX)(),(0,s.CE)("div",sd,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.value,(e=>((0,s.uX)(),(0,s.CE)(s.FK,{key:e.id},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.images,(t=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("img",{key:t.fileName,class:"dbRightImages",src:m(t.fileName,e.id,e.title),onError:a=>v(e.id,t.fileName)},null,40,od)),[[l.aG,!r.value[`${e.id}-${t.fileName}`]]]))),128))],64)))),128))])):((0,s.uX)(),(0,s.CE)("div",nd,"No images available"))]))}});const cd=id;var ud=cd;const rd={class:"titleH3"},dd={class:"listBoxTable"},md={class:"filterListDiv"},vd=(0,s.Lk)("option",{value:"barcodeNo"},"Barcode No",-1),pd=(0,s.Lk)("option",{value:"patientId"},"Patient ID",-1),gd=(0,s.Lk)("option",{value:"patientNm"},"Patient Name",-1),Id=[vd,pd,gd],bd={class:"settingDatePickers"},yd={key:0,class:"filterDivBox"},fd={key:0,class:"nrCount"},Cd=(0,s.Lk)("span",null,"NR count",-1),kd={class:"wbcTotal"},hd=(0,s.Lk)("span",null,"WBC Total",-1),Sd=(0,s.Lk)("option",{value:"all"},"Do Not Select",-1),_d=(0,s.Lk)("option",null,"DESC",-1),Ed=(0,s.Lk)("option",null,"ASC",-1),Nd=[Sd,_d,Ed],Ld={key:1,class:"wbcInfoFilter"},Rd=(0,s.Lk)("span",null,"WBC Info Filter",-1),Td={class:"wbcInfoFilter"},wd=["id","onUpdate:modelValue"],Pd=["for"],Ad={class:"lastTestType"},Dd=(0,s.Lk)("span",null,"Test Type",-1),Md=["checked"],xd=(0,s.Lk)("span",null,"ALL",-1),Od=["checked"],Kd=(0,s.Lk)("span",null,"Diff",-1),Bd=["checked"],Ud=(0,s.Lk)("span",null,"PBS",-1),Xd={class:"listBox"};var Fd=(0,s.pM)({__name:"index",setup(e){const t=(0,o.KR)([]),a=(0,o.KR)(!1),i=(0,o.KR)(""),c=new Date,u=new Date(c);u.setDate(c.getDate()-30);const r=(0,o.KR)(u),d=(0,o.KR)(new Date),m=(0,o.KR)(""),v=(0,o.KR)("barcodeNo"),p=(0,o.KR)(1),g=(0,o.KR)({}),I=(0,o.KR)([]),b=(0,o.KR)([]),y=(0,o.KR)(0),f=(0,o.KR)(""),C=(0,o.KR)(""),k=(0,o.KR)(!1),h=(0,o.KR)(!1),S=(0,s.nI)();S?.appContext.config.globalProperties.$socket.on("stateVal",(async e=>{await L()})),(0,s.sV)((async()=>{await L(),h.value="bm"===window.PROJECT_TYPE}));const _=()=>{k.value=!k.value},E=e=>{f.value=f.value===e?"":e},N=()=>{const e=I.value?.filter((e=>e.checked)).map((e=>e.title));b.value=e},L=async()=>{I.value=[];const e=w();if(0!==Object.keys(e).length){v.value=e.searchType||"barcodeNo",m.value=e.searchText||"",r.value=new Date(e.startDate)||new Date,d.value=new Date(e.endDate)||new Date,p.value=e.page||1;const t=Number(e.page)||1;for(let e=1;e<=t;e++)await P("mounted",e)}else await P("mounted",1)},R=e=>{g.value=e},T=()=>{const e={page:p.value,searchType:v.value,searchText:m.value,startDate:J(r.value),endDate:J(d.value)};sessionStorage.setItem("lastSearchParams",JSON.stringify(e))},w=()=>{const e=sessionStorage.getItem("lastSearchParams");return e?JSON.parse(e):{}},P=async(e,a)=>{"search"===e&&(p.value=1);const l={page:"mounted"!==e?p.value:Number(a),pageSize:20,startDay:J(r.value),endDay:J(d.value),barcodeNo:"barcodeNo"===v.value?m.value:void 0,patientId:"patientId"===v.value?m.value:void 0,patientNm:"patientNm"===v.value?m.value:void 0,nrCount:y.value};0!==b.value.length&&(l.title=b.value),"00"!==f.value&&""!==f.value&&(l.testType=f.value),""!==C.value&&"all"!==C.value&&(l.wbcCountOrder=C.value);try{const a=await Sc(l);if(a&&a.data){const l=a.data.data;0===l.length?(1===p.value?p.value=1:p.value-=1,0===l.length&&"1"===String(a.data?.page)&&(t.value=l)):("search"===e?t.value=l:l.forEach((e=>{const a=t.value.findIndex((t=>t.id===e.id));-1!==a?t.value[a]=e:t.value.push(e)})),I.value=t.value[0]?.wbcInfo?.wbcInfo[0],""!==C.value&&"all"!==C.value||(t.value=t.value.sort(((e,t)=>{const a=H()(e.analyzedDttm,"YYYYMMDDHHmmssSSS"),l=H()(t.analyzedDttm,"YYYYMMDDHHmmssSSS");return l.diff(a)}))),T())}}catch(s){console.error(s)}},A=()=>{const e=d.value.getTime()-r.value.getTime(),t=e/864e5;t>30?x("You cannot select a period of more than 30 days."):P("search")},D=()=>{P("search")},M=async()=>{p.value+=1,await P("loadMoreData")},x=async e=>{a.value=!0,i.value=e},O=()=>{a.value=!1};return(e,c)=>{const u=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("h3",rd,[(0,s.eW)(" Classification List "),(0,s.Lk)("button",{onClick:_},[(0,s.bF)(u,{icon:["fas","list-check"]})])]),(0,s.Lk)("div",dd,[(0,s.Lk)("div",md,[(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":c[0]||(c[0]=e=>v.value=e),class:"searchSelect"},Id,512),[[l.u1,v.value]]),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":c[1]||(c[1]=e=>m.value=e),class:"searchInputBox"},null,512),[[l.Jo,m.value]]),(0,s.Lk)("div",bd,[(0,s.bF)((0,o.R1)(Fs.A),{modelValue:r.value,"onUpdate:modelValue":c[2]||(c[2]=e=>r.value=e)},null,8,["modelValue"]),(0,s.bF)((0,o.R1)(Fs.A),{modelValue:d.value,"onUpdate:modelValue":c[3]||(c[3]=e=>d.value=e)},null,8,["modelValue"])]),(0,s.Lk)("button",{class:"searchClass",onClick:A},"Search")]),k.value?((0,s.uX)(),(0,s.CE)("div",yd,[h.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",fd,[Cd,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":c[4]||(c[4]=e=>y.value=e)},null,512),[[l.Jo,y.value]])])),(0,s.Lk)("div",kd,[hd,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":c[5]||(c[5]=e=>C.value=e)},Nd,512),[[l.u1,C.value]])]),h.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Ld,[Rd,(0,s.Lk)("ul",Td,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(I.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"checkbox_"+t,"onUpdate:modelValue":t=>e.checked=t,onChange:N},null,40,wd),[[l.lH,e.checked]]),(0,s.Lk)("label",{for:"checkbox_"+t},(0,n.v_)(e.title),9,Pd)])))),128))])])),(0,s.Lk)("div",Ad,[Dd,(0,s.Lk)("div",null,[(0,s.Lk)("label",null,[(0,s.Lk)("input",{type:"checkbox",value:"00",onChange:c[6]||(c[6]=e=>E("00")),checked:"00"===f.value},null,40,Md),xd]),(0,s.Lk)("label",null,[(0,s.Lk)("input",{type:"checkbox",value:"01",onChange:c[7]||(c[7]=e=>E("01")),checked:"01"===f.value},null,40,Od),Kd]),(0,s.Lk)("label",null,[(0,s.Lk)("input",{type:"checkbox",value:"02",onChange:c[8]||(c[8]=e=>E("04")),checked:"04"===f.value},null,40,Bd),Ud])])])])):(0,s.Q3)("",!0)]),(0,s.bF)(Ar,{dbData:t.value,onLoadMoreData:M,onInitData:L,onSelectItem:R,onRefresh:D},null,8,["dbData"])]),(0,s.Lk)("div",Xd,[(0,s.bF)(jr,{dbData:t.value,selectedItem:g.value},null,8,["dbData","selectedItem"]),h.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(td,{key:0,dbData:t.value,selectedItem:g.value},null,8,["dbData","selectedItem"])),h.value?((0,s.uX)(),(0,s.Wv)(ud,{key:1,dbData:t.value,selectedItem:g.value},null,8,["dbData","selectedItem"])):(0,s.Q3)("",!0)])]),a.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":a.value,message:i.value,onHide:O,"onUpdate:hideAlert":O},null,8,["is-visible","message"])):(0,s.Q3)("",!0)],64)}}});const Wd=Fd;var Gd=Wd;const $d={class:"mb1"};var Hd={__name:"Confirm",props:["isVisible","type","message"],emits:["okConfirm"],setup(e,{emit:t}){const a=e,l=(0,s.EW)((()=>`confirm-${a.type}`)),o=t,i=()=>{o("hide")},c=()=>{o("okConfirm")};return(t,a)=>e.isVisible?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,n.C4)(["alert",l.value])},[(0,s.Lk)("p",$d,(0,n.v_)(e.message),1),(0,s.Lk)("button",{class:"alertButton",onClick:c},"OK"),(0,s.Lk)("button",{class:"alertButton",onClick:i},"CLOSE")],2)):(0,s.Q3)("",!0)}};const jd=Hd;var Vd=jd;const Yd=e=>((0,s.Qi)("data-v-f07e55b4"),e=e(),(0,s.jt)(),e),qd={class:"mt2 mb2"},Jd=Yd((()=>(0,s.Lk)("h3",{class:"wbcClassInfoLeft"},"RBC Classification",-1))),Qd={class:"leftWbcInfo"},zd={style:{position:"relative"}},Zd={key:0,class:"memoModal"},em={class:"categoryNm"},tm={key:0,class:"mb1 liTitle"},am={class:"classNmRbc"},lm={key:0,class:"mb1 liTitle"},sm=["value","onChange"],om={class:"degree analysis"},nm={key:0,class:"mb1 liTitle"},im={key:0},cm={key:1},um={key:0},rm={key:1},dm={class:"categories"},mm=Yd((()=>(0,s.Lk)("ul",{class:"categoryNm"},[(0,s.Lk)("li",null,"Others")],-1))),vm={class:"classNmRbc"},pm=Yd((()=>(0,s.Lk)("span",null,"Platelets",-1))),gm=Yd((()=>(0,s.Lk)("span",null,"Malaria",-1))),Im={class:"degree analysis"},bm={style:{"font-size":"0.7rem"}},ym={style:{"font-size":"0.7rem"}},fm={key:0,class:"beforeAfterBtn"};var Cm=(0,s.pM)({__name:"rbcClass",props:["rbcInfo","selectItems","type","allCheckClear"],setup(e,{emit:t}){const a=e=>e?.categoryNm,i=(0,o.KR)([]),r=e,d=(0,o.KR)([]),m=(0,o.KR)(""),v=(0,o.KR)(""),p=(0,o.KR)(""),g=(0,o.KR)(!1),I=(0,u.Pj)(),b=(0,o.KR)(!1),y=(0,o.KR)(""),f=(0,o.KR)(""),C=(0,o.KR)(!1),k=(0,o.KR)(""),h=(0,o.KR)(""),S=(0,s.EW)((()=>I.state.userModule)),_=((0,s.EW)((()=>I.state.commonModule.clonedRbcInfo)),(0,o.KR)(!1)),E=(0,o.KR)([]),N=t,L=(0,o.KR)(""),R=(0,c.rd)(),T=(0,o.KR)(!1);(0,s.sV)((()=>{"/report"===R.currentRoute.value.path&&(d.value=r.selectItems.rbcInfoAfter,console.log(r.selectItems.rbcInfoAfter)),m.value=r.selectItems?.rbcInfo.pltCount,v.value=r.selectItems?.rbcInfo.malariaCount,p.value=r.selectItems.rbcMemo,L.value=r.selectItems?.rbcInfo?.maxRbcCount,T.value="/report"===R.currentRoute.value.path})),(0,s.wB)((()=>r.rbcInfo),(e=>{d.value=r.selectItems.rbcInfoAfter,P()})),(0,s.wB)((()=>r.allCheckClear),(e=>{i.value=[],E.value=[]}),{deep:!0}),(0,s.wB)((()=>r.selectItems),(e=>{m.value=r.selectItems?.pltCount,v.value=r.selectItems?.malariaCount}));const w=()=>{_.value=!0,N("isBeforeUpdate",!0),d.value=r.rbcInfo.rbcInfo.rbcClass?r.rbcInfo.rbcInfo.rbcClass:r.rbcInfo.rbcInfo},P=()=>{_.value=!1,N("isBeforeUpdate",!1),r.rbcInfo.rbcInfoAfter&&(d.value=r.rbcInfo.rbcInfoAfter)},A=(e,t,a,l)=>{t?E.value.some((t=>t.classNm===e&&t.classId===l&&t.categoryId===a))||E.value.push({classNm:e,categoryId:a,classId:l}):E.value=E.value.filter((t=>!(t.classNm===e&&t.classId===l&&t.categoryId===a))),N("classInfoArrUpdate",E.value)},D=async(e,t,a,l=!1)=>{if(_.value)return;const s=d.value.map((s=>s?.classInfo.map((o=>(o.classNm===t.classNm&&e.categoryNm===s?.categoryNm&&(o.degree=String(l?0===Number(o.degree)?1:0:a)),o))))),o={...r.selectItems,rbcInfoAfter:r.selectItems.rbcInfoAfter.map(((e,t)=>({...e,classInfo:s[t]})))},n=r.selectItems.rbcInfoAfter.map(((e,t)=>({...e,classInfo:s[t]})));sessionStorage.setItem("selectItemRbc",JSON.stringify(n)),sessionStorage.setItem("selectItems",JSON.stringify(o));const i=await Ec(String(r.selectItems.id)),c={rbcInfoAfter:n},u={...i.data,...c};await K([u],!1)},M=()=>{p.value=""!==p.value?p.value:r.selectItems.rbcMemo,g.value=!g.value},x=()=>{g.value=!1},O=async()=>{const e=await Ec(String(r.selectItems.id)),t={rbcMemo:p.value},a={...e.data,...t};await K([a],!0),g.value=!1},K=async(e,t)=>{try{const a=await hc({userId:Number(S.value.id),runingInfoDtoItems:[e]});if(a){t&&B("success");const a=e;sessionStorage.setItem("selectItems",JSON.stringify(a)),p.value=a.rbcMemo}else console.error("   ")}catch(a){console.error("Error:",a)}},B=e=>{b.value=!0,y.value="success",f.value=e,window.scrollTo({top:0,behavior:"smooth"})},U=()=>{b.value=!1},X=()=>{C.value=!0,h.value=G.IDS_MSG_CONFIRM_SLIDE},F=()=>{$(),C.value=!1},W=()=>{C.value=!1},$=async()=>{const e=H()().local(),t=await Ec(String(r.selectItems.id)),a={submitState:"Submit",submitOfDate:e.format(),submitUserId:S.value.name},l={...t.data,...a};await K(l)};return(t,o)=>{const c=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("div",qd,[Jd,(0,s.Lk)("ul",Qd,[(0,s.Lk)("li",zd,[(0,s.bF)(c,{icon:["fas","comment-dots"],onClick:M}),g.value?((0,s.uX)(),(0,s.CE)("div",Zd,[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":o[0]||(o[0]=e=>p.value=e)},null,512),[[l.Jo,p.value]]),(0,s.Lk)("button",{onClick:O},"ok"),(0,s.Lk)("button",{onClick:x},"cancel")])):(0,s.Q3)("",!0)]),(0,s.Lk)("li",{onClick:X,class:(0,n.C4)({submitted:"Submit"===e.selectItems.submitState})},[(0,s.bF)(c,{icon:["fas","square-check"]})],2)])]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)([d.value],((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,u)=>((0,s.uX)(),(0,s.CE)("div",{key:u,class:"categories"},[(0,s.Lk)("ul",em,[0===u?((0,s.uX)(),(0,s.CE)("li",tm,"Category")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(a(e)),1)]),(0,s.Lk)("ul",am,[0===u?((0,s.uX)(),(0,s.CE)("li",lm,"Class")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((a,c)=>((0,s.uX)(),(0,s.CE)("li",{key:`${t}-${u}-${c}`},[(0,s.Lk)("span",null,(0,n.v_)(a?.classNm),1),(0,s.bo)((0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:`${t}-${u}-${c}`,"onUpdate:modelValue":o[1]||(o[1]=e=>i.value=e),onChange:t=>A(a.classNm,t.target.checked,e.categoryId,a.classId)},null,40,sm),[[l.aG,!T.value],[l.lH,i.value]])],512),[[l.aG,"Shape"===e?.categoryNm||"Inclusion Body"===e.categoryNm]])])))),128))]),(0,s.Lk)("ul",om,[0===u?((0,s.uX)(),(0,s.CE)("li",nm,"Degree")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((a,l)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:`${t}-${u}-${l}`},["01"!==a.classId||"05"===e.categoryId?((0,s.uX)(),(0,s.CE)("li",im,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(4,(t=>(0,s.bF)(c,{icon:["fas","circle"],key:t,onClick:l=>D(e,a,t-1,!1),class:(0,n.C4)({degreeActive:t<Number(a?.degree)+2||0,"degree0-img":t>=Number(a?.degree)+1||0})},null,8,["onClick","class"]))),64))])):((0,s.uX)(),(0,s.CE)("li",cm,["0"===a.degree?((0,s.uX)(),(0,s.CE)("div",um,[(0,s.bF)(c,{onClick:t=>D(e,a,"0",!0),icon:["fas","circle"]},null,8,["onClick"])])):((0,s.uX)(),(0,s.CE)("div",rm,[(0,s.bF)(c,{onClick:t=>D(e,a,"1",!0),icon:["fas","circle"],class:"degreeActive"},null,8,["onClick"])]))]))],64)))),128))])])))),128))],64)))),128)),(0,s.Lk)("div",null,[(0,s.Lk)("div",dm,[mm,(0,s.Lk)("ul",vm,[(0,s.Lk)("li",null,[pm,(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"9-9-1","onUpdate:modelValue":o[2]||(o[2]=e=>i.value=e),onChange:o[3]||(o[3]=e=>A("Giant Platelet",e.target.checked,"04","01"))},null,544),[[l.aG,!T.value],[l.lH,i.value]])])]),(0,s.Lk)("li",null,[gm,(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"9-9-2","onUpdate:modelValue":o[4]||(o[4]=e=>i.value=e),onChange:o[5]||(o[5]=e=>A("Malaria",e.target.checked,"05","03"))},null,544),[[l.aG,!T.value],[l.lH,i.value]])])])]),(0,s.Lk)("ul",Im,[(0,s.Lk)("li",bm,(0,n.v_)(m.value||0)+" PLT / 1000 RBC",1),(0,s.Lk)("li",ym,(0,n.v_)(v.value||0)+" / "+(0,n.v_)(L.value||0)+" RBC",1)])])]),"report"!==e.type?((0,s.uX)(),(0,s.CE)("div",fm,[(0,s.Lk)("button",{onClick:w,class:(0,n.C4)({isBeforeClicked:_.value})},"Before",2),(0,s.Lk)("button",{onClick:P,class:(0,n.C4)({isBeforeClicked:!_.value})},"After",2)])):(0,s.Q3)("",!0)]),b.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":b.value,type:y.value,message:f.value,onHide:U,"onUpdate:hideAlert":U},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0),C.value?((0,s.uX)(),(0,s.Wv)(Vd,{key:1,"is-visible":C.value,type:k.value,message:h.value,onHide:W,onOkConfirm:F},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const km=(0,Tl.A)(Cm,[["__scopeId","data-v-f07e55b4"]]);var hm=km,Sm=a(4791),_m=a.n(Sm);const Em=[{id:"none",text:"None"},{id:"line",text:"Line"},{id:"cross",text:"Cross"},{id:"circle",text:"Circle"}],Nm=Z(),Lm=async e=>Nm.httpGet(ee.images.move,e,!0),Rm=async e=>Nm.httpPost(ee.images.moveClassImage,e),Tm={key:0},wm=["src","onClick","onDragstart"],Pm=(0,s.Lk)("div",{class:"no-malaria",style:{"text-align":"left"}},"No Malaria",-1),Am=["src","onClick","onDragstart"],Dm={key:1},Mm=(0,s.Lk)("span",null,"Malaria Images do not exist.",-1),xm=[Mm];var Om=(0,s.pM)({__name:"Malaria",props:["selectItems"],setup(e){const t=e,a=sessionStorage.getItem("iaRootPath")||ht.iaRootPath,i=window.APP_API_BASE_URL||"http://192.168.0.115:3002",c=(0,o.KR)([]),u=(0,o.KR)([]),r=(0,o.KR)([]);let d=(0,o.KR)(null),m=(0,o.KR)([]);const v=(0,o.KR)(!1);async function p(e,l){const s=t.selectItems.slotId||"",o=""!==t.selectItems?.img_drive_root_path&&t.selectItems?.img_drive_root_path?t.selectItems?.img_drive_root_path:a,n=`${o}/${s}/${ht.rbcClassDirName}/${e}`;try{const e=await fetch(`${i}/folders?folderPath=${n}`);if(!e.ok)throw v.value=!1,new Error("Network response was not ok");{const t=await e.json();l.value=t.map((e=>`${i}/folders?folderPath=${n}/${e}`)),v.value=!0}}catch(c){console.error(c)}}function g(e){const t=e.target;t.closest(".item-image")||(r.value=[])}function I(e,t,a,l){const s={section:e,imgName:t,index:a};if(r.value.length>0&&r.value[r.value.length-1].section!==e)r.value=[s];else if(l.shiftKey&&null!==d.value){const t=Math.min(d.value,a),l=Math.max(d.value,a);for(let a=t;a<=l;a++){const t=r.value.findIndex((e=>e.index===a));-1===t&&r.value.push({section:e,imgName:"malaria"===e?c.value[a]:u.value[a],index:a})}}else if(l.ctrlKey&&null!==d.value)r.value.push(s);else{const e=r.value.findIndex((e=>e.imgName===t));-1!==e?r.value.splice(e,1):r.value=[s]}d.value=a}function b(e,t){return r.value.some((e=>e.imgName===t))}function y(e,t,a){r.value.length>0?m.value=r.value:m.value=[{section:e,imgName:t,index:a}]}function f(e){for(const t of m.value)e!==t.section&&C(e,t.imgName)}async function C(e,l){const s=t.selectItems.slotId||"",o=""!==t.selectItems?.rootPath&&t.selectItems?.rootPath?t.selectItems?.rootPath:a,n=`${o}/${s}/${ht.rbcClassDirName}`,i="malaria"===e?`${n}/${ht.noMalariaDirName}`:`${n}/${ht.malariaDirName}`,d="malaria"===e?`${n}/${ht.malariaDirName}`:`${n}/${ht.noMalariaDirName}`,m=l.split("/"),v=m[m.length-1],p=await Lm(`sourceFolder=${i}&destinationFolder=${d}&imageName=${v}`);if(p){const t="malaria"===e?u.value.findIndex((e=>e===l)):c.value.findIndex((e=>e===l));"malaria"===e?(u.value.splice(t,1),c.value.push(l)):(c.value.splice(t,1),u.value.push(l))}r.value=[]}return(0,s.sV)((async()=>{await p(ht.malariaDirName,c),await p(ht.noMalariaDirName,u),document.body.addEventListener("click",g)})),(e,t)=>v.value?((0,s.uX)(),(0,s.CE)("div",Tm,[(0,s.Lk)("div",null,[(0,s.Lk)("div",{onDrop:t[0]||(t[0]=e=>f("malaria")),onDragover:t[1]||(t[1]=(0,l.D$)((()=>{}),["prevent"])),style:{"text-align":"left",overflow:"auto",height:"400px"}},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.value,((e,t)=>((0,s.uX)(),(0,s.CE)("img",{key:"malaria-"+t,src:e,class:(0,n.C4)(["item-image",{selected:b("malaria",e)}]),alt:"malaria-image",onClick:a=>I("malaria",e,t,a),onDragstart:a=>y("malaria",e,t)},null,42,wm)))),128))],32)]),(0,s.Lk)("div",null,[Pm,(0,s.Lk)("div",{onDrop:t[2]||(t[2]=e=>f("noMalaria")),onDragover:t[3]||(t[3]=(0,l.D$)((()=>{}),["prevent"])),style:{"text-align":"left",overflow:"auto",height:"400px"}},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,((e,t)=>((0,s.uX)(),(0,s.CE)("img",{key:"noMalaria-"+t,src:e,class:(0,n.C4)(["item-image",{selected:b("noMalaria",e)}]),alt:"noMalaria-image",onClick:a=>I("noMalaria",e,t,a),onDragstart:a=>y("noMalaria",e,t)},null,42,Am)))),128))],32)])])):((0,s.uX)(),(0,s.CE)("div",Dm,xm))}});const Km=Om;var Bm=Km;const Um=Z(),Xm=async e=>Um.httpPost(ee.jsonReader.get,e),Fm=async e=>Um.httpGet(ee.fileTxtRead.get,`${e}`,!0),Wm=async e=>Um.httpPost(ee.H7Read.post,e,"text/plain"),Gm=async e=>Um.httpPost(ee.H7Message.post,e),$m=async e=>Um.httpPost(ee.H7Message.post,e),Hm=e=>((0,s.Qi)("data-v-75a0ffe3"),e=e(),(0,s.jt)(),e),jm=Hm((()=>(0,s.Lk)("div",null,null,-1))),Vm={class:"rbc-container"},Ym={class:"btn-container"},qm={class:"btn-imgsetbox"},Jm={key:0,class:"imgSet"},Qm=Hm((()=>(0,s.Lk)("span",null,"Brightness",-1))),zm=Hm((()=>(0,s.Lk)("span",null,"RGB",-1))),Zm=Hm((()=>(0,s.Lk)("span",null,"Grid",-1))),ev=Hm((()=>(0,s.Lk)("span",null,"Ruler",-1))),tv={class:"ruler-box"},av=["onClick"],lv=Hm((()=>(0,s.Lk)("span",null,"Zoom",-1))),sv={class:"tiling-viewer-box"},ov={key:2},nv=Hm((()=>(0,s.Lk)("span",null,"Tile does not exist.",-1))),iv=[nv],cv={class:"categoryNm"},uv={class:"classNmRbc"},rv=["onClick"],dv={class:"categories"},mv=Hm((()=>(0,s.Lk)("ul",{class:"categoryNm"},[(0,s.Lk)("li",null,"Others")],-1))),vv={class:"classNmRbc"},pv=Hm((()=>(0,s.Lk)("span",null,"Platelets",-1))),gv=[pv],Iv=Hm((()=>(0,s.Lk)("span",null,"Malaria",-1))),bv=[Iv];var yv=(0,s.pM)({__name:"rbcImageList",props:["rbcInfo","selectItems","type","classInfoArr","isBefore"],setup(e,{emit:t}){const a=e,i=(0,o.KR)("lowMag"),c=window.APP_API_BASE_URL||"http://192.168.0.115:3002";let r=(0,o.KR)(null);const d=(0,o.KR)(!1),m=(0,o.KR)(100),v=(0,o.KR)([0,0,0]),p=(0,o.KR)(!1),g=(0,o.KR)(!1),I=((0,o.KR)(null),(0,o.KR)("None")),b=(0,o.KR)(!1),y=(0,o.KR)({prevPosX:0,prevPosY:0,posX:0,posY:0,left:0,top:0,width:50,height:50}),f=(0,o.KR)(5),C=(0,o.KR)(0),k=(0,o.KR)(150),h=(0,o.KR)(null),S=(0,o.KR)(!0),_=(0,u.Pj)(),E=(0,s.EW)((()=>_.state.commonModule.iaRootPath)),N=(0,o.KR)([]),L=(0,o.KR)([]),R=(0,o.KR)(null),T=(0,o.KR)([]),w=(0,o.KR)([]),P=(0,o.KR)(0),A=(0,o.KR)(0),D=t;(0,s.sV)((()=>{W(),document.addEventListener("click",K)})),(0,s.wB)((()=>a.isBefore),(e=>{X(),x(),D("unChecked")}),{deep:!0});const M=async(e,t,a)=>{let l=N.value.find((t=>t.categoryId===e));l||(l={categoryId:e,classInfo:[]},N.value.push(l));for(const s of w.value)for(const l of N.value){if(s.categoryId===l.categoryId){const e=l.classInfo.findIndex((e=>Number(e.posX)===s.posX+20&&Number(e.posY)===s.posY+20));-1!==e&&l.classInfo.splice(e,1)}l.categoryId===e&&l.classInfo.push({classNm:a,classId:t,posX:s.posX+20,posY:s.posY+20})}await x(),await O(N.value),await F(L.value)},x=async()=>{const e=document.getElementsByClassName("overlayElement"),t=Array.from(e);t.forEach((e=>{r.value.removeOverlay(e)})),b.value=!1},O=async e=>{const t=JSON.stringify(e),l=(new TextEncoder).encode(t),s=Tc.Ay.deflate(l),o=new Blob([s],{type:"application/octet-stream"}),n=new FormData;n.append("file",o,`${a.selectItems.slotId}_new.json`);const i=""!==a.selectItems?.img_drive_root_path&&a.selectItems?.img_drive_root_path?a.selectItems?.img_drive_root_path:E.value,c=`${i}/${a.selectItems.slotId}/03_RBC_Classification/${a.selectItems.slotId}_new.json`;try{const e=await fetch(`http://localhost:3002/jsonReader/upload?filePath=${c}`,{method:"POST",body:n}),t=await e.json();console.log(t)}catch(u){console.error("Error:",u)}},K=e=>{const t=document.querySelector(".rbc-select-box");t&&!t.contains(e.target)&&(b.value=!1)};(0,s.wB)((()=>a.classInfoArr),(e=>{0===e.length&&(x(),X()),U(e)}),{deep:!0});const B=e=>{a.isBefore||0===L.value.length||(b.value=!0,e.currentTarget instanceof HTMLElement&&(P.value=e.clientX,A.value=e.clientY-300))},U=async e=>{const t=""!==a.selectItems?.img_drive_root_path&&a.selectItems?.img_drive_root_path?a.selectItems?.img_drive_root_path:E.value,l=`${t}/${a.selectItems.slotId}/03_RBC_Classification/${a.selectItems.slotId}_new.json`,s=await Xm({fullPath:l});if("not file"===s.data||a.isBefore){const e=`${t}/${a.selectItems.slotId}/03_RBC_Classification/${a.selectItems.slotId}.json`,l=await Xm({fullPath:e});N.value=l?.data[0].rbcClassList}else N.value=s?.data;L.value=e,0===e.length?X():await F(e)};(0,s.wB)((()=>a.selectItems),(e=>{const t=document.getElementById("tiling-viewer");if(t){t.innerHTML="";const e='\n        <div id="tiling-viewer" ref="tilingViewerLayer"></div>\n      ';t.insertAdjacentHTML("beforeend",e),i.value="lowMag",W()}}));const X=()=>{let e=R.value.getContext("2d"),t=R.value;return e.clearRect(0,0,t.width,t.height),e.beginPath(),T.value=[],e},F=async e=>{const t={"01":"red","02":"green","03":"blue","05":"brown"},a=X();e.forEach((e=>{N.value.forEach((l=>{l.classInfo.forEach((s=>{if(s.classNm===e.classNm&&l.categoryId===e.categoryId){a.lineWidth="2",a.strokeStyle=`${t[e.categoryId]||"black"}`;let l=new Path2D;l.rect(s.posX-20,s.posY-20,40,40),T.value.push({categoryId:e.categoryId,classNm:e.classNm,classId:e.classId,posX:s.posX-20,posY:s.posY-20}),a.stroke(l)}}))}))}))},W=async()=>{const e=""!==a.selectItems?.img_drive_root_path&&a.selectItems?.img_drive_root_path?a.selectItems?.img_drive_root_path:E.value,t=`${e}/${a.selectItems.slotId}/${ht.rbcImageDirName}`;try{const e=await G(t);if(0!==e.length){r.value=_m()({id:"tiling-viewer",animationTime:.4,navigatorSizeRatio:.25,showNavigator:!0,sequenceMode:!0,defaultZoomLevel:1,prefixUrl:`${c}/folders?folderPath=D:/UIMD_Data/Res/uimdFe/images/`,tileSources:e,showReferenceStrip:!1,gestureSettingsMouse:{clickToZoom:!1}}),new(_m().MouseTracker)({element:r.value.element,moveHandler:function(e){if(!g.value){const e=document.getElementById("magCanvas");return void(e&&r.value.element.removeChild(e))}const{canvas:t}=r.value.drawer,a=document.createElement("canvas"),l=a.getContext("2d");if(R.value=a,l){const s=200,o=200,n=5;a.id="magCanvas",a.style.position="absolute",a.style.left=e.position.x-s/2+"px",a.style.top=e.position.y-o/2+"px",a.style.border="1px solid",a.style.borderRadius="50%",a.style.width=`${s}px`,a.style.height=`${o}px`,a.style.zIndex="0",r.value.element.appendChild(a),l.drawImage(t,e.position.x-s/8,e.position.y-o/8,s,o,0,0,s*n,o*n),a.style.visibility=e.position.y<=0||e.position.x<=0?"hidden":"visible"}}});const t=document.createElement("canvas"),a=r.value.addOverlay({element:t,location:new(_m().Rect)(0,0,1,1)});r.value.addHandler("open",(function(e){t.width=3317,t.height=3311,t.id="myCanvas",a.canvas=t,R.value=t})),r.value.addHandler("canvas-click",(async e=>{if(e.originalEvent.shiftKey)for(const t of T.value){if("Normal"===t.classNm)return;const e=t,a=t.categoryId,l="lightgreen";w.value.push(t);const s=document.createElement("ol");s.className="overlayElement",s.id="overlayElement",s.setAttribute("data-category-id",a),s.setAttribute("data-class-nm",t.classNm),s.style.width="40px",s.style.backgroundColor=l,s.style.height="40px",s.style.position="absolute",s.style.opacity="0.5";const o=parseFloat(e.posX),n=parseFloat(e.posY),i=r.value.viewport.imageToViewportRectangle(o,n,40,40);r.value.addOverlay({element:s,location:i})}else{const t=r.value.viewport.pointFromPixel(e.position),a={x:t.x*r.value.source.width,y:t.y*r.value.source.height};for(const l of T.value){const t=l,s=40,o=40;if(a.x>=t.posX&&a.x<=t.posX+s&&a.y>=t.posY&&a.y<=t.posY+o){const n=l.categoryId,i="lightgreen";if(e.originalEvent.ctrlKey){w.value.push(l);const e=document.createElement("ol");e.className="overlayElement",e.id="overlayElement",e.setAttribute("data-category-id",n),e.setAttribute("data-class-nm",l.classNm),e.style.width="40px",e.style.backgroundColor=i,e.style.height="40px",e.style.position="absolute",e.style.opacity="0.5";const a=parseFloat(t.posX),s=parseFloat(t.posY),o=r.value.viewport.imageToViewportRectangle(a,s,40,40);r.value.addOverlay({element:e,location:o})}else if(a.x>=t.posX&&a.x<=t.posX+s&&a.y>=t.posY&&a.y<=t.posY+o){const e=l.categoryId,a="lightgreen",s=N.value.find((t=>t.categoryId===e))?.classInfo.find((e=>e.classNm===l.classNm));if(s){w.value=[l];const s=document.getElementById("overlayElement");s&&r.value.removeOverlay(s);const o=document.querySelector(`.overlayElement[data-category-id="${e}"][data-class-nm="${l.classNm}"]`);if(o){const e=parseFloat(t.posX),a=parseFloat(t.posY),l=r.value.viewport.imageToViewportRectangle(e,a,40,40);r.value.updateOverlay(o,l)}else{const s=document.createElement("ol");s.className="overlayElement",s.id="overlayElement",s.setAttribute("data-category-id",e),s.setAttribute("data-class-nm",l.classNm),s.style.width="40px",s.style.backgroundColor=a,s.style.height="40px",s.style.position="absolute",s.style.opacity="0.5";const o=parseFloat(t.posX),n=parseFloat(t.posY),i=r.value.viewport.imageToViewportRectangle(o,n,40,40);r.value.addOverlay({element:s,location:i})}}}break}}}}))}}catch(l){console.error("Error:",l)}},G=async e=>{const t=`${c}/folders?folderPath=${e}`,a=await fetch(t);if(a.ok){const t=await a.json(),l=[];for(const a of t)a.endsWith("_files")&&l.push({Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2009",Url:`${c}/folders?folderPath=${e}/${a}/`,Format:"jpg",Overlap:"1",TileSize:"1024",Size:{Height:"3311",Width:"3317"}}});return S.value=!0,l}throw S.value=!1,new Error("Network response was not ok")},$=e=>{switch(e){case"lowMag":i.value="lowMag";break;case"malaria":i.value="malaria",d.value=!1;break}"malaria"!==i.value&&W()},H=()=>{d.value=!d.value},j=e=>{const t=e?.target?.value,a=v.value[0],l=v.value[1],s=v.value[2],o=document.getElementById("tiling-viewer");o&&(o.style.filter=`opacity(1) drop-shadow(0 0 0 rgb(${a}, ${l}, ${s})) brightness(${t}%)`)},V=()=>{const e=v.value[0],t=v.value[1],a=v.value[2],l=m.value,s=document.getElementById("tiling-viewer");s&&(s.style.filter=`opacity(0.88) drop-shadow(0 0 0 rgb(${e}, ${t}, ${a})) brightness(${l}%)`)},Y=()=>{m.value=100,v.value=[0,0,0];const e=document.getElementById("tiling-viewer");e&&(e.style.filter="opacity(1) drop-shadow(0 0 0 rgb(0,0,0)) brightness(100%)")},q=()=>{p.value=!p.value,r.value.addHandler("zoom",J),p.value?J():z()},J=()=>{if(z(),p.value){const e=r.value.world.getItemAt(0).getContentSize().y,t=r.value.world.getItemAt(0).getContentSize().x,a=r.value.viewport.getZoom(),l=400,s=Math.round(l/a),o=Math.min(t,e)/s;for(let n=1;n<s;n++){const a=n*o;Q(a,0,1,e,"rgba(128, 128, 128, 0.2)"),Q(0,a,t,1,"rgba(128, 128, 128, 0.2)")}}},Q=(e,t,a,l,s)=>{const o=document.createElement("div");o.className="grid-line",o.style.position="absolute",o.style.left=`${e}px`,o.style.top=`${t}px`,o.style.width=`${a}px`,o.style.height=`${l}px`,o.style.background=s,o.style.userSelect="none",o.style.pointerEvents="none",r.value.container.appendChild(o)},z=()=>{const e=document.querySelectorAll(".grid-line");e.forEach((e=>e.remove()))},Z=e=>{switch(e.text){case"None":I.value="None";break;case"Line":I.value="Line";break;case"Cross":I.value="Cross";break;case"Circle":I.value="Circle";break}ee(e)},ee=e=>{const t=document.getElementById("tiling-viewer");if(null!==t){const a=document.getElementById("rulerOverlay");null!==a&&t.removeChild(a);const l=document.createElement("div");l.id="rulerOverlay",l.style.position="absolute",l.style.width=y.value.width+"px",l.style.height=y.value.height+"px",0===y.value.left?l.style.left=r.value.canvas.clientWidth/2-y.value.width/2+"px":l.style.left=y.value.left+"px",0===y.value.top?l.style.top=r.value.canvas.clientHeight/2-y.value.height/2+"px":l.style.top=y.value.top+"px",te(l,f,e),t.appendChild(l);let s=!1;l.onmousedown=function(e){y.value.prevPosX=e.clientX,y.value.prevPosY=e.clientY,y.value.left<=30&&(y.value.left=31),y.value.top<=80&&(y.value.top=81),s=!0},l.onmouseup=function(){s=!1},l.onwheel=function(t){t.deltaY<0?f.value<20&&te(l,++f.value,e):f.value>5&&te(l,--f.value,e)};const o=document.getElementById("tilingViewer");o&&(o.onmousemove=function(e){s&&(y.value.left<=30||y.value.top<=80||(y.value.posX=y.value.prevPosX-e.clientX,y.value.posY=y.value.prevPosY-e.clientY,y.value.prevPosX=e.clientX,y.value.prevPosY=e.clientY,l.style.left=l.offsetLeft-y.value.posX+"px",l.style.top=l.offsetTop-y.value.posY+"px",y.value.left=l.offsetLeft-y.value.posX,y.value.top=l.offsetTop-y.value.posY))})}},te=(e,t,a)=>{"object"===typeof t&&(t=t.value),null!==document.getElementById("rulerTitle")&&e.removeChild(document.getElementById("rulerTitle"));let l=1;t>5&&(l+=.06*(t-5));let s=r.value.viewport.viewportToImageZoom(r.value.viewport.getZoom());s>1?s*=1.02:s>.9&&s<1?s*=1.12:s>.7&&s<=.9?s*=1.22:s>.6&&s<=.7?s*=1.32:s>.5&&s<=.6?s*=1.42:s>.4&&s<=.5?s*=1.52:s>.3&&s<=.4?s*=1.72:s>.2&&s<=.3&&(s*=1.92),C.value=s*l*60;const o=document.createElement("div");if(o.id="rulerTitle",o.style.color="black",o.style.textAlign="center",o.style.fontSize="16px",o.style.minWidth="50px",o.style.width=C.value+"px","line"===a.id){const a=k.value/2-C.value/2,l=k.value/2+C.value/2,s=k.value/2,n=s;o.innerHTML='<div style="width: 100%;">'+t+'m</div><svg viewBox="0 0 150 150" xmlns="http://www.w3.org/2000/svg"><line x1="'+a+'" y1="'+s+'" x2="'+l+'" y2="'+n+'" stroke="black" stroke-width="2"/><line x1="'+a+'" y1="'+(s-5)+'" x2="'+a+'" y2="'+(n+5)+'" stroke="black" stroke-width="2"/><line x1="'+l+'" y1="'+(n-5)+'" x2="'+l+'" y2="'+(n+5)+'" stroke="black" stroke-width="2"/></svg>',e.appendChild(o)}else if("cross"===a.id){const a=k.value/2,l=k.value/2,s=C.value/2;o.innerHTML='<div style="width: 100%;">'+t+'m</div><svg viewBox="0 0 150 150" xmlns="http://www.w3.org/2000/svg"><line x1="'+(a-s)+'" y1="'+l+'" x2="'+(a+s)+'" y2="'+l+'" stroke="black" stroke-width="2"/><line x1="'+a+'" y1="'+(l-s)+'" x2="'+a+'" y2="'+(l+s)+'" stroke="black" stroke-width="2"/></svg>',e.appendChild(o)}else if("circle"===a.id){const a=k.value/2,l=k.value/2,s=.5*C.value;o.innerHTML='<div style="width: 100%;">'+t+'m</div><svg viewBox="0 0 150 150" xmlns="http://www.w3.org/2000/svg"><circle cx="'+a+'" cy="'+l+'" r="'+s+'" stroke="black" stroke-width="2" fill="transparent" opacity="0.6" /></svg>',e.appendChild(o)}else{const e=document.getElementById("rulerOverlay");if(null!==e){const t=document.getElementById("tilingViewer");t?.removeChild(e)}}},ae=()=>{g.value=!g.value};return(t,a)=>{const c=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[jm,(0,s.Lk)("div",Vm,[(0,s.Lk)("div",Ym,[(0,s.Lk)("div",null,[(0,s.Lk)("button",{onClick:a[0]||(a[0]=e=>$("lowMag")),class:(0,n.C4)(["tab-btn",{active:"lowMag"===i.value,inactive:"lowMag"!==i.value}])},"Low magnification ",2),(0,s.Lk)("button",{onClick:a[1]||(a[1]=e=>$("malaria")),class:(0,n.C4)(["tab-btn",{active:"malaria"===i.value,inactive:"malaria"!==i.value}])},"Malaria ",2)]),(0,s.Lk)("div",qm,[(0,s.Lk)("button",{class:"img-btn",onClick:H},"Img Setting"),d.value?((0,s.uX)(),(0,s.CE)("div",Jm,[(0,s.Lk)("div",null,[(0,s.bF)(c,{icon:["fas","sun"]}),Qm,(0,s.bo)((0,s.Lk)("input",{type:"range",min:"80",max:"150","onUpdate:modelValue":a[2]||(a[2]=e=>m.value=e),onInput:j},null,544),[[l.Jo,m.value]])]),(0,s.Lk)("div",null,[(0,s.bF)(c,{icon:["fas","palette"]}),zm,(0,s.bo)((0,s.Lk)("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":a[3]||(a[3]=e=>v.value[0]=e),onInput:V},null,544),[[l.Jo,v.value[0]]]),(0,s.bo)((0,s.Lk)("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":a[4]||(a[4]=e=>v.value[1]=e),onInput:V},null,544),[[l.Jo,v.value[1]]]),(0,s.bo)((0,s.Lk)("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":a[5]||(a[5]=e=>v.value[2]=e),onInput:V},null,544),[[l.Jo,v.value[2]]]),(0,s.Lk)("button",{class:"resetBtn",onClick:Y},"RGB Reset")]),(0,s.Lk)("div",null,[(0,s.bF)(c,{icon:["fas","th"]}),Zm,(0,s.bF)(c,{icon:p.value?["fas","toggle-on"]:["fas","toggle-off"],onClick:q},null,8,["icon"])]),(0,s.Lk)("div",null,[(0,s.bF)(c,{icon:["fas","ruler"]}),ev,(0,s.Lk)("div",tv,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,o.R1)(Em),(e=>((0,s.uX)(),(0,s.CE)("button",{class:(0,n.C4)(["tab-ruler-btn",{active:I.value===e.text,inactive:I.value!==e.text}]),onClick:t=>Z(e),key:e.id},(0,n.v_)(e.text),11,av)))),128))])]),(0,s.Lk)("div",null,[(0,s.bF)(c,{icon:["fas","magnifying-glass"]}),lv,(0,s.bF)(c,{icon:g.value?["fas","toggle-on"]:["fas","toggle-off"],onClick:ae},null,8,["icon"])])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",sv,["malaria"===i.value?((0,s.uX)(),(0,s.Wv)(Bm,{key:0,selectItems:e.selectItems},null,8,["selectItems"])):"malaria"!==i.value&&S.value?((0,s.uX)(),(0,s.CE)("div",{key:1,ref_key:"tilingViewerLayer",ref:h,id:"tiling-viewer",style:{width:"100%"},onContextmenu:(0,l.D$)(B,["prevent"])},null,544)):((0,s.uX)(),(0,s.CE)("div",ov,iv))])]),b.value?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"rbc-select-box",style:(0,n.Tr)({left:`${P.value}px`,top:`${A.value}px`})},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)([e.selectItems.rbcInfo],((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,a)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",{key:a,class:"categories"},[(0,s.Lk)("ul",cv,[(0,s.Lk)("li",null,(0,n.v_)(e.categoryNm),1)]),(0,s.Lk)("ul",uv,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((l,o)=>((0,s.uX)(),(0,s.CE)("li",{key:`${t}-${a}-${o}`,onClick:t=>M(e.categoryId,l.classId,l.classNm)},[(0,s.Lk)("span",null,(0,n.v_)(l?.classNm),1)],8,rv)))),128))])],512)),[[l.aG,"Shape"===e?.categoryNm||"Inclusion Body"===e.categoryNm]]))),128)),(0,s.Lk)("div",dv,[mv,(0,s.Lk)("ul",vv,[(0,s.Lk)("li",{onClick:a[6]||(a[6]=e=>M("04","01","Giant Platelet"))},gv),(0,s.Lk)("li",{onClick:a[7]||(a[7]=e=>M("05","03","Malaria"))},bv)])])],64)))),128))],4)):(0,s.Q3)("",!0)],64)}}});const fv=(0,Tl.A)(yv,[["__scopeId","data-v-75a0ffe3"]]);var Cv=fv;const kv={class:"wbcMenu"},hv={class:"menuIco"},Sv={class:"menuIco"},_v={class:"menuIco"},Ev=(0,s.Lk)("p",null,"REPORT",-1),Nv=(0,s.Lk)("p",null,"LIS-CBC",-1),Lv={class:"wbcMenuBottom"},Rv=["disabled"],Tv=["disabled"];var wv=(0,s.pM)({__name:"classInfoMenu",props:["isNext"],setup(e,{emit:t}){const a=t,l=(0,o.KR)(!1),i=(0,o.KR)(""),r=(0,o.KR)(""),d=(0,o.KR)("bm"),m=(0,o.KR)(sessionStorage.getItem("selectItems")),v=(0,o.KR)(m.value?JSON.parse(m.value):null),p=(0,o.KR)([]),g=((0,o.KR)([]),(0,s.nI)()),I=(0,u.Pj)(),b=((0,s.EW)((()=>I.state.userModule)),(0,c.lq)()),y=(0,o.KR)([]),f=(0,s.EW)((()=>I.state.commonModule.cbcLayer)),C=(0,o.KR)(!1);let k;const h=(0,o.KR)(!1),S=e,_=(0,o.KR)("");(0,s.wB)(S.isNext,(e=>{e&&D("down")})),(0,s.sV)((async()=>{d.value=window.PROJECT_TYPE,await P(v.value.id),h.value=!0;const e=await os();_.value=e.data})),(0,s.hi)((async()=>{h.value&&await N(),await I.dispatch("commonModule/setCommonInfo",{cbcLayer:!1})}));const E=()=>{l.value=!1},N=async()=>{sessionStorage.setItem("dbBaseTrClickId",String(v.value.id));const e=`oldPcIp=${_.value}`;await Rc(e).then((e=>{g?.appContext.config.globalProperties.$socket.emit("state",{type:"SEND_DATA",payload:"refreshDb"})})).catch((e=>{console.log("2 err")}))},L=async e=>{try{const e=`oldPcIp=${_.value}&newEntityId=${p.value.id}&newPcIp=${_.value}`;await Lc(e).then((e=>{g?.appContext.config.globalProperties.$socket.emit("state",{type:"SEND_DATA",payload:"refreshDb"})})).catch((e=>{console.log("3 err")}))}catch(t){console.log(t)}},R=async()=>{try{const e=await $e();e&&(0===e?.data.length?y.value=[]:y.value=e.data.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx))))}catch(e){console.log(e)}},T=e=>{UI.push(e),h.value=!1},w=(e,t)=>{let a=JSON.parse(JSON.stringify(e));return a.sort(((e,a)=>{const l=t.findIndex((t=>(t.title||t.abbreviation)===(e.title||e.abbreviation))),s=t.findIndex((e=>(e.title||e.abbreviation)===(a.title||a.abbreviation)));return-1===l?1:-1===s?-1:l-s})),a};async function P(e){try{let t;t=await Ec(String(e)),t&&(p.value=t.data,console.log(p.value))}catch(t){console.error(t)}return p.value}async function A(e,t,a){try{const l=`id=${e}&step=${t}&type=${a}`,s=await Nc(l);s&&(console.log(s.data),p.value=s.data)}catch(l){console.log(l)}}const D=async e=>{void 0!==k&&clearTimeout(k),C.value=!0,await R(),await M(e,v.value.id),k=window.setTimeout((()=>{C.value=!1}),700)},M=async(e,t)=>{const a=await A(t,"1",e);if(p.value.lock_status)return l.value=!0,i.value="success",void(r.value="Someone else is editing.");await x(a?.id,a)},x=async(e,t)=>{v.value=p.value,sessionStorage.setItem("selectItems",JSON.stringify(p.value));const a=0===p.value?.wbcInfoAfter.length?p.value?.wbcInfo?.wbcInfo[0]:p.value?.wbcInfoAfter,l=0!==y.value.length?y.value:"bm"===window.PROJECT_TYPE?da:ra,s=w(a,l);sessionStorage.setItem("selectItemWbc",JSON.stringify(s)),sessionStorage.setItem("dbBaseTrClickId",String(e)),await I.dispatch("commonModule/setCommonInfo",{clonedWbcInfo:s}),await O(a,p.value)},O=async(e,t)=>{"pb"===d.value&&"01"===v.value?.testType&&T("/databaseDetail"),a("refreshClass",t),h.value=!0,await L(t)},K=e=>b.path===e,B=()=>{I.dispatch("commonModule/setCommonInfo",{cbcLayer:!f.value})};return(e,t)=>{const a=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",kv,[(0,s.Lk)("ul",null,[["bm","pb"].includes(d.value)?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},["pb"!==d.value||"01"!==v.value?.testType&&"pb"===d.value?((0,s.uX)(),(0,s.CE)("li",{key:0,class:(0,n.C4)({onRight:K("bm"===d.value?"/databaseWhole":"/databaseRbc")}),onClick:t[0]||(t[0]=e=>T("bm"===d.value?"/databaseWhole":"/databaseRbc"))},[(0,s.Lk)("p",hv,[(0,s.bF)(a,{icon:["fas","virus"]})]),(0,s.Lk)("p",null,(0,n.v_)("bm"===d.value?"WHOLE":"RBC"),1)],2)):(0,s.Q3)("",!0),(0,s.Lk)("li",{class:(0,n.C4)({onRight:K("/databaseDetail")}),onClick:t[1]||(t[1]=e=>T("/databaseDetail"))},[(0,s.Lk)("p",Sv,[(0,s.bF)(a,{icon:["fas","disease"]})]),(0,s.Lk)("p",null,(0,n.v_)("bm"===d.value?"BM CELL":"WBC"),1)],2),(0,s.Lk)("li",{class:(0,n.C4)({onRight:K("/report")}),onClick:t[2]||(t[2]=e=>T("/report"))},[(0,s.Lk)("p",_v,[(0,s.bF)(a,{icon:["fas","clipboard"]})]),Ev],2)],64)):(0,s.Q3)("",!0)]),"bm"!==d.value?((0,s.uX)(),(0,s.CE)("div",{key:0,onClick:B,class:(0,n.C4)({onRight:f.value,cbcLi:!0})},[(0,s.bF)(a,{icon:["fas","desktop"]}),Nv],2)):(0,s.Q3)("",!0),(0,s.Lk)("div",Lv,[(0,s.Lk)("button",{onClick:t[3]||(t[3]=e=>D("up")),disabled:C.value},[(0,s.bF)(a,{icon:["fas","circle-up"]})],8,Rv),(0,s.Lk)("button",{onClick:t[4]||(t[4]=e=>D("down")),disabled:C.value},[(0,s.bF)(a,{icon:["fas","circle-down"]})],8,Tv)])]),l.value?((0,s.uX)(),(0,s.Wv)(ze,{key:0,"is-visible":l.value,type:i.value,message:r.value,onHide:E,"onUpdate:hideAlert":E},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const Pv=wv;var Av=Pv,Dv=a(8990);const Mv={class:"cbcDiv"},xv=(0,s.Lk)("h1",{class:"titleCbc"},"CBC + DIFF",-1),Ov={key:0,class:"cbcDivWarp"},Kv={class:"cbcTable"},Bv={key:1,class:"cbcDivWarp"},Uv={class:"cbcTable"},Xv={key:0},Fv={key:2,class:"cbcDivWarp"},Wv={class:"cbcTable"};var Gv=(0,s.pM)({__name:"lisCbc",props:["selectItems"],setup(e){const t=(0,u.Pj)(),a=e,l=(0,o.KR)([]),i=(0,o.KR)(""),c=(0,o.KR)(""),r=(0,o.KR)(""),d=(0,o.KR)(""),m=(0,o.KR)(""),v=(0,o.KR)(""),p=(0,s.EW)((()=>t.state.userModule)),g=(0,s.EW)((()=>t.state.commonModule.deviceSerialNm)),I=(0,s.EW)((()=>t.state.commonModule.siteCd)),b=(0,o.KR)([]),y=(0,o.KR)([]);(0,s.wB)(a.selectItems,(async e=>{y.value=e,await C(),await k(),await f(y.value)}),{deep:!0}),(0,s.sV)((async()=>{y.value=a.selectItems,await C(),await k(),await f(y.value)}));const f=async e=>{if("0002"===I.value){const t="http://emr012.cmcnu.or.kr/cmcnu/.live";z.A.get(t,{params:{submit_id:"TRLII00124",business_id:"li",instcd:"012",bcno:e.barcodeNo}}).then((function(e){const t=e.data,a=JSON.parse((0,Dv.xml2json)(t,{compact:!0}));l.value=a.root.spcworklist.worklist})).catch((function(e){console.log(e.message)}))}else if("0006"===I.value||"0019"===I.value||"0000"===I.value){let e;if(e="0000"===I.value?await Fm("path=D:\\cbc&filename=1240459652.txt"):await Fm(`path=C:/Users/user/Desktop/IA_MSG/CBC&filename=${a.selectItems.barcodeNo}`),e.data.success){const t=e.data.data.toString(),a=t.split("\n"),s=["SPC_NO","BLCL_DT","PT_NO","PT_NM","SEX","AGE","SCAT_WDF","SCAT_WNR","DIST_RBC","DIST_WDF(FSC)","DIST_PLT"];a.forEach((e=>{const[t,a]=e.split("\t").map((e=>e.trim()));if(s.includes(t))switch(t){case"PT_NO":i.value=a;break;case"SEX":r.value=a;break;case"AGE":d.value=a;break}else{const e=t.includes("%")?"%":"";l.value.push({classNm:t,count:a,unit:e})}}))}else console.log(e.data.message)}else if("0007"===I.value);else if("0011"===I.value){if(v.value.includes("http")){const e={url:v.value,machine:"ADUIMD",episode:a.selectItems.barcodeNo};await z.A.post(e.url+"/api/MifMain/Order",{machine:e.machine,episode:e.episode}).then((function(e){l.value=[];const a=e.data[0];if("0"===a?.returnCode){i.value=a?.regNo,c.value=a.name,r.value=a.sex,d.value=a.age,m.value=a.testCode,t.dispatch("commonModule/setCommonInfo",{inhaTestCode:a.testCode});const e=a.testCode.split(",");e.forEach((function(e){const t=e.split("|"),a=t[0],s=t[1],o=t[2];b.value.forEach((function(e){if(e.cd===a){const t={classNm:e.classCd,count:s,unit:o};l.value.push(t)}}))}))}else console.log("return code : "+a.returnCode)})).catch((function(e){console.log(e.message+" : no CBC result")}))}}else if(v.value.includes("http")){const e={url:v.value,barcodeNo:a.selectItems.barcodeNo,userId:p.value.userId,deviceBarcode:g.value},t=e.url+"?barcodeNo="+e.barcodeNo+"&deviceBarcode="+g.value+"&userid="+e.userId;await z.A.get(t).then((async function(e){const t=await Wm(e.data);l.value=[],t.segments.forEach((function(e){"OBX"===e.name.trim()?b.value.forEach((function(t){if(t.CBC_CD===e.getField(3)){var a={classNm:t.cd,count:e?.getField(5),unit:e?.getField(6)};l.value.push(a)}})):"PID"===e.name.trim()&&(i.value=e.getField(1),c.value=e.getField(4),r.value=e.getField(6),d.value=e.getField(7))}))})).catch((function(e){console.log(e.message)}))}else{const e=await Fm(`path=${v.value}&filename=${a.selectItems.barcodeNo}.hl7`);if(e.data.success){const t=await Wm(e.data.data);console.log(t),l.value=[],t?.data?.segments.forEach((function(e){"OBX"===e.name.trim()&&b.value.forEach((function(t){if(t.cd===e.getField(3)){const a={classNm:t.cd,count:e.getField(5),unit:e.getField(6)};l.value.push(a)}}))}))}else console.error(e.data.message)}y.value.cbcPatientNo=i.value,y.value.cbcPatientNm=c.value,y.value.cbcSex=r.value,y.value.cbcAge=d.value;const s={cbcPatientNo:i.value,cbcPatientNm:c.value,cbcSex:r.value,cbcAge:d.value},o=await Ec(String(a.selectItems.id)),n={...o.data,...s};sessionStorage.setItem("selectItems",JSON.stringify(n)),await h([n])},C=async()=>{try{const e=await Me();if(e&&e.data){const t=e.data;v.value=t[0].cbcFilePath}}catch(e){console.error(e)}},k=async()=>{try{const e=await Pe();if(e&&e.data){const t=e.data;b.value=t}}catch(e){console.error(e)}};async function h(e){try{const t=await hc({userId:Number(p.value.id),runingInfoDtoItems:e});t?console.log(""):console.error("   ")}catch(t){console.error("Error:",t)}}return(e,t)=>((0,s.uX)(),(0,s.CE)("div",Mv,[xv,"0002"===I.value?((0,s.uX)(),(0,s.CE)("div",Ov,[(0,s.Lk)("table",Kv,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,n.v_)(e?.tclsscrnnm._cdata),1),(0,s.Lk)("td",null,(0,n.v_)(e.tclsscrnnm._cdata),1),(0,s.Lk)("td",null,(0,n.v_)(e.inptrslt._cdata),1)])))),128))])])):(0,s.Q3)("",!0),"0007"===I.value?((0,s.uX)(),(0,s.CE)("div",Bv,[(0,s.Lk)("table",Uv,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,n.v_)(e.classNm),1),(0,s.Lk)("td",null,[(0,s.eW)((0,n.v_)(e.count)+" ",1),""!==e.cham?((0,s.uX)(),(0,s.CE)("span",Xv," ("+(0,n.v_)(e.cham)+") ",1)):(0,s.Q3)("",!0),(0,s.eW)(" "+(0,n.v_)(e.unit),1)])])))),128))])])):((0,s.uX)(),(0,s.CE)("div",Fv,[(0,s.Lk)("table",Wv,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,n.v_)(e.classNm),1),(0,s.Lk)("td",null,(0,n.v_)(e.count)+" "+(0,n.v_)(e.unit),1)])))),128))])]))]))}});const $v=Gv;var Hv=$v;const jv={class:"wbcContent"},Vv={class:"topClintInfo"};var Yv=(0,s.pM)({__name:"listDetailRbc",setup(e){const t=sessionStorage.getItem("selectItems"),a=(0,o.KR)(t?JSON.parse(t):null),l=(0,u.Pj)(),i=(0,o.KR)(null),c=(0,o.KR)([]),r=(0,o.KR)(!1),d=(0,o.KR)(!1),m=(0,s.EW)((()=>l.state.commonModule.cbcLayer));(0,s.sV)((()=>{v()}));const v=async()=>{i.value=a.value},p=e=>{d.value=e},I=async e=>{i.value=e,a.value=e,r.value=!r.value},b=e=>{c.value=e},y=()=>{r.value=!r.value};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(Av,{onRefreshClass:I}),(0,s.Lk)("div",jv,[(0,s.Lk)("div",Vv,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,(0,n.v_)((0,o.R1)(g)(a.value?.testType))+" Smear",1),(0,s.Lk)("li",null,(0,n.v_)(a.value?.barcodeNo),1),(0,s.Lk)("li",null,(0,n.v_)(a.value?.patientId||"patientId No Data"),1),(0,s.Lk)("li",null,(0,n.v_)(a.value?.cbcPatientNo),1),(0,s.Lk)("li",null,(0,n.v_)(a.value?.patientName),1),(0,s.Lk)("li",null,(0,n.v_)(a.value?.cbcPatientNm)+" "+(0,n.v_)(a.value?.cbcSex)+" "+(0,n.v_)(a.value?.cbcAge),1),(0,s.Lk)("li",null,(0,n.v_)(a.value?.analyzedDttm),1)])]),m.value?((0,s.uX)(),(0,s.Wv)(Hv,{key:0,selectItems:a.value},null,8,["selectItems"])):(0,s.Q3)("",!0),(0,s.Lk)("div",{class:(0,n.C4)("databaseWbcRight"+(m.value?" cbcLayer":""))},[(0,s.bF)(hm,{onIsBeforeUpdate:p,onClassInfoArrUpdate:b,rbcInfo:i.value,selectItems:a.value,type:"listTable",allCheckClear:r.value},null,8,["rbcInfo","selectItems","allCheckClear"])],2),(0,s.Lk)("div",{class:(0,n.C4)("databaseWbcLeft"+(m.value?" cbcLayer":""))},[(0,s.bF)(Cv,{onUnChecked:y,isBefore:d.value,classInfoArr:c.value,rbcInfo:i.value,selectItems:a.value,type:"listTable"},null,8,["isBefore","classInfoArr","rbcInfo","selectItems"])],2)])],64))}});const qv=Yv;var Jv=qv;const Qv="http://emr012.cmcnu.or.kr/cmcnu/.live",zv="li",Zv="012",ep="H59",tp=[{id:"01",title:"NS",name:"Neutrophil-Segmented",cd:"LHR10501"},{id:"02",title:"ME",name:"Metamyelocyte",cd:"LHR10507"},{id:"03",title:"MY",name:"Myelocyte",cd:"LHR10508"},{id:"04",title:"PR",name:"Promyelocyte",cd:"LHR10509"},{id:"05",title:"LY",name:"Lymphocyte",cd:"LHR10503"},{id:"61",title:"LR",name:"Reactive lymphocyte",cd:"LHR10544"},{id:"62",title:"LA",name:"Abnormal lymphocyte",cd:"LHR10543"},{id:"07",title:"MO",name:"Monocyte",cd:"LHR10504"},{id:"08",title:"EO",name:"Eosinophil",cd:"LHR10505"},{id:"09",title:"BA",name:"Basophil",cd:"LHR10506"},{id:"10",title:"BL",name:"Blast",cd:"LHR10510"},{id:"11",title:"PC",name:"Plasma cell",cd:"LHR10517"}],ap={submit_id:"TRLII00124",business_id:"li",instcd:"012",bcno:"H59"},lp=Z(),sp=async e=>lp.httpPost(ee.filesystem.post,e,""),op=async e=>lp.httpDelete(ee.filesystem.delete,e,!1),np=async e=>lp.httpGet(ee.filesystem.createDirectory,`${e}`,!0),ip=async e=>lp.httpPost(ee.filesystem.fileCreate,e,""),cp=["src"],up={class:"mt2 mb2"},rp={class:"wbcClassInfoLeft"},dp={class:"leftWbcInfo"},mp={style:{position:"relative"}},vp={key:0,class:"memoModal"},pp={class:"wbcClassScroll"},gp=["onDragstart","onDrop"],Ip={key:0,class:"nth1Child classAttribute"},bp=(0,s.Lk)("li",null,"Class",-1),yp=(0,s.Lk)("li",null,"Count",-1),fp=(0,s.Lk)("li",null,"%",-1),Cp=[bp,yp,fp],kp=["onClick"],hp={class:"categories classTotal"},Sp=(0,s.Lk)("ul",{class:"categoryNm"},[(0,s.Lk)("li",null," Total ")],-1),_p={class:"classNm"},Ep=(0,s.Lk)("ul",{class:"degree"},[(0,s.Lk)("li",null," 100.00 ")],-1),Np={key:0},Lp=["onDragstart","onDrop"],Rp=["onClick"],Tp=(0,s.Lk)("li",null," -",-1),wp={key:1},Pp={class:"categoryNm"},Ap={key:0,class:"mb1 liTitle"},Dp={class:"classNm"},Mp={key:0,class:"mb1 liTitle"},xp={key:0},Op={class:"degree"},Kp={key:0,class:"mb1 liTitle"},Bp=(0,s.Lk)("li",null,"-",-1),Up={key:2,class:"beforeAfterBtn"};var Xp=(0,s.pM)({__name:"classInfo",props:["wbcInfo","selectItems","type"],setup(e,{emit:t}){const a=e,i=(0,u.Pj)(),c=(0,s.EW)((()=>i.state.userModule)),r=t,d=sessionStorage.getItem("selectItems"),m=(0,o.KR)(d?JSON.parse(d):null),v=(0,s.EW)((()=>i.state.commonModule.iaRootPath)),p=(0,s.EW)((()=>i.state.commonModule.clonedWbcInfo)),g=(0,s.EW)((()=>i.state.commonModule.inhaTestCode)),I=(0,s.EW)((()=>i.state.commonModule.deviceSerialNm)),y=(0,s.EW)((()=>i.state.commonModule.siteCd)),f=(0,o.KR)(""),C=(0,o.KR)(""),k=(0,o.KR)(""),h=(0,o.KR)(!1),S=(0,o.KR)([]),_=(0,o.KR)([]),E=["NR","GP","PA","AR","MA","SM"],N=(0,o.KR)(!1),L=(0,o.KR)(-1),R=(0,o.KR)(0),T=(0,o.KR)(!1),w=(0,o.KR)(""),P=(0,o.KR)(""),A=(0,o.KR)(!1),D=(0,o.KR)(""),M=(0,o.KR)(""),x=(0,o.KR)([]),O=(0,o.KR)(!1),K=(0,o.KR)(!1),B=(0,o.KR)(0),U=(0,o.KR)(""),X=(0,o.KR)([]),F=(0,o.KR)([]),W=(0,o.KR)([]);(0,s.sV)((async()=>{await fe(),k.value=a.selectItems.wbcMemo,await ke(p.value);const e=""!==a.selectItems?.img_drive_root_path&&a.selectItems?.img_drive_root_path?a.selectItems?.img_drive_root_path:v.value;if(f.value=b("barcode_image.jpg",e,a.selectItems.slotId,kt.barcodeDirName),O.value="bm"===window.PROJECT_TYPE,""===a.selectItems.submitState){const e=await Ec(String(a.selectItems.id)),t={submitState:"checkFirst"},l={...e.data,...t};await be(l,!0)}await ce(),await ue()})),(0,s.wB)(c.value,(e=>{C.value=e.id})),(0,s.wB)((()=>a.wbcInfo),(e=>{k.value=a.selectItems.wbcMemo;const t=""!==a.selectItems?.img_drive_root_path&&a.selectItems?.img_drive_root_path?a.selectItems?.img_drive_root_path:v.value;f.value=b("barcode_image.jpg",t,a.selectItems.slotId,kt.barcodeDirName)})),(0,s.wB)((()=>p.value),(e=>{ke(e)}),{deep:!0});const $=()=>{A.value=!0,M.value=G.IDS_MSG_UPLOAD_LIS,U.value="lis"},V=e=>{r("scrollEvent",e)},Y=()=>O.value?"BM Classification":"WBC Classification",q=(e,t)=>{L.value=e,R.value=t.clientY-t.target.getBoundingClientRect().top},J=(e,t)=>{if(N.value&&(i.dispatch("commonModule/setCommonInfo",{classInfoSort:S.value}),t.preventDefault(),-1!==L.value)){const t=S.value.splice(L.value,1)[0];S.value.splice(e,0,t),L.value=-1,Ee()}},Q=()=>{N.value=!N.value},Z=()=>{A.value=!0,M.value=G.IDS_MSG_CONFIRM_SLIDE,U.value="commit"},ee=()=>{"commit"===U.value?me():te(),A.value=!1},te=()=>{if("0002"===y.value){const e=tp;z.A.get("http://emr012.cmcnu.or.kr/cmcnu/.live",{params:ap}).then((function(t){const l=t.data,s=JSON.parse((0,Dv.xml2json)(l,{compact:!0})),o=s.root.spcworklist.worklist,n=["LHR10501","LHR10502","LHR10503","LHR10504","LHR10505","LHR10506"],i=o.filter((function(e){return"LHR100"===e.classCd._cdata}));a.selectItems.wbcInfoAfter.forEach((function(t){t.classCd="",e.forEach((function(e){t.id===e.id&&(t.classCd=e.cd)}))}));let u=[];a.selectItems.wbcInfoAfter.forEach((function(e){n.forEach((function(t){(e.classCd===t||e.count>0&&""!==e.classCd)&&u.push(e)}))}));const r=u.filter((function(e){return"LHR10501"===e.classCd}));if(r.length>0&&i.length>0){const e=(Number(i[0].inptrslt._cdata)*r[0].percent/100).toFixed(2);u.push({classCd:"LHR10599",percent:e})}re(c.value.userId).then((function(e){if("succ"===e){const e={empNo:c.value.userId,barcodeNo:a.selectItems.barcodeNo,wbcInfo:u},t=new Date,l=`${t.getFullYear()}`;let s=`${t.getMonth()+1}`;1===s.length&&(s=`0${s}`);let o=`${t.getDate()}`;1===o.length&&(o=`0${o}`);const n=encodeURIComponent(String.fromCharCode(23)),i=encodeURIComponent(String.fromCharCode(23,23)),r=encodeURIComponent(String.fromCharCode(3)),d=e.wbcInfo.filter((e=>null!==e.classCd&&""!==e.classCd)).map((e=>`${e.classCd}${n}${e.percent}${i}${l}${s}${o}${r}`)).join(""),m=`${Qv}?submit_id=TXLII00101&business_id=${zv}&ex_interface=${e.empNo}|${Zv}&instcd=${Zv}&userid=${e.empNo}&eqmtcd=${ep}&bcno=${e.barcodeNo}&result=${d}&testcont=MANUAL DIFFERENTIAL COUNT RESULT&testcontcd=01&execdeptcd=H1`;z.A.get(m).then((function(e){const t=e.data,a=JSON.parse((0,Dv.xml2json)(t,{compact:!0})),l=a.root.ResultFlag.resultflag._text;"Y"===l?Le(G.IDS_MSG_SUCCESS):Te(a.root.ResultFlag.error2._text)})).catch((function(e){Te(e.message)}))}else Te(G.IDS_ERROR_PLEASE_CONFIRM_YOUR_USER_ID)}))})).catch((function(e){Te(e.message)}))}else ae()},ae=()=>{if("0019"===y.value){let e="H|^&||||||||||P||"+a.selectItems.barcodeNo+"\n",t=0;X.value.forEach((function(l){""!==l.code&&a.selectItems.wbcInfoAfter.forEach((function(a){l.IA_CD===a.id&&(Number(a.percent)>0||Number(a.count))&&(e+="R|"+ ++t+"|^^^^"+l.code+"|"+a.count+"|||||||^"+c.value.userId+"\n",e+="R|"+ ++t+"|^^^^"+l.code+"%|"+a.percent+"|%||||||^"+c.value.userId+"\n")}))})),e+="L|1|N",ne(e)}else if("0006"===y.value){const e=oe();ne(e)}else"0011"===y.value?se():le()},le=async()=>{const e=W.value,t=await np(e);if(t){const e={sendingApp:"PBIA",sendingFacility:"PBIA",receivingApp:"LIS",receivingFacility:"LIS",dateTime:j(),security:"",messageType:["ADT","R02"],messageControlId:a.selectItems.barcodeNo,processingId:"P",hl7VersionId:"2.5",selectedItem:{},wbcInfo:a.selectItems.wbcInfoAfter,result:X.value},t=await Gm(e);if(t)if(W.value.includes("http"))ie(t);else{const e={filepath:W.value,msg:t};try{await $m(e);Le(G.IDS_MSG_SUCCESS)}catch(l){Te(l.response.data)}}}},se=()=>{let e="";const t=g.value.split(",");let l=[];t.forEach((function(e){if(e.length>0){var t=e.split("|"),a=t[0],s=t[1],o=(t[2],t[3],"");"L0210"===a&&(s+="5"),"H1151"===a?(o+="H9511|"+s+"|",l.push(o)):"H1152"===a?(o+="H9512|"+s+"|",l.push(o)):"H1153"===a?(o+="H9513|"+s+"|",l.push(o)):"H1154"===a?(o+="H9514|"+s+"|",l.push(o)):"H1155"===a?(o+="H9515|"+s+"|",l.push(o)):"H1165"===a?(o+="H9510|"+s+"|",l.push(o)):"H1162"===a?(o+="H9570|"+s+"|",l.push(o)):"H1101"!==a&&"H1102"!==a&&"H1103"!==a&&"H1104"!==a&&"H1105"!==a&&"H1106"!==a&&"H1121"!==a&&"H1122"!==a&&"H1123"!==a||(o+=a+"|"+s+"|",l.push(o))}})),g.value="",l.forEach((function(e){g.value+=e+","})),e+=g.value;let s="";X.value.forEach((function(t,l){a.selectItems.wbcInfoAfter.forEach((function(a){t.IA_CD===a.id&&("H9600"===t.code||"H9365"===t.code||"H9366"===t.code?Number(a.count)>0?e+=t.code+"|1|,":e+=t.code+"| |,":"13"===t.IA_CD||"14"===t.IA_CD?Number(a.count)>Number(t.MIN_COUNT)?e+=t.code+"|"+a.percent+"|,":e+=t.code+"| |,":Number(a.percent)>0?e+=t.code+"|"+a.percent+"|,":e+=t.code+"| |,")}))}));const o=["H9531","H9535","H9594","H9571","H9574","H9595"];F.value.forEach((function(t){""!==t.code&&a.selectItems.rbcInfoAfter.forEach((function(a){if(t.categoryId===a.categoryId)for(const l of a.classInfo)if(t.classId===l.classId){const a=0===Number(l.degree)?" ":o.includes(t.code)?"0":l.degree;s+=`${t.code}|${a}|,`,e+=`${t.code}|${a}|,`}}))}));const n={H9531:"H9571",H9532:"H9572",H9533:"H9573",H9535:"H9574",H9536:"H9575",H9537:"H9576",H9534:"H9577",H9538:"H9578",H9542:"H9518",H9544:"H9520",H9546:"H9517",H9548:"H9519",H9550:"H9522",H9552:"H9521",H9554:"H9525",H9556:"H9524",H9558:"H9526",H9560:"H9523",H9562:"H9528",H9564:"H9530",H9594:"H9595"};let i=s.replace(/H9531|H9532|H9533|H9535|H9536|H9537|H9534|H9538|H9542|H9544|H9546|H9548|H9550|H9552|H9554|H9556|H9558|H9560|H9562|H9564|H9594/g,(e=>n[e]));e+=s,e+=i;var c={url:W.value,machine:"ADUIMD",episode:a.selectItems.barcodeNo,result:e};z.A.post(c.url+"/api/MifMain/File",{machine:c.machine,episode:c.episode,result:c.result}).then((function(e){const t=e.data[0];"0"===t.returnCode?Le(G.IDS_MSG_SUCCESS):Le("return code : "+t.returnCode)})).catch((function(e){Le(e.message)}))},oe=()=>{let e="H|^&||||||||||P||"+a.selectItems.barcodeNo+"\n",t=0,l=0,s=0;if(a.selectItems.wbcInfoAfter.forEach((function(e){"02"!==e.id&&"03"!==e.id&&"04"!==e.id&&"10"!==e.id||(l+=Number(e.percent)),"72"===e.id&&(s=Number(e.percent))})),l>0&&s<6){const e=a.selectItems.wbcInfoAfter.filter((function(e){return"71"===e.id})),t=a.selectItems.wbcInfoAfter.filter((function(e){return"72"===e.id}));e[0].percent=Number(e[0].percent)+Number(s)+"",t[0].percent="0"}return X.value.forEach((function(l){""!==l.code&&a.selectItems.wbcInfoAfter.forEach((function(a){l.IA_CD===a.id&&("01"===a.id||"71"===a.id||"05"===a.id||"07"===a.id||"08"===a.id||"09"===a.id||Number(a.percent)>0)&&(e+="R|"+ ++t+"|^^^^"+l.code+"|"+a.count+"|||||||^"+c.value.userId+"\n",e+="R|"+ ++t+"|^^^^"+l.code+"%|"+a.percent+"|%||||||^"+c.value.userId+"\n")}))})),e+="L|1|N"},ne=async e=>{if(W.value.includes("http"))ie(e);else{const t=W.value,l=await np(t);if(l){const t={path:W.value,filename:`${W.value}/${a.selectItems.barcodeNo}.lst2msg`,content:e},l=await ip(t);if(l){const e=await Ec(String(a.selectItems.id)),t={submitState:"lis"},l={...e.data,...t};await be(l,!0),Le(G.IDS_MSG_SUCCESS),T.value||r("nextPage")}else Te("lis file err")}}},ie=e=>{const t={url:W.value,barcodeNo:a.selectItems.barcodeNo,userId:c.value.userId,deviceBarcode:I.value,resultMsg:e};z.A.post(t.url,{barcodeNo:t.barcodeNo,userid:t.userId,deviceBarcode:I.value,resultMsg:t.resultMsg}).then((function(e){"E000"===e.data.errorCode?Le(G.IDS_MSG_SUCCESS):Te(e.data.errorMessage)})).catch((function(e){Te(e.message)}))},ce=async()=>{try{const e=await Fe(),t=await Re();if(e&&e.data&&t&&t.data){const a=e.data,l=t.data;a&&(X.value=a),l&&(F.value=l)}}catch(e){console.error(e)}},ue=async()=>{try{const e=await Me();if(e&&e.data){const t=e.data;W.value=t[0].lisFilePath}}catch(e){console.error(e)}},re=async e=>new Promise(((t,a)=>{if("0002"===y.value){const l=`http://emr012.cmcnu.or.kr/cmcnu/.live?submit_id=TRLII00104&business_id=li&instcd=012&userid=${e}`;z.A.get(l).then((function(e){const a=e.data,l=JSON.parse((0,Dv.xml2json)(a,{compact:!0})),s=l.root.getUsernm.usernm._text;t(null===s||""===s?"fail":"succ")})).catch((function(e){console.log("checkUserAuth :"+e.message),a(new Error(e.message))}))}})),de=()=>{A.value=!1},me=async()=>{const e=H()().local(),t=await Ec(String(a.selectItems.id)),l={submitState:"Submit",submitOfDate:e.format(),submitUserId:c.value.name},s={...t.data,...l};await be(s)},ve=async()=>{const e={wbcMemo:k.value},t=await Ec(String(a.selectItems.id)),l={...t.data,...e};await be(l),h.value=!1},pe=()=>{k.value=""!==k.value?k.value:a.selectItems.wbcMemo,h.value=!h.value},ge=()=>{h.value=!1},Ie=e=>"Artifact(Smudge)"===e&&"0006"===y.value?"Artifact":e,be=async(e,t)=>{try{const a=await hc({userId:Number(c.value.id),runingInfoDtoItems:[e]});if(a){t||Le("success");const a=e;sessionStorage.setItem("selectItems",JSON.stringify(a)),k.value=a.wbcMemo}else console.error("   ")}catch(a){console.error("Error:",a)}},ye=(e,t)=>{let a=JSON.parse(JSON.stringify(e));return a.sort(((e,a)=>{const l=t.findIndex((t=>(t.title||t.abbreviation)===(e.title||e.abbreviation))),s=t.findIndex((e=>(e.title||e.abbreviation)===(a.title||a.abbreviation)));return-1===l?1:-1===s?-1:l-s})),a},fe=async()=>{try{const e=await $e();e&&(0===e?.data.length?x.value=[]:x.value=e.data.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx))))}catch(e){console.log(e)}},Ce=async()=>{K.value=!0,r("isBefore",!0);const e=sessionStorage.getItem("selectItems");m.value=e?JSON.parse(e):null,await fe();const t=await Ec(String(m.value.id)),a=t.data.wbcInfo.wbcInfo[0];let l=0!==x.value.length?x.value:"bm"===window.PROJECT_TYPE?da:ra;const s=ye(a,l);S.value=s.filter((e=>!E.includes(e.title))),_.value=s.filter((e=>E.includes(e.title))),_e(S.value)},ke=async e=>{await fe(),r("isBefore",!1),K.value=!1;const t=await Ec(String(m.value.id)),a=0!==m.value.wbcInfoAfter.length?m.value.wbcInfoAfter:t.data.wbcInfo.wbcInfo[0],l=0===e.length?a:e;let s=0!==x.value.length?x.value:"bm"===window.PROJECT_TYPE?da:ra;const o=ye(l,s);S.value=o.filter((e=>!E.includes(e.title))),_.value=o.filter((e=>E.includes(e.title))),_e(S.value)},he=e=>{const t=Se(y.value,m.value?.testType);return!t.includes(e)},Se=(e,t)=>{e||""!==e||(e="0000",t="01");const a={"0006":{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","SM","NE","GP","PA","OT"]}},l=a[e]||{includesStr:["AR","NR","GP","PA","MC","SM","MA","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","NE","SM","GP","PA","OT"]};return"01"===t||"04"===t?l.includesStr:l.includesStr2},_e=e=>{B.value=0,e.forEach((e=>{if(O.value)"OT"!==e.title&&(B.value+=Number(e.count));else{const t=Se(y.value,m.value?.testType),a=t.includes(e.title);a||(B.value+=Number(e.count))}}))};async function Ee(){let e=JSON.parse(JSON.stringify(S.value)),t=0;e.forEach((e=>{e.images.forEach((e=>{if(O.value)"OT"!==e.title&&(t+=1);else{const a=Se(y.value,m.value?.testType);a.includes(e.title)||(t+=1)}}))})),e.forEach((e=>{if(e.images.forEach((e=>{delete e.width,delete e.height,delete e.filter})),O.value){if("OT"!==e.title){const a=(Number(e.count)/Number(t)*100).toFixed(1);e.percent=Number(a)===Math.floor(Number(a))?Math.floor(Number(a)).toString():a}}else{const a=Se(y.value,m.value?.testType);if(!a.includes(e.title)){const a=(Number(e.count)/Number(t)*100).toFixed(1);e.percent=Number(a)===Math.floor(Number(a))?Math.floor(Number(a)).toString():a}}})),m.value.wbcInfoAfter=e,sessionStorage.setItem("selectItems",JSON.stringify(m.value)),sessionStorage.setItem("selectItemWbc",JSON.stringify(e));const a=ye(x.value,S.value);a.forEach(((e,t)=>{e.orderIdx=t}));const l=await Ec(String(m.value.id));l&&(l.data.wbcInfoAfter=e),await He(a),await Ne(e,[l.data]),await i.dispatch("commonModule/setCommonInfo",{classInfoSort:[]})}async function Ne(e,t){try{const e=await hc({userId:Number(C.value),runingInfoDtoItems:t});e||console.error("   ")}catch(a){console.error("Error:",a)}}const Le=e=>{T.value=!0,w.value="success",P.value=e,window.scrollTo({top:0,behavior:"smooth"})},Te=e=>{T.value=!0,w.value="error",P.value=e},we=()=>{T.value=!1};return(t,a)=>{const o=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,["report"!==e.type?((0,s.uX)(),(0,s.CE)("img",{key:0,src:f.value},null,8,cp)):(0,s.Q3)("",!0),(0,s.Lk)("div",up,[(0,s.Lk)("h3",rp,(0,n.v_)(Y()),1),(0,s.Lk)("ul",dp,[(0,s.Lk)("li",mp,[(0,s.bF)(o,{icon:["fas","comment-dots"],onClick:pe}),h.value?((0,s.uX)(),(0,s.CE)("div",vp,[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>k.value=e)},null,512),[[l.Jo,k.value]]),(0,s.Lk)("button",{onClick:ve},"ok"),(0,s.Lk)("button",{onClick:ge},"cancel")])):(0,s.Q3)("",!0)]),(0,s.Lk)("li",{onClick:Z,class:(0,n.C4)({submitted:"Submit"===e.selectItems.submitState})},[(0,s.bF)(o,{icon:["fas","square-check"]})],2),(0,s.Lk)("li",{onClick:$},[(0,s.bF)(o,{icon:["fas","upload"]})]),(0,s.Lk)("li",null,[N.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(o,{key:0,icon:["fas","lock"],onClick:Q})),N.value?((0,s.uX)(),(0,s.Wv)(o,{key:1,icon:["fas","lock-open"],onClick:Q})):(0,s.Q3)("",!0)])])]),(0,s.Lk)("div",pp,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(S.value,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"wbcClassDbDiv",draggable:"true",onDragstart:e=>q(t,e),onDragover:a[1]||(a[1]=(0,l.D$)((()=>{}),["prevent"])),onDrop:e=>J(t,e)},[0===t?((0,s.uX)(),(0,s.CE)("ul",Ip,Cp)):(0,s.Q3)("",!0),he(e.title)?((0,s.uX)(),(0,s.CE)("ul",{key:1,class:"nth1Child",onClick:t=>V(e.id)},[(0,s.Lk)("li",null,(0,n.v_)(e?.name),1),(0,s.Lk)("li",null,(0,n.v_)(e?.count),1),(0,s.Lk)("li",null,(0,n.v_)(e?.percent||"-"),1)],8,kp)):(0,s.Q3)("",!0)],40,gp)))),128)),(0,s.Lk)("div",hp,[Sp,(0,s.Lk)("ul",_p,[(0,s.Lk)("li",null,(0,n.v_)(B.value||0),1)]),Ep]),O.value?((0,s.uX)(),(0,s.CE)("div",Np,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(S.value,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"wbcClassDbDiv mb2",draggable:"true",onDragstart:e=>q(t,e),onDragover:a[2]||(a[2]=(0,l.D$)((()=>{}),["prevent"])),onDrop:e=>J(t,e)},["OT"===e?.title?((0,s.uX)(),(0,s.CE)("ul",{key:0,class:"nth1Child",onClick:t=>V(e.id)},[(0,s.Lk)("li",null,(0,n.v_)(e?.name),1),(0,s.Lk)("li",null,(0,n.v_)(e?.count),1),Tp],8,Rp)):(0,s.Q3)("",!0)],40,Lp)))),128))])):(0,s.Q3)("",!0),O.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",wp,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(_.value,((t,a)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",{key:a,class:"categories"},[(0,s.Lk)("ul",Pp,[0===a?((0,s.uX)(),(0,s.CE)("li",Ap,"non-WBC")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(Ie(t.name)),1)]),(0,s.Lk)("ul",Dp,[0===a?((0,s.uX)(),(0,s.CE)("li",Mp,".")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,[(0,s.eW)((0,n.v_)(t?.count)+" ",1),"NR"===t?.title||"GP"===t?.title?((0,s.uX)(),(0,s.CE)("span",xp," / "+(0,n.v_)(m.value?.wbcInfo?.maxWbcCount)+" WBC",1)):(0,s.Q3)("",!0)])]),(0,s.Lk)("ul",Op,[0===a?((0,s.uX)(),(0,s.CE)("li",Kp)):(0,s.Q3)("",!0),Bp])],512)),[[l.aG,"0006"!==e.selectItems.siteCd&&"SM"!==t?.title]]))),128))])),"report"!==e.type?((0,s.uX)(),(0,s.CE)("div",Up,[(0,s.Lk)("button",{onClick:Ce,class:(0,n.C4)({isBeforeClicked:K.value})},"Before",2),(0,s.Lk)("button",{onClick:a[3]||(a[3]=e=>ke(p.value)),class:(0,n.C4)({isBeforeClicked:!K.value})},"After",2)])):(0,s.Q3)("",!0)]),T.value?((0,s.uX)(),(0,s.Wv)(ze,{key:1,"is-visible":T.value,type:w.value,message:P.value,onHide:we,"onUpdate:hideAlert":we},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0),A.value?((0,s.uX)(),(0,s.Wv)(Vd,{key:2,"is-visible":A.value,type:D.value,message:M.value,onHide:de,onOkConfirm:ee},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const Fp=Xp;var Wp=Fp;const Gp={class:"reportDiv"},$p={class:"wbcDiv"},Hp={key:0,class:"rbcDiv"},jp={class:"reportDetail"},Vp={class:"reportTitle"},Yp=(0,s.Lk)("span",null,"[Hospital]",-1),qp={class:"reportDivTop"},Jp={key:0,class:"reportH3"},Qp={key:1,class:"reportH3"},zp={class:"reportTable"},Zp=(0,s.Lk)("th",null,"Slot ID",-1),eg=(0,s.Lk)("th",null,"Ordered date",-1),tg=(0,s.Lk)("th",null,"Signed by ID",-1),ag=(0,s.Lk)("th",null,"Signed date",-1),lg=(0,s.Lk)("th",null,"Patient ID",-1),sg=(0,s.Lk)("th",null,"Ordered Classification",-1),og=(0,s.Lk)("th",null,"Name",-1),ng=(0,s.Lk)("th",null,"Birth",-1),ig=(0,s.Lk)("th",null,"Gender",-1),cg={class:"reportDivBottom"},ug={class:"wbcLeft"},rg={class:"reportH3 mb1 pl0"},dg={class:"tableClass"},mg=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{width:"40%"}),(0,s.Lk)("col",{width:"20%"}),(0,s.Lk)("col",{width:"20%"})],-1),vg=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Class"),(0,s.Lk)("th",null,"Count"),(0,s.Lk)("th",null,"%")])],-1),pg=(0,s.Lk)("td",null,"total",-1),gg=(0,s.Lk)("td",null,"100.00",-1),Ig={key:0,class:"reportH3 mb1 pl0"},bg={key:1,class:"tableClass"},yg=(0,s.Lk)("colgroup",null,[(0,s.Lk)("col",{width:"40%"}),(0,s.Lk)("col",{width:"20%"}),(0,s.Lk)("col",{width:"20%"})],-1),fg={key:0},Cg=(0,s.Lk)("td",null,"-",-1),kg={key:0,class:"rbcRight"},hg=(0,s.Lk)("h3",{class:"reportH3 mb1 pl0"},"RBC classification result",-1),Sg={class:"categoryNm"},_g={key:0,class:"mb1 liTitle"},Eg={class:"classNm"},Ng={key:0,class:"mb1 liTitle"},Lg={class:"degree"},Rg={key:0,class:"mb1 liTitle"},Tg={key:0};var wg=(0,s.pM)({__name:"report",setup(e){const t=e=>e?.name,a=(0,u.Pj)(),i=sessionStorage.getItem("selectItems"),c=(0,o.KR)(i?JSON.parse(i):null),r=(0,o.KR)(i?JSON.parse(i):null),d=(0,o.KR)(null),m=sessionStorage.getItem("selectItemWbc"),v=(0,o.KR)(!1),p=(0,o.KR)(null),I=(0,o.KR)([]),b=(sessionStorage.getItem("selectItemRbc"),(0,s.EW)((()=>a.state.userModule)),(0,s.EW)((()=>a.state.commonModule.siteCd))),y=(0,s.EW)((()=>a.state.commonModule.clonedWbcInfo)),f=(0,s.EW)((()=>a.state.commonModule.cbcLayer)),C=((0,s.nI)(),(0,o.KR)(!1)),k=(0,o.KR)([]),h=(0,o.KR)([]);(0,s.sV)((async()=>{await T(),await w(),C.value="bm"===window.PROJECT_TYPE}));const S=e=>{const t=_(b.value,c.value?.testType);return!t.includes(e)},_=(e,t)=>{e||""!==e||(e="0000",t="01");const a={"0006":{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","SM","NE","GP","PA","OT"]}},l=a[e]||{includesStr:["AR","NR","GP","PA","MC","SM","MA","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","NE","SM","GP","PA","OT"]};return"01"===t||"04"===t?l.includesStr:l.includesStr2},E=async e=>{r.value=e,await w(e)},N=()=>{v.value=!1},L=()=>C.value?"BM Classification":"WBC Classification",R=()=>{v.value=!0},T=async()=>{try{const e=await $e();e&&(0===e?.data.length?h.value=[]:h.value=e.data.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx))))}catch(e){console.log(e)}};async function w(e){if(r.value.wbcInfoAfter&&0!==r.value.wbcInfoAfter.length){let e=0!==h.value.length?h.value:"bm"===window.PROJECT_TYPE?da:ra;const t=P(y.value,e);d.value=t,k.value=t}else{let e=0!==h.value.length?h.value:"bm"===window.PROJECT_TYPE?da:ra;const t=P(r.value.wbcInfo.wbcInfo[0],e);d.value=t,k.value=t}I.value=0!==r.value.rbcInfoAfter.length&&r.value.rbcInfoAfter?r.value.rbcInfoAfter:r.value.rbcInfo.rbcInfo}const P=(e,t)=>{let a=JSON.parse(JSON.stringify(e));return a.sort(((e,a)=>{const l=t.findIndex((t=>(t.title||t.abbreviation)===(e.title||e.abbreviation))),s=t.findIndex((e=>(e.title||e.abbreviation)===(a.title||a.abbreviation)));return-1===l?1:-1===s?-1:l-s})),a};return(e,a)=>{const i=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(Av,{onRefreshClass:E}),(0,s.Lk)("div",{class:(0,n.C4)("reportSection"+(f.value?" cbcLayer":""))},[f.value?((0,s.uX)(),(0,s.Wv)(Hv,{key:0,selectItems:r.value},null,8,["selectItems"])):(0,s.Q3)("",!0),(0,s.Lk)("div",Gp,[(0,s.Lk)("div",$p,[(0,s.bF)(Wp,{wbcInfo:d.value,selectItems:r.value,type:"report"},null,8,["wbcInfo","selectItems"])]),C.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Hp,[(0,s.bF)(hm,{rbcInfo:I.value,selectItems:r.value,type:"report"},null,8,["rbcInfo","selectItems"])])),(0,s.Lk)("div",jp,[(0,s.Lk)("div",Vp,[Yp,(0,s.eW)(),(0,s.Lk)("span",null,"DM Serial Nbr : "+(0,n.v_)(r.value?.slotId),1),(0,s.bF)(i,{icon:["fas","print"],onClick:R,class:"printStart"})]),(0,s.Lk)("div",qp,[C.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("h3",Jp,"Analysis Report from UIMD PB system")),C.value?((0,s.uX)(),(0,s.CE)("h3",Qp,"Analysis Report from UIMD BM system")):(0,s.Q3)("",!0),(0,s.Lk)("table",zp,[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[Zp,(0,s.Lk)("td",null,(0,n.v_)(r.value?.slotId),1)]),(0,s.Lk)("tr",null,[eg,(0,s.Lk)("td",null,(0,n.v_)((0,o.R1)(V)(r.value?.orderDttm)),1)]),(0,s.Lk)("tr",null,[tg,(0,s.Lk)("td",null,(0,n.v_)(r.value?.submitUserId),1)]),(0,s.Lk)("tr",null,[ag,(0,s.Lk)("td",null,(0,n.v_)(r.value?.submitOfDate),1)]),(0,s.Lk)("tr",null,[lg,(0,s.Lk)("td",null,(0,n.v_)(r.value?.patientId),1)]),(0,s.Lk)("tr",null,[sg,(0,s.Lk)("td",null,(0,n.v_)((0,o.R1)(g)(r.value?.testType)),1)]),(0,s.Lk)("tr",null,[og,(0,s.Lk)("td",null,(0,n.v_)(r.value?.patientName),1)]),(0,s.Lk)("tr",null,[ng,(0,s.Lk)("td",null,(0,n.v_)(r.value?.birthDay),1)]),(0,s.Lk)("tr",null,[ig,(0,s.Lk)("td",null,(0,n.v_)("01"===r.value?.gender?"Male":"Female"),1)])])])]),(0,s.Lk)("div",cg,[(0,s.Lk)("div",ug,[(0,s.Lk)("h3",rg,(0,n.v_)(L())+" result",1),(0,s.Lk)("table",dg,[mg,vg,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(k.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id,class:"wbcClassDbDiv"},[S(e.title)?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("td",null,(0,n.v_)(e?.name),1),(0,s.Lk)("td",null,(0,n.v_)(e?.count),1),(0,s.Lk)("td",null,(0,n.v_)(e?.percent||"-"),1)],64)):(0,s.Q3)("",!0)])))),128)),(0,s.Lk)("tr",null,[pg,(0,s.Lk)("td",null,(0,n.v_)(r.value?.wbcInfo?.totalCount||0),1),gg])])]),r.value?.wbcInfo?.nonRbcClassList?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("h3",Ig,"non-WBC")),C.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("table",bg,[yg,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value?.wbcInfo?.nonRbcClassList,((e,a)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("tr",{key:a},[(0,s.Lk)("td",null,(0,n.v_)(t(e)),1),(0,s.Lk)("td",null,[(0,s.eW)((0,n.v_)(e?.count)+" ",1),"NR"===e?.title||"GP"===e?.title?((0,s.uX)(),(0,s.CE)("span",fg," /"+(0,n.v_)(r.value?.wbcInfo?.maxWbcCount)+" WBC",1)):(0,s.Q3)("",!0)]),Cg],512)),[[l.aG,"0006"!==b.value&&"SM"!==e?.title]]))),128))])]))]),C.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",kg,[hg,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)([I.value],((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"categories"},[(0,s.Lk)("ul",Sg,[0===t?((0,s.uX)(),(0,s.CE)("li",_g,"Category")):(0,s.Q3)("",!0),(0,s.Lk)("li",null,(0,n.v_)(e?.categoryNm),1)]),(0,s.Lk)("ul",Eg,[0===t?((0,s.uX)(),(0,s.CE)("li",Ng,"Class")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},(0,n.v_)(e?.classNm),1)))),128))]),(0,s.Lk)("ul",Lg,[0===t?((0,s.uX)(),(0,s.CE)("li",Rg,"Degree")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e?.classInfo,((t,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:a},["01"!==t.classId||"05"===e.categoryId?((0,s.uX)(),(0,s.CE)("li",Tg,(0,n.v_)(t?.degree),1)):(0,s.Q3)("",!0)],64)))),128))])])))),128))],64)))),128))]))])])])],2),v.value?((0,s.uX)(),(0,s.Wv)(Ju,{key:0,selectItems:r.value,ref_key:"printContent",ref:p,printOnOff:v.value,selectItemWbc:(0,o.R1)(m),onPrintClose:N},null,8,["selectItems","printOnOff","selectItemWbc"])):(0,s.Q3)("",!0)],64)}}});const Pg=wg;var Ag=Pg;const Dg={class:"moveImgIsBool"},Mg={class:"wbcContent"},xg={class:"topClintInfo"},Og={class:"sizeContainer"},Kg={class:"imgSetWrap",ref:"imgSetWrap"},Bg={class:"imgSet"},Ug={class:"wbcInfoDbUl"},Xg=["onClick"],Fg=["onDrop"],Wg={key:0,class:"cellImgBox"},Gg={class:"mt1"},$g=["onInput","checked"],Hg=["onDrop"],jg=["onClick","onDblclick","onContextmenu"],Vg={style:{position:"relative"}},Yg={class:"titleImg"},qg={class:"fileTitle"},Jg=["src","width","height","onDragstart","onError"],Qg={key:1},zg=(0,s.Lk)("select",null,[(0,s.Lk)("option",null,"1")],-1),Zg={class:"mt1"},eI=["checked"],tI=(0,s.Lk)("div",null,[(0,s.Lk)("select",null,[(0,s.Lk)("option",null,"1")]),(0,s.Lk)("div")],-1),aI=["onClick"],lI={class:"wbcModal"},sI={class:"wbc-modal-content"},oI={class:"wbcModalImageContent"},nI=["src"];var iI=(0,s.pM)({__name:"listDetail",setup(e){(0,o.KR)({});const t=(0,o.KR)(""),a=sessionStorage.getItem("selectItemWbc"),i=(0,o.KR)(null),c=sessionStorage.getItem("selectItems"),r=(0,o.KR)(c?JSON.parse(c):null),d=(0,u.Pj)(),m=(0,o.KR)(""),v=(0,s.EW)((()=>d.state.userModule)),p=(0,s.EW)((()=>d.state.commonModule.cbcLayer)),b=(0,s.EW)((()=>d.state.commonModule.moveImgIsBool)),y=(0,s.EW)((()=>d.state.commonModule.classInfoSort)),f=(0,o.KR)(d.state.commonModule.iaRootPath),C=(0,s.EW)((()=>d.state.commonModule.siteCd)),k=(0,o.KR)(null),h=(0,o.KR)(null),S=(0,o.KR)(!1),_=(0,o.KR)(null),E=(0,o.KR)(!1),N=(0,o.KR)(null),L=(0,o.KR)([]),R=(0,o.KR)(null),T=(0,o.KR)([]),w=(0,o.KR)([]),P=[],A=(0,o.KR)(150),D=(0,o.KR)(100),M=(0,o.KR)([0,0,0]),x=(0,o.KR)("ME"),O=(0,o.KR)([]),K=(0,o.KR)(""),B=(0,o.KR)(null),U=(0,o.KR)(!1),X=(0,o.KR)(!1),F=(0,o.KR)(!1),W=(0,o.KR)(""),G=(0,o.KR)("150px"),$=(0,o.KR)("150px"),H=(0,o.KR)(!1),j=window.APP_API_BASE_URL||"http://192.168.0.131:3002",V=(0,o.KR)([]),Y=(0,o.KR)([]),q=(0,o.KR)([]),J=((0,s.nI)(),(0,o.KR)("bm")),Q=(0,o.KR)("0.9"),z=(0,o.KR)([]),Z=(0,o.KR)([]),ee=(0,o.KR)([]),te=(0,o.KR)(!1),ae=(0,o.KR)({}),le=(0,o.KR)(!1),se=(0,o.KR)(0),oe=(0,o.KR)(0),ne=(0,o.KR)(null),ie=(0,o.KR)(!1),ce=(0,o.KR)(!1);(0,s.sV)((async()=>{i.value=[],r.value=c?JSON.parse(c):null,J.value=window.PROJECT_TYPE,window.addEventListener("keydown",Ze),window.addEventListener("keyup",tt),document.body.addEventListener("click",ze),await Ee(!1,null),document.addEventListener("click",ke);const e=""!==r.value?.rootPath&&r.value?.rootPath?r.value?.rootPath:d.state.commonModule.iaRootPath;f.value=e,await ue()})),(0,s.hi)((async()=>{document.addEventListener("click",ke)})),(0,s.wB)(D,(e=>{localStorage.setItem("imgBrightness",String(e))})),(0,s.wB)(A,(e=>{localStorage.setItem("imageSize",String(e))})),(0,s.wB)(X,(e=>{Ee(!1,null)}),{deep:!0}),(0,s.wB)(M,(e=>{const t=e[0],a=e[1],l=e[2];localStorage.setItem("imageRgb",JSON.stringify([t,a,l]))}),{deep:!0});const ue=async()=>{const e=localStorage.getItem("imgBrightness"),t=localStorage.getItem("imageRgb"),a=localStorage.getItem("imageSize");t&&(M.value=JSON.parse(t)),e&&(D.value=Number(e)),a&&(A.value=Number(a));const l=255-M.value[0],s=255-M.value[1],o=255-M.value[2];i.value.forEach((e=>{e.images.forEach((e=>{e.filter=`opacity(0.9) drop-shadow(0 0 0 rgb(${l}, ${s}, ${o})) brightness(${D.value}%)`,e.width=Number(A.value),e.height=Number(A.value)}))}))},de=e=>{X.value=e},me=()=>{ie.value=!0},pe=()=>{ie.value=!1},ge=(e,t,a)=>{e.preventDefault(),he(e,a)};function be(e,t,a){ae.value[`${e}-${t}`]=!0}const ye=(e,t)=>{if(0===r.value.wbcInfoAfter.length)return null;if(X.value){const a=r.value.wbcInfoAfter.find((t=>t.images&&t.images.find((t=>t.fileName===e))));if(a&&a.title!==t)return{fileNameMa:e,idMa:a.id,titleMa:a.title}}return null},fe=()=>{te.value=!0},Ce=()=>{te.value=!1},ke=e=>{e.target.closest(".imgSetWrap")||(H.value=!1,t.value="")};document.addEventListener("click",(e=>{le.value&&(le.value=!1)}));const he=(e,t)=>{X.value||(le.value=!0,se.value=e.clientX,oe.value=e.clientY-250,ne.value=t)},Se=async(e,t)=>{Je();const a=i.value[t];if(ne.value){const t=i.value.findIndex((t=>t.id===e.id));await rt(t,T.value,a,i.value[t],!1,"",i.value),le.value=!1}le.value=!1},_e=async(e,t)=>{let a=e.slice();a.sort(((e,a)=>{const l=t.findIndex((t=>(t.title||t.abbreviation)===(e.title||e.abbreviation))),s=t.findIndex((e=>(e.title||e.abbreviation)===(a.title||a.abbreviation)));return-1===l?1:-1===s?-1:l-s})),e.splice(0,e.length,...a)},Ee=async(e,t)=>{i.value=[];try{const a=await re(),l=a.data,s=l.filter((e=>e.abbreviation)),o=sessionStorage.getItem("customClass"),n=JSON.parse(o);n&&n.forEach((e=>{const t=l.find((t=>t.customNum===e.customNum&&t.abbreviation!==e.abbreviation));if(t){if(""===e?.abbreviation)return;const t=`${f.value}/${r.value.slotId}/${Ct(J.value)}/${e?.abbreviation}`;op({path:t})}})),sessionStorage.setItem("customClass",JSON.stringify(l)),V.value=l;for(const e of s){const{className:t,abbreviation:a,customNum:l}=e,s=`${f.value}/${r.value.slotId}/${Ct(J.value)}/${l}_${a}`;await sp({path:s});const o={id:l,name:t,count:"0",images:[],title:a};let n=[];n=X.value?r.value.wbcInfo.wbcInfo[0]:0!==r.value.wbcInfoAfter.length?r.value.wbcInfoAfter:r.value.wbcInfo.wbcInfo[0];const c=n.find((e=>e.id===o.id&&e.name===o.name));c||(n.push(o),i.value=n,sessionStorage.setItem("selectItems",JSON.stringify(r.value)),await pt("notWbcAfterSave"))}await Le(),await Ne(),await lt(),await at(s,e,t)}catch(a){console.log(a)}},Ne=async()=>{try{const e=await Ie();if(e&&e?.data){const t=e.data;q.value=t}}catch(e){console.log(e)}},Le=async()=>{try{const e=await ve();if(e&&e?.data){const t=e.data;Y.value=t,console.log(t)}}catch(e){console.log(e)}};function Re(e){const t=e.fileName.split("_")[0],a={NES:"NS",NEB:"NB"},l=Object.keys(a).reduce(((e,t)=>e.replace(t,a[t])),t);return e.title!==l}function Te(e){const t={NES:"NS",NEB:"NB"},a=e.split("_")[0],l=Object.keys(t).reduce(((e,a)=>e.replace(a,t[a])),a);return l}const we=(e,t)=>{F.value=!0,W.value=It(e.fileName,t.id,t.title,"getImageRealTime")},Pe=()=>{F.value=!1},Ae=()=>{H.value=!H.value},De=()=>{let e=Math.min(parseFloat(G.value)+50,400),t=Math.min(parseFloat($.value)+50,400);G.value=`${e}px`,$.value=`${t}px`},Me=()=>{let e=Math.max(parseFloat(G.value)-50,150),t=Math.max(parseFloat($.value)-50,150);G.value=`${e}px`,$.value=`${t}px`};(0,s.wB)(v.value,((e,t)=>{m.value=e.id})),(0,s.wB)((()=>y.value),(async e=>{await lt();const t=0!==ee.value.length?ee.value:"bm"===window.PROJECT_TYPE?da:ra;await _e(i.value,t)}));const xe=async e=>{r.value=e;const t=""!==r.value?.rootPath&&r.value?.rootPath?r.value?.rootPath:d.state.commonModule.iaRootPath;f.value=t,await Ee(!0,e)},Oe=()=>{},Ke=async e=>{if(e||(U.value=!U.value),U.value){let e="";"pb"===J.value?e=`${f.value}/${r.value.slotId}/${"01"===r.value.testType||"04"===r.value.testType?"01_WBC_Classification":"05_BF_Classification"}/${r.value.slotId}.json`:"bm"===J.value&&(e=`${f.value}/${r.value.slotId}/${Ct(J.value)}/${r.value.slotId}.json`);const t=await Xm({fullPath:e});if(t&&t.success){const e=t.data;i.value.forEach((t=>{0!==t.images.length&&t.images.forEach((t=>{const a=B.value,l=e.find((e=>e?.FILE_NM===t?.fileName));if(l){const e=(a[0]?.width||150)/Number(l.ORG_WIDTH)*100,s=(a[0]?.height||150)/Number(l.ORG_HEIGHT)*100,o=(Number(l.POSX2)-Number(l.POSX1))*(e/100),n=(Number(l.POSY2)-Number(l.POSY1))*(s/100),i=a[0]?.offsetLeft+Number(l.POSX1)*(e/100)+o/2+"px",c=a[0]?.offsetTop+Number(l.POSY1)*(s/100)+n/2+"px";t.coordinates={position:"absolute",left:i,top:c,width:"5px",height:"5px",background:"#10ff00"}}}))}))}}else i.value.forEach((e=>{e.images.forEach((e=>{e.coordinates={display:"none"}}))}))},Be=(e,a)=>{K.value=e.target.checked?a:"",e.target.checked?t.value=a:t.value="",Ue()},Ue=()=>{T.value=[],z.value=[],Z.value=[];for(const e in i.value)if(K.value===i.value[e].title)for(const t in i.value[e].images){const a={id:i.value[e].id,title:i.value[e].title,...i.value[e].images[t]};T.value.push(a),z.value.push(a)}},Xe=e=>t=>{t&&(O.value[e]=t)},Fe=e=>{const t=O.value[e];t&&t.scrollIntoView({behavior:"smooth"})};function We(){M.value=[0,0,0],Q.value="0.9",je("reset")}function Ge(){Ke(!0),A.value=150,i.value.forEach((e=>{e.images.forEach((e=>{e.width=150,e.height=150}))}))}function He(){D.value=100,Q.value="0.9",je("reset")}function je(e){const t=x.value;if(!t)return void We();"reset"!==e&&(Q.value="0.9");const a=255-M.value[0],l=255-M.value[1],s=255-M.value[2];i.value.forEach((e=>{e.images.forEach((e=>{e.filter=`opacity(${Q.value}) drop-shadow(0 0 0 rgb(${a}, ${l}, ${s})) brightness(${D.value}%)`}))}))}function Ve(e){const t=M.value[0],a=M.value[1],l=M.value[2],s=e?.target?.value;i.value.forEach((e=>{e.images.forEach((e=>{e.filter=`opacity(0.9) drop-shadow(0 0 0 rgb(${t}, ${a}, ${l})) brightness(${s}%)`}))}))}function Ye(e){i.value.forEach((t=>{t.images.forEach((t=>{let a=e?.target?.value,l=e?.target?.value;t.width=Number(a),t.height=Number(l)}))})),Ke(!0)}function qe(){}function Je(){P.push(JSON.parse(JSON.stringify(i.value)))}async function Qe(e){if(X.value)return;const t=i.value[N.value];if(Je(),0===T.value.length){const a=t.images[R.value];e.images.push(a);const l=i.value.findIndex((t=>t.id===e.id));-1!==l?i.value[l].images.push(a):console.error(" id   "),await rt(l,[{fileName:a.fileName}],t,i.value[l],!1)}else{const a=i.value.findIndex((t=>t.id===e.id));await rt(a,T.value,t,i.value[a],!1,"",i.value)}}function ze(e){const t=e.target;t.closest(".wbcImgWrapLi")||t.closest(".context-menu")||(T.value=[],w.value=[],z.value=[])}async function Ze(e){e.shiftKey&&(S.value=!0),e.ctrlKey&&(E.value=!0),"pb"===J.value?e.key&&("01"===r.value.testType||"04"===r.value.testType?Y.value:q.value).some((t=>t.key.toUpperCase()===e.key.toUpperCase()))&&await et(("01"===r.value.testType||"04"===r.value.testType?Y.value:q.value).find((t=>t.key.toUpperCase()===e.key.toUpperCase()))):"bm"===J.value&&e.key&&Y.value.some((t=>t.key.toUpperCase()===e.key.toUpperCase()))&&await et(Y.value.find((t=>t.key.toUpperCase()===e.key.toUpperCase())))}async function et(e){const t=i.value.findIndex((t=>t.title===e.abbreviation)),a=T.value;Je();for(const l of a){const a=i.value.findIndex((e=>e.title===l.title)),s=i.value[a],o=s.images.findIndex((e=>e.fileName===l.fileName));-1!==o&&await rt(t,[{fileName:l.fileName,id:l.id,title:l.title}],e,i.value[t],!0,"keyMove")}}function tt(e){e.shiftKey||(S.value=!1),e.ctrlKey||(E.value=!1)}async function at(e,t,l){i.value=[];let s=[];t?(i.value=0!==l.wbcInfoAfter.length?l.wbcInfoAfter:l.wbcInfo.wbcInfo[0],s=l):(i.value=a?JSON.parse(a):null,s=r.value),s.wbcInfoAfter&&0!==s.wbcInfoAfter.length&&!X.value?(i.value=s.wbcInfoAfter,s.wbcInfo.wbcInfo[0].forEach((e=>{const t=e.title,a=s.wbcInfoAfter.find((e=>e.title===t));a&&a.images.forEach((e=>{e.title=t}))}))):X.value&&(i.value=s.wbcInfo.wbcInfo[0],s.wbcInfo.wbcInfo[0].forEach((e=>{e.images&&e.images.length>0&&e.images.forEach((t=>{t.title=e.title}))}))),""!==e&&(s.wbcInfo.wbcInfo[0]=s.wbcInfo.wbcInfo[0].filter((t=>!e.find((e=>e.customNum===t.id&&""===e.abbreviation)))));const o=ee.value.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx))),n=0!==ee.value.length?o:"bm"===window.PROJECT_TYPE?da:ra;await _e(i.value,n)}const lt=async()=>{try{const e=await $e();e&&(0===e?.data.length?ee.value=[]:ee.value=e.data.sort(((e,t)=>Number(e.orderIdx)-Number(t.orderIdx))))}catch(e){console.log(e)}};function st(){}function ot(e,t){k.value=e,h.value=t,R.value=t,N.value=e,L.value.push(e)}function nt(e,t,a){if(S.value){if(null!==_.value){w.value.push(t);const l=Math.min(_.value,t),s=Math.max(_.value,t);T.value=[],z.value=[];for(let t=l;t<=s;t++)T.value.push({id:i.value[e].id,title:i.value[e].title,...i.value[e].images[t]}),z.value.push(a)}}else{_.value=t;const l=i.value[e].images[t];if(!E.value)return T.value=[],z.value=[],T.value.push({...l,id:i.value[e].id}),void z.value.push(a);const s=T.value.findIndex((e=>e===l));-1===s?(T.value.push({...l,id:i.value[e].id}),z.value.push(a)):(T.value.splice(s,1),z.value.splice(s,1))}}function it(e){const t=e.fileName;return T.value.some((e=>e.fileName===t))}async function ct(e){if(!X.value){if(Je(),0===T.value.length)return await ut(e);await d.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!0});for(const t of T.value){const a=t.fileName,l=i.value.findIndex((e=>e.images.some((e=>e.fileName===a)))),s=i.value[l];await rt(e,[{fileName:t.fileName}],s,i.value[e],!1)}await d.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!1}),T.value=[],z.value=[],w.value=[]}}async function ut(e){if(null!==k.value&&null!==h.value&&k.value!==e){const t=i.value[k.value],a=t.images[h.value];await rt(e,[{fileName:a.fileName}],t,i.value[e],!1)}}async function rt(e,a,l,s,o,n,c){const{slotId:u}=r.value,m=a;let v=[],p=[],g=[];for(const t of m){const a=t.fileName;if(g.push(a),"keyMove"===n){const a="bm"===window.PROJECT_TYPE?da:ra,n=a.find((e=>e.abbreviation===(t.title||t.abbreviation))),c=o?`${f.value}/${u}/${Ct(J.value)}/${n?.id}_${t.title}`:`${f.value}/${u}/${Ct(J.value)}/${n?.id}_${l.title}`,r=`${f.value}/${u}/${Ct(J.value)}/${s.id}_${s.title}`;p.push(r),v.push(c);const m={sourceFolders:v,destinationFolders:p,fileNames:g};await d.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!0});const I=await Rm(m);if(I){const a=i.value.findIndex((e=>e.title===(t.title||t.abbreviation))),l=i.value[a],s=l.images.findIndex((e=>e.fileName===t.fileName));if(-1!==s){const t=l.images.splice(s,1)[0];t.title=i.value[e].title,t.width=A.value,t.height=A.value,i.value[e].images.push(t),l.count--,i.value[e].count++}T.value=[],z.value=[],w.value=[],await pt(),await d.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!1})}return}if(!c&&"keyMove"!==n){const n=o?`${f.value}/${u}/${Ct(J.value)}/${t.id}_${t.title}`:`${f.value}/${u}/${Ct(J.value)}/${l.id}_${l.title}`,c=`${f.value}/${u}/${Ct(J.value)}/${s.id}_${s.title}`;p.push(c),v.push(n);const r={sourceFolders:v,destinationFolders:p,fileNames:g};let d=await Rm(r);if(d){const s=l.images.findIndex((e=>e.fileName===a));l.images.splice(s,1);const o={width:A.value,height:A.value};i.value[e].images.push({...t,...o}),i.value=mt(i.value),i.value.forEach((e=>{e.count=e.images.length,e.images.length>0&&e.images.forEach((t=>{t.title=e.title}))}))}}}if(c){await d.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!0});for(const e of z.value){const t="bm"===window.PROJECT_TYPE?da:ra,a=t.find((t=>t.abbreviation===(e.title||e.abbreviation))),l=`${f.value}/${u}/${Ct(J.value)}/${a?.id}_${e.title}`,o=`${f.value}/${u}/${Ct(J.value)}/${s.id}_${s.title}`;p.push(o),v.push(l)}const t={sourceFolders:v,destinationFolders:p,fileNames:g};let l=await Rm(t);if(l){const t=i.value[e];for(const e of dt(z.value,"title")){const l=a.filter((t=>t.title===(e.title||e.abbreviation)));t.images.push(...l),t.count=t.images.length;const s=i.value.findIndex((t=>t.title===(e.title||e.abbreviation)));if(-1!==s){const e=i.value[s],t=a.map((e=>e.fileName)),l=e.images.filter((e=>!t.includes(e.fileName)));e.images=l,e.count=e.images.length}}for(const l of a)l.title=i.value[e].title,l.width=A.value,l.height=A.value;await d.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!1})}else await d.dispatch("commonModule/setCommonInfo",{moveImgIsBool:!1})}T.value=[],z.value=[],w.value=[],K.value="",t.value="",await pt()}function dt(e,t){const a=new Set;return e.filter((e=>{const l=e[t];return!a.has(l)&&(a.add(l),!0)}))}function mt(e){const t=new Set;return e.map((e=>{const a=e.images.filter((e=>!t.has(e.fileName)&&(t.add(e.fileName),!0)));return{...e,images:a}}))}const vt=(e,t)=>{e||""!==e||(e="0000",t="01");const a={"0006":{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","SM","NE","GP","PA","OT"]}},l=a[e]||{includesStr:["AR","NR","GP","PA","MC","MA","SM","NE","GP","PA","OT"],includesStr2:["NR","AR","MC","MA","NE","SM","GP","PA","OT"]};return"01"===t||"04"===t?l.includesStr:l.includesStr2};async function pt(e){let t=[],a=JSON.parse(JSON.stringify(i.value)),l=0;a.forEach((e=>{if("bm"===J.value)"OT"!==e.title&&(l+=Number(e.count));else{const t=vt(C.value,r.value?.testType);t.includes(e.title)||(l+=Number(e.count))}})),a.forEach((e=>{if(e.images.forEach((e=>{delete e.width,delete e.height,delete e.filter})),"bm"===J.value){if("OT"!==e.title){const t=(Number(e.count)/Number(l)*100).toFixed(1);e.percent=Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t}}else{const t=vt(C.value,r.value?.testType);if(!t.includes(e.title)){const t=(Number(e.count)/Number(l)*100).toFixed(1);e.percent=Number(t)===Math.floor(Number(t))?Math.floor(Number(t)).toString():t}}}));let s=[];const o=a.map((e=>{const t=e.images.filter((e=>!s.includes(e.fileName)&&(s.push(e.fileName),!0)));return{...e,images:t}}));if(a=o,"notWbcAfterSave"!==e){r.value.wbcInfoAfter=a,sessionStorage.setItem("selectItems",JSON.stringify(r.value)),sessionStorage.setItem("selectItemWbc",JSON.stringify(a)),await d.dispatch("commonModule/setCommonInfo",{clonedWbcInfo:a});const e=await Ec(String(r.value.id));e&&(e.data.wbcInfoAfter=a),t=[e.data]}await gt(a,t)}async function gt(e,t){try{const e=await hc({userId:Number(m.value),runingInfoDtoItems:t});e?U.value&&await Ke(!0):console.error("   ")}catch(a){console.error("Error:",a)}}function It(e,t,a,l,s){if(!i.value||0===i.value.length)return"";const o=r.value.slotId||"";let n=`${f.value}/${o}/${Ct(J.value)}/${t}_${a}`,c="";if(X.value&&ye(e,a)){const{idMa:t,titleMa:l}=ye(e,a);n=`${f.value}/${o}/${Ct(J.value)}/${t}_${l}`}return c="getImageRealTime"===l||"pb"===J.value?`${j}/images/getImageRealTime?folder=${n}&imageName=${e}`:`${j}/images?folder=${n}&imageName=${e}`,c}async function bt(){if(P.length>0){const e=P.pop();k.value=null,h.value=null,N.value=null,L.value=[],R.value=null,T.value=[],z.value=[],w.value=[],await ft(i.value,e),i.value=e}}const yt=(e,t,a)=>{e.forEach(((e,l)=>{const s=t[l];e&&s&&e.images.forEach(((e,t)=>{const o=s.images[t];void 0===o&&a.push({itemIndex:l,imageIndex:t,fileName:e.fileName,title:s.title,id:s.id})}))}))};async function ft(e,t){const a=[],l=[];yt(e,t,a),yt(t,e,l);let s=[],o=[],n=[];for(const i in a){const e=`${f.value}/${r.value.slotId}/${Ct(J.value)}/${a[i].id}_${a[i].title}`,t=`${f.value}/${r.value.slotId}/${Ct(J.value)}/${l[i].id}_${l[i].title}`;s.push(e),o.push(t),n.push(a[i].fileName)}const c={sourceFolders:s,destinationFolders:o,fileNames:n};let u=await Rm(c);u&&(i.value=t),await pt()}const Ct=e=>"bm"===e?"04_BM_Classification":"pb"===e?"01_WBC_Classification":void 0;return(e,a)=>{const c=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bo)((0,s.Lk)("div",Dg," Moving image...",512),[[l.aG,b.value]]),(0,s.bF)(Av,{onRefreshClass:xe,isNext:ie.value,onIsNextFalse:pe},null,8,["isNext"]),(0,s.Lk)("div",Mg,[(0,s.Lk)("div",xg,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,(0,n.v_)("bm"===J.value?(0,o.R1)(I)(r.value?.testType):(0,o.R1)(g)(r.value?.testType)),1),(0,s.Lk)("li",null,(0,n.v_)(r.value?.barcodeNo),1),(0,s.Lk)("li",null,(0,n.v_)(r.value?.patientId||"patientId No Data"),1),(0,s.Lk)("li",null,(0,n.v_)(r.value?.cbcPatientNo),1),(0,s.Lk)("li",null,(0,n.v_)(r.value?.patientName),1),(0,s.Lk)("li",null,(0,n.v_)(r.value?.cbcPatientNm)+" "+(0,n.v_)(r.value?.cbcSex)+" "+(0,n.v_)(r.value?.cbcAge),1),(0,s.Lk)("li",null,(0,n.v_)(r.value?.analyzedDttm),1)])]),p.value?((0,s.uX)(),(0,s.Wv)(Hv,{key:0,selectItems:r.value},null,8,["selectItems"])):(0,s.Q3)("",!0),(0,s.Lk)("div",{class:(0,n.C4)("databaseWbcRight"+(p.value?" cbcLayer":""))},[(0,s.bF)(Wp,{wbcInfo:i.value,selectItems:r.value,type:"listTable",onNextPage:me,onScrollEvent:Fe,onIsBefore:de},null,8,["wbcInfo","selectItems"])],2),(0,s.Lk)("div",{class:(0,n.C4)("databaseWbcLeft"+(p.value?" cbcLayer":""))},[(0,s.Lk)("div",{class:"imgMenuSetDiv",onMouseleave:Ce},[(0,s.Lk)("button",{type:"button",onClick:a[0]||(a[0]=e=>Ke(!1))},[(0,s.bF)(c,{icon:U.value?["fas","toggle-on"]:["fas","toggle-off"]},null,8,["icon"]),(0,s.eW)(" Cell Marking ")]),(0,s.Lk)("button",{onClick:Oe},[(0,s.bF)(c,{icon:["fas","file-csv"]}),(0,s.eW)(" Excel ")]),(0,s.Lk)("button",{onMouseover:fe},[(0,s.bF)(c,{icon:["fas","plus-minus"]}),(0,s.eW)(" Size ")],32),(0,s.bo)((0,s.Lk)("div",Og,[(0,s.Lk)("div",null,[(0,s.eW)(" Size "+(0,n.v_)(A.value)+" ",1),(0,s.bF)(c,{icon:["fas","undo"],onClick:Ge}),(0,s.bo)((0,s.Lk)("input",{type:"range",min:"80",max:"300","onUpdate:modelValue":a[1]||(a[1]=e=>A.value=e),onInput:Ye},null,544),[[l.Jo,A.value]])])],512),[[l.aG,te.value]]),(0,s.Lk)("div",Kg,[(0,s.Lk)("button",{onClick:Ae},[(0,s.bF)(c,{icon:["fas","gear"]}),(0,s.eW)(" IMG Setting ")]),(0,s.bo)((0,s.Lk)("div",Bg,[(0,s.Lk)("div",null,[(0,s.bF)(c,{icon:["fas","sun"]}),(0,s.eW)(" Brightness "+(0,n.v_)(D.value)+" ",1),(0,s.bo)((0,s.Lk)("input",{type:"range",min:"50",max:"600","onUpdate:modelValue":a[2]||(a[2]=e=>D.value=e),onInput:Ve},null,544),[[l.Jo,D.value]]),(0,s.Lk)("button",{class:"resetBtn mb2",onClick:He},"Brightness Reset")]),(0,s.Lk)("div",null,[(0,s.bF)(c,{icon:["fas","palette"]}),(0,s.eW)(" RGB [ "+(0,n.v_)(`${M.value[0]} , ${M.value[1]}, ${M.value[2]}`)+" ] ",1),(0,s.bo)((0,s.Lk)("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":a[3]||(a[3]=e=>M.value[0]=e),onInput:a[4]||(a[4]=e=>je(""))},null,544),[[l.Jo,M.value[0]]]),(0,s.bo)((0,s.Lk)("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":a[5]||(a[5]=e=>M.value[1]=e),onInput:a[6]||(a[6]=e=>je(""))},null,544),[[l.Jo,M.value[1]]]),(0,s.bo)((0,s.Lk)("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":a[7]||(a[7]=e=>M.value[2]=e),onInput:a[8]||(a[8]=e=>je(""))},null,544),[[l.Jo,M.value[2]]]),(0,s.Lk)("button",{class:"resetBtn",onClick:We},"RGB Reset")])],512),[[l.aG,H.value]])],512),(0,s.Q3)("",!0),(0,s.Lk)("button",{onClick:bt,class:"rollbackButton"},[(0,s.bF)(c,{icon:["fas","rotate-left"]}),(0,s.eW)(" Rollback ")])],32),(0,s.Lk)("div",null,[(0,s.Lk)("ul",Ug,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,(e=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("li",{key:e.id,onClick:t=>Fe(e.id)},[(0,s.Lk)("div",{class:"circle",onDragover:a[9]||(a[9]=(0,l.D$)((e=>qe()),["prevent"])),onDrop:t=>Qe(e)},[(0,s.Lk)("p",null,(0,n.v_)(e?.title),1),(0,s.Lk)("p",null,(0,n.v_)(e?.count),1)],40,Fg)],8,Xg)),[[l.aG,"0006"!==C.value&&"SM"!==e?.title]]))),128))]),ce.value?((0,s.uX)(),(0,s.CE)("div",Qg,[(0,s.Lk)("div",null,[zg,(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("div",null,[(0,s.Lk)("p",Zg,[(0,s.Lk)("input",{type:"checkbox",onInput:a[11]||(a[11]=e=>Be(e,i.value[0].title)),checked:t.value===i.value[0].title},null,40,eI),(0,s.eW)(" "+(0,n.v_)(i.value[0]?.title)+" ("+(0,n.v_)(i.value[0]?.count)+")",1)])],512),[[l.aG,"0"!==i.value[0]?.count&&0!==i.value[0]?.count]])])]),tI])):((0,s.uX)(),(0,s.CE)("ul",Wg,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,((e,o)=>((0,s.uX)(),(0,s.CE)("li",{key:e.id,ref_for:!0,ref:Xe(e.id)},[(0,s.bo)((0,s.Lk)("div",null,[(0,s.Lk)("p",Gg,[(0,s.Lk)("input",{type:"checkbox",onInput:t=>Be(t,e.title),checked:t.value===e.title},null,40,$g),(0,s.eW)(" "+(0,n.v_)(e?.title)+" ("+(0,n.v_)(e?.count)+")",1)])],512),[[l.aG,"0"!==e?.count&&0!==e?.count]]),(0,s.bo)((0,s.Lk)("ul",{class:(0,n.C4)("wbcImgWrap "+e?.title),onDragover:a[10]||(a[10]=(0,l.D$)((e=>st()),["prevent"])),onDrop:e=>ct(o)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.images,((t,a)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("li",{key:t.fileName,class:(0,n.C4)({"border-changed":Re(t),"selected-image":it(t),wbcImgWrapLi:!0}),onClick:t=>nt(o,a,e),onDblclick:a=>we(t,e),onContextmenu:a=>ge(a,t,e)},[(0,s.Lk)("div",Vg,[(0,s.bo)((0,s.Lk)("div",Yg,[(0,s.Lk)("div",qg,[(0,s.eW)((0,n.v_)(Te(t.fileName))+" ",1),(0,s.bF)(c,{icon:["fas","arrow-right"]}),(0,s.eW)(" "+(0,n.v_)(t.title),1)])],512),[[l.aG,Te(t.fileName)!==e?.title]]),(0,s.bo)((0,s.Lk)("img",{src:It(t.fileName,e.id,e.title,""),width:t.width?t.width:"150px",height:t.height?t.height:"150px",style:(0,n.Tr)({filter:t.filter}),onDragstart:e=>ot(o,a),draggable:"true",class:"cellImg",ref_for:!0,ref_key:"cellRef",ref:B,onError:a=>be(e.id,t.fileName,e.title)},null,44,Jg),[[l.aG,!ae.value[`${e.id}-${t.fileName}`]]]),(0,s.Lk)("div",{class:"center-point",style:(0,n.Tr)(t.coordinates)},null,4)])],42,jg)),[[l.aG,!ae.value[`${e.id}-${t.fileName}`]]]))),128))],42,Hg),[[l.aG,"0"!==e?.count&&0!==e?.count]])])))),128))]))]),le.value?((0,s.uX)(),(0,s.CE)("div",{key:0,style:(0,n.Tr)({top:oe.value+"px",left:se.value+"px"}),class:"context-menu detail"},[(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t,onClick:a=>Se(e,t)},(0,n.v_)(e.name),9,aI)))),128))])],4)):(0,s.Q3)("",!0),(0,s.bo)((0,s.Lk)("div",lI,[(0,s.Lk)("div",sI,[(0,s.Lk)("span",{class:"wbcClose",onClick:Pe},""),(0,s.Lk)("div",oI,[(0,s.Lk)("img",{src:W.value,style:(0,n.Tr)({width:G.value,height:$.value}),class:"modal-image"},null,12,nI)]),(0,s.Lk)("div",{class:"buttons"},[(0,s.Lk)("button",{onClick:De},"+"),(0,s.Lk)("button",{onClick:Me},"-")])])],512),[[l.aG,F.value]])],2)])],64)}}});const cI=iI;var uI=cI;const rI=e=>((0,s.Qi)("data-v-4505cb42"),e=e(),(0,s.jt)(),e),dI=rI((()=>(0,s.Lk)("div",{id:"viewerSmall"},null,-1))),mI={class:"leftImgList"},vI={class:""},pI=rI((()=>(0,s.Lk)("p",null,"Partical Image",-1))),gI=["src","onDblclick"],II={class:""},bI=rI((()=>(0,s.Lk)("p",null,"Ideal Zone",-1))),yI=["src","onDblclick"],fI={class:""},CI=rI((()=>(0,s.Lk)("p",null,"Ideal stitch",-1))),kI=["src","onDblclick"],hI=rI((()=>(0,s.Lk)("p",null,"Megakaryocyte",-1))),SI=["src","onDblclick"];var _I=(0,s.pM)({__name:"leftImgList",props:["selectItems"],setup(e){const t=e,a=((0,u.Pj)(),window.APP_API_BASE_URL||"http://192.168.0.131:3002"),l=(0,o.KR)([]),n=(0,o.KR)([]),i=(0,o.KR)([]),c=(0,o.KR)([]),r=["02_Particle_Image","03_Cell_Ideal_Image","04_Cell_Ideal_Stitch_Image","05_Mega_Image"],d=(0,o.KR)(!1);let m=null;(0,s.sV)((()=>{g()})),(0,s.wB)((()=>t.selectItems),(async e=>{await(0,s.dY)(),g()}));const v=(e,l)=>{let s;switch(l){case"particle":s="02_Particle_Image";break;case"idealZone":s="03_Cell_Ideal_Image";break;case"idealStitch":s="04_Cell_Ideal_Stitch_Image";break;case"mega":s="05_Mega_Image";break;default:break}const o=t.selectItems?.slotId||"",n=""!==t.selectItems?.img_drive_root_path&&t.selectItems?.img_drive_root_path?t.selectItems?.img_drive_root_path:sessionStorage.getItem("iaRootPath"),i=`${n}/${o}/${s}`;return`${a}/folders?folderPath=${i}/${e}`},p=(e,l)=>{let s;switch(l){case"particle":s="02_Particle_Image";break;case"idealZone":s="03_Cell_Ideal_Image";break;case"idealStitch":s="04_Cell_Ideal_Stitch_Image";break;case"mega":s="05_Mega_Image";break;default:break}const o=t.selectItems?.slotId||"",n=""!==t.selectItems?.rootPath&&t.selectItems?.rootPath?t.selectItems?.rootPath:sessionStorage.getItem("iaRootPath"),i=`${n}/${o}/${s}`;return`${a}/folders/getFilesInFolderWhole?folderPath=${i}/${e}`},g=()=>{const e=t.selectItems?.slotId||"",s=""!==t.selectItems?.rootPath&&t.selectItems?.rootPath?t.selectItems?.rootPath:sessionStorage.getItem("iaRootPath");for(const t of r)z.A.get(`${a}/folders?folderPath=${s}/${e}/${t}`).then((e=>{switch(t){case"02_Particle_Image":l.value=e.data.filter((e=>"Thumb"!==e)).slice(0,7);break;case"03_Cell_Ideal_Image":n.value=e.data.filter((e=>"Thumb"!==e)).slice(0,14);break;case"04_Cell_Ideal_Stitch_Image":i.value=e.data.filter((e=>"Thumb"!==e));break;case"05_Mega_Image":c.value=e.data.filter((e=>"Thumb"!==e));break}})).catch((e=>{console.error("Error:",e)}))},I=e=>{m&&m.destroy(),m=_m()({id:"viewerSmall",element:document.getElementById("viewerSmall"),tileSources:{type:"image",url:e},defaultZoomLevel:.2,navigator:!1,showZoomControl:!1,showHomeControl:!1,showFullScreenControl:!1,showRotationControl:!1,showFullPageControl:!1}),d.value=!0,m.addHandler("open",(function(){const e=m.source.dimensions.x,t=m.source.dimensions.y,a=document.getElementById("viewerSmall"),l=a.clientWidth,s=t/e,o=l*s;a.style.position="fixed",a.style.height=`${o}px`,a.style.width="100%",a.style.left="0",a.style.background="#00000061"}))},b=()=>{if(m){m.destroy();const e=document.getElementById("viewerSmall");e&&(e.innerHTML="",e.style.background="none",e.style.height="0",e.style.width="0",e.removeEventListener("click",b)),m=null,d.value=!1}};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[d.value?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"closeViewer",onClick:b},"x")):(0,s.Q3)("",!0),dI,(0,s.Lk)("div",mI,[(0,s.Lk)("ul",vI,[pI,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},[(0,s.Lk)("img",{src:p(e,"particle"),alt:"Partical Image",onDblclick:t=>I(v(e,"particle"))},null,40,gI)])))),128))]),(0,s.Lk)("ul",II,[bI,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t,style:{width:"100px"}},[(0,s.Lk)("img",{src:p(e,"idealZone"),onDblclick:t=>I(v(e,"idealZone"))},null,40,yI)])))),128))]),(0,s.Lk)("ul",fI,[(0,s.Lk)("div",null,[CI,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},[(0,s.Lk)("img",{src:p(e,"idealStitch"),onDblclick:t=>I(v(e,"idealStitch"))},null,40,kI)])))),128))]),(0,s.Lk)("div",null,[hI,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},[(0,s.Lk)("img",{src:p(e,"mega"),onDblclick:t=>I(v(e,"mega"))},null,40,SI)])))),128))])])])],64))}});const EI=(0,Tl.A)(_I,[["__scopeId","data-v-4505cb42"]]);var NI=EI;const LI=["src"],RI={class:"tilingViewerContainer",style:{height:"100%"},id:"tiling-container"};var TI=(0,s.pM)({__name:"tilingViewer",props:["selectItems"],setup(e){const t=e,a=((0,s.EW)((()=>l.state.commonModule.iaRootPath)),window.APP_API_BASE_URL||"http://192.168.0.115:3002"),l=(0,u.Pj)(),n=(0,o.KR)(null),i=(0,o.KR)(null),c=(0,o.KR)(""),r=(0,o.KR)(""),d=(0,o.KR)("");let m=null;(0,s.sV)((async()=>{await v(!0)})),(0,s.wB)((()=>t.selectItems),(async e=>{await(0,s.dY)(),await v(!1)}));const v=async e=>{const l=i.value,s=t.selectItems?.slotId||"",o=""!==t.selectItems?.img_drive_root_path&&t.selectItems?.img_drive_root_path?t.selectItems?.img_drive_root_path:sessionStorage.getItem("iaRootPath"),n=`${o}/${s}/01_Stitching_Image`,u=`${a}/folders?folderPath=${n}/PMC_Result.jpg`;if(d.value=u,l&&l.complete){const t=l.naturalHeight,a=l.naturalWidth;0!==t&&(c.value=t,r.value=a,console.log(t),await p(t,e))}},p=async(e,l)=>{m&&m.destroy();const s=t.selectItems?.slotId||"",o=""!==t.selectItems?.img_drive_root_path&&t.selectItems?.img_drive_root_path?t.selectItems?.img_drive_root_path:sessionStorage.getItem("iaRootPath"),n=`${o}/${s}/01_Stitching_Image`,i=`${a}/folders?folderPath=${n}/PMC_Result.jpg`;d.value=i;try{const e=await g(n);m=_m()({id:"tiling-viewer",animationTime:.4,navigatorSizeRatio:.25,showNavigator:!0,sequenceMode:!0,defaultZoomLevel:1,prefixUrl:`${a}/folders?folderPath=D:/UIMD_Data/Res/uimdFe/images/`,tileSources:e,gestureSettingsMouse:{clickToZoom:!1}}),m.addHandler("open",(function(){m.source.dimensions.x,m.source.dimensions.y;const e=document.getElementById("tiling-viewer"),t=e.clientWidth;e.style.width=`${t}px`,e.style.position="absolute",e.style.left="50%",e.style.top="50%",e.style.transform="translate(-50%, -50%)"})),m.addHandler("zoom",(function(){const e=document.getElementById("tiling-viewer");l&&e&&(e.style.height="80vh")}))}catch(c){console.error("Error:",c)}},g=async e=>{const t=`${a}/folders?folderPath=${e}`,l=await fetch(t);if(!l.ok)throw new Error("Network response was not ok");const s=await l.json(),o=[];for(const n of s)n.endsWith("_files")&&o.push({Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2009",Url:`${a}/folders?folderPath=${e}/${n}/`,Format:"jpg",Overlap:"1",TileSize:"1024",Size:{Width:r.value,Height:c.value}}});return o};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("img",{src:d.value,ref_key:"hideImageRef",ref:i,style:{display:"none"},onLoad:t[0]||(t[0]=e=>v(!0))},null,40,LI),(0,s.Lk)("div",RI,[(0,s.Lk)("div",{ref_key:"tilingViewerLayer",ref:n,id:"tiling-viewer"},null,512)])],64))}});const wI=TI;var PI=wI;const AI={class:"imgContent"},DI={class:"wrap-whole"},MI={class:"leftWhole"};var xI=(0,s.pM)({__name:"index",setup(e){const t=sessionStorage.getItem("selectItems"),a=(0,o.KR)(t?JSON.parse(t):null),l=(0,o.KR)(null),n=(0,o.KR)(null);(0,s.sV)((()=>{l.value=document.querySelector(".img")}));const i=async e=>{a.value=e};return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(Av,{onRefreshClass:i}),(0,s.Lk)("div",AI,[(0,s.Lk)("div",DI,[(0,s.Lk)("div",{ref_key:"imageContainer",ref:n,class:"image-container"},[(0,s.bF)(PI,{selectItems:a.value},null,8,["selectItems"])],512),(0,s.Lk)("div",MI,[(0,s.bF)(NI,{selectItems:a.value},null,8,["selectItems"])])])])],64))}});const OI=(0,Tl.A)(xI,[["__scopeId","data-v-71d7a081"]]);var KI=OI;const BI=(0,c.aE)({history:(0,c.LA)(),routes:[{path:"/analysis",name:"AnalysisView",component:Zl},{path:"/user/join",name:"join",component:Cs},{path:"/user/login",name:"login",component:Xs},{path:"/setting",name:"setting",component:mc},{path:"/database",name:"database",component:Gd},{path:"/databaseDetail",name:"databaseDetail",component:uI},{path:"/databaseWhole",name:"databaseWhole",component:KI},{path:"/databaseRbc",name:"databaseRbc",component:Jv},{path:"/report",name:"report",component:Ag}]});BI.beforeEach(((e,t,a)=>{const l=sessionStorage.getItem("user"),s=JSON.parse(l||"{}"),o=(0,u.Pj)(),n=o.state.userModule;"login"===e.name||"join"===e.name||s.userId||n.userId?a():a("/user/login")}));var UI=BI;const XI={class:"header"},FI=(0,s.Lk)("div",{class:"borderLine"},[(0,s.Lk)("img",{src:i,class:"headerLogo"})],-1),WI=(0,s.Lk)("span",{class:"icoText"},"Setting",-1),GI=(0,s.Lk)("span",{class:"icoText"},"Analysis",-1),$I=(0,s.Lk)("span",{class:"icoText"},"Database",-1),HI={class:"small-icon-menu"},jI={class:"lastMenu"},VI={class:"lastLiM"},YI={class:"iconHeaderMenu"},qI={class:"alarm"},JI=["title"],QI=["title"],zI=(0,s.Lk)("h2",null,"Immersion Oil",-1),ZI={class:"immersionOilContainer"},eb=(0,s.Lk)("h5",{class:"modalTitle"},"Immersion Oil count Reset",-1),tb=(0,s.Lk)("span",{class:"colorGray"},"Reset Immersion Oil count after changing Oil pack",-1),ab={class:"smallTitle"},lb=(0,s.Lk)("span",null,"Estimated number of slides left",-1),sb={class:"border ml-5",style:{width:"80px"}},ob=(0,s.Lk)("h5",{class:"modalTitle"},"Prime Immersion Oil",-1),nb=(0,s.Lk)("span",{class:"colorGray"},"Prime oil to remove air from the oil hose",-1),ib=(0,s.Lk)("div",{class:"statusBarWrapper"},null,-1);var cb=(0,s.pM)({__name:"AppHeader",setup(e){const t=(0,c.lq)(),a=(0,o.KR)(!1),l=(0,u.Pj)(),i=sessionStorage.getItem("user"),r=JSON.parse(i||"{}"),d=(0,o.KR)(!1),m=(0,s.EW)((()=>l.state.commonModule.viewerCheck)),v=(0,s.nI)(),p=(0,o.KR)(!1),g=(0,o.KR)(""),I=(0,o.KR)(""),b=(0,s.EW)((()=>l.state.embeddedStatusModule)),y=(0,o.KR)(0),f=(0,o.KR)(""),C=(0,o.KR)(0),k=(0,o.KR)(""),h=(0,s.EW)((()=>l.state.commonModule)),S=(0,s.EW)((()=>l.state.commonModule)),_=(0,o.KR)({icon:["fas","person"],class:""}),E=(0,o.KR)(""),N=(0,o.KR)(""),L=(0,o.KR)(!1),R=(0,o.KR)(!1),T=(0,o.KR)(1e3),w=(0,o.KR)(null),P=(0,o.KR)(null),A=(0,o.KR)(""),D=(0,s.EW)((()=>l.state.userModule)),M=(0,o.KR)(""),x=(0,o.KR)(0),O=(0,o.KR)(!1),K=(0,o.KR)(""),B=(0,o.KR)("");let U=null;const X=(0,o.KR)(!1),F=(0,o.KR)(""),W=(0,o.KR)(""),$=(0,o.KR)(!1),H=(0,s.EW)((()=>K.value)),j=(0,s.EW)((()=>B.value)),V=()=>{const e=new Date;K.value=e.toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"}),B.value=e.toLocaleTimeString("en-US")},Y=()=>{p.value=!1,sessionStorage.clear(),UI.push("user/login"),document.fullscreenElement&&document.exitFullscreen()},q=()=>{p.value=!1};(0,s.sV)((async()=>{$.value="bm"===window.PROJECT_TYPE,V();const e=setInterval(V,1e3);(0,s.xo)((()=>{clearInterval(e)})),""===A.value&&await l.dispatch("userModule/setUserAction",r)})),(0,s.wB)(D.value,((e,t)=>{me(),A.value=e.id})),(0,s.wB)([b.value],(async e=>{await(0,s.dY)(),y.value=Number(e[0].sysInfo.oilCount),f.value=e[0].sysInfo.isDoorOpen,C.value=Number(e[0].sysInfo.storagePercent),k.value=e[0].sysInfo.eqStatCd,_.value=oe(e[0].sysInfo.eqStatCd),E.value=ae(),N.value=se()})),(0,s.wB)([S.value],(async e=>{const t=JSON.parse(JSON.stringify(e));t[0].isRunningState?O.value=!0:O.value=!1})),(0,s.wB)([h.value],(async e=>{L.value=e[0].isAlarm,e[0].isAlarm&&(U=setTimeout((()=>{l.dispatch("commonModule/setCommonInfo",{isAlarm:!1})}),x.value))}));const J=e=>{X.value=!0,F.value="success",W.value=e},z=()=>{X.value=!1},Z=e=>t.path===e,ee=()=>{d.value=!d.value},te=()=>{I.value=G.Logout,p.value=!0,localStorage.removeItem("user")},ae=()=>y.value>=0&&y.value<=100?"10%":y.value>100&&y.value<=250?"25%":y.value>250&&y.value<=500?"50%":y.value>500&&y.value<=750?"75%":"100%",se=()=>C.value>=0&&C.value<=30?"30%":C.value>30&&C.value<=60?"60%":C.value>60&&C.value<=90?"90%":"100%",oe=e=>"01"===e?{icon:["fas","person"],class:""}:"02"===e?{icon:["fas","person-walking"],class:""}:"03"===e?{icon:["fas","person-running"],class:"runRed"}:"04"===e||"05"===e?{icon:["fas","person-running"],class:"runBlue"}:{icon:["fas","person"],class:""},ne=()=>{R.value=!0},ie=e=>{R.value=e},ce=()=>{ue();const e=Q().embedStatus.settings;e.reqUserId=A,Object.assign(e,{oilCount:y,isOilReset:"Y",userId:"",isNsNbIntegration:M.value}),v?.appContext.config.globalProperties.$socket.emit("message",{type:"SEND_DATA",payload:e}),J(G.IDS_MSG_SUCCESS)},ue=()=>{if(!w.value||!P.value)return;const e=Math.round(y.value/T.value*100),t=e/100*w.value.offsetWidth+"px";P.value.style.width=t},re=()=>{Q().embedStatus.oilPrime.reqUserId=A,v?.appContext.config.globalProperties.$socket.emit("message",{type:"SEND_DATA",payload:Q().embedStatus.oilPrime}),J(G.IDS_MSG_SUCCESS)},de=()=>{ue()},me=async()=>{try{const e=await le();if(e&&e?.data){const t=e.data;M.value=t.isNsNbIntegration?"Y":"N",x.value=t?.isAlarm?1e3*Number(t.alarmCount):5e3,await l.dispatch("dataBaseSetDataModule/setDataBaseSetData",{isNsNbIntegration:t?.isNsNbIntegration?"Y":"N"}),sessionStorage.setItem("isNsNbIntegration",M.value),sessionStorage.setItem("wbcPositionMargin",t?.wbcPositionMargin),sessionStorage.setItem("rbcPositionMargin",t?.rbcPositionMargin),sessionStorage.setItem("pltPositionMargin",t?.pltPositionMargin),sessionStorage.setItem("iaRootPath",t?.iaRootPath),await l.dispatch("commonModule/setCommonInfo",{iaRootPath:String(t?.iaRootPath)})}}catch(e){console.log(e)}};return(e,l)=>{const i=(0,s.g2)("font-awesome-icon"),c=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("header",XI,[(0,s.Lk)("nav",null,[a.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,n.C4)(["appHeaderLeft",{bmComponent:$.value}])},[FI,(0,s.bF)(c,{to:O.value?"#":"/setting",class:(0,n.C4)({leftActive:Z("/setting"),disabledLink:O.value})},{default:(0,s.k6)((()=>[(0,s.bF)(i,{icon:["fas","gear"],style:{"font-size":"1rem"}}),WI])),_:1},8,["to","class"]),"main"===m.value?((0,s.uX)(),(0,s.Wv)(c,{key:0,to:"/",class:(0,n.C4)({leftActive:Z("/analysis")||"/"===(0,o.R1)(t).path})},{default:(0,s.k6)((()=>[(0,s.bF)(i,{icon:["fas","chart-pie"],style:{"font-size":"1rem"}}),GI])),_:1},8,["class"])):(0,s.Q3)("",!0),(0,s.bF)(c,{to:"/dataBase",class:(0,n.C4)({leftActive:Z("/dataBase")||Z("/databaseDetail")||Z("/databaseRbc")||Z("/report")})},{default:(0,s.k6)((()=>[(0,s.bF)(i,{icon:["fas","server"],style:{"font-size":"1rem"}}),$I])),_:1},8,["class"]),(0,s.Lk)("div",HI,[(0,s.Lk)("div",jI,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,(0,n.v_)(H.value)+" "+(0,n.v_)(j.value),1),(0,s.Lk)("li",VI,[(0,s.Lk)("div",{class:"userBox",onClick:ee},[(0,s.bF)(i,{icon:["fas","circle-user"]}),(0,s.eW)(" "+(0,n.v_)(D.value.userId),1)]),(0,s.Lk)("div",{class:"logOutBox",onClick:te}," LOG OUT ")])])]),(0,s.Lk)("div",YI,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",qI,[(0,s.bF)(i,{icon:["fas","bell"],class:(0,n.C4)({blinking:L.value})},null,8,["class"])]),(0,s.Lk)("li",null,["Y"!==f.value?((0,s.uX)(),(0,s.Wv)(i,{key:0,icon:["fas","door-closed"]})):((0,s.uX)(),(0,s.Wv)(i,{key:1,icon:["fas","door-open"]}))]),(0,s.Lk)("li",null,[(0,s.bF)(i,{icon:_.value.icon,class:(0,n.C4)(_.value.class)},null,8,["icon","class"])]),(0,s.Lk)("li",{class:"oliCount",onClick:ne,title:"oilCount: "+(E.value||0)},[(0,s.bF)(i,{icon:["fas","droplet"]})],8,JI),(0,s.Lk)("li",{class:"storage",title:"storage: "+(N.value||0)},[(0,s.bF)(i,{icon:["fas","database"]})],8,QI)])])])],2))])]),R.value?((0,s.uX)(),(0,s.Wv)(fc,{key:0,"onUpdate:closeLayer":ie,onAfterOpen:de},{header:(0,s.k6)((()=>[zI])),content:(0,s.k6)((()=>[(0,s.Lk)("div",ZI,[eb,tb,(0,s.Lk)("div",ab,[lb,(0,s.Lk)("div",sb,(0,n.v_)(y.value),1)]),(0,s.Lk)("div",null,[(0,s.Lk)("div",{ref_key:"statusBarWrapper",ref:w,class:"statusBarWrapper"},[(0,s.Lk)("div",{ref_key:"statusBar",ref:P,class:"statusBar"},null,512)],512),(0,s.Lk)("div",null,[(0,s.Lk)("button",{onClick:ce,class:"alertButton"},"RESET")])])]),(0,s.Lk)("div",{class:"mt2"},[ob,nb,(0,s.Lk)("div",null,[ib,(0,s.Lk)("button",{onClick:re,class:"alertButton"},"PRIME")])])])),_:1})):(0,s.Q3)("",!0),X.value?((0,s.uX)(),(0,s.Wv)(ze,{key:1,"is-visible":X.value,type:F.value,message:W.value,onHide:z,"onUpdate:hideAlert":z},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0),p.value?((0,s.uX)(),(0,s.Wv)(Vd,{key:2,"is-visible":p.value,type:g.value,message:I.value,onHide:q,onOkConfirm:Y},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)],64)}}});const ub=cb;var rb=ub;const db={namespaced:!0,state:()=>({id:0,userId:"",password:"",name:"",employeeNo:"",userType:"",subscriptionDate:"",latestDate:""}),mutations:{setUserMutation(e,t){Object.assign(e,t)}},actions:{setUserAction({commit:e},t){e("setUserMutation",t)}}},mb={namespaced:!0,state:()=>({analysisType:"",wbcDiffVal:"100",stitchCount:""}),mutations:{analysisTypeSet(e,t){e.analysisType=t},wbcDiffValSet(e,t){e.analysisType=t},stitchCountSet(e,t){e.analysisType=t}},actions:{setAnalysisType({commit:e},t){e("analysisTypeSet",t)},setWbcDiffValSet({commit:e},t){e("wbcDiffValSet",t)},setStitchCountSet({commit:e},t){e("stitchCountSet",t)}}},vb={namespaced:!0,state:()=>({equipmentStatusCode:"",wbcCount:"",slideTime:"",time:"",slotInfo:{input:[],output:[]}}),mutations:{setEquipmentStatusCode(e,t){e.equipmentStatusCode=t},setWbcCount(e,t){e.wbcCount=t},setSlideTime(e,t){e.slideTime=t},setTime(e,t){e.time=t},setSlotInfo(e,t){e.slotInfo=t}},actions:{setWorkingViewInfo({commit:e},t){e("setEquipmentStatusCode",t.equipmentStatusCode),e("setWbcCount",t.wbcCount),e("setSlideTime",t.slideTime),e("setTime",t.time),e("setSlotInfo",t.slotInfo)}}},pb={namespaced:!0,state:()=>({embeddedStatusJobCmd:"",userStop:!1,isRecoveryRun:!1,isPause:!1,sysInfo:{eqStatCd:"",iCasStat:"",oCasStat:"",jobCmd:"",isDoorOpen:"",oilCount:"",storageSize:""},isInit:""}),mutations:{setEmbeddedStatusJobCmd(e,t){e.embeddedStatusJobCmd=t},setUserStop(e,t){e.userStop=t},setIsRecoveryRun(e,t){e.isRecoveryRun=t},setIsPause(e,t){e.isPause=t},setSysInfo(e,t){e.sysInfo=t},setIsInit(e,t){e.isInit=t}},actions:{setEmbeddedStatusInfo({commit:e},t){Object.keys(t).forEach((a=>{"embeddedStatusJobCmd"===a?e("setEmbeddedStatusJobCmd",t[a]):"userStop"===a?e("setUserStop",t[a]):"isRecoveryRun"===a?e("setIsRecoveryRun",t[a]):"isPause"===a?e("setIsPause",t[a]):"sysInfo"===a?e("setSysInfo",t[a]):"isInit"===a&&e("setIsInit",t[a])}))}}},gb={namespaced:!0,state:()=>({slotInfo:[]}),mutations:{setSlotInfo(e,t){e.slotInfo=t}},actions:{setSlotInfo({commit:e},t){e("setSlotInfo",t)}}},Ib={namespaced:!0,state:()=>({runningInfo:null,changeSlideState:null,slideBooleanState:null}),mutations:{setRunningInfo(e,t){t&&(e.runningInfo=t)},setChangeSlide(e,t){e.changeSlideState?e.changeSlideState.changeSlide=t:e.changeSlideState={changeSlide:t}},setSlideBoolean(e,t){e.slideBooleanState?e.slideBooleanState.slideIs=t:e.slideBooleanState={slideIs:t}}},actions:{setRunningInfo({commit:e},t){e("setRunningInfo",t)},updateRunningInfo({commit:e},t){t&&t.key&&void 0!==t.value&&e(`set${t.key.charAt(0).toUpperCase()+t.key.slice(1)}`,t.value)},setChangeSlide({commit:e},t){e("setChangeSlide",t)},setSlideBoolean({commit:e},t){e("setSlideBoolean",t)}}},bb={namespaced:!0,state:()=>({startEmbedded:!1,eqStatCd:0,isRunningState:!1,totalCount:"",embeddedNumber:"",isAlarm:!1,bfSelectFiles:[],slideProceeding:"",totalSlideTime:"00:00:00",iaRootPath:"",runningSlotId:"",isRequestInProgress:!1,startInfoBoolen:!1,runningInfoBoolen:!1,runningInfoStop:!1,reqArr:[],resFlag:!0,firstLoading:!1,slotIndex:0,viewerCheck:"",runningArr:[],classArr:[{},{},{},{},{},{},{},{},{},{},{},{}],rbcArr:[{},{},{},{},{},{},{},{},{},{},{},{}],processInfo:[{},{},{},{},{},{},{},{},{},{},{},{}],orderList:[{},{},{},{},{},{},{},{},{},{},{},{}],loginSetData:"",siteCd:"",deviceSerialNm:"",clonedWbcInfo:[],clonedRbcInfo:[],moveImgIsBool:!1,classInfoSort:[],chatRunningData:[],cbcLayer:!1,inhaTestCode:""}),mutations:{setStartEmbedded(e,t){e.startEmbedded=t},setEqStatCd(e,t){e.eqStatCd=t},setIsRunningState(e,t){e.isRunningState=t},setTotalCount(e,t){e.totalCount=t},setEmbeddedNumber(e,t){e.embeddedNumber=t},setIsAlarm(e,t){e.isAlarm=t},setBfSelectFiles(e,t){e.bfSelectFiles=t},setSlideProceeding(e,t){e.slideProceeding=t},setTotalSlideTime(e,t){e.totalSlideTime=t},setIaRootPath(e,t){e.iaRootPath=t},setRunningSlotId(e,t){e.runningSlotId=t},setIsRequestInProgress(e,t){e.isRequestInProgress=t},setStartInfoBoolen(e,t){e.startInfoBoolen=t},setRunningInfoBoolen(e,t){e.runningInfoBoolen=t},setRunningInfoStop(e,t){e.runningInfoStop=t},setReqArr(e,t){e.reqArr||(e.reqArr=[]),e.reqArr.push(t)},shiftReqArr(e){e.reqArr.shift()},setReqArrPaste(e,t){e.reqArr=t},setResFlag(e,t){e.resFlag=t},setFirstLoading(e,t){e.firstLoading=t},setSlotIndex(e,t){e.slotIndex=t},setViewerCheck(e,t){e.viewerCheck=t},setRunningArr(e,t){e.runningArr=t},setClassArr(e,t){e.classArr=t},setRbcArr(e,t){e.rbcArr=t},setProcessInfo(e,t){e.processInfo=t},setOrderList(e,t){e.orderList=t},setLoginSetData(e,t){e.loginSetData=t},setDeviceSerialNm(e,t){e.deviceSerialNm=t},setSiteCd(e,t){e.siteCd=t},setClonedWbcInfo(e,t){e.clonedWbcInfo=t},setClonedRbcInfo(e,t){e.clonedRbcInfo=t},setMoveImgIsBool(e,t){e.moveImgIsBool=t},setClassInfoSort(e,t){e.classInfoSort=t},setChatRunningData(e,t){e.chatRunningData=t},setCbcLayer(e,t){e.cbcLayer=t},setInhaTestCode(e,t){e.inhaTestCode=t}},actions:{setCommonInfo({commit:e},t){t.hasOwnProperty("startEmbedded")&&e("setStartEmbedded",t.startEmbedded),t.hasOwnProperty("eqStatCd")&&e("setEqStatCd",t.eqStatCd),t.hasOwnProperty("isRunningState")&&e("setIsRunningState",t.isRunningState),t.hasOwnProperty("totalCount")&&e("setTotalCount",t.totalCount),t.hasOwnProperty("embeddedNumber")&&e("setEmbeddedNumber",t.embeddedNumber),t.hasOwnProperty("isAlarm")&&e("setIsAlarm",t.isAlarm),t.hasOwnProperty("bfSelectFiles")&&e("setBfSelectFiles",t.bfSelectFiles),t.hasOwnProperty("slideProceeding")&&e("setSlideProceeding",t.slideProceeding),t.hasOwnProperty("totalSlideTime")&&e("setTotalSlideTime",t.totalSlideTime),t.hasOwnProperty("iaRootPath")&&e("setIaRootPath",t.iaRootPath),t.hasOwnProperty("runningSlotId")&&e("setRunningSlotId",t.runningSlotId),t.hasOwnProperty("isRequestInProgress")&&e("setIsRequestInProgress",t.isRequestInProgress),t.hasOwnProperty("startInfoBoolen")&&e("setStartInfoBoolen",t.startInfoBoolen),t.hasOwnProperty("runningInfoBoolen")&&e("setRunningInfoBoolen",t.runningInfoBoolen),t.hasOwnProperty("runningInfoStop")&&e("setRunningInfoStop",t.runningInfoStop),t.hasOwnProperty("reqArr")&&e("setReqArr",t.reqArr),t.hasOwnProperty("shiftReqArr")&&e("shiftReqArr"),t.hasOwnProperty("reqArrPaste")&&e("setReqArrPaste",t.reqArr),t.hasOwnProperty("resFlag")&&e("setResFlag",t.resFlag),t.hasOwnProperty("firstLoading")&&e("setFirstLoading",t.firstLoading),t.hasOwnProperty("slotIndex")&&e("setSlotIndex",t.slotIndex),t.hasOwnProperty("viewerCheck")&&e("setViewerCheck",t.viewerCheck),t.hasOwnProperty("runningArr")&&e("setRunningArr",t.runningArr),t.hasOwnProperty("classArr")&&e("setClassArr",t.classArr),t.hasOwnProperty("rbcArr")&&e("setRbcArr",t.rbcArr),t.hasOwnProperty("processInfo")&&e("setProcessInfo",t.processInfo),t.hasOwnProperty("orderList")&&e("setOrderList",t.orderList),t.hasOwnProperty("loginSetData")&&e("setLoginSetData",t.loginSetData),t.hasOwnProperty("siteCd")&&e("setSiteCd",t.siteCd),t.hasOwnProperty("deviceSerialNm")&&e("setDeviceSerialNm",t.deviceSerialNm),t.hasOwnProperty("clonedWbcInfo")&&e("setClonedWbcInfo",t.clonedWbcInfo),t.hasOwnProperty("clonedRbcInfo")&&e("setClonedRbcInfo",t.clonedRbcInfo),t.hasOwnProperty("moveImgIsBool")&&e("setMoveImgIsBool",t.moveImgIsBool),t.hasOwnProperty("classInfoSort")&&e("setClassInfoSort",t.classInfoSort),t.hasOwnProperty("chatRunningData")&&e("setChatRunningData",t.chatRunningData),t.hasOwnProperty("cbcLayer")&&e("setCbcLayer",t.cbcLayer),t.hasOwnProperty("inhaTestCode")&&e("setInhaTestCode",t.inhaTestCode)}}},yb={namespaced:!0,state:()=>({dataBaseSetData:null}),mutations:{setDataBaseSetData(e,t){t&&(e.dataBaseSetData={...e.dataBaseSetData,changeSlide:t.changeSlide??e.dataBaseSetData?.changeSlide,resultCode:t.resultCode??e.dataBaseSetData?.resultCode,resultMsg:t.resultMsg??e.dataBaseSetData?.resultMsg,errorLevel:t.errorLevel??e.dataBaseSetData?.errorLevel,jobCmd:t.jobCmd??e.dataBaseSetData?.jobCmd,processingCode:t.processingCode??e.dataBaseSetData?.processingCode,iCasStat:t.iCasStat??e.dataBaseSetData?.iCasStat,oCasStat:t.oCasStat??e.dataBaseSetData?.oCasStat,cassetId:t.cassetId??e.dataBaseSetData?.cassetId,isRunningState:t.isRunningState??e.dataBaseSetData?.isRunningState,slotInfo:t.slotInfo?t.slotInfo.map((t=>{const a=e.dataBaseSetData?.slotInfo?.find((e=>e?.slotId===t?.slotId));return a?{...a,...t}:t})):e.dataBaseSetData?.slotInfo??[]})}},actions:{setDataBaseSetData({commit:e},t){e("setDataBaseSetData",t)}}},fb={namespaced:!0,state:()=>({totalSlideTime:"00:00:00",slideTime:"00:00:00"}),mutations:{setTotalSlideTime(e,t){e.totalSlideTime=t},setSlideTime(e,t){e.slideTime=t}},actions:{setTimeInfo({commit:e},t){t.hasOwnProperty("totalSlideTime")&&e("setTotalSlideTime",t.totalSlideTime),t.hasOwnProperty("slideTime")&&e("setSlideTime",t.slideTime)}}},Cb=(0,u.y$)({modules:{userModule:db,executeModule:mb,workingViewModule:vb,embeddedStatusModule:pb,orderListModule:gb,runningInfoModule:Ib,commonModule:bb,dataBaseSetDataModule:yb,timeModule:fb}});var kb=Cb;const hb=async e=>{if("00000"===e?.resultCd){const t={embeddedStatusJobCmd:"",userStop:"Y"===e.isRecovery,isRecoveryRun:"N"===e.isRecovery&&!1,isPause:"PAUSE"===e.jobCmd,sysInfo:e,isInit:e?e.isInit:void 0},a={siteCd:e.siteCd,deviceSerialNm:e.deviceSerialNm};await kb.dispatch("commonModule/setCommonInfo",a),await kb.dispatch("embeddedStatusModule/setEmbeddedStatusInfo",t)}else alert(e?.resultMsg)},Sb=async e=>{await kb.dispatch("runningInfoModule/setRunningInfo",e)},_b=(e,t)=>{let a=0,l=0;const s={isNormal:"Y",class:[]};return e&&(e.forEach((e=>{-1===["NR","AR","GP","PA","MC","MA"].indexOf(e.title)&&(a+=Number(e.count)),["NE","NS","NB"].includes(e.title)&&(l+=Number(e.count))})),e.forEach((e=>{t.forEach((t=>{if("01"===t.classId){let o=0;["01","71"].includes(e.id)&&(o=l/a*100,o<t.min||o>t.max?(console.log(`SET [NE] Abnormal : ${e.title}`),s.isNormal="N",s.class.push(`[NE] : [${o.toFixed(2)}]%`)):console.log(`SET [NE] NORMAL : ${e.title}`))}else if(e.id===t.classId)if("Count"===t.unit)(Number(e.count)<t.min||Number(e.count)>t.max)&&(s.isNormal="N",s.class.push(`${e.title} : [${e.count}]Count`));else{let l=0;l=Number(e.count)/a*100,l<t.min||l>t.max?(console.log(`SET Abnormal : ${e.title}`),s.isNormal="N",s.class.push(`${e.title} : [${l.toFixed(2)}]%`)):console.log(`SET NORMAL : ${e.title}`)}}))}))),s},Eb=Z(),Nb=async e=>Eb.httpPost(ee.device.getDeviceInfo.create,e),Lb=async()=>Eb.httpGet(ee.device.getDeviceInfo.get);var Rb=(0,s.pM)({__name:"App",setup(e){const t=(0,c.rd)(),a=(0,o.KR)(!1),l=(0,o.KR)(""),i=(0,o.KR)(""),r=(0,u.Pj)(),d=(0,s.EW)((()=>r.state.commonModule)),m=(0,s.nI)(),v=(0,o.KR)(""),p=sessionStorage.getItem("user"),g=JSON.parse(p||"{}"),I=(0,o.KR)([]),b=(0,s.EW)((()=>r.state.userModule)),y=(0,s.EW)((()=>r.state.commonModule)),f=(0,o.KR)(!1);let C=null,k=null;const h=(0,o.KR)(""),S=(0,s.EW)((()=>r.state.commonModule.iaRootPath)),_=(0,s.EW)((()=>r.state.commonModule.slotIndex)),E=(0,o.KR)([]),N=(0,o.KR)([]),L=(0,o.KR)([]),R=(0,o.KR)(""),T=(0,o.KR)(!1),w=(0,o.KR)({}),P=(0,o.KR)(!1),A=(0,o.KR)(""),D=(0,o.KR)(""),M=(0,o.KR)(!1);m?.appContext.config.globalProperties.$socket.on("viewerCheck",(async e=>{await O(e)}));const x=(0,o.KR)(!1),O=async e=>{try{const e=await os();e.data,R.value=e.data}catch(t){console.log(t)}};(0,s.wB)(y.value,(async(e,t)=>{if(!e.reqArr)return;if(M.value)return M.value=!1,void await r.dispatch("commonModule/setCommonInfo",{reqArrPaste:[]});const a=X(e.reqArr);if(0===a.length)return;const l=a.filter((e=>!["SYSINFO","RUNNING_INFO"].includes(e.jobCmd)));l.length>0?await V(l[0]):await V(a[0]),await r.dispatch("commonModule/setCommonInfo",{reqArrPaste:[]})})),(0,s.wB)(b.value,((e,t)=>{""!==e.id&&(Y(e.id),v.value=e.id)})),(0,s.KC)((()=>{m?.appContext.config.globalProperties.$socket.emit("viewerCheck",{type:"SEND_DATA",payload:window.APP_API_BASE_URL})})),window.addEventListener("beforeunload",(function(e){r.dispatch("commonModule/setCommonInfo",{firstLoading:!1})}));const K=e=>{e.preventDefault()};(0,s.sV)((async()=>{await(0,s.dY)(),x.value=!1,window.addEventListener("beforeunload",K),T.value="bm"===window.PROJECT_TYPE,T.value||(A.value=window.PB_VERSION),""===v.value&&(await r.dispatch("userModule/setUserAction",g),v.value=b.value.id),d.value.isRunningState||(v.value&&""!==v.value&&await j(),d.value.firstLoading||(C=setInterval((async()=>{await F()}),400),k=setInterval((async()=>{d.value.runningInfoStop||await W()}),500),await r.dispatch("commonModule/setCommonInfo",{firstLoading:!0})),h.value=sessionStorage.getItem("isNsNbIntegration")||""),console.log(window.APP_API_BASE_URL),Ye.subscribe("executeAction",$)})),(0,s.xo)((()=>{window.removeEventListener("beforeunload",K),k&&(clearInterval(k),k=null),C&&(clearInterval(k),k=null)})),m?.appContext.config.globalProperties.$socket.on("chat",(async e=>{if("main"===d.value.viewerCheck){M.value=!1;try{if("string"===typeof e)return m?.appContext.config.globalProperties.$socket.emit("message",{type:"SEND_DATA",payload:{jobCmd:"clientExit",reqUserId:"",reqDttm:""}}),void await q(G.TCP_DiSCONNECTED);J();const a=new TextDecoder("utf-8"),l=a.decode(e),s=JSON.parse(l),o=s;switch(o.jobCmd){case"SYSINFO":await hb(o);const y={siteCd:o.siteCd,deviceSerialNm:o.deviceSerialNm};x.value||await p(y);break;case"INIT":H();break;case"START":await i();break;case"RUNNING_INFO":w.value=o,f.value=!0,await Sb(o),await c(o);break;case"STOP":console.log("stop!=--------------------------"),await r.dispatch("commonModule/setCommonInfo",{isRunningState:!1}),await r.dispatch("timeModule/setTimeInfo",{totalSlideTime:"00:00:00"}),await r.dispatch("timeModule/setTimeInfo",{slideTime:"00:00:00"}),await r.dispatch("commonModule/setCommonInfo",{runningSlotId:""}),await r.dispatch("commonModule/setCommonInfo",{slotIndex:0}),await r.dispatch("commonModule/setCommonInfo",{runningArr:[]}),await r.dispatch("runningInfoModule/setSlideBoolean",{key:"slideBoolean",value:!1}),P.value=!1,f.value=!1;break;case"RUNNING_COMP":await n();break;case"PAUSE":await r.dispatch("embeddedStatusModule/setEmbeddedStatusInfo",{isPause:!0}),await r.dispatch("commonModule/setCommonInfo",{runningSlotId:""}),await r.dispatch("commonModule/setCommonInfo",{slotIndex:0}),await r.dispatch("commonModule/setCommonInfo",{runningArr:[]}),await r.dispatch("runningInfoModule/setSlideBoolean",{key:"slideBoolean",value:!1}),P.value=!1,f.value=!1;break;case"RESTART":await Sb(o),await c(o),await r.dispatch("embeddedStatusModule/setEmbeddedStatusInfo",{isPause:!1}),await r.dispatch("timeModule/setTimeInfo",{totalSlideTime:"00:00:00"}),await r.dispatch("timeModule/setTimeInfo",{slideTime:"00:00:00"}),f.value=!0,P.value=!0,await r.dispatch("commonModule/setCommonInfo",{runningSlotId:""}),await r.dispatch("commonModule/setCommonInfo",{slotIndex:0}),await r.dispatch("commonModule/setCommonInfo",{runningArr:[]}),N.value=[],L.value=[];break;case"RECOVERY":await r.dispatch("embeddedStatusModule/setEmbeddedStatusInfo",{userStop:!1}),await r.dispatch("commonModule/setCommonInfo",{runningSlotId:""}),await r.dispatch("commonModule/setCommonInfo",{slotIndex:0}),await r.dispatch("commonModule/setCommonInfo",{runningArr:[]});break;case"ERROR_CLEAR":console.log("err"),await q(G.IDS_MSG_FAILED);break}async function n(){await r.dispatch("commonModule/setCommonInfo",{runningInfoStop:!0}),await r.dispatch("commonModule/setCommonInfo",{embeddedNumber:String(e?.iCasStat)}),await r.dispatch("commonModule/setCommonInfo",{startEmbedded:!1}),await r.dispatch("commonModule/setCommonInfo",{isRunningState:!1}),await r.dispatch("commonModule/setCommonInfo",{isAlarm:!0}),await r.dispatch("commonModule/setCommonInfo",{runningSlotId:""}),await r.dispatch("commonModule/setCommonInfo",{slotIndex:0}),await r.dispatch("commonModule/setCommonInfo",{runningArr:[]}),await r.dispatch("runningInfoModule/setChangeSlide",{key:"changeSlide",value:"stop"}),await r.dispatch("runningInfoModule/setSlideBoolean",{key:"slideBoolean",value:!1}),f.value=!1,P.value=!1}async function i(){await r.dispatch("commonModule/setCommonInfo",{isRunningState:!0}),await r.dispatch("runningInfoModule/setChangeSlide",{key:"changeSlide",value:"start"}),await r.dispatch("commonModule/setCommonInfo",{startEmbedded:"start"}),await r.dispatch("timeModule/setTimeInfo",{totalSlideTime:"00:00:00"}),await r.dispatch("timeModule/setTimeInfo",{slideTime:"00:00:00"}),await r.dispatch("commonModule/setCommonInfo",{runningInfoStop:!1}),await r.dispatch("commonModule/setCommonInfo",{slotIndex:0}),await r.dispatch("commonModule/setCommonInfo",{runningSlotId:""}),await r.dispatch("commonModule/setCommonInfo",{runningArr:[]}),P.value=!0,N.value=[],L.value=[],f.value=!0}async function c(e){const t=/[1,2,9]/g;if("999999999999"!==String(e?.iCasStat)){const a=String(e?.iCasStat),l=e?.slotInfo,s=e?.iCasStat,o=[...s],n=-1===o.lastIndexOf("3")?0:o.lastIndexOf("3")+1;if(0===o.lastIndexOf("2")&&await r.dispatch("runningInfoModule/setSlideBoolean",{key:"slideBoolean",value:!0}),-1!==e?.iCasStat.indexOf("2")&&await r.dispatch("commonModule/setCommonInfo",{slideProceeding:e?.iCasStat.indexOf("2")}),"100a"===A.value&&(D.value="1"===e?.iCasChange?"reset":""),a.search(t)<0||"111111111111"===e?.oCasStat&&!d.value.runningInfoStop)return Q().embedStatus.runIngComp.reqUserId=b.value.userId,("100a"!==A.value||"Y"===e?.workingDone)&&(await r.dispatch("commonModule/setCommonInfo",{reqArr:Q().embedStatus.runIngComp}),await r.dispatch("commonModule/setCommonInfo",{runningInfoStop:!0})),void await u(e,e?.slotInfo?.slotNo);await r.dispatch("runningInfoModule/setChangeSlide",{key:"changeSlide",value:"start"}),"Y"===l?.isLowPowerScan&&"03"===l?.testType?(Q().embedStatus.pause.reqUserId=v.value,await r.dispatch("commonModule/setCommonInfo",{reqArr:Q().embedStatus.pause}),Q().embedStatus.pause.reqUserId=v.value,await r.dispatch("commonModule/setCommonInfo",{isRunningState:!1})):n!==_.value&&(console.log("save"),await r.dispatch("runningInfoModule/setChangeSlide",{key:"changeSlide",value:"afterChange"}),await r.dispatch("runningInfoModule/setSlideBoolean",{key:"slideBoolean",value:!0}),await u(E.value,E.value?.slotInfo?.slotNo),await r.dispatch("commonModule/setCommonInfo",{runningSlotId:l?.slotId}),await r.dispatch("commonModule/setCommonInfo",{slotIndex:n})),-1!==o.lastIndexOf("2")&&(E.value=e)}}async function u(e,t,a,l){const s=e.slotInfo;if(s){s.userId=v.value,s.cassetId=e.cassetId,s.isNormal="Y","01"===s.analysisType&&(s.isNormal=_b(s.wbcInfo,I.value).isNormal);const o=sessionStorage.getItem("isNsNbIntegration"),n=N.value.filter((e=>e?.slotId===s.slotId)),i=L.value.filter((e=>e?.slotId===s.slotId)),c=n[0],u={wbcInfo:c?.wbcInfo,nonRbcClassList:c?.nonRbcClassList,totalCount:c?.totalCount,maxWbcCount:c?.maxWbcCount},r={slotNo:s.slotNo,lock_status:!1,traySlot:"1-"+t,barcodeNo:s.barcodeNo,patientId:s.patientId,patientNm:s.patientNm,gender:s.gender,birthDay:s.birthDay,wbcCount:s.wbcCount,slotId:s.slotId,orderDttm:s.orderDttm,testType:s.testType,analyzedDttm:Q().embedStatus.settings.reqDttm,tactTime:s.tactTime,maxWbcCount:s.maxWbcCount,bf_lowPowerPath:s.bf_lowPowerPath,wbcInfo:0===Object.keys(u).length?T.value?{wbcInfo:[zu]}:{wbcInfo:[Qu]}:u,wbcInfoAfter:0===Object.keys(u).length?T.value?[zu]:[Qu]:u?.wbcInfo[0],rbcInfo:T.value?[]:{pltCount:s.pltCount,malariaCount:s.malariaCount,maxRbcCount:s.maxRbcCount,rbcClass:i[0].rbcInfo},rbcInfoAfter:T.value?[]:i[0].rbcInfo,bminfo:s.bminfo,cassetId:s.cassetId,isNormal:s.isNormal,submitState:"",submitOfDate:"",submitUserId:"",isNsNbIntegration:o,wbcMemo:"",rbcMemo:""};await g(r,a,l)}}async function p(e){try{const t=await Lb();0!==t.data.length&&t.data||(console.log("?D"),await Nb({deviceItem:e})),x.value=!0}catch(t){console.error("Error handling device information",t),x.value=!0}}async function g(e,t,a){try{let a;a=await kc({userId:Number(v.value),runingInfoDtoItems:e}),a&&(t&&console.log("save successful"),m?.appContext.config.globalProperties.$socket.emit("state",{type:"SEND_DATA",payload:"refreshDb"}))}catch(l){console.error(l)}}}catch(t){console.error(t)}}}));const B=e=>{L.value[e.iCasStatArr]=e.rbc},U=e=>{N.value[e.iCasStatArr]=e.classInfo},X=e=>{const t=new Set,a=[];return e.forEach((e=>{t.has(e.jobCmd)||(t.add(e.jobCmd),a.push(e))})),a},F=async()=>{Q().embedStatus.sysInfo.reqUserId=v.value;const e=Q().embedStatus.sysInfo;await r.dispatch("commonModule/setCommonInfo",{reqArr:e})},W=async()=>{if(!f.value)return;Q().embedStatus.runningInfo.reqUserId=v.value;const e=Q().embedStatus.runningInfo;await r.dispatch("commonModule/setCommonInfo",{reqArr:e})},$=async e=>{await r.dispatch("commonModule/setCommonInfo",{reqArr:e})},H=()=>{const e=sessionStorage.getItem("isNsNbIntegration"),t={jobCmd:"SETTINGS",reqUserId:"",reqDttm:Q().embedStatus.settings.reqDttm,iaRootDir:S.value||"",oilCount:"1000",isOilReset:"N",deviceType:"01",isNsNbIntegration:e||"N"};r.dispatch("commonModule/setCommonInfo",{reqArr:t})},j=async()=>{try{const e=await fe();if(e&&e?.data){const t=e.data;I.value=t}}catch(e){console.log(e)}},V=async e=>{const t=async()=>{m?.appContext.config.globalProperties.$socket.emit("message",{type:"SEND_DATA",payload:e})};await t(),M.value=!0},Y=async e=>{try{const e=await le();if(e&&e?.data){const t=e.data;sessionStorage.setItem("iaRootPath",t?.iaRootPath),await r.dispatch("commonModule/setCommonInfo",{iaRootPath:String(t?.iaRootPath)}),await r.dispatch("dataBaseSetDataModule/setDataBaseSetData",{isNsNbIntegration:t?.isNsNbIntegration?"Y":"N"}),sessionStorage.setItem("isNsNbIntegration",h.value),sessionStorage.setItem("wbcPositionMargin",t?.wbcPositionMargin),sessionStorage.setItem("rbcPositionMargin",t?.rbcPositionMargin),sessionStorage.setItem("pltPositionMargin",t?.pltPositionMargin),sessionStorage.setItem("keepPage",String(t?.keepPage))}}catch(t){console.log(t)}},q=async e=>{a.value=!0,l.value="success",i.value=e},J=()=>{a.value=!1};return(e,c)=>{const u=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",null,["/user/login"!==(0,o.R1)(t).currentRoute.value.path&&"/user/join"!==(0,o.R1)(t).currentRoute.value.path?((0,s.uX)(),(0,s.Wv)(rb,{key:0})):(0,s.Q3)("",!0),(0,s.Lk)("main",{class:(0,n.C4)(["content",{bmComponent:T.value}])},[(0,s.bF)(u),(0,s.bF)(Jl,{onClassAppUpdateLast:U,onRbcAppUpdate:B,parsedData:w.value,isClass:"/"===(0,o.R1)(t).currentRoute.value.path,startStatus:P.value,pb100aCassette:D.value},null,8,["parsedData","isClass","startStatus","pb100aCassette"])],2),a.value?((0,s.uX)(),(0,s.Wv)(ze,{key:1,"is-visible":a.value,type:l.value,message:i.value,onHide:J,"onUpdate:hideAlert":J},null,8,["is-visible","type","message"])):(0,s.Q3)("",!0)])}}});const Tb=Rb;var wb=Tb,Pb=a(7107),Ab=a(6188),Db=a(1273),Mb=a(327);const xb=window.APP_API_BASE_URL||"http://192.168.0.131:3002",Ob={install:e=>{const t=(0,Mb.io)(`${xb}`,{transports:["websocket"],withCredentials:!0});e.config.globalProperties.$socket=t}};var Kb=Ob;Pb.Yv.add(Ab.X7I);const Bb=(0,l.Ef)(wb);Bb.use(UI),Bb.use(kb),Bb.use(Kb),Bb.component("font-awesome-icon",Db.gc),Bb.mount("#app")}},t={};function a(l){var s=t[l];if(void 0!==s)return s.exports;var o=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){var e=[];a.O=function(t,l,s,o){if(!l){var n=1/0;for(r=0;r<e.length;r++){l=e[r][0],s=e[r][1],o=e[r][2];for(var i=!0,c=0;c<l.length;c++)(!1&o||n>=o)&&Object.keys(a.O).every((function(e){return a.O[e](l[c])}))?l.splice(c--,1):(i=!1,o<n&&(n=o));if(i){e.splice(r--,1);var u=s();void 0!==u&&(t=u)}}return t}o=o||0;for(var r=e.length;r>0&&e[r-1][2]>o;r--)e[r]=e[r-1];e[r]=[l,s,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var s,o,n=l[0],i=l[1],c=l[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(s in i)a.o(i,s)&&(a.m[s]=i[s]);if(c)var r=c(a)}for(t&&t(l);u<n.length;u++)o=n[u],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(r)},l=self["webpackChunkuimdCell"]=self["webpackChunkuimdCell"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],(function(){return a(8856)}));l=a.O(l)})();
//# sourceMappingURL=app.8d0dcca6.js.map